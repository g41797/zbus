<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>zbus: /home/g41797/CLionProjects/github.com/g41797/zbus/src/libs/ubus/ubusd.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">zbus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_87a455bccb09a92130c26a11a880c98a.html">libs</a></li><li class="navelem"><a class="el" href="../../dir_1e974a0feb376015fdf1a5b531ce0d1a.html">ubus</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ubusd.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d2/dbe/ubusd_8h_source.html">ubusd.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ubusd.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d91/ubusd_8c__incl.png" border="0" usemap="#a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2ubus_2ubusd_8c" alt=""/></div>
<map name="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2ubus_2ubusd_8c" id="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2ubus_2ubusd_8c">
<area shape="rect" title=" " alt="" coords="443,5,729,85"/>
<area shape="rect" title=" " alt="" coords="449,133,584,167"/>
<area shape="poly" title=" " alt="" coords="561,87,538,122,533,119,557,84"/>
<area shape="rect" href="../../d2/dbe/ubusd_8h.html" title=" " alt="" coords="608,133,705,167"/>
<area shape="poly" title=" " alt="" coords="615,84,639,119,635,122,611,87"/>
<area shape="rect" href="../../da/d23/list_8h.html" title=" " alt="" coords="146,460,287,493"/>
<area shape="poly" title=" " alt="" coords="613,170,559,191,503,217,422,253,358,281,329,297,301,317,273,344,244,379,228,412,221,445,216,444,223,410,240,377,269,340,298,313,326,292,355,276,420,249,501,212,557,186,611,165"/>
<area shape="rect" href="../../dc/d56/uloop_8h.html" title=" " alt="" coords="418,378,583,412"/>
<area shape="poly" title=" " alt="" coords="614,170,562,193,541,205,528,216,510,252,501,291,498,329,499,362,494,362,493,329,496,290,505,250,524,213,538,201,560,188,612,165"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html" title=" " alt="" coords="915,215,1108,248"/>
<area shape="poly" title=" " alt="" coords="706,160,925,208,924,213,705,165"/>
<area shape="rect" href="../../dc/d3c/ubus__common_8h.html" title=" " alt="" coords="5,296,180,330"/>
<area shape="poly" title=" " alt="" coords="608,167,597,169,536,178,483,180,392,178,349,178,304,183,255,195,199,217,175,231,152,249,116,286,112,282,149,245,172,227,197,212,253,190,303,178,349,173,392,172,483,175,535,172,596,164,607,162"/>
<area shape="rect" href="../../d6/d41/ubusd__id_8h.html" title=" " alt="" coords="551,296,674,330"/>
<area shape="poly" title=" " alt="" coords="670,166,687,204,690,227,686,249,672,271,653,289,650,285,667,268,681,247,685,227,682,206,665,168"/>
<area shape="rect" href="../../d9/d00/ubusd__obj_8h.html" title=" " alt="" coords="537,215,672,248"/>
<area shape="poly" title=" " alt="" coords="648,169,626,203,621,200,644,166"/>
<area shape="rect" href="../../d5/d79/ubusmsg_8h.html" title=" " alt="" coords="746,215,871,248"/>
<area shape="poly" title=" " alt="" coords="688,165,766,205,763,210,686,170"/>
<area shape="rect" href="../../df/d2e/ubusd__acl_8h.html" title=" " alt="" coords="1132,215,1264,248"/>
<area shape="poly" title=" " alt="" coords="706,154,883,177,1117,211,1116,217,883,182,705,160"/>
<area shape="rect" title=" " alt="" coords="124,541,221,575"/>
<area shape="poly" title=" " alt="" coords="210,495,191,529,186,526,205,493"/>
<area shape="rect" title=" " alt="" coords="315,541,422,575"/>
<area shape="poly" title=" " alt="" coords="248,491,326,532,323,536,246,496"/>
<area shape="poly" title=" " alt="" coords="443,415,289,458,288,453,442,410"/>
<area shape="poly" title=" " alt="" coords="501,413,491,452,482,474,469,495,446,518,420,536,417,531,443,514,465,492,477,472,486,450,496,412"/>
<area shape="rect" title=" " alt="" coords="647,460,765,493"/>
<area shape="poly" title=" " alt="" coords="543,410,651,451,649,456,541,415"/>
<area shape="rect" title=" " alt="" coords="789,460,916,493"/>
<area shape="poly" title=" " alt="" coords="573,410,774,455,773,460,572,415"/>
<area shape="rect" title=" " alt="" coords="530,460,623,493"/>
<area shape="poly" title=" " alt="" coords="518,410,553,447,549,450,514,414"/>
<area shape="rect" title=" " alt="" coords="361,460,456,493"/>
<area shape="poly" title=" " alt="" coords="484,414,440,452,437,447,480,410"/>
<area shape="rect" title=" " alt="" coords="1079,296,1178,330"/>
<area shape="poly" title=" " alt="" coords="1036,247,1094,285,1091,290,1033,251"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html" title=" " alt="" coords="976,296,1055,330"/>
<area shape="poly" title=" " alt="" coords="1015,249,1016,281,1011,281,1009,249"/>
<area shape="poly" title=" " alt="" coords="1004,332,972,379,961,412,958,442,952,469,944,482,930,495,892,516,840,531,776,542,705,551,560,559,437,560,437,555,559,554,704,545,775,537,838,526,890,511,927,491,939,479,947,467,953,441,956,411,967,377,1000,329"/>
<area shape="poly" title=" " alt="" coords="981,333,892,372,784,414,639,461,637,455,782,409,890,367,979,328"/>
<area shape="rect" title=" " alt="" coords="1303,378,1394,412"/>
<area shape="poly" title=" " alt="" coords="1056,324,1068,327,1177,351,1289,375,1288,380,1176,357,1067,333,1055,329"/>
<area shape="rect" title=" " alt="" coords="1418,378,1511,412"/>
<area shape="poly" title=" " alt="" coords="1056,325,1068,327,1160,344,1233,352,1308,360,1403,375,1402,380,1307,365,1233,357,1159,349,1067,333,1055,330"/>
<area shape="rect" title=" " alt="" coords="1084,378,1168,412"/>
<area shape="poly" title=" " alt="" coords="1039,328,1093,367,1090,371,1036,333"/>
<area shape="rect" title=" " alt="" coords="1192,378,1279,412"/>
<area shape="poly" title=" " alt="" coords="1056,326,1178,370,1176,375,1054,331"/>
<area shape="rect" href="../../d5/d1d/libubox_2utils_8h.html" title=" " alt="" coords="981,378,1060,412"/>
<area shape="poly" title=" " alt="" coords="1019,330,1021,362,1016,363,1014,331"/>
<area shape="poly" title=" " alt="" coords="1020,413,1006,455,993,477,974,496,932,516,873,531,803,542,726,551,568,559,438,560,438,555,568,554,725,545,802,537,872,526,930,511,971,491,988,474,1001,453,1015,411"/>
<area shape="poly" title=" " alt="" coords="982,409,780,459,779,454,981,403"/>
<area shape="poly" title=" " alt="" coords="988,415,901,455,899,450,985,410"/>
<area shape="poly" title=" " alt="" coords="981,404,835,426,639,462,638,457,834,421,980,399"/>
<area shape="rect" title=" " alt="" coords="1253,460,1364,493"/>
<area shape="poly" title=" " alt="" coords="1061,406,1072,409,1238,454,1237,459,1070,414,1060,411"/>
<area shape="rect" title=" " alt="" coords="1388,460,1485,493"/>
<area shape="poly" title=" " alt="" coords="1061,406,1072,409,1154,425,1221,434,1288,442,1373,456,1372,462,1287,447,1220,439,1154,431,1071,414,1060,411"/>
<area shape="rect" title=" " alt="" coords="1510,460,1590,493"/>
<area shape="poly" title=" " alt="" coords="1061,406,1072,409,1188,427,1281,433,1376,439,1495,457,1494,462,1375,445,1281,439,1188,433,1071,414,1060,412"/>
<area shape="rect" title=" " alt="" coords="1042,460,1229,493"/>
<area shape="poly" title=" " alt="" coords="1045,410,1101,448,1098,453,1042,414"/>
<area shape="poly" title=" " alt="" coords="94,330,94,364,98,407,111,452,122,473,136,491,162,508,203,522,300,544,299,549,202,527,160,512,132,495,117,476,106,454,93,408,88,364,89,330"/>
<area shape="poly" title=" " alt="" coords="613,331,598,412,589,445,584,444,593,411,608,330"/>
<area shape="rect" href="../../d3/d51/avl_8h.html" title=" " alt="" coords="254,378,395,412"/>
<area shape="poly" title=" " alt="" coords="555,333,398,376,397,371,553,328"/>
<area shape="poly" title=" " alt="" coords="304,414,252,452,249,448,301,410"/>
<area shape="poly" title=" " alt="" coords="255,403,222,409,189,420,160,437,136,461,130,477,132,494,150,528,145,530,127,495,125,476,132,458,157,433,187,416,221,404,253,397"/>
<area shape="poly" title=" " alt="" coords="331,411,352,493,362,525,357,527,347,494,326,413"/>
<area shape="poly" title=" " alt="" coords="609,249,612,281,607,281,603,249"/>
<area shape="poly" title=" " alt="" coords="795,251,604,450,600,447,791,247"/>
<area shape="poly" title=" " alt="" coords="851,246,962,289,960,294,849,251"/>
</map>
</div>
</div>
<p><a href="../../d9/de0/ubusd_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab21db68a5fa2b273bdd2c73bc65888d9" id="r_ab21db68a5fa2b273bdd2c73bc65888d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab21db68a5fa2b273bdd2c73bc65888d9">USES_EXTERNAL_BUFFER</a>&#160;&#160;&#160;~0U</td></tr>
<tr class="separator:ab21db68a5fa2b273bdd2c73bc65888d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9fea97afc9c64c2fc775a90ac1081c44" id="r_a9fea97afc9c64c2fc775a90ac1081c44"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9fea97afc9c64c2fc775a90ac1081c44">ubus_msg_ref</a> (struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *ub)</td></tr>
<tr class="separator:a9fea97afc9c64c2fc775a90ac1081c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae88c2071350154e2eed8a6844e60a9da" id="r_ae88c2071350154e2eed8a6844e60a9da"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae88c2071350154e2eed8a6844e60a9da">ubus_msg_new</a> (void *data, int len, bool shared)</td></tr>
<tr class="separator:ae88c2071350154e2eed8a6844e60a9da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19a646e5c3d7ddd2cb4004d68896f12a" id="r_a19a646e5c3d7ddd2cb4004d68896f12a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a19a646e5c3d7ddd2cb4004d68896f12a">ubus_msg_free</a> (struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *ub)</td></tr>
<tr class="separator:a19a646e5c3d7ddd2cb4004d68896f12a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae582a1a0e18dbe57e756c692f97d2a7d" id="r_ae582a1a0e18dbe57e756c692f97d2a7d"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae582a1a0e18dbe57e756c692f97d2a7d">ubus_msg_writev</a> (int fd, struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *ub, size_t offset)</td></tr>
<tr class="separator:ae582a1a0e18dbe57e756c692f97d2a7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7685d99564c18e282d91b3bdb61c32ac" id="r_a7685d99564c18e282d91b3bdb61c32ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7685d99564c18e282d91b3bdb61c32ac">ubus_msg_list_free</a> (struct <a class="el" href="../../d2/dbe/ubusd_8h.html#dc/dac/structubus__msg__buf__list">ubus_msg_buf_list</a> *ubl)</td></tr>
<tr class="separator:a7685d99564c18e282d91b3bdb61c32ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac99f4752b92904e7489bcd383f60cf60" id="r_ac99f4752b92904e7489bcd383f60cf60"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac99f4752b92904e7489bcd383f60cf60">ubus_msg_enqueue</a> (struct <a class="el" href="../../d2/dbe/ubusd_8h.html#df/d3f/structubus__client">ubus_client</a> *cl, struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *ub)</td></tr>
<tr class="separator:ac99f4752b92904e7489bcd383f60cf60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac663b82c91f957ef4dea52b243cb1f89" id="r_ac663b82c91f957ef4dea52b243cb1f89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac663b82c91f957ef4dea52b243cb1f89">ubus_msg_send</a> (struct <a class="el" href="../../d2/dbe/ubusd_8h.html#df/d3f/structubus__client">ubus_client</a> *cl, struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *ub)</td></tr>
<tr class="separator:ac663b82c91f957ef4dea52b243cb1f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab21db68a5fa2b273bdd2c73bc65888d9" name="ab21db68a5fa2b273bdd2c73bc65888d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab21db68a5fa2b273bdd2c73bc65888d9">&#9670;&#160;</a></span>USES_EXTERNAL_BUFFER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USES_EXTERNAL_BUFFER&#160;&#160;&#160;~0U</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00021">21</a> of file <a class="el" href="../../d9/de0/ubusd_8c_source.html">ubusd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00067">ubus_msg_free()</a>, <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00039">ubus_msg_new()</a>, and <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00023">ubus_msg_ref()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac99f4752b92904e7489bcd383f60cf60" name="ac99f4752b92904e7489bcd383f60cf60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac99f4752b92904e7489bcd383f60cf60">&#9670;&#160;</a></span>ubus_msg_enqueue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ubus_msg_enqueue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#df/d3f/structubus__client">ubus_client</a> *</td>          <td class="paramname"><span class="paramname"><em>cl</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *</td>          <td class="paramname"><span class="paramname"><em>ub</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00143">143</a> of file <a class="el" href="../../d9/de0/ubusd_8c_source.html">ubusd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  144</span>{</div>
<div class="line"><span class="lineno">  145</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d2/dbe/ubusd_8h.html#dc/dac/structubus__msg__buf__list">ubus_msg_buf_list</a> *ubl;</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>    <span class="keywordflow">if</span> (cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a04b9afcb4e61998c373cb10187068dce">txq_len</a> + ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">len</a> &gt; <a class="code hl_define" href="../../d2/dbe/ubusd_8h.html#aab935ddff048f7076a433c89c998cc45">UBUS_CLIENT_MAX_TXQ_LEN</a>)</div>
<div class="line"><span class="lineno">  148</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>    ubl = calloc(1, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d2/dbe/ubusd_8h.html#dc/dac/structubus__msg__buf__list">ubus_msg_buf_list</a>));</div>
<div class="line"><span class="lineno">  151</span>    <span class="keywordflow">if</span> (!ubl)</div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>    <a class="code hl_function" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4">INIT_LIST_HEAD</a>(&amp;ubl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aeabc7d62295447c76dd31808c28a8c4c">list</a>);</div>
<div class="line"><span class="lineno">  155</span>    ubl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a8308a8af5d50b18f555604c9e81a2099">msg</a> = <a class="code hl_function" href="#a9fea97afc9c64c2fc775a90ac1081c44">ubus_msg_ref</a>(ub);</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>    <a class="code hl_function" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1">list_add_tail</a>(&amp;ubl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aeabc7d62295447c76dd31808c28a8c4c">list</a>, &amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a979525a026010d1138a38b1a78b5b492">tx_queue</a>);</div>
<div class="line"><span class="lineno">  158</span>    cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a04b9afcb4e61998c373cb10187068dce">txq_len</a> += ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">len</a>;</div>
<div class="line"><span class="lineno">  159</span>}</div>
<div class="ttc" id="alist_8h_html_a5f3c4582c49b990c9fb4f5c83f8400d1"><div class="ttname"><a href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1">list_add_tail</a></div><div class="ttdeci">static void list_add_tail(struct list_head *_new, struct list_head *head)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d23/list_8h_source.html#l00165">list.h:165</a></div></div>
<div class="ttc" id="alist_8h_html_aea85dd50b9129ddaa3e3c67ed55804e4"><div class="ttname"><a href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4">INIT_LIST_HEAD</a></div><div class="ttdeci">static void INIT_LIST_HEAD(struct list_head *list)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d23/list_8h_source.html#l00063">list.h:63</a></div></div>
<div class="ttc" id="aubusd_8c_html_a9fea97afc9c64c2fc775a90ac1081c44"><div class="ttname"><a href="#a9fea97afc9c64c2fc775a90ac1081c44">ubus_msg_ref</a></div><div class="ttdeci">static struct ubus_msg_buf * ubus_msg_ref(struct ubus_msg_buf *ub)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/de0/ubusd_8c_source.html#l00023">ubusd.c:23</a></div></div>
<div class="ttc" id="aubusd_8h_html_a04b9afcb4e61998c373cb10187068dce"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a04b9afcb4e61998c373cb10187068dce">ubus_client::txq_len</a></div><div class="ttdeci">unsigned int txq_len</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00065">ubusd.h:65</a></div></div>
<div class="ttc" id="aubusd_8h_html_a8308a8af5d50b18f555604c9e81a2099"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a8308a8af5d50b18f555604c9e81a2099">ubus_msg_buf_list::msg</a></div><div class="ttdeci">struct ubus_msg_buf * msg</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00041">ubusd.h:41</a></div></div>
<div class="ttc" id="aubusd_8h_html_a979525a026010d1138a38b1a78b5b492"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a979525a026010d1138a38b1a78b5b492">ubus_client::tx_queue</a></div><div class="ttdeci">struct list_head tx_queue</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00063">ubusd.h:63</a></div></div>
<div class="ttc" id="aubusd_8h_html_aab935ddff048f7076a433c89c998cc45"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#aab935ddff048f7076a433c89c998cc45">UBUS_CLIENT_MAX_TXQ_LEN</a></div><div class="ttdeci">#define UBUS_CLIENT_MAX_TXQ_LEN</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00027">ubusd.h:27</a></div></div>
<div class="ttc" id="aubusd_8h_html_ae0a0523224a363f085b3ace0f6f28bdc"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">ubus_msg_buf::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00036">ubusd.h:36</a></div></div>
<div class="ttc" id="aubusd_8h_html_aeabc7d62295447c76dd31808c28a8c4c"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#aeabc7d62295447c76dd31808c28a8c4c">ubus_msg_buf_list::list</a></div><div class="ttdeci">struct list_head list</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00040">ubusd.h:40</a></div></div>
<div class="ttc" id="aubusd_8h_html_dc/dac/structubus__msg__buf__list"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#dc/dac/structubus__msg__buf__list">ubus_msg_buf_list</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00039">ubusd.h:39</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d23/list_8h_source.html#l00063">INIT_LIST_HEAD()</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00036">ubus_msg_buf::len</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00040">ubus_msg_buf_list::list</a>, <a class="el" href="../../da/d23/list_8h_source.html#l00165">list_add_tail()</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00041">ubus_msg_buf_list::msg</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00063">ubus_client::tx_queue</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00065">ubus_client::txq_len</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00027">UBUS_CLIENT_MAX_TXQ_LEN</a>, and <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00023">ubus_msg_ref()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00162">ubus_msg_send()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/de0/ubusd_8c_ac99f4752b92904e7489bcd383f60cf60_cgraph.png" border="0" usemap="#ad9/de0/ubusd_8c_ac99f4752b92904e7489bcd383f60cf60_cgraph" alt=""/></div>
<map name="ad9/de0/ubusd_8c_ac99f4752b92904e7489bcd383f60cf60_cgraph" id="ad9/de0/ubusd_8c_ac99f4752b92904e7489bcd383f60cf60_cgraph">
<area shape="rect" title=" " alt="" coords="5,63,212,96"/>
<area shape="rect" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4" title=" " alt="" coords="260,5,428,39"/>
<area shape="poly" title=" " alt="" coords="180,60,256,41,258,46,181,65"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="279,63,409,96"/>
<area shape="poly" title=" " alt="" coords="212,77,264,77,264,82,212,82"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a9fea97afc9c64c2fc775a90ac1081c44" title=" " alt="" coords="269,120,419,154"/>
<area shape="poly" title=" " alt="" coords="181,94,258,113,256,118,180,99"/>
<area shape="rect" href="../../da/d23/list_8h.html#a9d61a1a731a0cf44336e2ee9e45f712d" title=" " alt="" coords="507,63,608,96"/>
<area shape="poly" title=" " alt="" coords="409,77,491,77,491,82,409,82"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae88c2071350154e2eed8a6844e60a9da" title=" " alt="" coords="476,120,639,154"/>
<area shape="poly" title=" " alt="" coords="420,134,460,134,460,140,420,140"/>
</map>
</div>

</div>
</div>
<a id="a19a646e5c3d7ddd2cb4004d68896f12a" name="a19a646e5c3d7ddd2cb4004d68896f12a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19a646e5c3d7ddd2cb4004d68896f12a">&#9670;&#160;</a></span>ubus_msg_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ubus_msg_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *</td>          <td class="paramname"><span class="paramname"><em>ub</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00067">67</a> of file <a class="el" href="../../d9/de0/ubusd_8c_source.html">ubusd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>{</div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordflow">switch</span> (ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a90940fbec985700cdc4e1f3173a8d9c5">refcount</a>) {</div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno">   71</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="#ab21db68a5fa2b273bdd2c73bc65888d9">USES_EXTERNAL_BUFFER</a>:</div>
<div class="line"><span class="lineno">   72</span>        <span class="keywordflow">if</span> (ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a9c2e58870db73235b8596411324dd260">fd</a> &gt;= 0)</div>
<div class="line"><span class="lineno">   73</span>            close(ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a9c2e58870db73235b8596411324dd260">fd</a>);</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>        free(ub);</div>
<div class="line"><span class="lineno">   76</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   77</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">   78</span>        ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a90940fbec985700cdc4e1f3173a8d9c5">refcount</a>--;</div>
<div class="line"><span class="lineno">   79</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   80</span>    }</div>
<div class="line"><span class="lineno">   81</span>}</div>
<div class="ttc" id="aubusd_8c_html_ab21db68a5fa2b273bdd2c73bc65888d9"><div class="ttname"><a href="#ab21db68a5fa2b273bdd2c73bc65888d9">USES_EXTERNAL_BUFFER</a></div><div class="ttdeci">#define USES_EXTERNAL_BUFFER</div><div class="ttdef"><b>Definition</b> <a href="../../d9/de0/ubusd_8c_source.html#l00021">ubusd.c:21</a></div></div>
<div class="ttc" id="aubusd_8h_html_a90940fbec985700cdc4e1f3173a8d9c5"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a90940fbec985700cdc4e1f3173a8d9c5">ubus_msg_buf::refcount</a></div><div class="ttdeci">uint32_t refcount</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00032">ubusd.h:32</a></div></div>
<div class="ttc" id="aubusd_8h_html_a9c2e58870db73235b8596411324dd260"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a9c2e58870db73235b8596411324dd260">ubus_msg_buf::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00035">ubusd.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00035">ubus_msg_buf::fd</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00032">ubus_msg_buf::refcount</a>, and <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00021">USES_EXTERNAL_BUFFER</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00035">ubus_client_cmd_free()</a>, <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00136">ubus_msg_list_free()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00615">ubus_notify_subscription()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00633">ubus_notify_unsubscribe()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00078">ubus_proto_send_msg_from_blob()</a>, <a class="el" href="../../db/dc5/ubusd__monitor_8c_source.html#l00077">ubusd_monitor_message()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00600">ubusd_proto_free_client()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00512">ubusd_proto_receive_message()</a>, <a class="el" href="../../d1/df2/ubusd__event_8c_source.html#l00140">ubusd_send_event()</a>, and <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00094">ubusd_send_hello()</a>.</p>

</div>
</div>
<a id="a7685d99564c18e282d91b3bdb61c32ac" name="a7685d99564c18e282d91b3bdb61c32ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7685d99564c18e282d91b3bdb61c32ac">&#9670;&#160;</a></span>ubus_msg_list_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ubus_msg_list_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#dc/dac/structubus__msg__buf__list">ubus_msg_buf_list</a> *</td>          <td class="paramname"><span class="paramname"><em>ubl</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00136">136</a> of file <a class="el" href="../../d9/de0/ubusd_8c_source.html">ubusd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  137</span>{</div>
<div class="line"><span class="lineno">  138</span>    <a class="code hl_function" href="../../da/d23/list_8h.html#ae1cde0f50b85945cfff23be4fc1586f4">list_del_init</a>(&amp;ubl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aeabc7d62295447c76dd31808c28a8c4c">list</a>);</div>
<div class="line"><span class="lineno">  139</span>    <a class="code hl_function" href="#a19a646e5c3d7ddd2cb4004d68896f12a">ubus_msg_free</a>(ubl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a8308a8af5d50b18f555604c9e81a2099">msg</a>);</div>
<div class="line"><span class="lineno">  140</span>    free(ubl);</div>
<div class="line"><span class="lineno">  141</span>}</div>
<div class="ttc" id="alist_8h_html_ae1cde0f50b85945cfff23be4fc1586f4"><div class="ttname"><a href="../../da/d23/list_8h.html#ae1cde0f50b85945cfff23be4fc1586f4">list_del_init</a></div><div class="ttdeci">static void list_del_init(struct list_head *entry)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d23/list_8h_source.html#l00114">list.h:114</a></div></div>
<div class="ttc" id="aubusd_8c_html_a19a646e5c3d7ddd2cb4004d68896f12a"><div class="ttname"><a href="#a19a646e5c3d7ddd2cb4004d68896f12a">ubus_msg_free</a></div><div class="ttdeci">void ubus_msg_free(struct ubus_msg_buf *ub)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/de0/ubusd_8c_source.html#l00067">ubusd.c:67</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00040">ubus_msg_buf_list::list</a>, <a class="el" href="../../da/d23/list_8h_source.html#l00114">list_del_init()</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00041">ubus_msg_buf_list::msg</a>, and <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00067">ubus_msg_free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00057">client_cb()</a>, and <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00020">handle_client_disconnect()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/de0/ubusd_8c_a7685d99564c18e282d91b3bdb61c32ac_cgraph.png" border="0" usemap="#ad9/de0/ubusd_8c_a7685d99564c18e282d91b3bdb61c32ac_cgraph" alt=""/></div>
<map name="ad9/de0/ubusd_8c_a7685d99564c18e282d91b3bdb61c32ac_cgraph" id="ad9/de0/ubusd_8c_a7685d99564c18e282d91b3bdb61c32ac_cgraph">
<area shape="rect" title=" " alt="" coords="5,63,203,96"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae1cde0f50b85945cfff23be4fc1586f4" title=" " alt="" coords="270,33,393,67"/>
<area shape="poly" title=" " alt="" coords="203,64,254,57,255,63,204,69"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a19a646e5c3d7ddd2cb4004d68896f12a" title=" " alt="" coords="251,91,412,124"/>
<area shape="poly" title=" " alt="" coords="204,89,236,93,235,98,203,94"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae0988579c6b622299ee0f79accbf0779" title=" " alt="" coords="497,5,591,39"/>
<area shape="poly" title=" " alt="" coords="393,39,481,28,482,33,394,45"/>
<area shape="rect" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4" title=" " alt="" coords="460,63,628,96"/>
<area shape="poly" title=" " alt="" coords="394,56,445,63,444,68,393,61"/>
</map>
</div>

</div>
</div>
<a id="ae88c2071350154e2eed8a6844e60a9da" name="ae88c2071350154e2eed8a6844e60a9da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae88c2071350154e2eed8a6844e60a9da">&#9670;&#160;</a></span>ubus_msg_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> * ubus_msg_new </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>shared</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00039">39</a> of file <a class="el" href="../../d9/de0/ubusd_8c_source.html">ubusd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   40</span>{</div>
<div class="line"><span class="lineno">   41</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *ub;</div>
<div class="line"><span class="lineno">   42</span>    <span class="keywordtype">int</span> buflen = <span class="keyword">sizeof</span>(*ub);</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">if</span> (!shared)</div>
<div class="line"><span class="lineno">   45</span>        buflen += <a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">len</a>;</div>
<div class="line"><span class="lineno">   46</span> </div>
<div class="line"><span class="lineno">   47</span>    ub = calloc(1, buflen);</div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordflow">if</span> (!ub)</div>
<div class="line"><span class="lineno">   49</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span>    ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a9c2e58870db73235b8596411324dd260">fd</a> = -1;</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>    <span class="keywordflow">if</span> (shared) {</div>
<div class="line"><span class="lineno">   54</span>        ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a90940fbec985700cdc4e1f3173a8d9c5">refcount</a> = <a class="code hl_define" href="#ab21db68a5fa2b273bdd2c73bc65888d9">USES_EXTERNAL_BUFFER</a>;</div>
<div class="line"><span class="lineno">   55</span>        ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">data</a> = <a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">data</a>;</div>
<div class="line"><span class="lineno">   56</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   57</span>        ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a90940fbec985700cdc4e1f3173a8d9c5">refcount</a> = 1;</div>
<div class="line"><span class="lineno">   58</span>        ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">data</a> = (<span class="keywordtype">void</span> *) (ub + 1);</div>
<div class="line"><span class="lineno">   59</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">data</a>)</div>
<div class="line"><span class="lineno">   60</span>            memcpy(ub + 1, <a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">data</a>, <a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">len</a>);</div>
<div class="line"><span class="lineno">   61</span>    }</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>    ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">len</a> = <a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">len</a>;</div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordflow">return</span> ub;</div>
<div class="line"><span class="lineno">   65</span>}</div>
<div class="ttc" id="aubusd_8h_html_a325aba3ea0240a91ee87d56bfea7b099"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">ubus_msg_buf::data</a></div><div class="ttdeci">struct blob_attr * data</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00034">ubusd.h:34</a></div></div>
<div class="ttc" id="aubusd_8h_html_db/d40/structubus__msg__buf"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00031">ubusd.h:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00034">ubus_msg_buf::data</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00035">ubus_msg_buf::fd</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00036">ubus_msg_buf::len</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00032">ubus_msg_buf::refcount</a>, and <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00021">USES_EXTERNAL_BUFFER</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00057">client_cb()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00060">ubus_msg_from_blob()</a>, <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00023">ubus_msg_ref()</a>, <a class="el" href="../../d1/df2/ubusd__event_8c_source.html#l00197">ubusd_create_event_from_msg()</a>, <a class="el" href="../../d1/df2/ubusd__event_8c_source.html#l00243">ubusd_create_object_event_msg()</a>, <a class="el" href="../../dd/d84/ubusd__acl_8c_source.html#l00401">ubusd_create_sequence_event_msg()</a>, <a class="el" href="../../db/dc5/ubusd__monitor_8c_source.html#l00077">ubusd_monitor_message()</a>, and <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00548">ubusd_proto_init_retmsg()</a>.</p>

</div>
</div>
<a id="a9fea97afc9c64c2fc775a90ac1081c44" name="a9fea97afc9c64c2fc775a90ac1081c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fea97afc9c64c2fc775a90ac1081c44">&#9670;&#160;</a></span>ubus_msg_ref()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> * ubus_msg_ref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *</td>          <td class="paramname"><span class="paramname"><em>ub</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00023">23</a> of file <a class="el" href="../../d9/de0/ubusd_8c_source.html">ubusd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   24</span>{</div>
<div class="line"><span class="lineno">   25</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *new_ub;</div>
<div class="line"><span class="lineno">   26</span>    <span class="keywordflow">if</span> (ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a90940fbec985700cdc4e1f3173a8d9c5">refcount</a> == <a class="code hl_define" href="#ab21db68a5fa2b273bdd2c73bc65888d9">USES_EXTERNAL_BUFFER</a>) {</div>
<div class="line"><span class="lineno">   27</span>        new_ub = <a class="code hl_function" href="#ae88c2071350154e2eed8a6844e60a9da">ubus_msg_new</a>(ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">data</a>, ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">len</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">   28</span>        <span class="keywordflow">if</span> (!new_ub)</div>
<div class="line"><span class="lineno">   29</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">   30</span>        memcpy(&amp;new_ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>, &amp;ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d5/d79/ubusmsg_8h.html#d2/d15/structubus__msghdr">ubus_msghdr</a>));</div>
<div class="line"><span class="lineno">   31</span>        new_ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a9c2e58870db73235b8596411324dd260">fd</a> = ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a9c2e58870db73235b8596411324dd260">fd</a>;</div>
<div class="line"><span class="lineno">   32</span>        <span class="keywordflow">return</span> new_ub;</div>
<div class="line"><span class="lineno">   33</span>    }</div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span>    ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a90940fbec985700cdc4e1f3173a8d9c5">refcount</a>++;</div>
<div class="line"><span class="lineno">   36</span>    <span class="keywordflow">return</span> ub;</div>
<div class="line"><span class="lineno">   37</span>}</div>
<div class="ttc" id="aubusd_8c_html_ae88c2071350154e2eed8a6844e60a9da"><div class="ttname"><a href="#ae88c2071350154e2eed8a6844e60a9da">ubus_msg_new</a></div><div class="ttdeci">struct ubus_msg_buf * ubus_msg_new(void *data, int len, bool shared)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/de0/ubusd_8c_source.html#l00039">ubusd.c:39</a></div></div>
<div class="ttc" id="aubusd_8h_html_a71b145ba82bb363167b19d596e414c7a"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">ubus_msg_buf::hdr</a></div><div class="ttdeci">struct ubus_msghdr hdr</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00033">ubusd.h:33</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_d2/d15/structubus__msghdr"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#d2/d15/structubus__msghdr">ubus_msghdr</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00029">ubusmsg.h:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00034">ubus_msg_buf::data</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00035">ubus_msg_buf::fd</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00033">ubus_msg_buf::hdr</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00036">ubus_msg_buf::len</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00032">ubus_msg_buf::refcount</a>, <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00039">ubus_msg_new()</a>, and <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00021">USES_EXTERNAL_BUFFER</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00143">ubus_msg_enqueue()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/de0/ubusd_8c_a9fea97afc9c64c2fc775a90ac1081c44_cgraph.png" border="0" usemap="#ad9/de0/ubusd_8c_a9fea97afc9c64c2fc775a90ac1081c44_cgraph" alt=""/></div>
<map name="ad9/de0/ubusd_8c_a9fea97afc9c64c2fc775a90ac1081c44_cgraph" id="ad9/de0/ubusd_8c_a9fea97afc9c64c2fc775a90ac1081c44_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,156,39"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae88c2071350154e2eed8a6844e60a9da" title=" " alt="" coords="204,5,367,39"/>
<area shape="poly" title=" " alt="" coords="156,20,188,20,188,25,156,25"/>
</map>
</div>

</div>
</div>
<a id="ac663b82c91f957ef4dea52b243cb1f89" name="ac663b82c91f957ef4dea52b243cb1f89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac663b82c91f957ef4dea52b243cb1f89">&#9670;&#160;</a></span>ubus_msg_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ubus_msg_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#df/d3f/structubus__client">ubus_client</a> *</td>          <td class="paramname"><span class="paramname"><em>cl</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *</td>          <td class="paramname"><span class="paramname"><em>ub</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00162">162</a> of file <a class="el" href="../../d9/de0/ubusd_8c_source.html">ubusd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  163</span>{</div>
<div class="line"><span class="lineno">  164</span>    ssize_t written;</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordflow">if</span> (ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>.<a class="code hl_variable" href="../../d5/d79/ubusmsg_8h.html#aa62a21051bd15ec19c79fc2062c8e431">type</a> != <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a6992a6892cead2b516d3d2e5c28efbb8aba1c96579a0ee973bc752183a043c3db">UBUS_MSG_MONITOR</a>)</div>
<div class="line"><span class="lineno">  167</span>        <a class="code hl_function" href="../../d2/dbe/ubusd_8h.html#a6b03538b7a75504cb920317621b1cd6e">ubusd_monitor_message</a>(cl, ub, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d">list_empty</a>(&amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a979525a026010d1138a38b1a78b5b492">tx_queue</a>)) {</div>
<div class="line"><span class="lineno">  170</span>        written = <a class="code hl_function" href="#ae582a1a0e18dbe57e756c692f97d2a7d">ubus_msg_writev</a>(cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#af9b7da62766d014bf03edda730edf6d6">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>, ub, 0);</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>        <span class="keywordflow">if</span> (written &lt; 0)</div>
<div class="line"><span class="lineno">  173</span>            written = 0;</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>        <span class="keywordflow">if</span> (written &gt;= (ssize_t) (ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">len</a> + <span class="keyword">sizeof</span>(ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>)))</div>
<div class="line"><span class="lineno">  176</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>        cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a673a8525fda653dc75b6f277292ec461">txq_ofs</a> = written;</div>
<div class="line"><span class="lineno">  179</span>        cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a04b9afcb4e61998c373cb10187068dce">txq_len</a> = -written;</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>        <span class="comment">/* get an event once we can write to the socket again */</span></div>
<div class="line"><span class="lineno">  182</span>        <a class="code hl_function" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0">uloop_fd_add</a>(&amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#af9b7da62766d014bf03edda730edf6d6">sock</a>, <a class="code hl_define" href="../../dc/d56/uloop_8h.html#ac20cd5fed660ef784791db47283d9ebf">ULOOP_READ</a> | <a class="code hl_define" href="../../dc/d56/uloop_8h.html#a9b481ffad35824d85a7109d06e7ada3f">ULOOP_WRITE</a> | <a class="code hl_define" href="../../dc/d56/uloop_8h.html#ae0a4bba54063aede5669dbd4782ad6f5">ULOOP_EDGE_TRIGGER</a>);</div>
<div class="line"><span class="lineno">  183</span>    }</div>
<div class="line"><span class="lineno">  184</span>    <a class="code hl_function" href="#ac99f4752b92904e7489bcd383f60cf60">ubus_msg_enqueue</a>(cl, ub);</div>
<div class="line"><span class="lineno">  185</span>}</div>
<div class="ttc" id="alist_8h_html_a6ff0e5eee443d7b27def83827340634d"><div class="ttname"><a href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d">list_empty</a></div><div class="ttdeci">static bool list_empty(const struct list_head *head)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d23/list_8h_source.html#l00069">list.h:69</a></div></div>
<div class="ttc" id="aubusd_8c_html_ac99f4752b92904e7489bcd383f60cf60"><div class="ttname"><a href="#ac99f4752b92904e7489bcd383f60cf60">ubus_msg_enqueue</a></div><div class="ttdeci">static void ubus_msg_enqueue(struct ubus_client *cl, struct ubus_msg_buf *ub)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/de0/ubusd_8c_source.html#l00143">ubusd.c:143</a></div></div>
<div class="ttc" id="aubusd_8c_html_ae582a1a0e18dbe57e756c692f97d2a7d"><div class="ttname"><a href="#ae582a1a0e18dbe57e756c692f97d2a7d">ubus_msg_writev</a></div><div class="ttdeci">ssize_t ubus_msg_writev(int fd, struct ubus_msg_buf *ub, size_t offset)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/de0/ubusd_8c_source.html#l00083">ubusd.c:83</a></div></div>
<div class="ttc" id="aubusd_8h_html_a673a8525fda653dc75b6f277292ec461"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a673a8525fda653dc75b6f277292ec461">ubus_client::txq_ofs</a></div><div class="ttdeci">unsigned int txq_ofs</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00064">ubusd.h:64</a></div></div>
<div class="ttc" id="aubusd_8h_html_a6b03538b7a75504cb920317621b1cd6e"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a6b03538b7a75504cb920317621b1cd6e">ubusd_monitor_message</a></div><div class="ttdeci">void ubusd_monitor_message(struct ubus_client *cl, struct ubus_msg_buf *ub, bool send)</div><div class="ttdef"><b>Definition</b> <a href="../../db/dc5/ubusd__monitor_8c_source.html#l00077">ubusd_monitor.c:77</a></div></div>
<div class="ttc" id="aubusd_8h_html_af9b7da62766d014bf03edda730edf6d6"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#af9b7da62766d014bf03edda730edf6d6">ubus_client::sock</a></div><div class="ttdeci">struct uloop_fd sock</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00052">ubusd.h:52</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a6992a6892cead2b516d3d2e5c28efbb8aba1c96579a0ee973bc752183a043c3db"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a6992a6892cead2b516d3d2e5c28efbb8aba1c96579a0ee973bc752183a043c3db">UBUS_MSG_MONITOR</a></div><div class="ttdeci">@ UBUS_MSG_MONITOR</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00073">ubusmsg.h:73</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_aa62a21051bd15ec19c79fc2062c8e431"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#aa62a21051bd15ec19c79fc2062c8e431">ubus_msghdr::type</a></div><div class="ttdeci">uint8_t type</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00031">ubusmsg.h:31</a></div></div>
<div class="ttc" id="auloop_8c_html_a570d5b4ff73cb373a6ca0ac54a9726a0"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0">uloop_fd_add</a></div><div class="ttdeci">int uloop_fd_add(struct uloop_fd *sock, unsigned int flags)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00235">uloop.c:235</a></div></div>
<div class="ttc" id="auloop_8h_html_a9b481ffad35824d85a7109d06e7ada3f"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#a9b481ffad35824d85a7109d06e7ada3f">ULOOP_WRITE</a></div><div class="ttdeci">#define ULOOP_WRITE</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00048">uloop.h:48</a></div></div>
<div class="ttc" id="auloop_8h_html_ac20cd5fed660ef784791db47283d9ebf"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#ac20cd5fed660ef784791db47283d9ebf">ULOOP_READ</a></div><div class="ttdeci">#define ULOOP_READ</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00047">uloop.h:47</a></div></div>
<div class="ttc" id="auloop_8h_html_ad8badf8512adcf9a8819ed088bde09cc"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">uloop_fd::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00065">uloop.h:65</a></div></div>
<div class="ttc" id="auloop_8h_html_ae0a4bba54063aede5669dbd4782ad6f5"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#ae0a4bba54063aede5669dbd4782ad6f5">ULOOP_EDGE_TRIGGER</a></div><div class="ttdeci">#define ULOOP_EDGE_TRIGGER</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00049">uloop.h:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d56/uloop_8h_source.html#l00065">uloop_fd::fd</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00033">ubus_msg_buf::hdr</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00036">ubus_msg_buf::len</a>, <a class="el" href="../../da/d23/list_8h_source.html#l00069">list_empty()</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00052">ubus_client::sock</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00063">ubus_client::tx_queue</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00065">ubus_client::txq_len</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00064">ubus_client::txq_ofs</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00031">ubus_msghdr::type</a>, <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00143">ubus_msg_enqueue()</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00073">UBUS_MSG_MONITOR</a>, <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00083">ubus_msg_writev()</a>, <a class="el" href="../../db/dc5/ubusd__monitor_8c_source.html#l00077">ubusd_monitor_message()</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00049">ULOOP_EDGE_TRIGGER</a>, <a class="el" href="../../d1/d08/uloop_8c_source.html#l00235">uloop_fd_add()</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00047">ULOOP_READ</a>, and <a class="el" href="../../dc/d56/uloop_8h_source.html#l00048">ULOOP_WRITE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00615">ubus_notify_subscription()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00633">ubus_notify_unsubscribe()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00078">ubus_proto_send_msg_from_blob()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00285">ubusd_cmd_lookup()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00413">ubusd_handle_response()</a>, <a class="el" href="../../db/dc5/ubusd__monitor_8c_source.html#l00077">ubusd_monitor_message()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00512">ubusd_proto_receive_message()</a>, <a class="el" href="../../d1/df2/ubusd__event_8c_source.html#l00111">ubusd_send_event_msg()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00094">ubusd_send_hello()</a>, and <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00109">ubusd_send_pong()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/de0/ubusd_8c_ac663b82c91f957ef4dea52b243cb1f89_cgraph.png" border="0" usemap="#ad9/de0/ubusd_8c_ac663b82c91f957ef4dea52b243cb1f89_cgraph" alt=""/></div>
<map name="ad9/de0/ubusd_8c_ac663b82c91f957ef4dea52b243cb1f89_cgraph" id="ad9/de0/ubusd_8c_ac663b82c91f957ef4dea52b243cb1f89_cgraph">
<area shape="rect" title=" " alt="" coords="5,337,176,371"/>
<area shape="rect" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d" title=" " alt="" coords="550,177,666,211"/>
<area shape="poly" title=" " alt="" coords="147,334,535,214,537,219,149,339"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ac99f4752b92904e7489bcd383f60cf60" title=" " alt="" coords="247,92,453,126"/>
<area shape="poly" title=" " alt="" coords="108,335,222,226,317,135,321,138,226,229,112,339"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae582a1a0e18dbe57e756c692f97d2a7d" title=" " alt="" coords="259,395,441,428"/>
<area shape="poly" title=" " alt="" coords="170,369,256,388,255,393,169,374"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#a6b03538b7a75504cb920317621b1cd6e" title=" " alt="" coords="224,337,476,371"/>
<area shape="poly" title=" " alt="" coords="176,360,208,360,208,366,176,365"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0" title=" " alt="" coords="278,613,422,647"/>
<area shape="poly" title=" " alt="" coords="110,370,324,600,320,604,106,373"/>
<area shape="rect" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4" title=" " alt="" coords="524,63,692,96"/>
<area shape="poly" title=" " alt="" coords="453,94,508,88,509,93,454,100"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="544,5,673,39"/>
<area shape="poly" title=" " alt="" coords="402,89,523,48,540,42,542,47,525,53,403,94"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a9fea97afc9c64c2fc775a90ac1081c44" title=" " alt="" coords="533,120,683,154"/>
<area shape="poly" title=" " alt="" coords="454,117,518,124,517,130,453,123"/>
<area shape="rect" href="../../da/d23/list_8h.html#a9d61a1a731a0cf44336e2ee9e45f712d" title=" " alt="" coords="799,5,901,39"/>
<area shape="poly" title=" " alt="" coords="673,20,784,20,784,25,673,25"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae88c2071350154e2eed8a6844e60a9da" title=" " alt="" coords="768,148,932,182"/>
<area shape="poly" title=" " alt="" coords="684,143,753,151,753,156,684,148"/>
<area shape="poly" title=" " alt="" coords="223,348,191,348,191,343,223,343"/>
<area shape="poly" title=" " alt="" coords="374,335,474,263,498,244,523,228,547,215,550,220,525,232,501,249,478,267,377,339"/>
<area shape="poly" title=" " alt="" coords="424,334,475,314,498,297,523,279,568,258,606,246,691,221,788,185,790,190,693,226,607,251,570,263,525,283,502,301,477,319,426,339"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="539,337,678,371"/>
<area shape="poly" title=" " alt="" coords="476,352,523,352,523,357,476,357"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1628,424,1769,458"/>
<area shape="poly" title=" " alt="" coords="446,369,524,381,723,405,878,420,1034,430,1234,440,1312,441,1389,440,1612,439,1612,444,1389,445,1312,446,1234,445,1034,436,878,425,723,410,524,386,445,374"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1817,288,1915,322"/>
<area shape="poly" title=" " alt="" coords="431,334,740,269,866,242,974,217,1070,193,1160,175,1249,163,1345,160,1453,167,1580,188,1648,205,1713,229,1821,278,1819,283,1711,234,1646,210,1579,193,1453,173,1345,165,1250,168,1161,180,1071,199,976,222,868,248,741,274,432,339"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="794,556,906,590"/>
<area shape="poly" title=" " alt="" coords="463,369,478,380,494,401,501,424,501,468,500,490,502,510,509,530,526,548,554,567,585,580,618,589,652,593,719,594,779,586,780,592,719,599,651,599,617,594,583,585,551,571,522,552,505,532,496,511,495,490,496,468,496,424,489,404,474,384,460,374"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="558,504,659,538"/>
<area shape="poly" title=" " alt="" coords="461,369,478,380,490,394,498,408,503,436,508,464,515,478,526,491,545,504,542,508,522,495,510,481,503,466,498,437,493,410,486,397,474,384,458,374"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a19a646e5c3d7ddd2cb4004d68896f12a" title=" " alt="" coords="528,447,689,480"/>
<area shape="poly" title=" " alt="" coords="453,369,477,380,493,391,503,402,512,414,526,425,547,437,544,442,522,430,508,417,498,406,489,395,475,384,451,374"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1044,339,1150,372"/>
<area shape="poly" title=" " alt="" coords="678,352,1028,353,1028,358,678,357"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="760,284,940,318"/>
<area shape="poly" title=" " alt="" coords="677,336,755,319,756,324,679,341"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1437,203,1580,236"/>
<area shape="poly" title=" " alt="" coords="1106,337,1126,308,1154,273,1191,240,1233,214,1280,200,1329,194,1378,195,1422,199,1422,204,1377,200,1330,200,1281,206,1235,219,1194,244,1158,277,1130,311,1111,340"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1234,229,1389,263"/>
<area shape="poly" title=" " alt="" coords="1128,336,1233,280,1258,268,1260,272,1235,285,1130,340"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="1437,272,1580,306"/>
<area shape="poly" title=" " alt="" coords="1149,341,1234,324,1421,296,1422,301,1234,329,1150,346"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1244,396,1380,430"/>
<area shape="poly" title=" " alt="" coords="1151,367,1232,389,1230,394,1149,372"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="1262,339,1361,372"/>
<area shape="poly" title=" " alt="" coords="1150,353,1246,353,1246,358,1150,358"/>
<area shape="poly" title=" " alt="" coords="1389,233,1422,229,1423,234,1390,238"/>
<area shape="poly" title=" " alt="" coords="1390,260,1423,268,1422,273,1389,266"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="1437,505,1580,539"/>
<area shape="poly" title=" " alt="" coords="1345,428,1465,495,1462,500,1342,432"/>
<area shape="poly" title=" " alt="" coords="1381,415,1612,432,1612,437,1380,420"/>
<area shape="poly" title=" " alt="" coords="1549,502,1642,462,1644,467,1551,507"/>
<area shape="poly" title=" " alt="" coords="1719,422,1831,330,1834,334,1722,426"/>
<area shape="poly" title=" " alt="" coords="660,529,780,555,778,560,658,534"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aee908e6de67c16a4d810d08f28ed1803" title=" " alt="" coords="796,499,904,532"/>
<area shape="poly" title=" " alt="" coords="659,517,780,514,781,520,659,522"/>
<area shape="poly" title=" " alt="" coords="876,496,1055,379,1058,383,879,500"/>
<area shape="poly" title=" " alt="" coords="905,525,1008,541,1120,546,1232,544,1422,530,1422,535,1232,550,1120,551,1007,546,904,530"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac9fd36cdb87493b31a675621ed53a8d7" title=" " alt="" coords="1041,497,1153,531"/>
<area shape="poly" title=" " alt="" coords="904,513,1026,512,1026,517,904,518"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a189526712fcc12adfb6ea6a5c8eede54" title=" " alt="" coords="1008,607,1186,640"/>
<area shape="poly" title=" " alt="" coords="905,521,933,529,961,541,976,552,986,563,995,574,1009,585,1032,598,1030,602,1006,590,992,578,982,567,973,556,958,546,932,534,904,526"/>
<area shape="poly" title=" " alt="" coords="1153,513,1422,518,1422,523,1153,518"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#a1b6212744c4241320adc3a2170525f20" title=" " alt="" coords="541,671,675,704"/>
<area shape="poly" title=" " alt="" coords="423,644,526,667,525,672,422,649"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c" title=" " alt="" coords="525,613,691,647"/>
<area shape="poly" title=" " alt="" coords="422,628,509,628,509,633,422,633"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#ae98d2f54596aacb1f0f176d0e565e2e2" title=" " alt="" coords="758,613,942,647"/>
<area shape="poly" title=" " alt="" coords="692,628,742,628,742,633,692,633"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#abe443fe3f794c14f0aaa0c5f18a27ddd" title=" " alt="" coords="740,671,960,704"/>
<area shape="poly" title=" " alt="" coords="683,645,762,664,760,669,681,650"/>
</map>
</div>

</div>
</div>
<a id="ae582a1a0e18dbe57e756c692f97d2a7d" name="ae582a1a0e18dbe57e756c692f97d2a7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae582a1a0e18dbe57e756c692f97d2a7d">&#9670;&#160;</a></span>ubus_msg_writev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t ubus_msg_writev </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *</td>          <td class="paramname"><span class="paramname"><em>ub</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00083">83</a> of file <a class="el" href="../../d9/de0/ubusd_8c_source.html">ubusd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   84</span>{</div>
<div class="line"><span class="lineno">   85</span>    uint8_t fd_buf[CMSG_SPACE(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>))] = { 0 };</div>
<div class="line"><span class="lineno">   86</span>    <span class="keyword">static</span> <span class="keyword">struct </span>iovec iov[2];</div>
<div class="line"><span class="lineno">   87</span>    <span class="keyword">struct </span>msghdr msghdr = { 0 };</div>
<div class="line"><span class="lineno">   88</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d5/d79/ubusmsg_8h.html#d2/d15/structubus__msghdr">ubus_msghdr</a> hdr;</div>
<div class="line"><span class="lineno">   89</span>    <span class="keyword">struct </span>cmsghdr *cmsg;</div>
<div class="line"><span class="lineno">   90</span>    ssize_t ret;</div>
<div class="line"><span class="lineno">   91</span>    <span class="keywordtype">int</span> *pfd;</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>    msghdr.msg_iov = iov;</div>
<div class="line"><span class="lineno">   94</span>    msghdr.msg_iovlen = <a class="code hl_define" href="../../d8/d6a/test-blobmsg-types_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a>(iov);</div>
<div class="line"><span class="lineno">   95</span>    msghdr.msg_control = fd_buf;</div>
<div class="line"><span class="lineno">   96</span>    msghdr.msg_controllen = <span class="keyword">sizeof</span>(fd_buf);</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>    cmsg = CMSG_FIRSTHDR(&amp;msghdr);</div>
<div class="line"><span class="lineno">   99</span>    cmsg-&gt;cmsg_type = SCM_RIGHTS;</div>
<div class="line"><span class="lineno">  100</span>    cmsg-&gt;cmsg_level = SOL_SOCKET;</div>
<div class="line"><span class="lineno">  101</span>    cmsg-&gt;cmsg_len = CMSG_LEN(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span>    pfd = (<span class="keywordtype">int</span> *) CMSG_DATA(cmsg);</div>
<div class="line"><span class="lineno">  104</span>    msghdr.msg_controllen = cmsg-&gt;cmsg_len;</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>    *pfd = ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a9c2e58870db73235b8596411324dd260">fd</a>;</div>
<div class="line"><span class="lineno">  107</span>    <span class="keywordflow">if</span> (ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a9c2e58870db73235b8596411324dd260">fd</a> &lt; 0 || offset) {</div>
<div class="line"><span class="lineno">  108</span>        msghdr.msg_control = NULL;</div>
<div class="line"><span class="lineno">  109</span>        msghdr.msg_controllen = 0;</div>
<div class="line"><span class="lineno">  110</span>    }</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordflow">if</span> (offset &lt; <span class="keyword">sizeof</span>(ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>)) {</div>
<div class="line"><span class="lineno">  113</span>        hdr.version = ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>.<a class="code hl_variable" href="../../d5/d79/ubusmsg_8h.html#a91367cc87f9394a97fce7eb0400fd34a">version</a>;</div>
<div class="line"><span class="lineno">  114</span>        hdr.type = ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>.<a class="code hl_variable" href="../../d5/d79/ubusmsg_8h.html#aa62a21051bd15ec19c79fc2062c8e431">type</a>;</div>
<div class="line"><span class="lineno">  115</span>        hdr.seq = <a class="code hl_define" href="../../d5/d1d/libubox_2utils_8h.html#af42a6506135fe9e671c40973bacc849f">cpu_to_be16</a>(ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>.<a class="code hl_variable" href="../../d5/d79/ubusmsg_8h.html#ab90f8ebaaa829b5513cbf1a31999a2af">seq</a>);</div>
<div class="line"><span class="lineno">  116</span>        hdr.peer = <a class="code hl_define" href="../../d5/d1d/libubox_2utils_8h.html#afd3274bb70aea7cf9be403940e001cc7">cpu_to_be32</a>(ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>.<a class="code hl_variable" href="../../d5/d79/ubusmsg_8h.html#a1c055bdf82522eaacae11214ef289fca">peer</a>);</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>        iov[0].iov_base = ((<span class="keywordtype">char</span> *) &amp;hdr) + offset;</div>
<div class="line"><span class="lineno">  119</span>        iov[0].iov_len = <span class="keyword">sizeof</span>(hdr) - offset;</div>
<div class="line"><span class="lineno">  120</span>        iov[1].iov_base = (<span class="keywordtype">char</span> *) ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">data</a>;</div>
<div class="line"><span class="lineno">  121</span>        iov[1].iov_len = ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">len</a>;</div>
<div class="line"><span class="lineno">  122</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  123</span>        offset -= <span class="keyword">sizeof</span>(ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>);</div>
<div class="line"><span class="lineno">  124</span>        iov[0].iov_base = ((<span class="keywordtype">char</span> *) ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">data</a>) + offset;</div>
<div class="line"><span class="lineno">  125</span>        iov[0].iov_len = ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">len</a> - offset;</div>
<div class="line"><span class="lineno">  126</span>        msghdr.msg_iovlen = 1;</div>
<div class="line"><span class="lineno">  127</span>    }</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno">  130</span>        ret = sendmsg(fd, &amp;msghdr, 0);</div>
<div class="line"><span class="lineno">  131</span>    } <span class="keywordflow">while</span> (ret &lt; 0 &amp;&amp; errno == EINTR);</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  134</span>}</div>
<div class="ttc" id="alibubox_2utils_8h_html_af42a6506135fe9e671c40973bacc849f"><div class="ttname"><a href="../../d5/d1d/libubox_2utils_8h.html#af42a6506135fe9e671c40973bacc849f">cpu_to_be16</a></div><div class="ttdeci">#define cpu_to_be16(x)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d1d/libubox_2utils_8h_source.html#l00164">utils.h:164</a></div></div>
<div class="ttc" id="alibubox_2utils_8h_html_afd3274bb70aea7cf9be403940e001cc7"><div class="ttname"><a href="../../d5/d1d/libubox_2utils_8h.html#afd3274bb70aea7cf9be403940e001cc7">cpu_to_be32</a></div><div class="ttdeci">#define cpu_to_be32(x)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d1d/libubox_2utils_8h_source.html#l00163">utils.h:163</a></div></div>
<div class="ttc" id="atest-blobmsg-types_8c_html_a6242a25f9d996f0cc4f4cdb911218b75"><div class="ttname"><a href="../../d8/d6a/test-blobmsg-types_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(x)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d6a/test-blobmsg-types_8c_source.html#l00120">test-blobmsg-types.c:120</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a1c055bdf82522eaacae11214ef289fca"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a1c055bdf82522eaacae11214ef289fca">ubus_msghdr::peer</a></div><div class="ttdeci">uint32_t peer</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00033">ubusmsg.h:33</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a91367cc87f9394a97fce7eb0400fd34a"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a91367cc87f9394a97fce7eb0400fd34a">ubus_msghdr::version</a></div><div class="ttdeci">uint8_t version</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00030">ubusmsg.h:30</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_ab90f8ebaaa829b5513cbf1a31999a2af"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#ab90f8ebaaa829b5513cbf1a31999a2af">ubus_msghdr::seq</a></div><div class="ttdeci">uint16_t seq</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00032">ubusmsg.h:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d6a/test-blobmsg-types_8c_source.html#l00120">ARRAY_SIZE</a>, <a class="el" href="../../d5/d1d/libubox_2utils_8h_source.html#l00164">cpu_to_be16</a>, <a class="el" href="../../d5/d1d/libubox_2utils_8h_source.html#l00163">cpu_to_be32</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00034">ubus_msg_buf::data</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00035">ubus_msg_buf::fd</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00033">ubus_msg_buf::hdr</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00036">ubus_msg_buf::len</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00033">ubus_msghdr::peer</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00032">ubus_msghdr::seq</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00031">ubus_msghdr::type</a>, and <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00030">ubus_msghdr::version</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00057">client_cb()</a>, and <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00162">ubus_msg_send()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
