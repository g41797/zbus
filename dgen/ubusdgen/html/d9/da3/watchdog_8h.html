<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>zbus: /home/g41797/CLionProjects/github.com/g41797/zbus/src/libs/procd/watchdog.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">zbus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_87a455bccb09a92130c26a11a880c98a.html">libs</a></li><li class="navelem"><a class="el" href="../../dir_63350b749fcf74007a53c7c917c10773.html">procd</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">watchdog.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for watchdog.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d5e/watchdog_8h__incl.png" border="0" usemap="#a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2watchdog_8h" alt=""/></div>
<map name="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2watchdog_8h" id="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2watchdog_8h">
<area shape="rect" title=" " alt="" coords="5,5,292,85"/>
<area shape="rect" title=" " alt="" coords="95,133,202,167"/>
<area shape="poly" title=" " alt="" coords="151,86,151,118,146,118,146,86"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/de8/watchdog_8h__dep__incl.png" border="0" usemap="#a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2watchdog_8hdep" alt=""/></div>
<map name="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2watchdog_8hdep" id="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2watchdog_8hdep">
<area shape="rect" title=" " alt="" coords="1092,5,1378,85"/>
<area shape="rect" href="../../d8/d60/init_8c.html" title=" " alt="" coords="5,145,292,224"/>
<area shape="poly" title=" " alt="" coords="1077,53,915,62,721,77,512,101,305,136,261,146,260,141,304,130,511,95,721,72,915,56,1076,48"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html" title=" " alt="" coords="316,145,602,224"/>
<area shape="poly" title=" " alt="" coords="1077,64,857,91,735,111,616,136,574,146,573,141,615,130,734,106,856,86,1076,58"/>
<area shape="rect" href="../../da/d06/procd_8c.html" title=" " alt="" coords="627,145,913,224"/>
<area shape="poly" title=" " alt="" coords="1078,92,927,136,891,146,889,141,925,130,1077,87"/>
<area shape="rect" href="../../d0/dc9/state_8c.html" title=" " alt="" coords="937,145,1224,224"/>
<area shape="poly" title=" " alt="" coords="1181,98,1127,146,1123,142,1178,94"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html" title=" " alt="" coords="1248,145,1534,224"/>
<area shape="poly" title=" " alt="" coords="1293,93,1348,142,1345,146,1289,97"/>
<area shape="rect" href="../../db/d65/sysupgrade_8c.html" title=" " alt="" coords="1559,145,1845,224"/>
<area shape="poly" title=" " alt="" coords="1394,87,1547,130,1582,141,1581,146,1545,136,1393,92"/>
<area shape="rect" href="../../d3/d9f/upgraded_8c.html" title=" " alt="" coords="1869,133,2156,236"/>
<area shape="poly" title=" " alt="" coords="1394,58,1615,86,1737,106,1857,130,1869,133,1868,139,1856,136,1736,111,1614,91,1394,64"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html" title=" " alt="" coords="2180,145,2466,224"/>
<area shape="poly" title=" " alt="" coords="1394,48,1556,56,1750,71,1960,95,2168,130,2212,141,2210,146,2167,136,1959,101,1750,77,1555,62,1393,53"/>
</map>
</div>
</div>
<p><a href="../../d9/da3/watchdog_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a874a52d6ac45041d9e76bd1925d88c24" id="r_a874a52d6ac45041d9e76bd1925d88c24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a874a52d6ac45041d9e76bd1925d88c24">watchdog_init</a> (int <a class="el" href="../../d8/dc0/init_8h.html#a90282b93d8528c3fc4e5b188bc5fbc1c">preinit</a>)</td></tr>
<tr class="separator:a874a52d6ac45041d9e76bd1925d88c24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae02caa227c18af4c5c42fee4b8d94ba9" id="r_ae02caa227c18af4c5c42fee4b8d94ba9"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae02caa227c18af4c5c42fee4b8d94ba9">watchdog_fd</a> (void)</td></tr>
<tr class="separator:ae02caa227c18af4c5c42fee4b8d94ba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cb0f6cbef0cbe8203eb22795acc9446" id="r_a9cb0f6cbef0cbe8203eb22795acc9446"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9cb0f6cbef0cbe8203eb22795acc9446">watchdog_timeout</a> (int <a class="el" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr class="separator:a9cb0f6cbef0cbe8203eb22795acc9446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5a3542e62faac548615860ffa297d1b" id="r_aa5a3542e62faac548615860ffa297d1b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa5a3542e62faac548615860ffa297d1b">watchdog_frequency</a> (int frequency)</td></tr>
<tr class="separator:aa5a3542e62faac548615860ffa297d1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17cc5d8e2a9be6590ae9944c3abf3555" id="r_a17cc5d8e2a9be6590ae9944c3abf3555"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a17cc5d8e2a9be6590ae9944c3abf3555">watchdog_set_magicclose</a> (bool val)</td></tr>
<tr class="separator:a17cc5d8e2a9be6590ae9944c3abf3555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23ac65088fc496c0c827cfa697b62e83" id="r_a23ac65088fc496c0c827cfa697b62e83"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23ac65088fc496c0c827cfa697b62e83">watchdog_get_magicclose</a> (void)</td></tr>
<tr class="separator:a23ac65088fc496c0c827cfa697b62e83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a441b97e6f07ed2aefef37cd2309adafc" id="r_a441b97e6f07ed2aefef37cd2309adafc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a441b97e6f07ed2aefef37cd2309adafc">watchdog_set_stopped</a> (bool val)</td></tr>
<tr class="separator:a441b97e6f07ed2aefef37cd2309adafc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad28218c9cb9943272f216b52ed33f680" id="r_ad28218c9cb9943272f216b52ed33f680"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad28218c9cb9943272f216b52ed33f680">watchdog_get_stopped</a> (void)</td></tr>
<tr class="separator:ad28218c9cb9943272f216b52ed33f680"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaed3ec52f2a4e3003e8733a933945fe7" id="r_aaed3ec52f2a4e3003e8733a933945fe7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaed3ec52f2a4e3003e8733a933945fe7">watchdog_set_cloexec</a> (bool val)</td></tr>
<tr class="separator:aaed3ec52f2a4e3003e8733a933945fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40e298539d4f4fb3c5ab3317d4c449ff" id="r_a40e298539d4f4fb3c5ab3317d4c449ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a40e298539d4f4fb3c5ab3317d4c449ff">watchdog_ping</a> (void)</td></tr>
<tr class="separator:a40e298539d4f4fb3c5ab3317d4c449ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae02caa227c18af4c5c42fee4b8d94ba9" name="ae02caa227c18af4c5c42fee4b8d94ba9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae02caa227c18af4c5c42fee4b8d94ba9">&#9670;&#160;</a></span>watchdog_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * watchdog_fd </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00179">179</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  180</span>{</div>
<div class="line"><span class="lineno">  181</span>    <span class="keyword">static</span> <span class="keywordtype">char</span> fd_buf[12];</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &lt; 0)</div>
<div class="line"><span class="lineno">  184</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>    snprintf(fd_buf, <span class="keyword">sizeof</span>(fd_buf), <span class="stringliteral">&quot;%d&quot;</span>, <a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>);</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    <span class="keywordflow">return</span> fd_buf;</div>
<div class="line"><span class="lineno">  189</span>}</div>
<div class="ttc" id="awatchdog_8c_html_a6c6f4a796c52e7bdc033599d489d57dd"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a></div><div class="ttdeci">static int wdt_fd</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00032">watchdog.c:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">wdt_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de5/preinit_8c_source.html#l00091">spawn_procd()</a>, <a class="el" href="../../db/d65/sysupgrade_8c_source.html#l00028">sysupgrade_exec_upgraded()</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>

</div>
</div>
<a id="aa5a3542e62faac548615860ffa297d1b" name="aa5a3542e62faac548615860ffa297d1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5a3542e62faac548615860ffa297d1b">&#9670;&#160;</a></span>watchdog_frequency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int watchdog_frequency </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>frequency</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00169">169</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  170</span>{</div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordflow">if</span> (frequency) {</div>
<div class="line"><span class="lineno">  172</span>        <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(4, <span class="stringliteral">&quot;Set watchdog frequency: %ds\n&quot;</span>, frequency);</div>
<div class="line"><span class="lineno">  173</span>        <a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a2fb7beb7b455796d8aa9a27d7282500e">wdt_frequency</a> = frequency;</div>
<div class="line"><span class="lineno">  174</span>    }</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a2fb7beb7b455796d8aa9a27d7282500e">wdt_frequency</a>;</div>
<div class="line"><span class="lineno">  177</span>}</div>
<div class="ttc" id="asystem-dummy_8c_html_ad72dbcf6d0153db1b8d8a58001feed83"><div class="ttname"><a href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a></div><div class="ttdeci">#define DEBUG</div><div class="ttdef"><b>Definition</b> <a href="../../da/d12/system-dummy_8c_source.html#l00021">system-dummy.c:21</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a2fb7beb7b455796d8aa9a27d7282500e"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a2fb7beb7b455796d8aa9a27d7282500e">wdt_frequency</a></div><div class="ttdeci">static int wdt_frequency</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00034">watchdog.c:34</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d12/system-dummy_8c_source.html#l00021">DEBUG</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00034">wdt_frequency</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>

</div>
</div>
<a id="a23ac65088fc496c0c827cfa697b62e83" name="a23ac65088fc496c0c827cfa697b62e83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23ac65088fc496c0c827cfa697b62e83">&#9670;&#160;</a></span>watchdog_get_magicclose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool watchdog_get_magicclose </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00132">132</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  133</span>{</div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#ab046fa6a191130ad6ac6ced195af1fed">wdt_magicclose</a>;</div>
<div class="line"><span class="lineno">  135</span>}</div>
<div class="ttc" id="awatchdog_8c_html_ab046fa6a191130ad6ac6ced195af1fed"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#ab046fa6a191130ad6ac6ced195af1fed">wdt_magicclose</a></div><div class="ttdeci">static bool wdt_magicclose</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00035">watchdog.c:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00035">wdt_magicclose</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>

</div>
</div>
<a id="ad28218c9cb9943272f216b52ed33f680" name="ad28218c9cb9943272f216b52ed33f680"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad28218c9cb9943272f216b52ed33f680">&#9670;&#160;</a></span>watchdog_get_stopped()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool watchdog_get_stopped </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00151">151</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  152</span>{</div>
<div class="line"><span class="lineno">  153</span>    <span class="keywordflow">return</span> !<a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a25cac63ea734b75581163f3980dbadda">pending</a>;</div>
<div class="line"><span class="lineno">  154</span>}</div>
<div class="ttc" id="auloop_8h_html_a25cac63ea734b75581163f3980dbadda"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#a25cac63ea734b75581163f3980dbadda">uloop_timeout::pending</a></div><div class="ttdeci">bool pending</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00075">uloop.h:75</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a358c7fd61724df432e2df56fa42a88ce"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a></div><div class="ttdeci">static struct uloop_timeout wdt_timeout</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00031">watchdog.c:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d56/uloop_8h_source.html#l00075">uloop_timeout::pending</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00031">wdt_timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>

</div>
</div>
<a id="a874a52d6ac45041d9e76bd1925d88c24" name="a874a52d6ac45041d9e76bd1925d88c24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a874a52d6ac45041d9e76bd1925d88c24">&#9670;&#160;</a></span>watchdog_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_init </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>preinit</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00191">191</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  192</span>{</div>
<div class="line"><span class="lineno">  193</span>    <a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a7b331d0a02bb53b37ae38716956c97bd">cb</a> = <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a5a3159d3f3390614400f8f403c5aac73">watchdog_timeout_cb</a>;</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58">watchdog_open</a>(!<a class="code hl_function" href="../../d8/dc0/init_8h.html#a90282b93d8528c3fc4e5b188bc5fbc1c">preinit</a>) &lt; 0)</div>
<div class="line"><span class="lineno">  196</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- watchdog -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  199</span>    <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1">watchdog_set_drv_timeout</a>();</div>
<div class="line"><span class="lineno">  200</span>    <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a5a3159d3f3390614400f8f403c5aac73">watchdog_timeout_cb</a>(&amp;<a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a>);</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>    <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(4, <span class="stringliteral">&quot;Opened watchdog with timeout %ds\n&quot;</span>, <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a9cb0f6cbef0cbe8203eb22795acc9446">watchdog_timeout</a>(0));</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>    <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a05316067521d0e4efd9b8d3a3a322591">watchdog_print_status</a>();</div>
<div class="line"><span class="lineno">  205</span>}</div>
<div class="ttc" id="ainit_8h_html_a90282b93d8528c3fc4e5b188bc5fbc1c"><div class="ttname"><a href="../../d8/dc0/init_8h.html#a90282b93d8528c3fc4e5b188bc5fbc1c">preinit</a></div><div class="ttdeci">void preinit(void)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/de5/preinit_8c_source.html#l00124">preinit.c:124</a></div></div>
<div class="ttc" id="aprocd_2log_8h_html_a159ca84d25a5487d8e81e4438725df19"><div class="ttname"><a href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a></div><div class="ttdeci">#define LOG</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d1e/procd_2log_8h_source.html#l00032">log.h:32</a></div></div>
<div class="ttc" id="auloop_8h_html_a7b331d0a02bb53b37ae38716956c97bd"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#a7b331d0a02bb53b37ae38716956c97bd">uloop_timeout::cb</a></div><div class="ttdeci">uloop_timeout_handler cb</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00077">uloop.h:77</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a05316067521d0e4efd9b8d3a3a322591"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a05316067521d0e4efd9b8d3a3a322591">watchdog_print_status</a></div><div class="ttdeci">static void watchdog_print_status(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00098">watchdog.c:98</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a31664dcba8ff01b57b09be53bc297d58"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58">watchdog_open</a></div><div class="ttdeci">static int watchdog_open(bool cloexec)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00050">watchdog.c:50</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a35f4cbd80d58c214a0f47b8022fa4ca1"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1">watchdog_set_drv_timeout</a></div><div class="ttdeci">static int watchdog_set_drv_timeout(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00090">watchdog.c:90</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a5a3159d3f3390614400f8f403c5aac73"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a5a3159d3f3390614400f8f403c5aac73">watchdog_timeout_cb</a></div><div class="ttdeci">static void watchdog_timeout_cb(struct uloop_timeout *t)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00044">watchdog.c:44</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a9cb0f6cbef0cbe8203eb22795acc9446"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a9cb0f6cbef0cbe8203eb22795acc9446">watchdog_timeout</a></div><div class="ttdeci">int watchdog_timeout(int timeout)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00156">watchdog.c:156</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d56/uloop_8h_source.html#l00077">uloop_timeout::cb</a>, <a class="el" href="../../da/d12/system-dummy_8c_source.html#l00021">DEBUG</a>, <a class="el" href="../../d9/d1e/procd_2log_8h_source.html#l00032">LOG</a>, <a class="el" href="../../dd/de5/preinit_8c_source.html#l00124">preinit()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00050">watchdog_open()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00098">watchdog_print_status()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00090">watchdog_set_drv_timeout()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00156">watchdog_timeout()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00044">watchdog_timeout_cb()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00031">wdt_timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d60/init_8c_source.html#l00121">main()</a>, and <a class="el" href="../../d0/dc9/state_8c_source.html#l00126">state_enter()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da3/watchdog_8h_a874a52d6ac45041d9e76bd1925d88c24_cgraph.png" border="0" usemap="#ad9/da3/watchdog_8h_a874a52d6ac45041d9e76bd1925d88c24_cgraph" alt=""/></div>
<map name="ad9/da3/watchdog_8h_a874a52d6ac45041d9e76bd1925d88c24_cgraph" id="ad9/da3/watchdog_8h_a874a52d6ac45041d9e76bd1925d88c24_cgraph">
<area shape="rect" title=" " alt="" coords="5,594,155,628"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a90282b93d8528c3fc4e5b188bc5fbc1c" title=" " alt="" coords="278,452,358,485"/>
<area shape="poly" title=" " alt="" coords="93,592,137,543,168,517,201,494,231,482,262,473,263,479,233,487,204,499,171,521,141,547,97,596"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58" title=" " alt="" coords="235,509,401,543"/>
<area shape="poly" title=" " alt="" coords="112,591,202,551,221,545,223,550,204,556,115,596"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a05316067521d0e4efd9b8d3a3a322591" title=" " alt="" coords="203,566,433,600"/>
<area shape="poly" title=" " alt="" coords="155,600,187,596,187,601,155,605"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1" title=" " alt="" coords="481,621,749,655"/>
<area shape="poly" title=" " alt="" coords="155,612,466,628,466,633,155,618"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a9cb0f6cbef0cbe8203eb22795acc9446" title=" " alt="" coords="222,676,414,709"/>
<area shape="poly" title=" " alt="" coords="127,626,204,654,246,668,244,673,202,659,125,631"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a5a3159d3f3390614400f8f403c5aac73" title=" " alt="" coords="207,733,429,767"/>
<area shape="poly" title=" " alt="" coords="97,627,142,674,171,699,204,720,214,725,212,729,201,724,168,703,138,678,94,631"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a3c2b1b2951eae690991001026ac7c4d4" title=" " alt="" coords="538,396,692,429"/>
<area shape="poly" title=" " alt="" coords="358,459,522,427,523,433,359,464"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a9539d3f84ee0e5d5db04710740c805f2" title=" " alt="" coords="544,453,686,487"/>
<area shape="poly" title=" " alt="" coords="358,466,528,467,528,472,358,471"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#af511d1bcbdfcfaba211d4ae1b0930dbb" title=" " alt="" coords="809,562,1006,596"/>
<area shape="poly" title=" " alt="" coords="359,473,481,497,799,556,798,562,481,502,358,479"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a4f3b5900c57e91bcc59c5c7e9f47fca6" title=" " alt="" coords="837,396,978,429"/>
<area shape="poly" title=" " alt="" coords="686,453,821,427,822,432,688,459"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a94bbc0d07683d7ebd935579b8c873834" title=" " alt="" coords="811,453,1004,487"/>
<area shape="poly" title=" " alt="" coords="687,467,796,467,796,473,687,473"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#ae02caa227c18af4c5c42fee4b8d94ba9" title=" " alt="" coords="1605,512,1745,545"/>
<area shape="poly" title=" " alt="" coords="687,481,798,497,1022,513,1244,523,1590,527,1590,532,1244,528,1021,519,797,502,686,486"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a971a97328aa4e052756235e6690602f7" title=" " alt="" coords="1066,254,1196,288"/>
<area shape="poly" title=" " alt="" coords="998,450,1016,440,1050,409,1078,372,1100,334,1115,301,1120,303,1104,337,1082,375,1054,412,1019,444,1000,455"/>
<area shape="rect" href="../../db/d65/sysupgrade_8c.html#a2f25b3ed2b57dbfdd9171d17a0e527c6" title=" " alt="" coords="1249,453,1529,487"/>
<area shape="poly" title=" " alt="" coords="1005,467,1234,467,1234,473,1005,473"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1816,225,1927,259"/>
<area shape="poly" title=" " alt="" coords="1132,254,1141,209,1161,150,1175,119,1193,90,1216,64,1243,42,1282,22,1324,10,1367,4,1410,4,1454,9,1498,19,1584,50,1664,91,1736,135,1796,178,1841,213,1837,217,1793,182,1733,139,1662,95,1582,55,1497,24,1453,14,1410,9,1367,9,1325,15,1284,27,1245,47,1219,67,1198,93,1180,122,1166,152,1146,210,1137,255"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1340,57,1438,91"/>
<area shape="poly" title=" " alt="" coords="1136,253,1150,220,1172,178,1203,135,1243,100,1282,82,1324,73,1325,78,1284,87,1245,104,1207,139,1177,181,1155,222,1141,255"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#adfbec0b532211a1442310392496a45f2" title=" " alt="" coords="1295,114,1483,148"/>
<area shape="poly" title=" " alt="" coords="1142,252,1183,204,1211,178,1243,157,1279,143,1281,147,1245,162,1214,183,1186,208,1146,256"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603" title=" " alt="" coords="1288,172,1491,205"/>
<area shape="poly" title=" " alt="" coords="1169,251,1243,222,1294,207,1295,212,1245,227,1171,256"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed" title=" " alt="" coords="1594,225,1756,259"/>
<area shape="poly" title=" " alt="" coords="1196,265,1578,244,1578,250,1197,271"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#a637cdad6e9e1e5b837c0072ae9b4a1ce" title=" " alt="" coords="1306,281,1472,315"/>
<area shape="poly" title=" " alt="" coords="1196,275,1291,285,1290,290,1196,281"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a9c77c01c21439286a9fdebb814d5b523" title=" " alt="" coords="1298,338,1481,372"/>
<area shape="poly" title=" " alt="" coords="1162,286,1201,306,1245,325,1283,336,1282,341,1243,330,1199,311,1160,291"/>
<area shape="poly" title=" " alt="" coords="1141,288,1155,321,1177,363,1207,405,1246,440,1251,443,1248,448,1242,444,1203,408,1172,365,1150,323,1136,290"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a91a439107e9ff41b6c2b9082b73f1972" title=" " alt="" coords="1244,396,1534,429"/>
<area shape="poly" title=" " alt="" coords="1146,287,1186,336,1214,361,1245,382,1255,387,1253,392,1243,387,1211,365,1182,339,1142,290"/>
<area shape="poly" title=" " alt="" coords="1757,239,1800,239,1800,245,1757,245"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a38fb5688af8a7f3e9eae5c653ed2bb50" title=" " alt="" coords="1582,282,1768,316"/>
<area shape="poly" title=" " alt="" coords="1517,450,1533,440,1545,427,1552,414,1556,385,1561,355,1568,340,1580,325,1583,323,1587,327,1584,329,1573,343,1566,357,1562,386,1557,415,1549,430,1536,444,1520,455"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a856562b4d96007d3ce1a052998451a0f" title=" " alt="" coords="1582,340,1768,373"/>
<area shape="poly" title=" " alt="" coords="1511,450,1533,440,1548,427,1556,413,1565,397,1581,383,1588,378,1590,383,1584,387,1569,401,1561,415,1552,430,1536,444,1514,455"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#af2c32f6db6f49388da60dda520d86c4d" title=" " alt="" coords="1588,397,1762,431"/>
<area shape="poly" title=" " alt="" coords="1480,450,1534,439,1573,432,1574,437,1535,445,1481,455"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a6ee526c7b55debcecad8e34e3e6108d0" title=" " alt="" coords="1594,454,1756,488"/>
<area shape="poly" title=" " alt="" coords="1530,468,1578,468,1578,474,1530,473"/>
<area shape="poly" title=" " alt="" coords="1475,485,1591,509,1590,514,1474,490"/>
<area shape="poly" title=" " alt="" coords="1750,452,1766,441,1801,403,1828,357,1847,312,1860,273,1865,275,1852,314,1833,360,1805,406,1769,445,1753,456"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="1066,592,1196,625"/>
<area shape="poly" title=" " alt="" coords="1007,590,1051,595,1050,601,1006,595"/>
<area shape="rect" href="../../da/d23/list_8h.html#a9d61a1a731a0cf44336e2ee9e45f712d" title=" " alt="" coords="1339,592,1440,625"/>
<area shape="poly" title=" " alt="" coords="1196,606,1323,606,1323,611,1196,611"/>
<area shape="poly" title=" " alt="" coords="413,673,504,656,505,661,414,678"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#aeae1856255dccd537fd19cdda1cba346" title=" " alt="" coords="521,678,710,712"/>
<area shape="poly" title=" " alt="" coords="413,730,505,713,506,718,414,735"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a40e298539d4f4fb3c5ab3317d4c449ff" title=" " alt="" coords="535,736,696,769"/>
<area shape="poly" title=" " alt="" coords="429,748,519,749,519,754,429,754"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a941864296983cb342a79afe55055f8d3" title=" " alt="" coords="831,621,984,655"/>
<area shape="poly" title=" " alt="" coords="704,675,815,653,816,658,705,680"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07" title=" " alt="" coords="809,678,1006,712"/>
<area shape="poly" title=" " alt="" coords="710,693,794,693,794,698,710,698"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a6231184d2f54ac1bc945ecb73c517d91" title=" " alt="" coords="797,736,1018,769"/>
<area shape="poly" title=" " alt="" coords="705,710,803,730,802,735,704,715"/>
<area shape="poly" title=" " alt="" coords="985,675,1017,665,1087,631,1089,636,1019,670,986,680"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a76f33118cba0a358482528fad8c0f4cd" title=" " alt="" coords="1092,678,1170,712"/>
<area shape="poly" title=" " alt="" coords="1006,693,1076,693,1076,698,1006,698"/>
<area shape="rect" href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title=" " alt="" coords="1088,736,1174,769"/>
<area shape="poly" title=" " alt="" coords="1018,750,1073,750,1073,755,1018,755"/>
</map>
</div>

</div>
</div>
<a id="a40e298539d4f4fb3c5ab3317d4c449ff" name="a40e298539d4f4fb3c5ab3317d4c449ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40e298539d4f4fb3c5ab3317d4c449ff">&#9670;&#160;</a></span>watchdog_ping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_ping </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00037">37</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   38</span>{</div>
<div class="line"><span class="lineno">   39</span>    <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(4, <span class="stringliteral">&quot;Ping\n&quot;</span>);</div>
<div class="line"><span class="lineno">   40</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &gt;= 0 &amp;&amp; write(<a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>, <span class="stringliteral">&quot;X&quot;</span>, 1) &lt; 0)</div>
<div class="line"><span class="lineno">   41</span>        <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;WDT failed to write: %m\n&quot;</span>);</div>
<div class="line"><span class="lineno">   42</span>}</div>
<div class="ttc" id="aprocd_2jail_2log_8h_html_a15378cd15bafb3a79061424b452497aa"><div class="ttname"><a href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a></div><div class="ttdeci">#define ERROR(fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">log.h:27</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d12/system-dummy_8c_source.html#l00021">DEBUG</a>, <a class="el" href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">ERROR</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">wdt_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d60/init_8c_source.html#l00121">main()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00044">watchdog_timeout_cb()</a>.</p>

</div>
</div>
<a id="aaed3ec52f2a4e3003e8733a933945fe7" name="aaed3ec52f2a4e3003e8733a933945fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaed3ec52f2a4e3003e8733a933945fe7">&#9670;&#160;</a></span>watchdog_set_cloexec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_set_cloexec </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>val</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00208">208</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  209</span>{</div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &lt; 0)</div>
<div class="line"><span class="lineno">  211</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>    <span class="keywordtype">int</span> flags = fcntl(<a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>, F_GETFD);</div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordflow">if</span> (val)</div>
<div class="line"><span class="lineno">  215</span>        flags |= FD_CLOEXEC;</div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  217</span>        flags &amp;= ~FD_CLOEXEC;</div>
<div class="line"><span class="lineno">  218</span>    fcntl(<a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>, F_SETFD,  flags);</div>
<div class="line"><span class="lineno">  219</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">wdt_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d65/sysupgrade_8c_source.html#l00028">sysupgrade_exec_upgraded()</a>.</p>

</div>
</div>
<a id="a17cc5d8e2a9be6590ae9944c3abf3555" name="a17cc5d8e2a9be6590ae9944c3abf3555"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17cc5d8e2a9be6590ae9944c3abf3555">&#9670;&#160;</a></span>watchdog_set_magicclose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_set_magicclose </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>val</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00127">127</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  128</span>{</div>
<div class="line"><span class="lineno">  129</span>    <a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#ab046fa6a191130ad6ac6ced195af1fed">wdt_magicclose</a> = val;</div>
<div class="line"><span class="lineno">  130</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00035">wdt_magicclose</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>

</div>
</div>
<a id="a441b97e6f07ed2aefef37cd2309adafc" name="a441b97e6f07ed2aefef37cd2309adafc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a441b97e6f07ed2aefef37cd2309adafc">&#9670;&#160;</a></span>watchdog_set_stopped()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_set_stopped </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>val</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00137">137</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  138</span>{</div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">if</span> (val) {</div>
<div class="line"><span class="lineno">  140</span>        <a class="code hl_function" href="../../d1/d08/uloop_8c.html#a6231184d2f54ac1bc945ecb73c517d91">uloop_timeout_cancel</a>(&amp;<a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a>);</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>        <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a5b72bc58af8576da573b81ac0cc51103">watchdog_close</a>(<a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#ab046fa6a191130ad6ac6ced195af1fed">wdt_magicclose</a>);</div>
<div class="line"><span class="lineno">  143</span>    }</div>
<div class="line"><span class="lineno">  144</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  145</span>        <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58">watchdog_open</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  146</span>        <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1">watchdog_set_drv_timeout</a>();</div>
<div class="line"><span class="lineno">  147</span>        <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a5a3159d3f3390614400f8f403c5aac73">watchdog_timeout_cb</a>(&amp;<a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a>);</div>
<div class="line"><span class="lineno">  148</span>    }</div>
<div class="line"><span class="lineno">  149</span>}</div>
<div class="ttc" id="auloop_8c_html_a6231184d2f54ac1bc945ecb73c517d91"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#a6231184d2f54ac1bc945ecb73c517d91">uloop_timeout_cancel</a></div><div class="ttdeci">int uloop_timeout_cancel(struct uloop_timeout *timeout)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00348">uloop.c:348</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a5b72bc58af8576da573b81ac0cc51103"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a5b72bc58af8576da573b81ac0cc51103">watchdog_close</a></div><div class="ttdeci">static void watchdog_close(bool with_release)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00074">watchdog.c:74</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d08/uloop_8c_source.html#l00348">uloop_timeout_cancel()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00074">watchdog_close()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00050">watchdog_open()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00090">watchdog_set_drv_timeout()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00044">watchdog_timeout_cb()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00035">wdt_magicclose</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00031">wdt_timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da3/watchdog_8h_a441b97e6f07ed2aefef37cd2309adafc_cgraph.png" border="0" usemap="#ad9/da3/watchdog_8h_a441b97e6f07ed2aefef37cd2309adafc_cgraph" alt=""/></div>
<map name="ad9/da3/watchdog_8h_a441b97e6f07ed2aefef37cd2309adafc_cgraph" id="ad9/da3/watchdog_8h_a441b97e6f07ed2aefef37cd2309adafc_cgraph">
<area shape="rect" title=" " alt="" coords="5,109,238,143"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a6231184d2f54ac1bc945ecb73c517d91" title=" " alt="" coords="839,17,1060,51"/>
<area shape="poly" title=" " alt="" coords="145,106,206,69,245,51,285,37,355,22,428,12,573,3,709,6,824,15,823,20,708,11,573,9,428,17,356,27,286,42,247,55,209,74,148,111"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a5b72bc58af8576da573b81ac0cc51103" title=" " alt="" coords="336,52,504,86"/>
<area shape="poly" title=" " alt="" coords="212,106,320,85,321,90,213,111"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58" title=" " alt="" coords="337,109,503,143"/>
<area shape="poly" title=" " alt="" coords="238,123,321,123,321,129,238,129"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1" title=" " alt="" coords="286,167,554,200"/>
<area shape="poly" title=" " alt="" coords="213,141,314,161,313,166,212,146"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a5a3159d3f3390614400f8f403c5aac73" title=" " alt="" coords="309,224,531,258"/>
<area shape="poly" title=" " alt="" coords="151,141,212,176,287,210,306,217,304,222,285,215,209,181,148,146"/>
<area shape="rect" href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title=" " alt="" coords="1130,17,1215,51"/>
<area shape="poly" title=" " alt="" coords="1060,31,1114,31,1114,37,1060,37"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae0988579c6b622299ee0f79accbf0779" title=" " alt="" coords="1289,17,1383,51"/>
<area shape="poly" title=" " alt="" coords="1215,31,1273,31,1273,37,1215,37"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#aeae1856255dccd537fd19cdda1cba346" title=" " alt="" coords="602,117,791,151"/>
<area shape="poly" title=" " alt="" coords="520,221,553,210,608,185,656,157,659,162,610,190,555,215,521,226"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a40e298539d4f4fb3c5ab3317d4c449ff" title=" " alt="" coords="616,224,777,258"/>
<area shape="poly" title=" " alt="" coords="531,238,600,238,600,243,531,243"/>
<area shape="poly" title=" " alt="" coords="738,114,838,73,886,54,888,59,840,78,740,119"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a941864296983cb342a79afe55055f8d3" title=" " alt="" coords="873,88,1026,122"/>
<area shape="poly" title=" " alt="" coords="792,120,858,113,859,118,792,126"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07" title=" " alt="" coords="851,145,1048,179"/>
<area shape="poly" title=" " alt="" coords="792,142,836,147,835,152,792,147"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="1108,101,1237,135"/>
<area shape="poly" title=" " alt="" coords="1037,142,1092,131,1093,136,1038,147"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a76f33118cba0a358482528fad8c0f4cd" title=" " alt="" coords="1133,159,1212,192"/>
<area shape="poly" title=" " alt="" coords="1048,165,1118,170,1117,175,1048,171"/>
<area shape="rect" href="../../da/d23/list_8h.html#a9d61a1a731a0cf44336e2ee9e45f712d" title=" " alt="" coords="1285,101,1386,135"/>
<area shape="poly" title=" " alt="" coords="1238,115,1269,115,1269,121,1238,121"/>
</map>
</div>

</div>
</div>
<a id="a9cb0f6cbef0cbe8203eb22795acc9446" name="a9cb0f6cbef0cbe8203eb22795acc9446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cb0f6cbef0cbe8203eb22795acc9446">&#9670;&#160;</a></span>watchdog_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int watchdog_timeout </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00156">156</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  157</span>{</div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>) {</div>
<div class="line"><span class="lineno">  159</span>        <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(4, <span class="stringliteral">&quot;Set watchdog timeout: %ds\n&quot;</span>, <a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>);</div>
<div class="line"><span class="lineno">  160</span>        <a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a83bf8a09effd2597c21fd87a9bae383f">wdt_drv_timeout</a> = <a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &gt;= 0)</div>
<div class="line"><span class="lineno">  163</span>            <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1">watchdog_set_drv_timeout</a>();</div>
<div class="line"><span class="lineno">  164</span>    }</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d88/watchdog_8c.html#a83bf8a09effd2597c21fd87a9bae383f">wdt_drv_timeout</a>;</div>
<div class="line"><span class="lineno">  167</span>}</div>
<div class="ttc" id="aprocd_2ubus_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition</b> <a href="../../de/d89/procd_2ubus_8c_source.html#l00025">ubus.c:25</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a83bf8a09effd2597c21fd87a9bae383f"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a83bf8a09effd2597c21fd87a9bae383f">wdt_drv_timeout</a></div><div class="ttdeci">static int wdt_drv_timeout</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00033">watchdog.c:33</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d12/system-dummy_8c_source.html#l00021">DEBUG</a>, <a class="el" href="../../de/d89/procd_2ubus_8c_source.html#l00025">timeout</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00090">watchdog_set_drv_timeout()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00033">wdt_drv_timeout</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">wdt_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00191">watchdog_init()</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/da3/watchdog_8h_a9cb0f6cbef0cbe8203eb22795acc9446_cgraph.png" border="0" usemap="#ad9/da3/watchdog_8h_a9cb0f6cbef0cbe8203eb22795acc9446_cgraph" alt=""/></div>
<map name="ad9/da3/watchdog_8h_a9cb0f6cbef0cbe8203eb22795acc9446_cgraph" id="ad9/da3/watchdog_8h_a9cb0f6cbef0cbe8203eb22795acc9446_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,197,39"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1" title=" " alt="" coords="245,5,513,39"/>
<area shape="poly" title=" " alt="" coords="197,20,229,20,229,25,197,25"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
