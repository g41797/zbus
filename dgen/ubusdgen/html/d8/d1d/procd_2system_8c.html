<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>zbus: /home/g41797/CLionProjects/github.com/g41797/zbus/src/libs/procd/system.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">zbus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_87a455bccb09a92130c26a11a880c98a.html">libs</a></li><li class="navelem"><a class="el" href="../../dir_63350b749fcf74007a53c7c917c10773.html">procd</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">system.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/utsname.h&gt;</code><br />
<code>#include &lt;sys/ioctl.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/reboot.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;sys/statvfs.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;json-c/json_tokener.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d5/dea/blobmsg__json_8h_source.html">libubox/blobmsg_json.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dc/d56/uloop_8h_source.html">libubox/uloop.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="../../dc/dab/procd_8h_source.html">procd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/dd1/sysupgrade_8h_source.html">sysupgrade.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/da3/watchdog_8h_source.html">watchdog.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d83/service_8h_source.html">service/service.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for system.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d66/procd_2system_8c__incl.png" border="0" usemap="#a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2system_8c" alt=""/></div>
<map name="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2system_8c" id="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2system_8c">
<area shape="rect" title=" " alt="" coords="774,5,1061,85"/>
<area shape="rect" title=" " alt="" coords="5,133,163,167"/>
<area shape="poly" title=" " alt="" coords="774,64,502,94,178,135,178,130,501,88,773,58"/>
<area shape="rect" title=" " alt="" coords="187,133,301,167"/>
<area shape="poly" title=" " alt="" coords="774,68,560,98,320,136,317,136,316,131,320,130,559,92,774,62"/>
<area shape="rect" title=" " alt="" coords="707,541,834,575"/>
<area shape="poly" title=" " alt="" coords="774,70,656,98,608,115,576,135,560,156,553,177,552,230,552,396,556,422,565,445,580,465,600,483,646,513,696,534,694,538,644,517,596,487,576,469,561,447,550,423,547,396,547,230,547,176,555,154,573,131,605,110,654,93,773,65"/>
<area shape="rect" title=" " alt="" coords="376,133,512,167"/>
<area shape="poly" title=" " alt="" coords="775,80,528,133,527,128,773,75"/>
<area shape="rect" title=" " alt="" coords="430,541,541,575"/>
<area shape="poly" title=" " alt="" coords="774,54,658,63,538,78,433,102,394,117,366,135,348,156,342,177,341,230,341,396,344,418,351,439,376,476,409,507,443,531,440,535,405,511,372,479,346,441,339,419,336,396,336,230,336,176,344,153,362,131,391,112,432,96,537,73,657,57,774,49"/>
<area shape="rect" title=" " alt="" coords="586,133,726,167"/>
<area shape="poly" title=" " alt="" coords="818,88,712,130,710,125,816,83"/>
<area shape="rect" title=" " alt="" coords="749,133,830,167"/>
<area shape="poly" title=" " alt="" coords="870,88,822,126,819,121,867,84"/>
<area shape="rect" title=" " alt="" coords="954,378,1049,412"/>
<area shape="poly" title=" " alt="" coords="929,85,996,362,991,363,924,86"/>
<area shape="rect" title=" " alt="" coords="858,541,955,575"/>
<area shape="poly" title=" " alt="" coords="912,86,882,248,867,353,856,460,854,477,856,493,866,511,879,528,875,532,861,514,851,494,848,477,851,459,862,353,877,248,907,85"/>
<area shape="rect" title=" " alt="" coords="866,460,956,493"/>
<area shape="poly" title=" " alt="" coords="903,86,880,153,872,191,869,230,869,314,872,350,880,385,900,444,895,446,875,386,867,351,864,315,864,230,867,191,875,152,898,85"/>
<area shape="rect" title=" " alt="" coords="1006,133,1221,167"/>
<area shape="poly" title=" " alt="" coords="994,83,1071,123,1068,128,991,88"/>
<area shape="rect" href="../../d5/dea/blobmsg__json_8h.html" title=" " alt="" coords="1852,215,2092,248"/>
<area shape="poly" title=" " alt="" coords="1061,54,1140,65,1226,80,1315,102,1400,131,1415,139,1426,148,1436,157,1450,164,1837,211,1836,217,1449,169,1433,161,1422,152,1412,143,1398,135,1313,107,1225,85,1139,70,1061,60"/>
<area shape="rect" href="../../dc/d56/uloop_8h.html" title=" " alt="" coords="1057,296,1221,330"/>
<area shape="poly" title=" " alt="" coords="1062,66,1116,78,1167,93,1209,111,1235,131,1247,154,1243,171,1229,182,1208,189,1161,200,1142,207,1130,216,1124,231,1122,248,1129,281,1123,282,1117,248,1119,230,1126,213,1139,202,1160,195,1207,184,1227,177,1239,168,1242,155,1231,135,1206,115,1165,98,1115,83,1060,71"/>
<area shape="rect" href="../../dc/dab/procd_8h.html" title=" " alt="" coords="1296,133,1387,167"/>
<area shape="poly" title=" " alt="" coords="1062,78,1278,130,1281,131,1280,136,1277,136,1060,84"/>
<area shape="rect" href="../../db/dd1/sysupgrade_8h.html" title=" " alt="" coords="1462,133,1610,167"/>
<area shape="poly" title=" " alt="" coords="1062,67,1443,130,1447,131,1446,136,1442,136,1061,73"/>
<area shape="rect" href="../../d9/da3/watchdog_8h.html" title=" " alt="" coords="2186,296,2315,330"/>
<area shape="poly" title=" " alt="" coords="1061,46,1338,52,1675,66,1843,77,1998,91,2131,109,2231,130,2280,143,2320,155,2353,175,2384,213,2389,226,2389,239,2376,261,2351,279,2322,293,2319,288,2349,274,2372,257,2383,238,2384,227,2379,216,2350,179,2318,160,2279,148,2230,136,2130,114,1998,97,1843,83,1675,72,1337,57,1061,51"/>
<area shape="rect" href="../../d5/d83/service_8h.html" title=" " alt="" coords="2041,133,2218,167"/>
<area shape="poly" title=" " alt="" coords="1061,56,2025,137,2025,142,1061,61"/>
<area shape="rect" title=" " alt="" coords="1673,541,1780,575"/>
<area shape="poly" title=" " alt="" coords="1975,248,1974,296,1965,363,1956,399,1943,434,1925,467,1901,495,1877,514,1851,528,1797,547,1795,542,1849,523,1874,509,1897,491,1920,464,1938,431,1951,397,1960,362,1969,296,1970,248"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html" title=" " alt="" coords="1448,296,1568,330"/>
<area shape="poly" title=" " alt="" coords="1878,252,1583,302,1583,296,1877,246"/>
<area shape="rect" title=" " alt="" coords="1398,378,1496,412"/>
<area shape="poly" title=" " alt="" coords="1498,332,1470,367,1466,364,1493,329"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html" title=" " alt="" coords="1520,378,1600,412"/>
<area shape="poly" title=" " alt="" coords="1521,329,1543,363,1539,366,1516,332"/>
<area shape="poly" title=" " alt="" coords="1520,412,1509,414,1373,436,1266,444,1159,450,1022,462,972,469,971,464,1021,457,1158,445,1265,439,1372,431,1507,409,1519,406"/>
<area shape="poly" title=" " alt="" coords="1564,412,1572,451,1580,473,1593,492,1624,517,1660,535,1657,540,1621,522,1589,495,1575,475,1567,453,1559,413"/>
<area shape="rect" title=" " alt="" coords="1226,541,1318,575"/>
<area shape="poly" title=" " alt="" coords="1533,414,1316,536,1313,531,1530,410"/>
<area shape="rect" title=" " alt="" coords="1603,460,1688,493"/>
<area shape="poly" title=" " alt="" coords="1579,410,1619,447,1615,451,1575,414"/>
<area shape="rect" href="../../d5/d1d/libubox_2utils_8h.html" title=" " alt="" coords="1033,460,1111,493"/>
<area shape="poly" title=" " alt="" coords="1520,411,1509,414,1403,435,1298,451,1127,472,1126,467,1297,446,1402,430,1507,409,1519,406"/>
<area shape="poly" title=" " alt="" coords="1033,491,1015,496,848,540,847,534,1014,491,1032,486"/>
<area shape="poly" title=" " alt="" coords="1033,487,968,496,557,551,556,545,968,491,1032,481"/>
<area shape="poly" title=" " alt="" coords="1040,496,955,537,952,532,1037,491"/>
<area shape="poly" title=" " alt="" coords="1112,480,1658,546,1657,551,1111,485"/>
<area shape="poly" title=" " alt="" coords="1112,491,1218,533,1216,538,1111,496"/>
<area shape="rect" title=" " alt="" coords="1084,541,1201,575"/>
<area shape="poly" title=" " alt="" coords="1088,492,1120,528,1116,531,1084,496"/>
<area shape="rect" title=" " alt="" coords="980,541,1060,575"/>
<area shape="poly" title=" " alt="" coords="1064,495,1041,530,1037,527,1059,492"/>
<area shape="poly" title=" " alt="" coords="1131,332,1106,366,1069,411,1023,457,969,496,910,523,850,542,848,537,908,518,967,491,1019,453,1065,407,1102,363,1126,329"/>
<area shape="poly" title=" " alt="" coords="1112,333,1044,372,1041,368,1110,328"/>
<area shape="poly" title=" " alt="" coords="1177,328,1568,491,1672,533,1670,538,1566,496,1175,333"/>
<area shape="poly" title=" " alt="" coords="1150,329,1259,527,1254,530,1145,332"/>
<area shape="poly" title=" " alt="" coords="1142,330,1145,526,1139,526,1136,330"/>
<area shape="rect" href="../../da/d23/list_8h.html" title=" " alt="" coords="1743,378,1809,412"/>
<area shape="poly" title=" " alt="" coords="1222,322,1728,385,1727,390,1221,327"/>
<area shape="poly" title=" " alt="" coords="1772,413,1755,460,1736,527,1731,526,1749,459,1767,411"/>
<area shape="rect" title=" " alt="" coords="1764,460,1860,493"/>
<area shape="poly" title=" " alt="" coords="1786,411,1801,444,1796,446,1781,413"/>
<area shape="poly" title=" " alt="" coords="1388,162,1394,164,1430,170,1462,171,1521,168,1548,169,1574,175,1600,189,1626,213,1644,240,1657,269,1664,301,1667,334,1664,395,1656,445,1651,444,1659,395,1662,334,1659,302,1652,271,1640,242,1622,216,1597,193,1572,180,1547,174,1521,174,1462,177,1429,176,1393,169,1387,168"/>
<area shape="poly" title=" " alt="" coords="1296,162,1212,185,1162,202,1110,225,1060,254,1014,289,975,330,945,379,940,395,945,410,959,428,977,442,1019,461,1017,465,975,446,956,431,940,413,935,395,940,377,970,327,1010,285,1057,250,1108,221,1160,197,1210,179,1294,157"/>
<area shape="poly" title=" " alt="" coords="1296,166,1204,192,1166,206,1147,217,1139,231,1135,247,1135,281,1130,281,1130,246,1134,229,1143,213,1164,201,1203,187,1295,161"/>
<area shape="rect" href="../../db/d55/libubus_8h.html" title=" " alt="" coords="1505,215,1612,248"/>
<area shape="poly" title=" " alt="" coords="1386,165,1501,206,1499,211,1384,170"/>
<area shape="rect" href="../../de/dd2/udebug_8h.html" title=" " alt="" coords="1157,215,1267,248"/>
<area shape="poly" title=" " alt="" coords="1317,169,1252,209,1250,204,1314,165"/>
<area shape="rect" title=" " alt="" coords="1291,215,1389,248"/>
<area shape="poly" title=" " alt="" coords="1344,167,1343,199,1338,199,1338,167"/>
<area shape="rect" href="../../d9/d1e/procd_2log_8h.html" title=" " alt="" coords="1413,215,1480,248"/>
<area shape="poly" title=" " alt="" coords="1364,165,1415,203,1412,207,1361,169"/>
<area shape="poly" title=" " alt="" coords="1551,250,1529,285,1524,282,1546,247"/>
<area shape="poly" title=" " alt="" coords="1516,251,1476,271,1438,298,1386,356,1343,419,1310,480,1287,528,1282,526,1305,477,1339,416,1382,352,1434,294,1473,266,1514,246"/>
<area shape="poly" title=" " alt="" coords="1505,248,1493,251,1237,298,1236,293,1491,246,1504,243"/>
<area shape="poly" title=" " alt="" coords="1582,247,1744,366,1741,371,1579,251"/>
<area shape="rect" href="../../d3/d51/avl_8h.html" title=" " alt="" coords="1814,296,1954,330"/>
<area shape="poly" title=" " alt="" coords="1613,243,1804,290,1803,295,1612,249"/>
<area shape="poly" title=" " alt="" coords="1891,330,1896,363,1899,406,1893,452,1886,474,1874,495,1858,513,1839,527,1797,546,1794,541,1836,522,1855,509,1870,492,1881,472,1888,451,1893,406,1891,364,1885,331"/>
<area shape="poly" title=" " alt="" coords="1864,333,1812,371,1809,366,1861,328"/>
<area shape="poly" title=" " alt="" coords="1879,332,1828,446,1823,444,1874,329"/>
<area shape="poly" title=" " alt="" coords="1157,251,1102,272,1045,299,1005,324,966,354,894,418,836,481,794,531,790,527,832,477,891,415,962,350,1002,320,1043,294,1100,267,1155,246"/>
<area shape="poly" title=" " alt="" coords="1237,247,1412,367,1409,371,1234,251"/>
<area shape="poly" title=" " alt="" coords="1221,248,1236,296,1259,423,1272,525,1267,526,1254,423,1231,297,1216,250"/>
<area shape="poly" title=" " alt="" coords="1199,251,1166,286,1162,283,1195,247"/>
<area shape="poly" title=" " alt="" coords="1247,246,1348,292,1437,327,1516,348,1595,365,1728,385,1727,391,1594,370,1514,354,1435,333,1346,297,1245,251"/>
<area shape="poly" title=" " alt="" coords="1268,244,1279,246,1421,267,1563,283,1798,304,1798,309,1563,288,1420,272,1278,251,1267,249"/>
<area shape="poly" title=" " alt="" coords="2237,332,2146,411,2082,457,2012,496,1957,517,1900,533,1796,552,1795,547,1899,528,1955,512,2010,491,2079,452,2143,407,2233,328"/>
<area shape="poly" title=" " alt="" coords="2133,168,2128,209,2120,231,2106,250,2087,265,2067,275,2029,284,1990,282,1952,275,1915,268,1877,266,1840,274,1822,284,1803,298,1792,312,1785,328,1778,363,1773,362,1780,327,1788,309,1799,294,1819,279,1838,269,1877,260,1915,262,1953,270,1991,277,2028,279,2065,270,2084,261,2102,246,2115,229,2123,208,2127,167"/>
<area shape="poly" title=" " alt="" coords="2142,166,2158,206,2159,229,2150,250,2122,270,2077,285,1970,305,1969,300,2075,280,2119,265,2146,247,2154,228,2152,207,2137,168"/>
<area shape="rect" href="../../dd/d1d/vlist_8h.html" title=" " alt="" coords="2218,215,2369,248"/>
<area shape="poly" title=" " alt="" coords="2164,165,2248,205,2245,210,2161,170"/>
<area shape="rect" href="../../d9/d4d/procd_2utils_2utils_8h.html" title=" " alt="" coords="1687,215,1828,248"/>
<area shape="poly" title=" " alt="" coords="2054,170,1844,215,1843,209,2053,165"/>
<area shape="poly" title=" " alt="" coords="2218,250,1970,298,1969,293,2217,245"/>
<area shape="poly" title=" " alt="" coords="1708,251,1574,294,1572,289,1706,246"/>
<area shape="poly" title=" " alt="" coords="1739,251,1593,370,1590,366,1736,247"/>
<area shape="poly" title=" " alt="" coords="1784,247,1847,286,1844,290,1782,251"/>
</map>
</div>
</div>
<p><a href="../../d8/d1d/procd_2system_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a37b14f2a457d8d58a8c857b0d8bdb5cf" id="r_a37b14f2a457d8d58a8c857b0d8bdb5cf"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a> { <a class="el" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb">VJSON_ERROR</a>
, <a class="el" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfad12804dc870d3fb5e1b0d28a252e3f74">VJSON_CONTINUE</a>
, <a class="el" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfa2dfac29cc5f20e29835881399b63a4b9">VJSON_SUCCESS</a>
 }</td></tr>
<tr class="separator:a37b14f2a457d8d58a8c857b0d8bdb5cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b4213b1f9d54da7c7e36bde32fc7c80" id="r_a4b4213b1f9d54da7c7e36bde32fc7c80"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="#a4b4213b1f9d54da7c7e36bde32fc7c80a5d7a644c9a0129e165f67cfaa2985fb3">WDT_FREQUENCY</a>
, <a class="el" href="#a4b4213b1f9d54da7c7e36bde32fc7c80ad1bf507acb7ed3315e1c8e5aab875b30">WDT_TIMEOUT</a>
, <a class="el" href="#a4b4213b1f9d54da7c7e36bde32fc7c80aeabaceb3971c2f35bcea085b09b0820d">WDT_MAGICCLOSE</a>
, <a class="el" href="#a4b4213b1f9d54da7c7e36bde32fc7c80acf74482596b6b7bff085a4398c28feeb">WDT_STOP</a>
, <br />
&#160;&#160;<a class="el" href="#a4b4213b1f9d54da7c7e36bde32fc7c80a888c2b2f926dd541677758f38a333bc7">__WDT_MAX</a>
<br />
 }</td></tr>
<tr class="separator:a4b4213b1f9d54da7c7e36bde32fc7c80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa491173a6b1628f4ff82067b2e1ceaa9" id="r_aa491173a6b1628f4ff82067b2e1ceaa9"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="#aa491173a6b1628f4ff82067b2e1ceaa9a0b6e012eb7381b509358c1d189b788f5">SIGNAL_PID</a>
, <a class="el" href="#aa491173a6b1628f4ff82067b2e1ceaa9a713800d76f77ca845d56e3ee69fd0b84">SIGNAL_NUM</a>
, <a class="el" href="#aa491173a6b1628f4ff82067b2e1ceaa9aea1000087187314b530f0ed34970a4a9">__SIGNAL_MAX</a>
 }</td></tr>
<tr class="separator:aa491173a6b1628f4ff82067b2e1ceaa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3babbf89cae9b856a12864a41506efbd" id="r_a3babbf89cae9b856a12864a41506efbd"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="#a3babbf89cae9b856a12864a41506efbda2b93c76e6b03e8bec28afefe65f06c82">VALIDATE_FIRMWARE_IMAGE_PATH</a>
, <a class="el" href="#a3babbf89cae9b856a12864a41506efbda85c02d6607283362170aa5374d01c903">__VALIDATE_FIRMWARE_IMAGE_MAX</a>
 }</td></tr>
<tr class="separator:a3babbf89cae9b856a12864a41506efbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa57e16cd48de3b9a989056ff8df26f84" id="r_aa57e16cd48de3b9a989056ff8df26f84"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="#aa57e16cd48de3b9a989056ff8df26f84aecf07f19495a7d89ae380803cae97557">SYSUPGRADE_PATH</a>
, <a class="el" href="#aa57e16cd48de3b9a989056ff8df26f84aee73114f6762d420874b85f2275283e0">SYSUPGRADE_FORCE</a>
, <a class="el" href="#aa57e16cd48de3b9a989056ff8df26f84a0e4256eca723c8d05cb9ce33a09991c4">SYSUPGRADE_BACKUP</a>
, <a class="el" href="#aa57e16cd48de3b9a989056ff8df26f84ad4a0316f464ea73c347dab5c826866d5">SYSUPGRADE_PREFIX</a>
, <br />
&#160;&#160;<a class="el" href="#aa57e16cd48de3b9a989056ff8df26f84add0332b3083ec16ddf04e8729cc75fde">SYSUPGRADE_COMMAND</a>
, <a class="el" href="#aa57e16cd48de3b9a989056ff8df26f84ab99b1085b4d7dcbf8a6c6489a59c625d">SYSUPGRADE_OPTIONS</a>
, <a class="el" href="#aa57e16cd48de3b9a989056ff8df26f84ad472358e502d3158f0115e36923dabf4">__SYSUPGRADE_MAX</a>
<br />
 }</td></tr>
<tr class="separator:aa57e16cd48de3b9a989056ff8df26f84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1728f56060bd8af8a310528a54e86843" id="r_a1728f56060bd8af8a310528a54e86843"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1728f56060bd8af8a310528a54e86843">system_rootfs_type</a> (void)</td></tr>
<tr class="separator:a1728f56060bd8af8a310528a54e86843"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b0c56f2aad9be40439f08c6b9d7407d" id="r_a1b0c56f2aad9be40439f08c6b9d7407d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b0c56f2aad9be40439f08c6b9d7407d">system_board</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *obj, struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *req, const char *method, struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *msg)</td></tr>
<tr class="separator:a1b0c56f2aad9be40439f08c6b9d7407d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a685076f24da40876ce566cc25b48a68d" id="r_a685076f24da40876ce566cc25b48a68d"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a685076f24da40876ce566cc25b48a68d">kscale</a> (unsigned long <a class="el" href="../../d1/ddb/jshn_8c.html#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, unsigned long bs)</td></tr>
<tr class="separator:a685076f24da40876ce566cc25b48a68d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e16c193b6021498dee2b3a854b60ffa" id="r_a5e16c193b6021498dee2b3a854b60ffa"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e16c193b6021498dee2b3a854b60ffa">system_info</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *obj, struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *req, const char *method, struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *msg)</td></tr>
<tr class="separator:a5e16c193b6021498dee2b3a854b60ffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7021c7b54efb1e1c02aa12bbc0bdfb11" id="r_a7021c7b54efb1e1c02aa12bbc0bdfb11"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7021c7b54efb1e1c02aa12bbc0bdfb11">system_reboot</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *obj, struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *req, const char *method, struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *msg)</td></tr>
<tr class="separator:a7021c7b54efb1e1c02aa12bbc0bdfb11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d2a3a8b57f72aac47833e7098d65716" id="r_a7d2a3a8b57f72aac47833e7098d65716"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d2a3a8b57f72aac47833e7098d65716">watchdog_set</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *obj, struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *req, const char *method, struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *msg)</td></tr>
<tr class="separator:a7d2a3a8b57f72aac47833e7098d65716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefcddf37def5f4c154117f1294068488" id="r_aefcddf37def5f4c154117f1294068488"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aefcddf37def5f4c154117f1294068488">proc_signal</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *obj, struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *req, const char *method, struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *msg)</td></tr>
<tr class="separator:aefcddf37def5f4c154117f1294068488"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85b8182750276969e81fe38de2f14287" id="r_a85b8182750276969e81fe38de2f14287"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a85b8182750276969e81fe38de2f14287">__attribute__</a> ((format(printf, 2, 3)))</td></tr>
<tr class="separator:a85b8182750276969e81fe38de2f14287"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7adddfeb0bc82cc5f816ab7f5b7635d2" id="r_a7adddfeb0bc82cc5f816ab7f5b7635d2"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7adddfeb0bc82cc5f816ab7f5b7635d2">vjson_parse_token</a> (json_tokener *tok, char *<a class="el" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>, ssize_t len, char **<a class="el" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>)</td></tr>
<tr class="separator:a7adddfeb0bc82cc5f816ab7f5b7635d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16857e064f48c4074ea2492dc5732624" id="r_a16857e064f48c4074ea2492dc5732624"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a16857e064f48c4074ea2492dc5732624">vjson_parse</a> (int fd, char **<a class="el" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>)</td></tr>
<tr class="separator:a16857e064f48c4074ea2492dc5732624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91a439107e9ff41b6c2b9082b73f1972" id="r_a91a439107e9ff41b6c2b9082b73f1972"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91a439107e9ff41b6c2b9082b73f1972">validate_firmware_image_call</a> (const char *file, char **<a class="el" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>)</td></tr>
<tr class="separator:a91a439107e9ff41b6c2b9082b73f1972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a389bc474521bdb3825edcb68f5d77e41" id="r_a389bc474521bdb3825edcb68f5d77e41"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a389bc474521bdb3825edcb68f5d77e41">validate_firmware_image</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *obj, struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *req, const char *method, struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *msg)</td></tr>
<tr class="separator:a389bc474521bdb3825edcb68f5d77e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c77c01c21439286a9fdebb814d5b523" id="r_a9c77c01c21439286a9fdebb814d5b523"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9c77c01c21439286a9fdebb814d5b523">sysupgrade_error</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *req, const char *message)</td></tr>
<tr class="separator:a9c77c01c21439286a9fdebb814d5b523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a971a97328aa4e052756235e6690602f7" id="r_a971a97328aa4e052756235e6690602f7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a971a97328aa4e052756235e6690602f7">sysupgrade</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *obj, struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *req, const char *method, struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *msg)</td></tr>
<tr class="separator:a971a97328aa4e052756235e6690602f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeeaef1cc35e957de75db7c200176df1" id="r_abeeaef1cc35e957de75db7c200176df1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abeeaef1cc35e957de75db7c200176df1">procd_subscribe_cb</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *obj)</td></tr>
<tr class="separator:abeeaef1cc35e957de75db7c200176df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ba30ace623b2eaa613177c452fbdc92" id="r_a9ba30ace623b2eaa613177c452fbdc92"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9ba30ace623b2eaa613177c452fbdc92">procd_bcast_event</a> (char *event, struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *msg)</td></tr>
<tr class="separator:a9ba30ace623b2eaa613177c452fbdc92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85e2e12a800605fd650000d7d85cee98" id="r_a85e2e12a800605fd650000d7d85cee98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a85e2e12a800605fd650000d7d85cee98">ubus_init_system</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>)</td></tr>
<tr class="separator:a85e2e12a800605fd650000d7d85cee98"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8f565d46decc2d5d8ac81923ceec43fd" id="r_a8f565d46decc2d5d8ac81923ceec43fd"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d3c/blob_8h.html#d3/dcb/structblob__buf">blob_buf</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a></td></tr>
<tr class="separator:a8f565d46decc2d5d8ac81923ceec43fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c17ea8bcc28c91e490e1112d5348541" id="r_a6c17ea8bcc28c91e490e1112d5348541"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c17ea8bcc28c91e490e1112d5348541">notify</a></td></tr>
<tr class="separator:a6c17ea8bcc28c91e490e1112d5348541"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af85a8208a05e85268c56cc20ca9fa894" id="r_af85a8208a05e85268c56cc20ca9fa894"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af85a8208a05e85268c56cc20ca9fa894">_ctx</a></td></tr>
<tr class="separator:af85a8208a05e85268c56cc20ca9fa894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac27bf7208ee9ade15186848187be3f15" id="r_ac27bf7208ee9ade15186848187be3f15"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac27bf7208ee9ade15186848187be3f15">initramfs</a></td></tr>
<tr class="separator:ac27bf7208ee9ade15186848187be3f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee87538e9d304b68e883653f62dd19cb" id="r_aee87538e9d304b68e883653f62dd19cb"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/dad/blobmsg_8h.html#d3/d4d/structblobmsg__policy">blobmsg_policy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aee87538e9d304b68e883653f62dd19cb">watchdog_policy</a> [<a class="el" href="#a4b4213b1f9d54da7c7e36bde32fc7c80a888c2b2f926dd541677758f38a333bc7">__WDT_MAX</a>]</td></tr>
<tr class="separator:aee87538e9d304b68e883653f62dd19cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a962a736c58860d8a979277528ef9096e" id="r_a962a736c58860d8a979277528ef9096e"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/dad/blobmsg_8h.html#d3/d4d/structblobmsg__policy">blobmsg_policy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a962a736c58860d8a979277528ef9096e">signal_policy</a> [<a class="el" href="#aa491173a6b1628f4ff82067b2e1ceaa9aea1000087187314b530f0ed34970a4a9">__SIGNAL_MAX</a>]</td></tr>
<tr class="separator:a962a736c58860d8a979277528ef9096e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45928dbe4e9a632c1e09fde8dea6b6f2" id="r_a45928dbe4e9a632c1e09fde8dea6b6f2"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/dad/blobmsg_8h.html#d3/d4d/structblobmsg__policy">blobmsg_policy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a45928dbe4e9a632c1e09fde8dea6b6f2">validate_firmware_image_policy</a> [<a class="el" href="#a3babbf89cae9b856a12864a41506efbda85c02d6607283362170aa5374d01c903">__VALIDATE_FIRMWARE_IMAGE_MAX</a>]</td></tr>
<tr class="separator:a45928dbe4e9a632c1e09fde8dea6b6f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8cf62096176a253e423aa32e1550ec2" id="r_ab8cf62096176a253e423aa32e1550ec2"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/dad/blobmsg_8h.html#d3/d4d/structblobmsg__policy">blobmsg_policy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8cf62096176a253e423aa32e1550ec2">sysupgrade_policy</a> [<a class="el" href="#aa57e16cd48de3b9a989056ff8df26f84ad472358e502d3158f0115e36923dabf4">__SYSUPGRADE_MAX</a>]</td></tr>
<tr class="separator:ab8cf62096176a253e423aa32e1550ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79932be4b41ac42a225150cefd236647" id="r_a79932be4b41ac42a225150cefd236647"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d9/d8b/structubus__method">ubus_method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a79932be4b41ac42a225150cefd236647">system_methods</a> []</td></tr>
<tr class="separator:a79932be4b41ac42a225150cefd236647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a971327d354568fef731983b02363fb" id="r_a3a971327d354568fef731983b02363fb"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d4/d66/structubus__object__type">ubus_object_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3a971327d354568fef731983b02363fb">system_object_type</a></td></tr>
<tr class="separator:a3a971327d354568fef731983b02363fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99446f8964fa2f19ca768dfb3c0e83e6" id="r_a99446f8964fa2f19ca768dfb3c0e83e6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a99446f8964fa2f19ca768dfb3c0e83e6">system_object</a></td></tr>
<tr class="separator:a99446f8964fa2f19ca768dfb3c0e83e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a4b4213b1f9d54da7c7e36bde32fc7c80" name="a4b4213b1f9d54da7c7e36bde32fc7c80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b4213b1f9d54da7c7e36bde32fc7c80">&#9670;&#160;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a4b4213b1f9d54da7c7e36bde32fc7c80a5d7a644c9a0129e165f67cfaa2985fb3" name="a4b4213b1f9d54da7c7e36bde32fc7c80a5d7a644c9a0129e165f67cfaa2985fb3"></a>WDT_FREQUENCY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4b4213b1f9d54da7c7e36bde32fc7c80ad1bf507acb7ed3315e1c8e5aab875b30" name="a4b4213b1f9d54da7c7e36bde32fc7c80ad1bf507acb7ed3315e1c8e5aab875b30"></a>WDT_TIMEOUT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4b4213b1f9d54da7c7e36bde32fc7c80aeabaceb3971c2f35bcea085b09b0820d" name="a4b4213b1f9d54da7c7e36bde32fc7c80aeabaceb3971c2f35bcea085b09b0820d"></a>WDT_MAGICCLOSE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4b4213b1f9d54da7c7e36bde32fc7c80acf74482596b6b7bff085a4398c28feeb" name="a4b4213b1f9d54da7c7e36bde32fc7c80acf74482596b6b7bff085a4398c28feeb"></a>WDT_STOP&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4b4213b1f9d54da7c7e36bde32fc7c80a888c2b2f926dd541677758f38a333bc7" name="a4b4213b1f9d54da7c7e36bde32fc7c80a888c2b2f926dd541677758f38a333bc7"></a>__WDT_MAX&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00448">448</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  448</span>     {</div>
<div class="line"><span class="lineno">  449</span>    <a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80a5d7a644c9a0129e165f67cfaa2985fb3">WDT_FREQUENCY</a>,</div>
<div class="line"><span class="lineno">  450</span>    <a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80ad1bf507acb7ed3315e1c8e5aab875b30">WDT_TIMEOUT</a>,</div>
<div class="line"><span class="lineno">  451</span>    <a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80aeabaceb3971c2f35bcea085b09b0820d">WDT_MAGICCLOSE</a>,</div>
<div class="line"><span class="lineno">  452</span>    <a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80acf74482596b6b7bff085a4398c28feeb">WDT_STOP</a>,</div>
<div class="line"><span class="lineno">  453</span>    <a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80a888c2b2f926dd541677758f38a333bc7">__WDT_MAX</a></div>
<div class="line"><span class="lineno">  454</span>};</div>
<div class="ttc" id="aprocd_2system_8c_html_a4b4213b1f9d54da7c7e36bde32fc7c80a5d7a644c9a0129e165f67cfaa2985fb3"><div class="ttname"><a href="#a4b4213b1f9d54da7c7e36bde32fc7c80a5d7a644c9a0129e165f67cfaa2985fb3">WDT_FREQUENCY</a></div><div class="ttdeci">@ WDT_FREQUENCY</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00449">system.c:449</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a4b4213b1f9d54da7c7e36bde32fc7c80a888c2b2f926dd541677758f38a333bc7"><div class="ttname"><a href="#a4b4213b1f9d54da7c7e36bde32fc7c80a888c2b2f926dd541677758f38a333bc7">__WDT_MAX</a></div><div class="ttdeci">@ __WDT_MAX</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00454">system.c:453</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a4b4213b1f9d54da7c7e36bde32fc7c80acf74482596b6b7bff085a4398c28feeb"><div class="ttname"><a href="#a4b4213b1f9d54da7c7e36bde32fc7c80acf74482596b6b7bff085a4398c28feeb">WDT_STOP</a></div><div class="ttdeci">@ WDT_STOP</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00452">system.c:452</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a4b4213b1f9d54da7c7e36bde32fc7c80ad1bf507acb7ed3315e1c8e5aab875b30"><div class="ttname"><a href="#a4b4213b1f9d54da7c7e36bde32fc7c80ad1bf507acb7ed3315e1c8e5aab875b30">WDT_TIMEOUT</a></div><div class="ttdeci">@ WDT_TIMEOUT</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00450">system.c:450</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a4b4213b1f9d54da7c7e36bde32fc7c80aeabaceb3971c2f35bcea085b09b0820d"><div class="ttname"><a href="#a4b4213b1f9d54da7c7e36bde32fc7c80aeabaceb3971c2f35bcea085b09b0820d">WDT_MAGICCLOSE</a></div><div class="ttdeci">@ WDT_MAGICCLOSE</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00451">system.c:451</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa491173a6b1628f4ff82067b2e1ceaa9" name="aa491173a6b1628f4ff82067b2e1ceaa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa491173a6b1628f4ff82067b2e1ceaa9">&#9670;&#160;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa491173a6b1628f4ff82067b2e1ceaa9a0b6e012eb7381b509358c1d189b788f5" name="aa491173a6b1628f4ff82067b2e1ceaa9a0b6e012eb7381b509358c1d189b788f5"></a>SIGNAL_PID&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa491173a6b1628f4ff82067b2e1ceaa9a713800d76f77ca845d56e3ee69fd0b84" name="aa491173a6b1628f4ff82067b2e1ceaa9a713800d76f77ca845d56e3ee69fd0b84"></a>SIGNAL_NUM&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa491173a6b1628f4ff82067b2e1ceaa9aea1000087187314b530f0ed34970a4a9" name="aa491173a6b1628f4ff82067b2e1ceaa9aea1000087187314b530f0ed34970a4a9"></a>__SIGNAL_MAX&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00518">518</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  518</span>     {</div>
<div class="line"><span class="lineno">  519</span>    <a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9a0b6e012eb7381b509358c1d189b788f5">SIGNAL_PID</a>,</div>
<div class="line"><span class="lineno">  520</span>    <a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9a713800d76f77ca845d56e3ee69fd0b84">SIGNAL_NUM</a>,</div>
<div class="line"><span class="lineno">  521</span>    <a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9aea1000087187314b530f0ed34970a4a9">__SIGNAL_MAX</a></div>
<div class="line"><span class="lineno">  522</span>};</div>
<div class="ttc" id="aprocd_2system_8c_html_aa491173a6b1628f4ff82067b2e1ceaa9a0b6e012eb7381b509358c1d189b788f5"><div class="ttname"><a href="#aa491173a6b1628f4ff82067b2e1ceaa9a0b6e012eb7381b509358c1d189b788f5">SIGNAL_PID</a></div><div class="ttdeci">@ SIGNAL_PID</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00519">system.c:519</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_aa491173a6b1628f4ff82067b2e1ceaa9a713800d76f77ca845d56e3ee69fd0b84"><div class="ttname"><a href="#aa491173a6b1628f4ff82067b2e1ceaa9a713800d76f77ca845d56e3ee69fd0b84">SIGNAL_NUM</a></div><div class="ttdeci">@ SIGNAL_NUM</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00520">system.c:520</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_aa491173a6b1628f4ff82067b2e1ceaa9aea1000087187314b530f0ed34970a4a9"><div class="ttname"><a href="#aa491173a6b1628f4ff82067b2e1ceaa9aea1000087187314b530f0ed34970a4a9">__SIGNAL_MAX</a></div><div class="ttdeci">@ __SIGNAL_MAX</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00522">system.c:521</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3babbf89cae9b856a12864a41506efbd" name="a3babbf89cae9b856a12864a41506efbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3babbf89cae9b856a12864a41506efbd">&#9670;&#160;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a3babbf89cae9b856a12864a41506efbda2b93c76e6b03e8bec28afefe65f06c82" name="a3babbf89cae9b856a12864a41506efbda2b93c76e6b03e8bec28afefe65f06c82"></a>VALIDATE_FIRMWARE_IMAGE_PATH&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3babbf89cae9b856a12864a41506efbda85c02d6607283362170aa5374d01c903" name="a3babbf89cae9b856a12864a41506efbda85c02d6607283362170aa5374d01c903"></a>__VALIDATE_FIRMWARE_IMAGE_MAX&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00696">696</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  696</span>     {</div>
<div class="line"><span class="lineno">  697</span>    <a class="code hl_enumvalue" href="#a3babbf89cae9b856a12864a41506efbda2b93c76e6b03e8bec28afefe65f06c82">VALIDATE_FIRMWARE_IMAGE_PATH</a>,</div>
<div class="line"><span class="lineno">  698</span>    <a class="code hl_enumvalue" href="#a3babbf89cae9b856a12864a41506efbda85c02d6607283362170aa5374d01c903">__VALIDATE_FIRMWARE_IMAGE_MAX</a>,</div>
<div class="line"><span class="lineno">  699</span>};</div>
<div class="ttc" id="aprocd_2system_8c_html_a3babbf89cae9b856a12864a41506efbda2b93c76e6b03e8bec28afefe65f06c82"><div class="ttname"><a href="#a3babbf89cae9b856a12864a41506efbda2b93c76e6b03e8bec28afefe65f06c82">VALIDATE_FIRMWARE_IMAGE_PATH</a></div><div class="ttdeci">@ VALIDATE_FIRMWARE_IMAGE_PATH</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00697">system.c:697</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a3babbf89cae9b856a12864a41506efbda85c02d6607283362170aa5374d01c903"><div class="ttname"><a href="#a3babbf89cae9b856a12864a41506efbda85c02d6607283362170aa5374d01c903">__VALIDATE_FIRMWARE_IMAGE_MAX</a></div><div class="ttdeci">@ __VALIDATE_FIRMWARE_IMAGE_MAX</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00698">system.c:698</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa57e16cd48de3b9a989056ff8df26f84" name="aa57e16cd48de3b9a989056ff8df26f84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa57e16cd48de3b9a989056ff8df26f84">&#9670;&#160;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa57e16cd48de3b9a989056ff8df26f84aecf07f19495a7d89ae380803cae97557" name="aa57e16cd48de3b9a989056ff8df26f84aecf07f19495a7d89ae380803cae97557"></a>SYSUPGRADE_PATH&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa57e16cd48de3b9a989056ff8df26f84aee73114f6762d420874b85f2275283e0" name="aa57e16cd48de3b9a989056ff8df26f84aee73114f6762d420874b85f2275283e0"></a>SYSUPGRADE_FORCE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa57e16cd48de3b9a989056ff8df26f84a0e4256eca723c8d05cb9ce33a09991c4" name="aa57e16cd48de3b9a989056ff8df26f84a0e4256eca723c8d05cb9ce33a09991c4"></a>SYSUPGRADE_BACKUP&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa57e16cd48de3b9a989056ff8df26f84ad4a0316f464ea73c347dab5c826866d5" name="aa57e16cd48de3b9a989056ff8df26f84ad4a0316f464ea73c347dab5c826866d5"></a>SYSUPGRADE_PREFIX&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa57e16cd48de3b9a989056ff8df26f84add0332b3083ec16ddf04e8729cc75fde" name="aa57e16cd48de3b9a989056ff8df26f84add0332b3083ec16ddf04e8729cc75fde"></a>SYSUPGRADE_COMMAND&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa57e16cd48de3b9a989056ff8df26f84ab99b1085b4d7dcbf8a6c6489a59c625d" name="aa57e16cd48de3b9a989056ff8df26f84ab99b1085b4d7dcbf8a6c6489a59c625d"></a>SYSUPGRADE_OPTIONS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa57e16cd48de3b9a989056ff8df26f84ad472358e502d3158f0115e36923dabf4" name="aa57e16cd48de3b9a989056ff8df26f84ad472358e502d3158f0115e36923dabf4"></a>__SYSUPGRADE_MAX&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00730">730</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  730</span>     {</div>
<div class="line"><span class="lineno">  731</span>    <a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84aecf07f19495a7d89ae380803cae97557">SYSUPGRADE_PATH</a>,</div>
<div class="line"><span class="lineno">  732</span>    <a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84aee73114f6762d420874b85f2275283e0">SYSUPGRADE_FORCE</a>,</div>
<div class="line"><span class="lineno">  733</span>    <a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84a0e4256eca723c8d05cb9ce33a09991c4">SYSUPGRADE_BACKUP</a>,</div>
<div class="line"><span class="lineno">  734</span>    <a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84ad4a0316f464ea73c347dab5c826866d5">SYSUPGRADE_PREFIX</a>,</div>
<div class="line"><span class="lineno">  735</span>    <a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84add0332b3083ec16ddf04e8729cc75fde">SYSUPGRADE_COMMAND</a>,</div>
<div class="line"><span class="lineno">  736</span>    <a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84ab99b1085b4d7dcbf8a6c6489a59c625d">SYSUPGRADE_OPTIONS</a>,</div>
<div class="line"><span class="lineno">  737</span>    <a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84ad472358e502d3158f0115e36923dabf4">__SYSUPGRADE_MAX</a></div>
<div class="line"><span class="lineno">  738</span>};</div>
<div class="ttc" id="aprocd_2system_8c_html_aa57e16cd48de3b9a989056ff8df26f84a0e4256eca723c8d05cb9ce33a09991c4"><div class="ttname"><a href="#aa57e16cd48de3b9a989056ff8df26f84a0e4256eca723c8d05cb9ce33a09991c4">SYSUPGRADE_BACKUP</a></div><div class="ttdeci">@ SYSUPGRADE_BACKUP</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00733">system.c:733</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_aa57e16cd48de3b9a989056ff8df26f84ab99b1085b4d7dcbf8a6c6489a59c625d"><div class="ttname"><a href="#aa57e16cd48de3b9a989056ff8df26f84ab99b1085b4d7dcbf8a6c6489a59c625d">SYSUPGRADE_OPTIONS</a></div><div class="ttdeci">@ SYSUPGRADE_OPTIONS</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00736">system.c:736</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_aa57e16cd48de3b9a989056ff8df26f84ad472358e502d3158f0115e36923dabf4"><div class="ttname"><a href="#aa57e16cd48de3b9a989056ff8df26f84ad472358e502d3158f0115e36923dabf4">__SYSUPGRADE_MAX</a></div><div class="ttdeci">@ __SYSUPGRADE_MAX</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00738">system.c:737</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_aa57e16cd48de3b9a989056ff8df26f84ad4a0316f464ea73c347dab5c826866d5"><div class="ttname"><a href="#aa57e16cd48de3b9a989056ff8df26f84ad4a0316f464ea73c347dab5c826866d5">SYSUPGRADE_PREFIX</a></div><div class="ttdeci">@ SYSUPGRADE_PREFIX</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00734">system.c:734</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_aa57e16cd48de3b9a989056ff8df26f84add0332b3083ec16ddf04e8729cc75fde"><div class="ttname"><a href="#aa57e16cd48de3b9a989056ff8df26f84add0332b3083ec16ddf04e8729cc75fde">SYSUPGRADE_COMMAND</a></div><div class="ttdeci">@ SYSUPGRADE_COMMAND</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00735">system.c:735</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_aa57e16cd48de3b9a989056ff8df26f84aecf07f19495a7d89ae380803cae97557"><div class="ttname"><a href="#aa57e16cd48de3b9a989056ff8df26f84aecf07f19495a7d89ae380803cae97557">SYSUPGRADE_PATH</a></div><div class="ttdeci">@ SYSUPGRADE_PATH</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00731">system.c:731</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_aa57e16cd48de3b9a989056ff8df26f84aee73114f6762d420874b85f2275283e0"><div class="ttname"><a href="#aa57e16cd48de3b9a989056ff8df26f84aee73114f6762d420874b85f2275283e0">SYSUPGRADE_FORCE</a></div><div class="ttdeci">@ SYSUPGRADE_FORCE</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00732">system.c:732</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a37b14f2a457d8d58a8c857b0d8bdb5cf" name="a37b14f2a457d8d58a8c857b0d8bdb5cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">&#9670;&#160;</a></span>vjson_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb" name="a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb"></a>VJSON_ERROR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a37b14f2a457d8d58a8c857b0d8bdb5cfad12804dc870d3fb5e1b0d28a252e3f74" name="a37b14f2a457d8d58a8c857b0d8bdb5cfad12804dc870d3fb5e1b0d28a252e3f74"></a>VJSON_CONTINUE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a37b14f2a457d8d58a8c857b0d8bdb5cfa2dfac29cc5f20e29835881399b63a4b9" name="a37b14f2a457d8d58a8c857b0d8bdb5cfa2dfac29cc5f20e29835881399b63a4b9"></a>VJSON_SUCCESS&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00043">43</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   43</span>                 {</div>
<div class="line"><span class="lineno">   44</span>    <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb">VJSON_ERROR</a>,</div>
<div class="line"><span class="lineno">   45</span>    <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfad12804dc870d3fb5e1b0d28a252e3f74">VJSON_CONTINUE</a>,</div>
<div class="line"><span class="lineno">   46</span>    <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfa2dfac29cc5f20e29835881399b63a4b9">VJSON_SUCCESS</a>,</div>
<div class="line"><span class="lineno">   47</span>};</div>
<div class="ttc" id="aprocd_2system_8c_html_a37b14f2a457d8d58a8c857b0d8bdb5cfa2dfac29cc5f20e29835881399b63a4b9"><div class="ttname"><a href="#a37b14f2a457d8d58a8c857b0d8bdb5cfa2dfac29cc5f20e29835881399b63a4b9">VJSON_SUCCESS</a></div><div class="ttdeci">@ VJSON_SUCCESS</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00046">system.c:46</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a37b14f2a457d8d58a8c857b0d8bdb5cfad12804dc870d3fb5e1b0d28a252e3f74"><div class="ttname"><a href="#a37b14f2a457d8d58a8c857b0d8bdb5cfad12804dc870d3fb5e1b0d28a252e3f74">VJSON_CONTINUE</a></div><div class="ttdeci">@ VJSON_CONTINUE</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00045">system.c:45</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb"><div class="ttname"><a href="#a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb">VJSON_ERROR</a></div><div class="ttdeci">@ VJSON_ERROR</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00044">system.c:44</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a85b8182750276969e81fe38de2f14287" name="a85b8182750276969e81fe38de2f14287"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b8182750276969e81fe38de2f14287">&#9670;&#160;</a></span>__attribute__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__attribute__ </td>
          <td>(</td>
          <td class="paramtype">(format(printf, 2, 3))</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00547">547</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  549</span>{</div>
<div class="line"><span class="lineno">  550</span>    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>[256] = { 0 };</div>
<div class="line"><span class="lineno">  551</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *pfx = <span class="stringliteral">&quot;Firmware image couldn&#39;t be validated: &quot;</span>;</div>
<div class="line"><span class="lineno">  552</span>    va_list va;</div>
<div class="line"><span class="lineno">  553</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a>;</div>
<div class="line"><span class="lineno">  554</span> </div>
<div class="line"><span class="lineno">  555</span>    <a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a> = snprintf(<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>), <span class="stringliteral">&quot;%s&quot;</span>, pfx);</div>
<div class="line"><span class="lineno">  556</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a> &lt; 0) {</div>
<div class="line"><span class="lineno">  557</span>        *<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a> = <span class="stringliteral">&quot;vjson_error() snprintf failed&quot;</span>;</div>
<div class="line"><span class="lineno">  558</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb">VJSON_ERROR</a>;</div>
<div class="line"><span class="lineno">  559</span>    }</div>
<div class="line"><span class="lineno">  560</span> </div>
<div class="line"><span class="lineno">  561</span>    va_start(va, fmt);</div>
<div class="line"><span class="lineno">  562</span>    <a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a> = vsnprintf(<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>+<a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>)-<a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a>, fmt, va);</div>
<div class="line"><span class="lineno">  563</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a> &lt; 0) {</div>
<div class="line"><span class="lineno">  564</span>        *<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a> = <span class="stringliteral">&quot;vjson_error() vsnprintf failed&quot;</span>;</div>
<div class="line"><span class="lineno">  565</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb">VJSON_ERROR</a>;</div>
<div class="line"><span class="lineno">  566</span>    }</div>
<div class="line"><span class="lineno">  567</span>    va_end(va);</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>    *<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a> = <a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>;</div>
<div class="line"><span class="lineno">  570</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb">VJSON_ERROR</a>;</div>
<div class="line"><span class="lineno">  571</span>}</div>
<div class="ttc" id="amkdev_8c_html_a024e65f7d9664cdc767f51c283fd8353"><div class="ttname"><a href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a></div><div class="ttdeci">static char buf[PATH_MAX]</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d9a/mkdev_8c_source.html#l00034">mkdev.c:34</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a8f565d46decc2d5d8ac81923ceec43fd"><div class="ttname"><a href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a></div><div class="ttdeci">static struct blob_buf b</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00038">system.c:38</a></div></div>
<div class="ttc" id="arcS_8c_html_abf8f2f9d123823e95527a9d26ff031c8"><div class="ttname"><a href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a></div><div class="ttdeci">static struct runqueue q r</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d5c/rcS_8c_source.html#l00036">rcS.c:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00038">b</a>, <a class="el" href="../../d7/d9a/mkdev_8c_source.html#l00034">buf</a>, <a class="el" href="../../d1/d5c/rcS_8c_source.html#l00036">r</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00044">VJSON_ERROR</a>.</p>

</div>
</div>
<a id="a685076f24da40876ce566cc25b48a68d" name="a685076f24da40876ce566cc25b48a68d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a685076f24da40876ce566cc25b48a68d">&#9670;&#160;</a></span>kscale()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long kscale </td>
          <td>(</td>
          <td class="paramtype">unsigned long</td>          <td class="paramname"><span class="paramname"><em>b</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long</td>          <td class="paramname"><span class="paramname"><em>bs</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00327">327</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  328</span>{</div>
<div class="line"><span class="lineno">  329</span>    <span class="keywordflow">return</span> (<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a> * (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) bs + 1024/2) / 1024;</div>
<div class="line"><span class="lineno">  330</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00038">b</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00332">system_info()</a>.</p>

</div>
</div>
<a id="aefcddf37def5f4c154117f1294068488" name="aefcddf37def5f4c154117f1294068488"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefcddf37def5f4c154117f1294068488">&#9670;&#160;</a></span>proc_signal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int proc_signal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *</td>          <td class="paramname"><span class="paramname"><em>req</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00529">529</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  532</span>{</div>
<div class="line"><span class="lineno">  533</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *tb[<a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9aea1000087187314b530f0ed34970a4a9">__SIGNAL_MAX</a>];</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>    <span class="keywordflow">if</span> (!msg)</div>
<div class="line"><span class="lineno">  536</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312a01547e86014c16f5a948f832185ce2e7">UBUS_STATUS_INVALID_ARGUMENT</a>;</div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>    <a class="code hl_function" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed">blobmsg_parse</a>(<a class="code hl_variable" href="#a962a736c58860d8a979277528ef9096e">signal_policy</a>, <a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9aea1000087187314b530f0ed34970a4a9">__SIGNAL_MAX</a>, tb, <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857">blob_data</a>(msg), <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32">blob_len</a>(msg));</div>
<div class="line"><span class="lineno">  539</span>    <span class="keywordflow">if</span> (!tb[<a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9a0b6e012eb7381b509358c1d189b788f5">SIGNAL_PID</a> || !tb[<a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9a713800d76f77ca845d56e3ee69fd0b84">SIGNAL_NUM</a>]])</div>
<div class="line"><span class="lineno">  540</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312a01547e86014c16f5a948f832185ce2e7">UBUS_STATUS_INVALID_ARGUMENT</a>;</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>    kill(<a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a856562b4d96007d3ce1a052998451a0f">blobmsg_get_u32</a>(tb[<a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9a0b6e012eb7381b509358c1d189b788f5">SIGNAL_PID</a>]), <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a856562b4d96007d3ce1a052998451a0f">blobmsg_get_u32</a>(tb[<a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9a713800d76f77ca845d56e3ee69fd0b84">SIGNAL_NUM</a>]));</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  545</span>}</div>
<div class="ttc" id="ablob_8h_html_a66e0b636bd2bbafbf8701a1e91bbf857"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857">blob_data</a></div><div class="ttdeci">static void * blob_data(const struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00075">blob.h:75</a></div></div>
<div class="ttc" id="ablob_8h_html_a9921d2b89577d3344abbb66f24773e32"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32">blob_len</a></div><div class="ttdeci">static size_t blob_len(const struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00100">blob.h:100</a></div></div>
<div class="ttc" id="ablob_8h_html_dc/dd9/structblob__attr"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a></div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00052">blob.h:52</a></div></div>
<div class="ttc" id="ablobmsg_8c_html_afb56b36905412b6618a529c171e833ed"><div class="ttname"><a href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed">blobmsg_parse</a></div><div class="ttdeci">int blobmsg_parse(const struct blobmsg_policy *policy, int policy_len, struct blob_attr **tb, void *data, unsigned int len)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d30/blobmsg_8c_source.html#l00166">blobmsg.c:166</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a856562b4d96007d3ce1a052998451a0f"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a856562b4d96007d3ce1a052998451a0f">blobmsg_get_u32</a></div><div class="ttdeci">static uint32_t blobmsg_get_u32(struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00293">blobmsg.h:293</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a962a736c58860d8a979277528ef9096e"><div class="ttname"><a href="#a962a736c58860d8a979277528ef9096e">signal_policy</a></div><div class="ttdeci">static const struct blobmsg_policy signal_policy[__SIGNAL_MAX]</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00524">system.c:524</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a99bec0c168a4d5ac338ad787dfb73312a01547e86014c16f5a948f832185ce2e7"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312a01547e86014c16f5a948f832185ce2e7">UBUS_STATUS_INVALID_ARGUMENT</a></div><div class="ttdeci">@ UBUS_STATUS_INVALID_ARGUMENT</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00121">ubusmsg.h:121</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00521">__SIGNAL_MAX</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00075">blob_data()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00100">blob_len()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00293">blobmsg_get_u32()</a>, <a class="el" href="../../d1/d30/blobmsg_8c_source.html#l00166">blobmsg_parse()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00520">SIGNAL_NUM</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00519">SIGNAL_PID</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00524">signal_policy</a>, and <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00121">UBUS_STATUS_INVALID_ARGUMENT</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_aefcddf37def5f4c154117f1294068488_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_aefcddf37def5f4c154117f1294068488_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_aefcddf37def5f4c154117f1294068488_cgraph" id="ad8/d1d/procd_2system_8c_aefcddf37def5f4c154117f1294068488_cgraph">
<area shape="rect" title=" " alt="" coords="5,193,131,226"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1193,126,1304,160"/>
<area shape="poly" title=" " alt="" coords="88,190,154,140,254,78,314,49,377,25,443,9,509,3,794,3,853,6,912,15,1026,45,1126,82,1201,116,1199,121,1124,87,1024,50,911,20,852,11,794,8,509,8,443,14,378,30,316,54,257,82,157,144,91,194"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="980,181,1079,214"/>
<area shape="poly" title=" " alt="" coords="123,189,261,153,354,134,457,117,567,106,681,103,795,110,906,129,952,147,993,169,990,174,950,152,905,135,795,115,681,108,567,111,457,122,355,139,263,158,124,195"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a856562b4d96007d3ce1a052998451a0f" title=" " alt="" coords="418,531,603,565"/>
<area shape="poly" title=" " alt="" coords="78,226,91,261,113,308,143,357,181,402,235,445,296,479,359,505,417,524,415,529,357,510,294,484,232,449,177,406,139,361,109,310,87,263,73,228"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed" title=" " alt="" coords="179,358,341,392"/>
<area shape="poly" title=" " alt="" coords="91,225,229,346,226,350,87,229"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="954,391,1105,425"/>
<area shape="poly" title=" " alt="" coords="603,535,747,512,827,493,905,469,947,451,986,431,989,435,950,456,907,475,828,498,748,517,604,541"/>
<area shape="poly" title=" " alt="" coords="1043,389,1221,170,1225,174,1047,392"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a673de80167cf18faad1b4a21670d0cf3" title=" " alt="" coords="1158,447,1339,481"/>
<area shape="poly" title=" " alt="" coords="1099,423,1166,440,1164,445,1097,428"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ac239a83ed3c7f835e2b49f785953c934" title=" " alt="" coords="1163,309,1333,342"/>
<area shape="poly" title=" " alt="" coords="1075,388,1186,346,1188,351,1077,393"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a7613e130753e766f5d381c06b1f7b86f" title=" " alt="" coords="1153,390,1343,424"/>
<area shape="poly" title=" " alt="" coords="1106,405,1137,405,1137,410,1106,410"/>
<area shape="poly" title=" " alt="" coords="280,355,343,306,438,242,494,208,554,177,616,150,680,129,747,115,816,107,886,103,954,104,1079,113,1178,127,1177,132,1078,118,953,109,886,108,816,112,748,120,681,135,618,155,556,182,496,213,441,246,346,311,283,360"/>
<area shape="poly" title=" " alt="" coords="268,391,282,431,307,483,342,535,365,557,390,575,443,600,498,617,555,629,614,635,672,635,731,631,847,613,957,584,1055,550,1137,515,1199,486,1202,491,1139,520,1057,555,958,589,848,618,732,637,673,640,613,640,555,634,497,623,441,605,388,580,361,561,338,539,302,486,277,433,263,393"/>
<area shape="poly" title=" " alt="" coords="298,390,342,408,390,424,532,460,645,477,759,479,905,469,1042,450,1163,425,1164,430,1043,456,906,475,759,485,644,483,531,465,388,429,340,413,296,394"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac79cacbc6a47f754832dc10bafa3b761" title=" " alt="" coords="749,426,837,460"/>
<area shape="poly" title=" " alt="" coords="342,382,734,433,733,438,341,388"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5a5283071ac5677652515d9a8460e655" title=" " alt="" coords="389,317,632,350"/>
<area shape="poly" title=" " alt="" coords="341,359,389,351,390,356,342,364"/>
<area shape="poly" title=" " alt="" coords="608,348,681,360,939,395,938,400,680,365,608,353"/>
<area shape="poly" title=" " alt="" coords="550,348,681,404,736,423,734,428,679,409,548,353"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6b6c429265d86411d05951d2fae7289a" title=" " alt="" coords="706,202,880,236"/>
<area shape="poly" title=" " alt="" coords="540,314,603,279,679,244,698,238,699,243,681,249,605,284,542,318"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="722,259,864,293"/>
<area shape="poly" title=" " alt="" coords="597,313,707,291,708,296,598,319"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a131936c081164c18e6241d79f3b276d1" title=" " alt="" coords="680,317,906,350"/>
<area shape="poly" title=" " alt="" coords="633,331,665,331,665,336,633,336"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a065ed993444c3173838a480ba4aac052" title=" " alt="" coords="699,145,887,178"/>
<area shape="poly" title=" " alt="" coords="525,314,588,252,631,217,679,187,690,182,693,187,682,192,634,221,591,256,529,318"/>
<area shape="poly" title=" " alt="" coords="864,258,905,245,975,218,977,223,907,251,865,263"/>
<area shape="poly" title=" " alt="" coords="868,313,905,303,1006,268,1104,224,1206,166,1209,171,1106,229,1008,273,906,308,870,319"/>
<area shape="poly" title=" " alt="" coords="885,314,904,303,920,287,928,269,936,251,952,231,968,220,971,224,955,235,941,254,933,272,925,290,907,307,888,318"/>
<area shape="poly" title=" " alt="" coords="819,348,890,398,927,421,955,435,1001,448,1049,457,1142,464,1142,469,1049,462,1000,453,953,440,924,426,887,402,816,353"/>
<area shape="poly" title=" " alt="" coords="906,329,1147,324,1147,330,906,334"/>
<area shape="poly" title=" " alt="" coords="906,346,1105,376,1147,384,1146,389,1105,381,906,351"/>
<area shape="poly" title=" " alt="" coords="887,155,1177,143,1177,148,888,160"/>
<area shape="poly" title=" " alt="" coords="888,173,965,185,964,190,887,178"/>
<area shape="poly" title=" " alt="" coords="889,176,907,187,930,207,950,231,983,282,1006,332,1022,375,1017,377,1001,334,978,284,946,234,926,211,904,191,886,181"/>
</map>
</div>

</div>
</div>
<a id="a9ba30ace623b2eaa613177c452fbdc92" name="a9ba30ace623b2eaa613177c452fbdc92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ba30ace623b2eaa613177c452fbdc92">&#9670;&#160;</a></span>procd_bcast_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void procd_bcast_event </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>event</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00864">864</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  865</span>{</div>
<div class="line"><span class="lineno">  866</span>    <span class="keywordtype">int</span> ret;</div>
<div class="line"><span class="lineno">  867</span> </div>
<div class="line"><span class="lineno">  868</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#a6c17ea8bcc28c91e490e1112d5348541">notify</a>)</div>
<div class="line"><span class="lineno">  869</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  870</span> </div>
<div class="line"><span class="lineno">  871</span>    ret = <a class="code hl_function" href="../../d2/de5/libubus-req_8c.html#a16356c5979a6bebeab644c60f972a968">ubus_notify</a>(<a class="code hl_variable" href="#af85a8208a05e85268c56cc20ca9fa894">_ctx</a>, &amp;<a class="code hl_variable" href="#a99446f8964fa2f19ca768dfb3c0e83e6">system_object</a>, event, msg, -1);</div>
<div class="line"><span class="lineno">  872</span>    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><span class="lineno">  873</span>        fprintf(stderr, <span class="stringliteral">&quot;Failed to notify log: %s\n&quot;</span>, <a class="code hl_function" href="../../d4/db9/libubus_8c.html#a70c6962fdc98eff62f5399893ae71b69">ubus_strerror</a>(ret));</div>
<div class="line"><span class="lineno">  874</span>}</div>
<div class="ttc" id="alibubus-req_8c_html_a16356c5979a6bebeab644c60f972a968"><div class="ttname"><a href="../../d2/de5/libubus-req_8c.html#a16356c5979a6bebeab644c60f972a968">ubus_notify</a></div><div class="ttdeci">int ubus_notify(struct ubus_context *ctx, struct ubus_object *obj, const char *type, struct blob_attr *msg, int timeout)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/de5/libubus-req_8c_source.html#l00311">libubus-req.c:311</a></div></div>
<div class="ttc" id="alibubus_8c_html_a70c6962fdc98eff62f5399893ae71b69"><div class="ttname"><a href="../../d4/db9/libubus_8c.html#a70c6962fdc98eff62f5399893ae71b69">ubus_strerror</a></div><div class="ttdeci">const char * ubus_strerror(int error)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/db9/libubus_8c_source.html#l00059">libubus.c:59</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a6c17ea8bcc28c91e490e1112d5348541"><div class="ttname"><a href="#a6c17ea8bcc28c91e490e1112d5348541">notify</a></div><div class="ttdeci">static int notify</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00039">system.c:39</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a99446f8964fa2f19ca768dfb3c0e83e6"><div class="ttname"><a href="#a99446f8964fa2f19ca768dfb3c0e83e6">system_object</a></div><div class="ttdeci">static struct ubus_object system_object</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00855">system.c:855</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_af85a8208a05e85268c56cc20ca9fa894"><div class="ttname"><a href="#af85a8208a05e85268c56cc20ca9fa894">_ctx</a></div><div class="ttdeci">static struct ubus_context * _ctx</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00040">system.c:40</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00040">_ctx</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00039">notify</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00855">system_object</a>, <a class="el" href="../../d2/de5/libubus-req_8c_source.html#l00311">ubus_notify()</a>, and <a class="el" href="../../d4/db9/libubus_8c_source.html#l00059">ubus_strerror()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_a9ba30ace623b2eaa613177c452fbdc92_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_a9ba30ace623b2eaa613177c452fbdc92_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_a9ba30ace623b2eaa613177c452fbdc92_cgraph" id="ad8/d1d/procd_2system_8c_a9ba30ace623b2eaa613177c452fbdc92_cgraph">
<area shape="rect" title=" " alt="" coords="5,585,199,619"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a16356c5979a6bebeab644c60f972a968" title=" " alt="" coords="255,556,383,590"/>
<area shape="poly" title=" " alt="" coords="199,586,239,581,240,586,200,592"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a70c6962fdc98eff62f5399893ae71b69" title=" " alt="" coords="247,613,391,647"/>
<area shape="poly" title=" " alt="" coords="199,612,231,616,231,622,199,617"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ac75f43dcbc75feb423b44f9bfd4b5c4d" title=" " alt="" coords="455,232,664,266"/>
<area shape="poly" title=" " alt="" coords="331,554,534,277,538,280,335,557"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a7f9751bf2345349892dd6c082cb7b233" title=" " alt="" coords="457,556,661,590"/>
<area shape="poly" title=" " alt="" coords="383,570,441,570,441,576,383,576"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="439,748,679,782"/>
<area shape="poly" title=" " alt="" coords="373,588,392,599,436,631,476,668,537,734,533,738,472,671,432,635,390,603,370,593"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="785,60,924,94"/>
<area shape="poly" title=" " alt="" coords="573,230,635,167,678,132,726,102,769,87,771,92,728,107,681,136,639,171,577,233"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="772,232,937,266"/>
<area shape="poly" title=" " alt="" coords="664,246,757,246,757,252,664,252"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ab15efb63fd978d5af6330884d543ce08" title=" " alt="" coords="728,117,981,151"/>
<area shape="poly" title=" " alt="" coords="587,229,650,194,726,160,746,153,748,158,728,165,652,199,590,234"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#af28b1d44890bb022ce688a967d18c599" title=" " alt="" coords="750,175,959,208"/>
<area shape="poly" title=" " alt="" coords="649,229,749,209,750,214,650,234"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a0e8112f19ea399af22d957f19cf6cfc7" title=" " alt="" coords="776,289,933,323"/>
<area shape="poly" title=" " alt="" coords="650,264,761,285,760,291,649,269"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="755,372,954,406"/>
<area shape="poly" title=" " alt="" coords="593,264,728,333,797,363,795,368,726,338,591,269"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1093,32,1198,66"/>
<area shape="poly" title=" " alt="" coords="924,68,1077,53,1077,58,925,73"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1055,89,1236,123"/>
<area shape="poly" title=" " alt="" coords="925,81,1040,93,1039,98,924,86"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1525,5,1668,39"/>
<area shape="poly" title=" " alt="" coords="1198,34,1309,17,1393,14,1477,17,1510,17,1510,23,1477,22,1393,19,1309,22,1199,40"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1316,32,1471,66"/>
<area shape="poly" title=" " alt="" coords="1199,46,1300,46,1300,52,1199,52"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1325,89,1461,123"/>
<area shape="poly" title=" " alt="" coords="1199,58,1310,84,1309,90,1198,64"/>
<area shape="poly" title=" " alt="" coords="1471,36,1510,31,1510,36,1471,41"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1095,219,1196,252"/>
<area shape="poly" title=" " alt="" coords="937,242,1079,236,1080,241,937,248"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1338,247,1449,280"/>
<area shape="poly" title=" " alt="" coords="1197,239,1323,253,1322,258,1196,244"/>
<area shape="poly" title=" " alt="" coords="933,287,981,276,1079,250,1080,256,982,281,934,292"/>
<area shape="poly" title=" " alt="" coords="934,297,1322,266,1323,272,934,303"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1096,328,1195,362"/>
<area shape="poly" title=" " alt="" coords="934,314,1081,334,1081,339,933,319"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a7da0a155290c1fd4d3b5911ced43d5a2" title=" " alt="" coords="1037,385,1254,419"/>
<area shape="poly" title=" " alt="" coords="954,391,1022,394,1022,399,954,396"/>
<area shape="rect" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4" title=" " alt="" coords="1309,428,1477,462"/>
<area shape="poly" title=" " alt="" coords="1248,417,1294,425,1293,430,1247,422"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8ba490369bdfd6feb7187c9f480fa4ac" title=" " alt="" coords="727,500,982,534"/>
<area shape="poly" title=" " alt="" coords="651,553,746,535,747,540,652,558"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae1cde0f50b85945cfff23be4fc1586f4" title=" " alt="" coords="1084,557,1207,591"/>
<area shape="poly" title=" " alt="" coords="661,570,1068,571,1068,577,661,576"/>
<area shape="rect" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d" title=" " alt="" coords="1087,672,1204,706"/>
<area shape="poly" title=" " alt="" coords="588,588,650,623,689,641,728,654,819,674,912,684,999,689,1071,689,1071,694,999,694,912,690,818,679,727,659,687,646,648,628,586,593"/>
<area shape="rect" href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title=" " alt="" coords="1103,500,1188,534"/>
<area shape="poly" title=" " alt="" coords="982,514,1088,514,1088,520,982,520"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a3f4760a6b743ec1e4ca87fb493b019db" title=" " alt="" coords="1079,443,1212,476"/>
<area shape="poly" title=" " alt="" coords="943,497,1063,473,1064,478,944,502"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae0988579c6b622299ee0f79accbf0779" title=" " alt="" coords="1346,528,1440,562"/>
<area shape="poly" title=" " alt="" coords="1189,519,1331,535,1330,540,1188,524"/>
<area shape="poly" title=" " alt="" coords="1207,562,1260,544,1305,513,1358,470,1362,474,1308,517,1262,549,1209,567"/>
<area shape="poly" title=" " alt="" coords="1207,564,1330,550,1331,555,1208,570"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a6a067ed16631bbe3826be535287879e4" title=" " alt="" coords="775,720,934,754"/>
<area shape="poly" title=" " alt="" coords="680,751,759,743,760,748,680,756"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aca15427cb882afec28ce476b9e8e8b34" title=" " alt="" coords="734,893,975,949"/>
<area shape="poly" title=" " alt="" coords="582,780,646,828,686,855,729,878,740,884,737,888,726,883,683,859,642,832,579,784"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a5497c370318a5cc03dd662523915ea92" title=" " alt="" coords="775,777,934,811"/>
<area shape="poly" title=" " alt="" coords="680,774,760,782,759,787,680,779"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8af6cb580774621aef719d6923cb5072" title=" " alt="" coords="750,611,959,644"/>
<area shape="poly" title=" " alt="" coords="596,745,801,649,803,654,599,750"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ab53faf25fad8c6edbcd804eabeb14c6a" title=" " alt="" coords="760,835,949,868"/>
<area shape="poly" title=" " alt="" coords="606,780,728,821,754,828,753,833,727,826,604,785"/>
<area shape="poly" title=" " alt="" coords="965,890,980,879,992,865,999,852,1005,824,1010,795,1017,779,1028,763,1058,734,1092,711,1095,716,1062,738,1032,767,1021,782,1016,797,1010,825,1004,854,996,868,983,883,968,894"/>
<area shape="rect" href="../../da/d23/list_8h.html#a875b53c95596d9e8df15ac54f6d24ae6" title=" " alt="" coords="1099,904,1192,938"/>
<area shape="poly" title=" " alt="" coords="975,918,1084,918,1084,924,975,924"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#aa0791c7960dffbb35e38a4f32001c331" title=" " alt="" coords="1051,777,1240,811"/>
<area shape="poly" title=" " alt="" coords="935,792,1035,792,1035,797,935,797"/>
<area shape="poly" title=" " alt="" coords="950,607,1068,586,1069,591,951,613"/>
<area shape="poly" title=" " alt="" coords="939,642,1073,671,1072,676,937,648"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8ee872461a1786fedb0aacb2318db738" title=" " alt="" coords="1030,615,1261,648"/>
<area shape="poly" title=" " alt="" coords="959,626,1014,627,1014,632,959,632"/>
</map>
</div>

</div>
</div>
<a id="abeeaef1cc35e957de75db7c200176df1" name="abeeaef1cc35e957de75db7c200176df1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeeaef1cc35e957de75db7c200176df1">&#9670;&#160;</a></span>procd_subscribe_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void procd_subscribe_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00836">836</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  837</span>{</div>
<div class="line"><span class="lineno">  838</span>    <a class="code hl_variable" href="#a6c17ea8bcc28c91e490e1112d5348541">notify</a> = obj-&gt;<a class="code hl_variable" href="../../d9/d00/ubusd__obj_8h.html#a1c87da57031f4556fb293a292990e9df">has_subscribers</a>;</div>
<div class="line"><span class="lineno">  839</span>}</div>
<div class="ttc" id="aubusd__obj_8h_html_a1c87da57031f4556fb293a292990e9df"><div class="ttname"><a href="../../d9/d00/ubusd__obj_8h.html#a1c87da57031f4556fb293a292990e9df">ubus_object::has_subscribers</a></div><div class="ttdeci">bool has_subscribers</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00136">libubus.h:136</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d55/libubus_8h_source.html#l00136">ubus_object::has_subscribers</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00039">notify</a>.</p>

</div>
</div>
<a id="a1b0c56f2aad9be40439f08c6b9d7407d" name="a1b0c56f2aad9be40439f08c6b9d7407d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b0c56f2aad9be40439f08c6b9d7407d">&#9670;&#160;</a></span>system_board()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int system_board </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *</td>          <td class="paramname"><span class="paramname"><em>req</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00122">122</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  125</span>{</div>
<div class="line"><span class="lineno">  126</span>    <span class="keywordtype">void</span> *c;</div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordtype">char</span> line[256];</div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordtype">char</span> *key, *val, *next;</div>
<div class="line"><span class="lineno">  129</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *rootfs_type = <a class="code hl_function" href="#a1728f56060bd8af8a310528a54e86843">system_rootfs_type</a>();</div>
<div class="line"><span class="lineno">  130</span>    <span class="keyword">struct </span>utsname utsname;</div>
<div class="line"><span class="lineno">  131</span>    FILE *f;</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>    <a class="code hl_function" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, 0);</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">if</span> (uname(&amp;utsname) &gt;= 0)</div>
<div class="line"><span class="lineno">  136</span>    {</div>
<div class="line"><span class="lineno">  137</span>        <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;kernel&quot;</span>, utsname.release);</div>
<div class="line"><span class="lineno">  138</span>        <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;hostname&quot;</span>, utsname.nodename);</div>
<div class="line"><span class="lineno">  139</span>    }</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordflow">if</span> ((f = fopen(<span class="stringliteral">&quot;/proc/cpuinfo&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>)) != NULL)</div>
<div class="line"><span class="lineno">  142</span>    {</div>
<div class="line"><span class="lineno">  143</span>        <span class="keywordflow">while</span>(fgets(line, <span class="keyword">sizeof</span>(line), f))</div>
<div class="line"><span class="lineno">  144</span>        {</div>
<div class="line"><span class="lineno">  145</span>            key = strtok(line, <span class="stringliteral">&quot;\t:&quot;</span>);</div>
<div class="line"><span class="lineno">  146</span>            val = strtok(NULL, <span class="stringliteral">&quot;\t\n&quot;</span>);</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>            <span class="keywordflow">if</span> (!key || !val)</div>
<div class="line"><span class="lineno">  149</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span><span class="preprocessor">#ifdef __aarch64__</span></div>
<div class="line"><span class="lineno">  152</span>            <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;CPU revision&quot;</span>)) {</div>
<div class="line"><span class="lineno">  153</span>                snprintf(line, <span class="keyword">sizeof</span>(line), <span class="stringliteral">&quot;ARMv8 Processor rev %lu&quot;</span>, strtoul(val + 2, NULL, 16));</div>
<div class="line"><span class="lineno">  154</span>                <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;system&quot;</span>, line);</div>
<div class="line"><span class="lineno">  155</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  156</span>            }</div>
<div class="line"><span class="lineno">  157</span><span class="preprocessor">#elif __riscv</span></div>
<div class="line"><span class="lineno">  158</span>            <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;isa&quot;</span>)) {</div>
<div class="line"><span class="lineno">  159</span>                snprintf(line, <span class="keyword">sizeof</span>(line), <span class="stringliteral">&quot;RISC-V (%s)&quot;</span>, val + 2);</div>
<div class="line"><span class="lineno">  160</span>                <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;system&quot;</span>, line);</div>
<div class="line"><span class="lineno">  161</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  162</span>            }</div>
<div class="line"><span class="lineno">  163</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  164</span>            <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;system type&quot;</span>) ||</div>
<div class="line"><span class="lineno">  165</span>                !strcasecmp(key, <span class="stringliteral">&quot;processor&quot;</span>) ||</div>
<div class="line"><span class="lineno">  166</span>                !strcasecmp(key, <span class="stringliteral">&quot;cpu&quot;</span>) ||</div>
<div class="line"><span class="lineno">  167</span>                !strcasecmp(key, <span class="stringliteral">&quot;model name&quot;</span>))</div>
<div class="line"><span class="lineno">  168</span>            {</div>
<div class="line"><span class="lineno">  169</span>                strtoul(val + 2, &amp;key, 0);</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>                <span class="keywordflow">if</span> (key == (val + 2) || *key != 0)</div>
<div class="line"><span class="lineno">  172</span>                {</div>
<div class="line"><span class="lineno">  173</span>                    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;system&quot;</span>, val + 2);</div>
<div class="line"><span class="lineno">  174</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  175</span>                }</div>
<div class="line"><span class="lineno">  176</span>            }</div>
<div class="line"><span class="lineno">  177</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  178</span>        }</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>        fclose(f);</div>
<div class="line"><span class="lineno">  181</span>    }</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">if</span> ((f = fopen(<span class="stringliteral">&quot;/tmp/sysinfo/model&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>)) != NULL ||</div>
<div class="line"><span class="lineno">  184</span>        (f = fopen(<span class="stringliteral">&quot;/proc/device-tree/model&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>)) != NULL)</div>
<div class="line"><span class="lineno">  185</span>    {</div>
<div class="line"><span class="lineno">  186</span>        <span class="keywordflow">if</span> (fgets(line, <span class="keyword">sizeof</span>(line), f))</div>
<div class="line"><span class="lineno">  187</span>        {</div>
<div class="line"><span class="lineno">  188</span>            val = strtok(line, <span class="stringliteral">&quot;\t\n&quot;</span>);</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>            <span class="keywordflow">if</span> (val)</div>
<div class="line"><span class="lineno">  191</span>                <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;model&quot;</span>, val);</div>
<div class="line"><span class="lineno">  192</span>        }</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>        fclose(f);</div>
<div class="line"><span class="lineno">  195</span>    }</div>
<div class="line"><span class="lineno">  196</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((f = fopen(<span class="stringliteral">&quot;/proc/cpuinfo&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>)) != NULL)</div>
<div class="line"><span class="lineno">  197</span>    {</div>
<div class="line"><span class="lineno">  198</span>        <span class="keywordflow">while</span>(fgets(line, <span class="keyword">sizeof</span>(line), f))</div>
<div class="line"><span class="lineno">  199</span>        {</div>
<div class="line"><span class="lineno">  200</span>            key = strtok(line, <span class="stringliteral">&quot;\t:&quot;</span>);</div>
<div class="line"><span class="lineno">  201</span>            val = strtok(NULL, <span class="stringliteral">&quot;\t\n&quot;</span>);</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>            <span class="keywordflow">if</span> (!key || !val)</div>
<div class="line"><span class="lineno">  204</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>            <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;machine&quot;</span>) ||</div>
<div class="line"><span class="lineno">  207</span>                !strcasecmp(key, <span class="stringliteral">&quot;hardware&quot;</span>))</div>
<div class="line"><span class="lineno">  208</span>            {</div>
<div class="line"><span class="lineno">  209</span>                <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;model&quot;</span>, val + 2);</div>
<div class="line"><span class="lineno">  210</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  211</span>            }</div>
<div class="line"><span class="lineno">  212</span>        }</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span>        fclose(f);</div>
<div class="line"><span class="lineno">  215</span>    }</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>    <span class="keywordflow">if</span> ((f = fopen(<span class="stringliteral">&quot;/tmp/sysinfo/board_name&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>)) != NULL)</div>
<div class="line"><span class="lineno">  218</span>    {</div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">if</span> (fgets(line, <span class="keyword">sizeof</span>(line), f))</div>
<div class="line"><span class="lineno">  220</span>        {</div>
<div class="line"><span class="lineno">  221</span>            val = strtok(line, <span class="stringliteral">&quot;\t\n&quot;</span>);</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>            <span class="keywordflow">if</span> (val)</div>
<div class="line"><span class="lineno">  224</span>                <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;board_name&quot;</span>, val);</div>
<div class="line"><span class="lineno">  225</span>        }</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>        fclose(f);</div>
<div class="line"><span class="lineno">  228</span>    }</div>
<div class="line"><span class="lineno">  229</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((f = fopen(<span class="stringliteral">&quot;/proc/device-tree/compatible&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>)) != NULL)</div>
<div class="line"><span class="lineno">  230</span>    {</div>
<div class="line"><span class="lineno">  231</span>        <span class="keywordflow">if</span> (fgets(line, <span class="keyword">sizeof</span>(line), f))</div>
<div class="line"><span class="lineno">  232</span>        {</div>
<div class="line"><span class="lineno">  233</span>            val = strtok(line, <span class="stringliteral">&quot;\t\n&quot;</span>);</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>            <span class="keywordflow">if</span> (val)</div>
<div class="line"><span class="lineno">  236</span>            {</div>
<div class="line"><span class="lineno">  237</span>                next = val;</div>
<div class="line"><span class="lineno">  238</span>                <span class="keywordflow">while</span> ((next = strchr(next, <span class="charliteral">&#39;,&#39;</span>)) != NULL)</div>
<div class="line"><span class="lineno">  239</span>                {</div>
<div class="line"><span class="lineno">  240</span>                    *next = <span class="charliteral">&#39;-&#39;</span>;</div>
<div class="line"><span class="lineno">  241</span>                    next++;</div>
<div class="line"><span class="lineno">  242</span>                }</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>                <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;board_name&quot;</span>, val);</div>
<div class="line"><span class="lineno">  245</span>            }</div>
<div class="line"><span class="lineno">  246</span>        }</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>        fclose(f);</div>
<div class="line"><span class="lineno">  249</span>    }</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordflow">if</span> (rootfs_type)</div>
<div class="line"><span class="lineno">  252</span>        <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;rootfs_type&quot;</span>, rootfs_type);</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>    <span class="keywordflow">if</span> ((f = fopen(<span class="stringliteral">&quot;/usr/lib/os-release&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>)) != NULL)</div>
<div class="line"><span class="lineno">  255</span>    {</div>
<div class="line"><span class="lineno">  256</span>        c = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;release&quot;</span>);</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>        <span class="keywordflow">while</span> (fgets(line, <span class="keyword">sizeof</span>(line), f))</div>
<div class="line"><span class="lineno">  259</span>        {</div>
<div class="line"><span class="lineno">  260</span>            <span class="keywordtype">char</span> *dest;</div>
<div class="line"><span class="lineno">  261</span>            <span class="keywordtype">char</span> ch;</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>            key = line;</div>
<div class="line"><span class="lineno">  264</span>            val = strchr(line, <span class="charliteral">&#39;=&#39;</span>);</div>
<div class="line"><span class="lineno">  265</span>            <span class="keywordflow">if</span> (!val)</div>
<div class="line"><span class="lineno">  266</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>            *(val++) = 0;</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>            <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;NAME&quot;</span>))</div>
<div class="line"><span class="lineno">  271</span>                key = <span class="stringliteral">&quot;distribution&quot;</span>;</div>
<div class="line"><span class="lineno">  272</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;VERSION&quot;</span>))</div>
<div class="line"><span class="lineno">  273</span>                key = <span class="stringliteral">&quot;version&quot;</span>;</div>
<div class="line"><span class="lineno">  274</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;BUILD_ID&quot;</span>))</div>
<div class="line"><span class="lineno">  275</span>                key = <span class="stringliteral">&quot;revision&quot;</span>;</div>
<div class="line"><span class="lineno">  276</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;VERSION_CODENAME&quot;</span>))</div>
<div class="line"><span class="lineno">  277</span>                key = <span class="stringliteral">&quot;codename&quot;</span>;</div>
<div class="line"><span class="lineno">  278</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;OPENWRT_BOARD&quot;</span>))</div>
<div class="line"><span class="lineno">  279</span>                key = <span class="stringliteral">&quot;target&quot;</span>;</div>
<div class="line"><span class="lineno">  280</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;PRETTY_NAME&quot;</span>))</div>
<div class="line"><span class="lineno">  281</span>                key = <span class="stringliteral">&quot;description&quot;</span>;</div>
<div class="line"><span class="lineno">  282</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;OPENWRT_BUILD_DATE&quot;</span>))</div>
<div class="line"><span class="lineno">  283</span>                key = <span class="stringliteral">&quot;builddate&quot;</span>;</div>
<div class="line"><span class="lineno">  284</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  285</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>            dest = <a class="code hl_function" href="../../d1/d30/blobmsg_8c.html#a81ad3c816930b7f2e2ab263ba9c50f89">blobmsg_alloc_string_buffer</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, key, strlen(val));</div>
<div class="line"><span class="lineno">  288</span>            <span class="keywordflow">if</span> (!dest) {</div>
<div class="line"><span class="lineno">  289</span>                <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;Failed to allocate blob.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  290</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  291</span>            }</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>            <span class="keywordflow">while</span> (val &amp;&amp; (ch = *(val++)) != 0) {</div>
<div class="line"><span class="lineno">  294</span>                <span class="keywordflow">switch</span> (ch) {</div>
<div class="line"><span class="lineno">  295</span>                <span class="keywordflow">case</span> <span class="charliteral">&#39;\&#39;&#39;</span>:</div>
<div class="line"><span class="lineno">  296</span>                <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>:</div>
<div class="line"><span class="lineno">  297</span>                    next = strchr(val, ch);</div>
<div class="line"><span class="lineno">  298</span>                    <span class="keywordflow">if</span> (next)</div>
<div class="line"><span class="lineno">  299</span>                        *next = 0;</div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>                    strcpy(dest, val);</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>                    <span class="keywordflow">if</span> (next)</div>
<div class="line"><span class="lineno">  304</span>                        val = next + 1;</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>                    dest += strlen(dest);</div>
<div class="line"><span class="lineno">  307</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  308</span>                <span class="keywordflow">case</span> <span class="charliteral">&#39;\\&#39;</span>:</div>
<div class="line"><span class="lineno">  309</span>                    *(dest++) = *(val++);</div>
<div class="line"><span class="lineno">  310</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  311</span>                }</div>
<div class="line"><span class="lineno">  312</span>            }</div>
<div class="line"><span class="lineno">  313</span>            <a class="code hl_function" href="../../d1/d30/blobmsg_8c.html#a9c0a75070ad9e1b8926172638fb8e9d9">blobmsg_add_string_buffer</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>);</div>
<div class="line"><span class="lineno">  314</span>        }</div>
<div class="line"><span class="lineno">  315</span> </div>
<div class="line"><span class="lineno">  316</span>        <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32">blobmsg_close_array</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, c);</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>        fclose(f);</div>
<div class="line"><span class="lineno">  319</span>    }</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>    <a class="code hl_function" href="../../d2/de5/libubus-req_8c.html#aab336677450493ac2229e8a2f70fa0e4">ubus_send_reply</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, req, <a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>.<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#af6065d74116605108b22c11e75ec669c">head</a>);</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab7a81fcac034b9ddc28cbf812d2ae6eb">UBUS_STATUS_OK</a>;</div>
<div class="line"><span class="lineno">  324</span>}</div>
<div class="ttc" id="ablob_8c_html_af8ca2237342df92c699fbb2ddb5f390b"><div class="ttname"><a href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a></div><div class="ttdeci">int blob_buf_init(struct blob_buf *buf, int id)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/da0/blob_8c_source.html#l00091">blob.c:91</a></div></div>
<div class="ttc" id="ablob_8h_html_af6065d74116605108b22c11e75ec669c"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#af6065d74116605108b22c11e75ec669c">blob_buf::head</a></div><div class="ttdeci">struct blob_attr * head</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00065">blob.h:65</a></div></div>
<div class="ttc" id="ablobmsg_8c_html_a81ad3c816930b7f2e2ab263ba9c50f89"><div class="ttname"><a href="../../d1/d30/blobmsg_8c.html#a81ad3c816930b7f2e2ab263ba9c50f89">blobmsg_alloc_string_buffer</a></div><div class="ttdeci">void * blobmsg_alloc_string_buffer(struct blob_buf *buf, const char *name, unsigned int maxlen)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d30/blobmsg_8c_source.html#l00326">blobmsg.c:326</a></div></div>
<div class="ttc" id="ablobmsg_8c_html_a9c0a75070ad9e1b8926172638fb8e9d9"><div class="ttname"><a href="../../d1/d30/blobmsg_8c.html#a9c0a75070ad9e1b8926172638fb8e9d9">blobmsg_add_string_buffer</a></div><div class="ttdeci">void blobmsg_add_string_buffer(struct blob_buf *buf)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d30/blobmsg_8c_source.html#l00361">blobmsg.c:361</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a2de3b7599bec41a8c9919f780bd28f1a"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a></div><div class="ttdeci">static void * blobmsg_open_table(struct blob_buf *buf, const char *name)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00256">blobmsg.h:256</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a4bba0979961750f86b8dc9915b2fa4d6"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a></div><div class="ttdeci">static int blobmsg_add_string(struct blob_buf *buf, const char *name, const char *string)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00235">blobmsg.h:235</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a56794b194617d9a858dbc783dd2a0c32"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32">blobmsg_close_array</a></div><div class="ttdeci">static void blobmsg_close_array(struct blob_buf *buf, void *cookie)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00262">blobmsg.h:262</a></div></div>
<div class="ttc" id="ahotplug-dispatch_8c_html_a7c00b3b8999b2056f226d3cc35a83845"><div class="ttname"><a href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a></div><div class="ttdeci">struct ubus_context * ctx</div><div class="ttdef"><b>Definition</b> <a href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">hotplug-dispatch.c:42</a></div></div>
<div class="ttc" id="alibubus-req_8c_html_aab336677450493ac2229e8a2f70fa0e4"><div class="ttname"><a href="../../d2/de5/libubus-req_8c.html#aab336677450493ac2229e8a2f70fa0e4">ubus_send_reply</a></div><div class="ttdeci">int ubus_send_reply(struct ubus_context *ctx, struct ubus_request_data *req, struct blob_attr *msg)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/de5/libubus-req_8c_source.html#l00205">libubus-req.c:205</a></div></div>
<div class="ttc" id="aprocd_2jail_2log_8h_html_a15378cd15bafb3a79061424b452497aa"><div class="ttname"><a href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a></div><div class="ttdeci">#define ERROR(fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">log.h:27</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a1728f56060bd8af8a310528a54e86843"><div class="ttname"><a href="#a1728f56060bd8af8a310528a54e86843">system_rootfs_type</a></div><div class="ttdeci">static const char * system_rootfs_type(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00049">system.c:49</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a99bec0c168a4d5ac338ad787dfb73312ab7a81fcac034b9ddc28cbf812d2ae6eb"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab7a81fcac034b9ddc28cbf812d2ae6eb">UBUS_STATUS_OK</a></div><div class="ttdeci">@ UBUS_STATUS_OK</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00119">ubusmsg.h:119</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00038">b</a>, <a class="el" href="../../d4/da0/blob_8c_source.html#l00091">blob_buf_init()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00235">blobmsg_add_string()</a>, <a class="el" href="../../d1/d30/blobmsg_8c_source.html#l00361">blobmsg_add_string_buffer()</a>, <a class="el" href="../../d1/d30/blobmsg_8c_source.html#l00326">blobmsg_alloc_string_buffer()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00262">blobmsg_close_array()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00256">blobmsg_open_table()</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">ERROR</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00065">blob_buf::head</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00049">system_rootfs_type()</a>, <a class="el" href="../../d2/de5/libubus-req_8c_source.html#l00205">ubus_send_reply()</a>, and <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00119">UBUS_STATUS_OK</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_a1b0c56f2aad9be40439f08c6b9d7407d_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_a1b0c56f2aad9be40439f08c6b9d7407d_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_a1b0c56f2aad9be40439f08c6b9d7407d_cgraph" id="ad8/d1d/procd_2system_8c_a1b0c56f2aad9be40439f08c6b9d7407d_cgraph">
<area shape="rect" title=" " alt="" coords="5,611,156,645"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="777,137,916,170"/>
<area shape="poly" title=" " alt="" coords="80,610,87,549,106,461,122,412,143,365,169,319,202,279,231,253,263,229,333,192,408,166,486,149,563,139,637,136,761,140,761,146,637,141,564,145,487,154,410,171,335,197,266,234,235,257,206,283,173,323,147,367,127,414,112,462,93,550,86,611"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="207,638,415,672"/>
<area shape="poly" title=" " alt="" coords="156,634,191,638,191,643,155,639"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a9c0a75070ad9e1b8926172638fb8e9d9" title=" " alt="" coords="742,1086,951,1143"/>
<area shape="poly" title=" " alt="" coords="90,645,104,684,128,735,162,790,182,815,205,837,233,857,258,870,306,884,357,893,419,912,512,955,582,991,652,1029,743,1072,755,1077,753,1082,741,1077,649,1034,579,996,509,959,417,917,356,898,304,889,256,875,230,861,202,841,179,818,158,793,124,738,99,686,85,646"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a81ad3c816930b7f2e2ab263ba9c50f89" title=" " alt="" coords="473,498,688,555"/>
<area shape="poly" title=" " alt="" coords="156,610,457,549,458,554,157,615"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32" title=" " alt="" coords="204,429,418,462"/>
<area shape="poly" title=" " alt="" coords="102,609,275,470,278,474,105,613"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="205,793,417,826"/>
<area shape="poly" title=" " alt="" coords="105,643,278,781,274,785,102,647"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a1728f56060bd8af8a310528a54e86843" title=" " alt="" coords="211,927,411,961"/>
<area shape="poly" title=" " alt="" coords="87,645,98,696,119,766,135,804,154,841,178,876,205,906,221,917,218,922,202,910,173,879,149,843,130,806,114,768,92,697,82,646"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aab336677450493ac2229e8a2f70fa0e4" title=" " alt="" coords="223,294,399,328"/>
<area shape="poly" title=" " alt="" coords="88,609,132,523,165,468,202,414,239,372,276,336,280,340,243,375,206,418,169,471,137,525,92,612"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1270,253,1375,286"/>
<area shape="poly" title=" " alt="" coords="917,168,1255,250,1254,256,916,173"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="999,137,1179,170"/>
<area shape="poly" title=" " alt="" coords="917,151,983,151,983,156,917,156"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1669,278,1811,312"/>
<area shape="poly" title=" " alt="" coords="1375,280,1466,296,1543,299,1621,296,1653,295,1653,301,1621,301,1543,304,1465,301,1375,285"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1465,253,1621,286"/>
<area shape="poly" title=" " alt="" coords="1375,267,1450,267,1450,272,1375,272"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="1669,141,1811,174"/>
<area shape="poly" title=" " alt="" coords="1343,250,1396,213,1429,195,1464,180,1512,167,1561,159,1653,153,1653,158,1562,165,1513,173,1466,185,1432,200,1399,218,1346,254"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1475,1181,1611,1214"/>
<area shape="poly" title=" " alt="" coords="1333,286,1373,395,1420,547,1463,729,1498,908,1540,1165,1534,1165,1492,909,1457,730,1415,549,1368,397,1328,288"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="1493,195,1593,229"/>
<area shape="poly" title=" " alt="" coords="1375,253,1478,226,1479,231,1376,258"/>
<area shape="poly" title=" " alt="" coords="1621,277,1654,281,1653,286,1621,282"/>
<area shape="poly" title=" " alt="" coords="1597,249,1619,239,1665,211,1705,182,1708,186,1668,215,1622,244,1599,254"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="1669,762,1811,796"/>
<area shape="poly" title=" " alt="" coords="1595,1178,1619,1160,1642,1106,1673,1007,1728,810,1733,811,1678,1009,1647,1108,1623,1163,1598,1182"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1859,575,2000,609"/>
<area shape="poly" title=" " alt="" coords="1592,1178,1619,1159,1680,1094,1734,1020,1781,943,1821,866,1882,724,1917,623,1922,625,1887,725,1826,868,1785,946,1738,1023,1684,1097,1622,1163,1595,1182"/>
<area shape="poly" title=" " alt="" coords="1757,760,1899,618,1902,622,1760,763"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="2048,39,2147,73"/>
<area shape="poly" title=" " alt="" coords="1934,574,2084,87,2089,89,1939,576"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="483,670,677,704"/>
<area shape="poly" title=" " alt="" coords="416,664,468,671,467,676,415,670"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aed178aa087a351c74f7f6cd34e56ba0c" title=" " alt="" coords="772,818,921,852"/>
<area shape="poly" title=" " alt="" coords="604,702,665,748,744,796,774,810,772,815,741,801,662,752,601,706"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1267,785,1378,818"/>
<area shape="poly" title=" " alt="" coords="921,827,1251,804,1251,809,921,832"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aee908e6de67c16a4d810d08f28ed1803" title=" " alt="" coords="1035,615,1143,649"/>
<area shape="poly" title=" " alt="" coords="867,815,1054,657,1057,661,870,819"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="1013,1079,1165,1113"/>
<area shape="poly" title=" " alt="" coords="866,850,1063,1066,1059,1069,862,854"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ac239a83ed3c7f835e2b49f785953c934" title=" " alt="" coords="1237,965,1407,998"/>
<area shape="poly" title=" " alt="" coords="903,849,1228,951,1249,957,1247,962,1226,956,902,855"/>
<area shape="poly" title=" " alt="" coords="1099,613,1300,298,1304,301,1104,616"/>
<area shape="poly" title=" " alt="" coords="1144,641,1654,757,1653,762,1143,647"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac9fd36cdb87493b31a675621ed53a8d7" title=" " alt="" coords="1267,907,1378,941"/>
<area shape="poly" title=" " alt="" coords="1103,648,1154,728,1229,829,1292,895,1288,898,1225,832,1150,731,1098,651"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a189526712fcc12adfb6ea6a5c8eede54" title=" " alt="" coords="1233,561,1411,594"/>
<area shape="poly" title=" " alt="" coords="1143,617,1232,596,1233,601,1144,622"/>
<area shape="poly" title=" " alt="" coords="1378,925,1431,924,1493,919,1558,907,1620,886,1648,869,1674,849,1715,806,1718,809,1677,853,1651,874,1622,890,1559,912,1494,924,1431,929,1378,930"/>
<area shape="poly" title=" " alt="" coords="1098,1077,1150,996,1225,893,1288,827,1292,831,1229,896,1154,999,1103,1080"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a673de80167cf18faad1b4a21670d0cf3" title=" " alt="" coords="1232,1022,1413,1056"/>
<area shape="poly" title=" " alt="" coords="1159,1076,1235,1057,1236,1062,1161,1081"/>
<area shape="poly" title=" " alt="" coords="1142,1076,1177,1058,1192,1045,1201,1033,1210,1020,1225,1007,1233,1003,1236,1007,1229,1012,1214,1023,1205,1036,1196,1049,1181,1062,1145,1081"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a7613e130753e766f5d381c06b1f7b86f" title=" " alt="" coords="1227,1079,1417,1113"/>
<area shape="poly" title=" " alt="" coords="1165,1093,1212,1093,1212,1099,1165,1099"/>
<area shape="poly" title=" " alt="" coords="915,1141,956,1156,999,1167,1124,1186,1249,1195,1365,1199,1459,1198,1459,1203,1365,1204,1249,1201,1123,1191,998,1172,955,1161,914,1146"/>
<area shape="poly" title=" " alt="" coords="951,1137,1052,1154,1171,1162,1233,1161,1296,1154,1357,1142,1416,1123,1472,1095,1523,1058,1569,1015,1611,970,1677,879,1720,808,1725,811,1682,882,1615,973,1573,1019,1526,1062,1474,1099,1418,1128,1359,1147,1297,1160,1234,1166,1171,1167,1052,1159,951,1143"/>
<area shape="poly" title=" " alt="" coords="892,1141,942,1171,1000,1196,1087,1225,1157,1241,1229,1248,1321,1249,1544,1249,1580,1244,1621,1230,1706,1186,1777,1140,1809,1114,1830,1075,1849,1019,1882,878,1907,732,1922,624,1927,625,1912,733,1888,879,1854,1020,1835,1077,1813,1118,1780,1144,1709,1191,1623,1235,1581,1249,1545,1255,1321,1255,1228,1253,1156,1246,1086,1230,998,1201,940,1175,889,1146"/>
<area shape="poly" title=" " alt="" coords="922,1083,950,1072,1087,1009,1147,981,1226,949,1251,941,1253,946,1228,955,1149,986,1089,1014,952,1077,924,1088"/>
<area shape="poly" title=" " alt="" coords="933,1084,949,1073,966,1054,975,1036,983,1016,996,992,1079,877,1163,766,1294,604,1299,608,1167,769,1083,880,1001,995,988,1018,980,1038,971,1057,952,1077,937,1088"/>
<area shape="poly" title=" " alt="" coords="951,1104,998,1100,998,1106,951,1109"/>
<area shape="poly" title=" " alt="" coords="688,506,836,490,925,485,1021,483,1121,488,1222,498,1322,517,1418,545,1465,565,1510,589,1593,645,1663,702,1713,749,1709,753,1659,706,1590,649,1507,594,1462,570,1416,551,1321,522,1221,504,1120,493,1021,489,925,490,836,495,689,511"/>
<area shape="poly" title=" " alt="" coords="661,495,742,472,913,434,989,425,1087,423,1544,423,1597,427,1649,438,1700,455,1749,476,1833,522,1896,564,1893,568,1831,526,1746,480,1698,460,1648,443,1596,432,1544,428,1088,428,990,431,914,440,743,477,662,500"/>
<area shape="poly" title=" " alt="" coords="614,553,656,599,697,656,706,677,712,697,716,732,722,764,730,780,744,797,760,809,757,813,740,801,726,783,717,766,711,732,707,698,701,679,692,659,652,603,610,557"/>
<area shape="poly" title=" " alt="" coords="688,527,914,537,1179,556,1218,560,1217,565,1179,561,914,543,688,533"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="1012,354,1166,388"/>
<area shape="poly" title=" " alt="" coords="346,425,401,402,465,383,537,371,610,362,755,355,888,355,996,360,996,366,888,361,755,360,610,368,537,376,467,388,403,407,348,430"/>
<area shape="poly" title=" " alt="" coords="1149,351,1177,333,1194,310,1200,286,1207,262,1225,238,1283,195,1335,173,1393,161,1465,149,1513,143,1562,141,1653,144,1653,150,1562,146,1514,149,1466,155,1394,166,1337,178,1286,200,1229,242,1212,265,1205,288,1199,312,1181,337,1151,356"/>
<area shape="poly" title=" " alt="" coords="1167,368,1267,375,1325,383,1387,396,1450,414,1511,437,1570,468,1622,506,1648,532,1670,562,1704,628,1725,693,1736,746,1731,747,1720,695,1699,631,1666,565,1644,536,1619,510,1567,472,1509,442,1448,419,1386,401,1325,389,1266,380,1166,373"/>
<area shape="poly" title=" " alt="" coords="1152,351,1177,333,1191,314,1197,296,1200,258,1203,220,1211,201,1225,181,1262,144,1297,114,1331,92,1365,75,1402,64,1443,58,1542,53,1741,53,2033,53,2033,59,1741,59,1542,59,1444,63,1403,70,1367,80,1333,96,1300,118,1266,147,1229,184,1215,203,1209,222,1206,259,1203,297,1195,317,1181,337,1155,355"/>
<area shape="poly" title=" " alt="" coords="1111,386,1292,548,1289,552,1108,390"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aaac450f6a679be8a392d17c3ed8700b4" title=" " alt="" coords="466,818,694,852"/>
<area shape="poly" title=" " alt="" coords="417,817,451,820,451,825,417,822"/>
<area shape="poly" title=" " alt="" coords="662,850,743,861,932,872,1080,868,1228,852,1417,828,1541,811,1653,792,1654,797,1542,816,1418,833,1228,857,1080,873,932,878,742,867,661,855"/>
<area shape="poly" title=" " alt="" coords="695,832,757,832,757,837,695,837"/>
<area shape="poly" title=" " alt="" coords="600,815,646,772,692,715,706,683,710,653,718,626,727,613,741,600,777,584,827,572,887,564,953,560,1092,560,1218,566,1217,572,1092,566,953,566,887,570,828,577,779,589,744,605,731,616,723,628,715,654,711,684,697,717,650,775,604,819"/>
<area shape="poly" title=" " alt="" coords="650,850,696,868,710,878,720,888,729,897,743,906,804,928,868,945,997,969,1119,980,1222,982,1222,987,1119,985,996,974,867,951,803,933,741,910,726,902,716,892,707,882,693,873,648,854"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="775,1029,918,1062"/>
<area shape="poly" title=" " alt="" coords="668,850,696,869,710,886,718,904,721,939,725,974,731,991,744,1007,763,1021,760,1026,740,1011,727,993,719,975,716,940,712,906,706,889,693,873,665,854"/>
<area shape="poly" title=" " alt="" coords="338,291,395,259,465,228,542,204,621,186,761,161,762,166,622,191,543,210,467,233,398,264,341,296"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a0e8112f19ea399af22d957f19cf6cfc7" title=" " alt="" coords="502,398,659,432"/>
<area shape="poly" title=" " alt="" coords="358,326,521,389,519,394,356,331"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a3e8e6d098f2808fa135bfefa3c0e81f8" title=" " alt="" coords="495,243,665,277"/>
<area shape="poly" title=" " alt="" coords="399,291,479,276,480,281,400,297"/>
<area shape="poly" title=" " alt="" coords="659,398,769,372,905,329,977,300,1047,266,1115,226,1177,181,1193,162,1200,143,1208,123,1225,103,1303,49,1338,32,1372,19,1408,11,1447,6,1542,3,1741,3,1820,6,1900,15,2033,39,2032,44,1899,20,1820,12,1741,8,1542,8,1447,11,1409,16,1373,24,1340,37,1306,54,1229,107,1213,126,1205,145,1197,165,1181,185,1118,231,1050,271,979,305,907,334,771,377,660,404"/>
<area shape="poly" title=" " alt="" coords="625,430,663,453,696,485,710,509,717,533,718,576,721,618,729,638,744,659,780,685,832,708,898,729,971,747,1123,774,1251,791,1251,797,1123,779,970,752,896,734,831,713,777,690,740,663,724,641,716,619,713,576,712,533,705,511,692,488,660,457,622,434"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="796,615,897,649"/>
<area shape="poly" title=" " alt="" coords="614,430,654,455,696,485,765,546,821,602,817,605,762,549,693,489,651,459,611,434"/>
<area shape="poly" title=" " alt="" coords="898,647,1259,776,1257,781,896,652"/>
<area shape="poly" title=" " alt="" coords="897,629,1019,629,1019,635,897,635"/>
<area shape="poly" title=" " alt="" coords="651,240,693,222,707,211,716,201,726,190,741,179,761,170,763,175,744,184,730,194,720,204,711,215,696,226,653,245"/>
<area shape="poly" title=" " alt="" coords="666,265,841,282,1079,311,1349,351,1621,404,1721,420,1763,432,1812,458,1843,481,1870,508,1911,560,1907,564,1866,511,1839,485,1810,462,1761,437,1719,426,1620,409,1348,357,1078,316,841,287,666,270"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a9a256a75cd053ed5d3443060e0a19a3f" title=" " alt="" coords="781,194,912,228"/>
<area shape="poly" title=" " alt="" coords="665,242,765,223,766,228,666,247"/>
</map>
</div>

</div>
</div>
<a id="a5e16c193b6021498dee2b3a854b60ffa" name="a5e16c193b6021498dee2b3a854b60ffa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e16c193b6021498dee2b3a854b60ffa">&#9670;&#160;</a></span>system_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int system_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *</td>          <td class="paramname"><span class="paramname"><em>req</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00332">332</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  335</span>{</div>
<div class="line"><span class="lineno">  336</span>    time_t now;</div>
<div class="line"><span class="lineno">  337</span>    <span class="keyword">struct </span>tm *tm;</div>
<div class="line"><span class="lineno">  338</span><span class="preprocessor">#ifdef linux</span></div>
<div class="line"><span class="lineno">  339</span>    <span class="keyword">struct </span>sysinfo <a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>;</div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordtype">void</span> *c;</div>
<div class="line"><span class="lineno">  341</span>    <span class="keywordtype">char</span> line[256];</div>
<div class="line"><span class="lineno">  342</span>    <span class="keywordtype">char</span> *key, *val;</div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> available, cached;</div>
<div class="line"><span class="lineno">  344</span>    FILE *f;</div>
<div class="line"><span class="lineno">  345</span>    <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  346</span>    <span class="keyword">struct </span>statvfs s;</div>
<div class="line"><span class="lineno">  347</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *fslist[] = {</div>
<div class="line"><span class="lineno">  348</span>        <span class="stringliteral">&quot;/&quot;</span>,    <span class="stringliteral">&quot;root&quot;</span>,</div>
<div class="line"><span class="lineno">  349</span>        <span class="stringliteral">&quot;/tmp&quot;</span>, <span class="stringliteral">&quot;tmp&quot;</span>,</div>
<div class="line"><span class="lineno">  350</span>    };</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">if</span> (sysinfo(&amp;<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>))</div>
<div class="line"><span class="lineno">  353</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab8845eab4efc86465452fa517b43c2b5">UBUS_STATUS_UNKNOWN_ERROR</a>;</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>    <span class="keywordflow">if</span> ((f = fopen(<span class="stringliteral">&quot;/proc/meminfo&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>)) == NULL)</div>
<div class="line"><span class="lineno">  356</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab8845eab4efc86465452fa517b43c2b5">UBUS_STATUS_UNKNOWN_ERROR</a>;</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>    <span class="comment">/* if linux &lt; 3.14 MemAvailable is not in meminfo */</span></div>
<div class="line"><span class="lineno">  359</span>    available = 0;</div>
<div class="line"><span class="lineno">  360</span>    cached = 0;</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>    <span class="keywordflow">while</span> (fgets(line, <span class="keyword">sizeof</span>(line), f))</div>
<div class="line"><span class="lineno">  363</span>    {</div>
<div class="line"><span class="lineno">  364</span>        key = strtok(line, <span class="stringliteral">&quot; :&quot;</span>);</div>
<div class="line"><span class="lineno">  365</span>        val = strtok(NULL, <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><span class="lineno">  366</span> </div>
<div class="line"><span class="lineno">  367</span>        <span class="keywordflow">if</span> (!key || !val)</div>
<div class="line"><span class="lineno">  368</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span>        <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;MemAvailable&quot;</span>))</div>
<div class="line"><span class="lineno">  371</span>            available = 1024 * atoll(val);</div>
<div class="line"><span class="lineno">  372</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(key, <span class="stringliteral">&quot;Cached&quot;</span>))</div>
<div class="line"><span class="lineno">  373</span>            cached = 1024 * atoll(val);</div>
<div class="line"><span class="lineno">  374</span>    }</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>    fclose(f);</div>
<div class="line"><span class="lineno">  377</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>    now = time(NULL);</div>
<div class="line"><span class="lineno">  380</span> </div>
<div class="line"><span class="lineno">  381</span>    <span class="keywordflow">if</span> (!(tm = localtime(&amp;now)))</div>
<div class="line"><span class="lineno">  382</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab8845eab4efc86465452fa517b43c2b5">UBUS_STATUS_UNKNOWN_ERROR</a>;</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>    <a class="code hl_function" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, 0);</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393">blobmsg_add_u32</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;localtime&quot;</span>, now + tm-&gt;tm_gmtoff);</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span><span class="preprocessor">#ifdef linux</span></div>
<div class="line"><span class="lineno">  389</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393">blobmsg_add_u32</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;uptime&quot;</span>,    <a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.uptime);</div>
<div class="line"><span class="lineno">  390</span> </div>
<div class="line"><span class="lineno">  391</span>    c = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214">blobmsg_open_array</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;load&quot;</span>);</div>
<div class="line"><span class="lineno">  392</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393">blobmsg_add_u32</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, NULL, <a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.loads[0]);</div>
<div class="line"><span class="lineno">  393</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393">blobmsg_add_u32</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, NULL, <a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.loads[1]);</div>
<div class="line"><span class="lineno">  394</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393">blobmsg_add_u32</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, NULL, <a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.loads[2]);</div>
<div class="line"><span class="lineno">  395</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32">blobmsg_close_array</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, c);</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>    c = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;memory&quot;</span>);</div>
<div class="line"><span class="lineno">  398</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;total&quot;</span>,</div>
<div class="line"><span class="lineno">  399</span>            (uint64_t)<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.mem_unit * (uint64_t)<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.totalram);</div>
<div class="line"><span class="lineno">  400</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;free&quot;</span>,</div>
<div class="line"><span class="lineno">  401</span>            (uint64_t)<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.mem_unit * (uint64_t)<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.freeram);</div>
<div class="line"><span class="lineno">  402</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;shared&quot;</span>,</div>
<div class="line"><span class="lineno">  403</span>            (uint64_t)<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.mem_unit * (uint64_t)<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.sharedram);</div>
<div class="line"><span class="lineno">  404</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;buffered&quot;</span>,</div>
<div class="line"><span class="lineno">  405</span>            (uint64_t)<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.mem_unit * (uint64_t)<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.bufferram);</div>
<div class="line"><span class="lineno">  406</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;available&quot;</span>, available);</div>
<div class="line"><span class="lineno">  407</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;cached&quot;</span>, cached);</div>
<div class="line"><span class="lineno">  408</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, c);</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>    <span class="keywordflow">for</span> (i = 0; i &lt; <span class="keyword">sizeof</span>(fslist) / <span class="keyword">sizeof</span>(fslist[0]); i += 2) {</div>
<div class="line"><span class="lineno">  411</span>        <span class="keywordflow">if</span> (statvfs(fslist[i], &amp;s))</div>
<div class="line"><span class="lineno">  412</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>        c = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, fslist[i+1]);</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>        <span class="keywordflow">if</span> (!s.f_frsize)</div>
<div class="line"><span class="lineno">  417</span>            s.f_frsize = s.f_bsize;</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span>        <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;total&quot;</span>, <a class="code hl_function" href="#a685076f24da40876ce566cc25b48a68d">kscale</a>(s.f_blocks, s.f_frsize));</div>
<div class="line"><span class="lineno">  420</span>        <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;free&quot;</span>,  <a class="code hl_function" href="#a685076f24da40876ce566cc25b48a68d">kscale</a>(s.f_bfree, s.f_frsize));</div>
<div class="line"><span class="lineno">  421</span>        <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;used&quot;</span>, <a class="code hl_function" href="#a685076f24da40876ce566cc25b48a68d">kscale</a>(s.f_blocks - s.f_bfree, s.f_frsize));</div>
<div class="line"><span class="lineno">  422</span>        <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;avail&quot;</span>, <a class="code hl_function" href="#a685076f24da40876ce566cc25b48a68d">kscale</a>(s.f_bavail, s.f_frsize));</div>
<div class="line"><span class="lineno">  423</span> </div>
<div class="line"><span class="lineno">  424</span>        <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, c);</div>
<div class="line"><span class="lineno">  425</span>    }</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>    c = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;swap&quot;</span>);</div>
<div class="line"><span class="lineno">  428</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;total&quot;</span>,</div>
<div class="line"><span class="lineno">  429</span>            (uint64_t)<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.mem_unit * (uint64_t)<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.totalswap);</div>
<div class="line"><span class="lineno">  430</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;free&quot;</span>,</div>
<div class="line"><span class="lineno">  431</span>            (uint64_t)<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.mem_unit * (uint64_t)<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a>.freeswap);</div>
<div class="line"><span class="lineno">  432</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, c);</div>
<div class="line"><span class="lineno">  433</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  434</span> </div>
<div class="line"><span class="lineno">  435</span>    <a class="code hl_function" href="../../d2/de5/libubus-req_8c.html#aab336677450493ac2229e8a2f70fa0e4">ubus_send_reply</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, req, <a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>.<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#af6065d74116605108b22c11e75ec669c">head</a>);</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab7a81fcac034b9ddc28cbf812d2ae6eb">UBUS_STATUS_OK</a>;</div>
<div class="line"><span class="lineno">  438</span>}</div>
<div class="ttc" id="ablobmsg_8h_html_a3252218dfc4cb4c8b54772196e8c2a14"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a></div><div class="ttdeci">static void blobmsg_close_table(struct blob_buf *buf, void *cookie)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00268">blobmsg.h:268</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a49c8f3302820716f41cd9bdafab331fa"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa">blobmsg_add_u64</a></div><div class="ttdeci">static int blobmsg_add_u64(struct blob_buf *buf, const char *name, uint64_t val)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00228">blobmsg.h:228</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a938ceeed1d840f9df7946262f1835214"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214">blobmsg_open_array</a></div><div class="ttdeci">static void * blobmsg_open_array(struct blob_buf *buf, const char *name)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00250">blobmsg.h:250</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_afcf08162affe766f0f1c9dd641c7b393"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393">blobmsg_add_u32</a></div><div class="ttdeci">static int blobmsg_add_u32(struct blob_buf *buf, const char *name, uint32_t val)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00221">blobmsg.h:221</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a685076f24da40876ce566cc25b48a68d"><div class="ttname"><a href="#a685076f24da40876ce566cc25b48a68d">kscale</a></div><div class="ttdeci">static unsigned long kscale(unsigned long b, unsigned long bs)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00327">system.c:327</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a99bec0c168a4d5ac338ad787dfb73312ab8845eab4efc86465452fa517b43c2b5"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab8845eab4efc86465452fa517b43c2b5">UBUS_STATUS_UNKNOWN_ERROR</a></div><div class="ttdeci">@ UBUS_STATUS_UNKNOWN_ERROR</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00128">ubusmsg.h:128</a></div></div>
<div class="ttc" id="audevtrigger_8c_html_a5094de7714b01dcdf0b22c03d00becaf"><div class="ttname"><a href="../../d2/d62/udevtrigger_8c.html#a5094de7714b01dcdf0b22c03d00becaf">info</a></div><div class="ttdeci">#define info(format, arg...)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d62/udevtrigger_8c_source.html#l00064">udevtrigger.c:64</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00038">b</a>, <a class="el" href="../../d4/da0/blob_8c_source.html#l00091">blob_buf_init()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00221">blobmsg_add_u32()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00228">blobmsg_add_u64()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00262">blobmsg_close_array()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00268">blobmsg_close_table()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00250">blobmsg_open_array()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00256">blobmsg_open_table()</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00065">blob_buf::head</a>, <a class="el" href="../../d2/d62/udevtrigger_8c_source.html#l00064">info</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00327">kscale()</a>, <a class="el" href="../../d2/de5/libubus-req_8c_source.html#l00205">ubus_send_reply()</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00119">UBUS_STATUS_OK</a>, and <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00128">UBUS_STATUS_UNKNOWN_ERROR</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_a5e16c193b6021498dee2b3a854b60ffa_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_a5e16c193b6021498dee2b3a854b60ffa_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_a5e16c193b6021498dee2b3a854b60ffa_cgraph" id="ad8/d1d/procd_2system_8c_a5e16c193b6021498dee2b3a854b60ffa_cgraph">
<area shape="rect" title=" " alt="" coords="5,429,138,463"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="728,668,867,701"/>
<area shape="poly" title=" " alt="" coords="120,461,187,485,486,584,726,660,725,665,485,589,185,490,118,466"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393" title=" " alt="" coords="197,144,388,177"/>
<area shape="poly" title=" " alt="" coords="73,428,83,381,103,318,136,250,158,218,184,191,194,183,197,187,187,195,162,222,140,252,108,319,88,383,78,429"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa" title=" " alt="" coords="197,205,388,239"/>
<area shape="poly" title=" " alt="" coords="76,428,90,392,113,346,144,298,184,256,203,244,206,248,187,260,148,301,117,349,95,394,81,430"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32" title=" " alt="" coords="454,486,668,520"/>
<area shape="poly" title=" " alt="" coords="138,451,439,486,438,492,138,456"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="455,429,667,463"/>
<area shape="poly" title=" " alt="" coords="138,443,440,443,440,449,138,449"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214" title=" " alt="" coords="186,270,399,304"/>
<area shape="poly" title=" " alt="" coords="84,427,126,379,154,353,184,329,223,308,225,313,187,334,157,357,130,383,88,430"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="187,344,398,377"/>
<area shape="poly" title=" " alt="" coords="117,426,232,381,234,386,118,431"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a685076f24da40876ce566cc25b48a68d" title=" " alt="" coords="253,596,332,629"/>
<area shape="poly" title=" " alt="" coords="86,462,126,517,155,548,187,574,212,588,239,598,237,603,210,593,184,579,151,552,122,521,81,465"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aab336677450493ac2229e8a2f70fa0e4" title=" " alt="" coords="204,658,381,692"/>
<area shape="poly" title=" " alt="" coords="80,462,94,499,116,547,147,597,166,620,187,640,201,649,198,654,184,644,162,624,143,600,111,549,89,501,75,464"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1185,668,1290,701"/>
<area shape="poly" title=" " alt="" coords="868,682,1169,682,1169,687,868,687"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="920,722,1100,756"/>
<area shape="poly" title=" " alt="" coords="866,700,928,715,926,721,865,705"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1578,746,1720,780"/>
<area shape="poly" title=" " alt="" coords="1261,700,1311,734,1342,750,1375,762,1422,771,1471,775,1562,773,1562,778,1471,781,1421,777,1374,767,1340,755,1308,738,1258,704"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1374,718,1530,752"/>
<area shape="poly" title=" " alt="" coords="1291,694,1364,712,1362,717,1290,700"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="1578,664,1720,697"/>
<area shape="poly" title=" " alt="" coords="1290,681,1562,679,1562,684,1290,687"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1384,558,1520,592"/>
<area shape="poly" title=" " alt="" coords="1271,665,1402,597,1405,602,1273,670"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="1402,828,1502,861"/>
<area shape="poly" title=" " alt="" coords="1256,700,1307,751,1376,806,1396,818,1393,823,1373,811,1304,755,1252,704"/>
<area shape="poly" title=" " alt="" coords="1530,744,1563,748,1562,754,1530,749"/>
<area shape="poly" title=" " alt="" coords="1515,715,1570,700,1572,705,1516,720"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="1578,426,1720,460"/>
<area shape="poly" title=" " alt="" coords="1477,556,1608,467,1611,471,1480,560"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1768,558,1909,592"/>
<area shape="poly" title=" " alt="" coords="1521,573,1752,573,1752,578,1521,578"/>
<area shape="poly" title=" " alt="" coords="1676,458,1802,547,1799,552,1673,463"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1957,558,2056,592"/>
<area shape="poly" title=" " alt="" coords="1910,573,1942,573,1942,578,1910,578"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="464,141,658,175"/>
<area shape="poly" title=" " alt="" coords="388,157,448,156,448,162,388,162"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aed178aa087a351c74f7f6cd34e56ba0c" title=" " alt="" coords="723,84,872,117"/>
<area shape="poly" title=" " alt="" coords="633,138,710,119,711,124,634,143"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1182,164,1293,197"/>
<area shape="poly" title=" " alt="" coords="851,115,920,134,1050,157,1166,171,1166,177,1050,162,919,139,850,121"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aee908e6de67c16a4d810d08f28ed1803" title=" " alt="" coords="956,352,1064,385"/>
<area shape="poly" title=" " alt="" coords="857,116,873,127,920,177,956,235,983,291,1001,337,996,338,978,293,951,237,915,180,870,131,854,120"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="934,90,1086,124"/>
<area shape="poly" title=" " alt="" coords="872,100,919,102,918,107,872,106"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ac239a83ed3c7f835e2b49f785953c934" title=" " alt="" coords="1152,36,1322,69"/>
<area shape="poly" title=" " alt="" coords="872,83,919,75,1031,63,1136,55,1137,61,1032,68,920,81,873,88"/>
<area shape="poly" title=" " alt="" coords="1026,384,1102,491,1217,653,1212,656,1098,494,1021,387"/>
<area shape="poly" title=" " alt="" coords="1064,350,1148,333,1237,324,1327,333,1386,345,1430,359,1531,398,1587,418,1586,423,1529,403,1429,364,1384,350,1326,338,1237,330,1148,338,1065,355"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac9fd36cdb87493b31a675621ed53a8d7" title=" " alt="" coords="1396,238,1508,272"/>
<area shape="poly" title=" " alt="" coords="1061,349,1099,330,1112,320,1121,309,1131,298,1147,289,1206,269,1268,257,1328,251,1381,250,1381,255,1328,256,1269,262,1208,274,1149,294,1135,303,1125,313,1116,324,1101,335,1064,354"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a189526712fcc12adfb6ea6a5c8eede54" title=" " alt="" coords="1148,348,1326,381"/>
<area shape="poly" title=" " alt="" coords="1064,365,1132,364,1132,369,1064,370"/>
<area shape="poly" title=" " alt="" coords="1501,270,1531,289,1563,318,1591,351,1632,412,1628,415,1586,354,1559,322,1528,293,1498,275"/>
<area shape="poly" title=" " alt="" coords="1065,122,1169,156,1167,161,1064,127"/>
<area shape="poly" title=" " alt="" coords="1082,87,1149,71,1150,76,1084,92"/>
<area shape="poly" title=" " alt="" coords="366,202,472,176,473,182,367,207"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="933,505,1087,539"/>
<area shape="poly" title=" " alt="" coords="619,518,670,531,724,541,797,546,871,541,917,536,917,541,872,546,797,551,723,546,669,536,618,523"/>
<area shape="poly" title=" " alt="" coords="1082,537,1564,657,1562,662,1080,542"/>
<area shape="poly" title=" " alt="" coords="1087,508,1148,499,1562,450,1563,455,1148,505,1088,513"/>
<area shape="poly" title=" " alt="" coords="1087,519,1451,518,1650,518,1781,522,1910,543,1943,552,1942,557,1909,549,1780,527,1650,523,1451,523,1087,524"/>
<area shape="poly" title=" " alt="" coords="1035,502,1198,388,1201,393,1038,507"/>
<area shape="poly" title=" " alt="" coords="665,461,918,504,917,509,664,466"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aaac450f6a679be8a392d17c3ed8700b4" title=" " alt="" coords="447,198,675,232"/>
<area shape="poly" title=" " alt="" coords="357,267,480,234,482,239,359,272"/>
<area shape="poly" title=" " alt="" coords="577,231,648,322,690,368,725,396,772,407,856,417,1090,431,1351,438,1562,440,1562,446,1351,443,1090,436,855,423,771,413,722,400,686,372,644,326,573,234"/>
<area shape="poly" title=" " alt="" coords="653,196,674,185,689,172,697,157,706,142,722,127,727,123,730,128,725,131,710,145,702,160,693,175,677,190,656,200"/>
<area shape="poly" title=" " alt="" coords="642,230,1143,341,1142,347,640,235"/>
<area shape="poly" title=" " alt="" coords="658,196,674,185,685,172,692,158,696,128,700,98,708,83,722,69,774,39,830,18,890,7,951,3,1010,5,1067,11,1163,29,1162,34,1066,16,1010,10,951,8,891,12,832,24,776,43,725,73,712,86,705,99,701,129,697,159,690,175,677,189,661,200"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="726,141,869,175"/>
<area shape="poly" title=" " alt="" coords="633,195,711,176,712,181,634,201"/>
<area shape="poly" title=" " alt="" coords="339,341,398,314,464,276,521,239,524,243,467,281,400,319,341,346"/>
<area shape="poly" title=" " alt="" coords="381,674,712,680,712,686,381,680"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a0e8112f19ea399af22d957f19cf6cfc7" title=" " alt="" coords="483,370,640,404"/>
<area shape="poly" title=" " alt="" coords="376,656,397,640,415,612,423,585,423,557,420,529,416,501,417,472,425,443,445,415,467,399,470,403,449,419,430,446,422,473,422,500,425,528,428,557,428,586,420,615,401,644,380,660"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a3e8e6d098f2808fa135bfefa3c0e81f8" title=" " alt="" coords="476,828,646,861"/>
<area shape="poly" title=" " alt="" coords="323,691,521,817,518,821,320,695"/>
<area shape="poly" title=" " alt="" coords="641,401,676,414,727,444,809,498,1025,647,1241,794,1324,846,1375,871,1421,881,1468,884,1515,881,1561,873,1607,859,1651,841,1737,797,1815,745,1882,691,1977,602,1981,605,1886,695,1818,749,1740,802,1654,846,1608,864,1562,878,1515,887,1468,890,1421,887,1373,876,1321,851,1238,799,1022,652,806,502,725,448,674,419,639,406"/>
<area shape="poly" title=" " alt="" coords="619,367,1166,199,1168,204,620,372"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="747,352,848,385"/>
<area shape="poly" title=" " alt="" coords="640,378,731,371,731,376,641,384"/>
<area shape="poly" title=" " alt="" coords="848,354,985,318,1051,298,1099,280,1157,244,1204,206,1208,210,1160,248,1101,284,1053,303,986,323,849,359"/>
<area shape="poly" title=" " alt="" coords="849,366,940,366,940,371,849,371"/>
<area shape="poly" title=" " alt="" coords="586,825,757,708,760,713,589,829"/>
<area shape="poly" title=" " alt="" coords="607,860,682,886,781,915,893,938,951,945,1009,947,1453,947,1500,945,1539,937,1572,924,1601,906,1656,857,1718,791,1755,745,1785,695,1824,606,1829,608,1789,697,1759,748,1722,794,1659,861,1604,911,1574,929,1540,942,1501,950,1453,953,1008,953,951,950,893,943,780,920,680,891,605,865"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a9a256a75cd053ed5d3443060e0a19a3f" title=" " alt="" coords="732,988,863,1021"/>
<area shape="poly" title=" " alt="" coords="584,860,645,910,725,966,745,978,743,983,722,971,642,914,581,864"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#ad1aaffb83e802ad470cb77be9f56977c" title=" " alt="" coords="955,988,1065,1021"/>
<area shape="poly" title=" " alt="" coords="863,1002,939,1002,939,1007,863,1007"/>
</map>
</div>

</div>
</div>
<a id="a7021c7b54efb1e1c02aa12bbc0bdfb11" name="a7021c7b54efb1e1c02aa12bbc0bdfb11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7021c7b54efb1e1c02aa12bbc0bdfb11">&#9670;&#160;</a></span>system_reboot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int system_reboot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *</td>          <td class="paramname"><span class="paramname"><em>req</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00440">440</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  443</span>{</div>
<div class="line"><span class="lineno">  444</span>    <a class="code hl_function" href="../../dc/dab/procd_8h.html#acf43b8aafd73b80170dac94b1ea7e675">procd_shutdown</a>(RB_AUTOBOOT);</div>
<div class="line"><span class="lineno">  445</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  446</span>}</div>
<div class="ttc" id="aprocd_8h_html_acf43b8aafd73b80170dac94b1ea7e675"><div class="ttname"><a href="../../dc/dab/procd_8h.html#acf43b8aafd73b80170dac94b1ea7e675">procd_shutdown</a></div><div class="ttdeci">void procd_shutdown(int event)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00222">state.c:222</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/dc9/state_8c_source.html#l00222">procd_shutdown()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_a7021c7b54efb1e1c02aa12bbc0bdfb11_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_a7021c7b54efb1e1c02aa12bbc0bdfb11_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_a7021c7b54efb1e1c02aa12bbc0bdfb11_cgraph" id="ad8/d1d/procd_2system_8c_a7021c7b54efb1e1c02aa12bbc0bdfb11_cgraph">
<area shape="rect" title=" " alt="" coords="5,664,162,698"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#acf43b8aafd73b80170dac94b1ea7e675" title=" " alt="" coords="210,664,383,698"/>
<area shape="poly" title=" " alt="" coords="162,678,194,678,194,684,162,684"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#ae065f8ea6c1cf93be358341a009bf759" title=" " alt="" coords="431,664,556,698"/>
<area shape="poly" title=" " alt="" coords="384,678,416,678,416,684,384,684"/>
<area shape="rect" href="../../da/d37/hotplug_8c.html#af2cd40f5e26df4bdea678b303bc4a48c" title=" " alt="" coords="663,107,756,140"/>
<area shape="poly" title=" " alt="" coords="494,663,506,565,528,421,561,276,580,218,602,177,623,156,648,141,650,146,626,161,606,180,585,220,566,277,534,422,511,566,499,664"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a4d074ca51f245cecff86a84a05e27a33" title=" " alt="" coords="640,191,779,224"/>
<area shape="poly" title=" " alt="" coords="492,664,494,591,507,484,521,424,540,364,567,307,602,255,617,241,634,229,637,234,620,245,606,259,572,310,545,366,526,426,512,485,499,592,497,664"/>
<area shape="rect" href="../../d0/d3c/coldplug_8c.html#a99355122adf84389f5c5834c6b399922" title=" " alt="" coords="629,269,790,303"/>
<area shape="poly" title=" " alt="" coords="498,663,536,556,566,486,602,417,641,360,680,313,684,317,645,363,607,420,571,488,541,558,503,664"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#ae85c33038baa57d4faa6e4c3628fefec" title=" " alt="" coords="604,581,815,615"/>
<area shape="poly" title=" " alt="" coords="539,661,648,619,650,624,541,666"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#ad41fa8946f382dfa229ea8eccbd81bf4" title=" " alt="" coords="639,664,780,698"/>
<area shape="poly" title=" " alt="" coords="557,678,623,678,623,684,557,684"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1" title=" " alt="" coords="618,721,801,755"/>
<area shape="poly" title=" " alt="" coords="557,695,629,714,628,719,556,700"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#ae01cc4911a782c7811497063404f7656" title=" " alt="" coords="612,907,807,940"/>
<area shape="poly" title=" " alt="" coords="512,697,685,893,681,897,508,700"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a836f795ef705b19d71acd071b7c85101" title=" " alt="" coords="645,1083,774,1116"/>
<area shape="poly" title=" " alt="" coords="500,698,509,755,527,838,559,931,581,976,606,1018,634,1048,665,1072,662,1076,630,1052,602,1021,576,978,554,933,522,839,503,756,494,699"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a92213c7578d9161ad8e296cf51962b3b" title=" " alt="" coords="926,1193,1030,1227"/>
<area shape="poly" title=" " alt="" coords="500,698,511,746,531,812,562,885,582,920,606,951,632,976,658,991,710,1009,763,1027,790,1043,817,1068,828,1084,834,1099,839,1128,845,1155,852,1167,864,1180,887,1194,912,1202,910,1207,884,1199,861,1184,848,1171,840,1156,834,1129,829,1100,823,1086,813,1072,786,1048,760,1032,708,1014,656,996,629,980,602,955,578,923,557,887,526,814,506,747,495,699"/>
<area shape="rect" href="../../d9/d65/ulog_8c.html#a962767ce46bee1f4c9b44ecd408dd669" title=" " alt="" coords="651,1228,768,1262"/>
<area shape="poly" title=" " alt="" coords="499,698,506,770,524,879,557,1005,579,1068,607,1128,641,1176,678,1216,675,1219,636,1180,602,1130,574,1070,551,1006,519,880,501,770,494,698"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a874a52d6ac45041d9e76bd1925d88c24" title=" " alt="" coords="635,431,784,464"/>
<area shape="poly" title=" " alt="" coords="509,662,680,474,684,478,513,665"/>
<area shape="rect" href="../../d4/d4c/json__script_8c.html#a1dbfcb66aa8ef4297aca3e2962750073" title=" " alt="" coords="899,5,1057,39"/>
<area shape="poly" title=" " alt="" coords="741,104,796,75,862,48,883,41,884,46,864,53,799,80,743,108"/>
<area shape="rect" href="../../da/d37/hotplug_8c.html#adec4184e967b6251ca24c1a347b84c24" title=" " alt="" coords="898,63,1058,96"/>
<area shape="poly" title=" " alt="" coords="755,113,882,92,883,98,756,119"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0" title=" " alt="" coords="906,120,1050,154"/>
<area shape="poly" title=" " alt="" coords="756,123,890,130,890,135,756,128"/>
<area shape="rect" href="../../d4/ddd/container_8h.html#a05b941972fa26f438826c9b6c291ef25" title=" " alt="" coords="912,177,1044,211"/>
<area shape="poly" title=" " alt="" coords="779,201,896,196,896,201,780,207"/>
<area shape="poly" title=" " alt="" coords="747,266,800,243,862,220,896,209,898,215,864,225,802,248,749,271"/>
<area shape="rect" href="../../d0/d3c/coldplug_8c.html#a7cb00c0ad6086c37a0f11c7f47b219cf" title=" " alt="" coords="866,235,1090,268"/>
<area shape="poly" title=" " alt="" coords="790,273,850,265,851,271,791,278"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#af511d1bcbdfcfaba211d4ae1b0930dbb" title=" " alt="" coords="1141,317,1337,351"/>
<area shape="poly" title=" " alt="" coords="791,291,1126,321,1125,327,790,296"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#ab04b86ab1de0a8cc792eac1f5fccc387" title=" " alt="" coords="1166,539,1313,572"/>
<area shape="poly" title=" " alt="" coords="759,578,808,564,862,553,938,546,1014,543,1150,546,1150,551,1014,548,938,551,863,558,810,569,760,583"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#a2f1d28c800993b650b16349937bc4cc3" title=" " alt="" coords="1167,609,1312,643"/>
<area shape="poly" title=" " alt="" coords="816,608,863,612,1015,619,1151,623,1151,628,1015,624,862,617,815,613"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#af8f81bf02a1064257a2b3363668bb700" title=" " alt="" coords="888,568,1068,602"/>
<area shape="poly" title=" " alt="" coords="815,590,872,587,872,593,815,596"/>
<area shape="poly" title=" " alt="" coords="1068,572,1150,563,1150,568,1069,577"/>
<area shape="poly" title=" " alt="" coords="1069,596,1152,610,1151,615,1068,602"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#a0d79ba1bf57a05e542000f9f7bc4dc73" title=" " alt="" coords="917,677,1039,711"/>
<area shape="poly" title=" " alt="" coords="781,682,902,688,901,693,781,687"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="908,735,1048,768"/>
<area shape="poly" title=" " alt="" coords="722,905,778,842,817,807,861,777,892,764,894,769,864,782,820,811,781,846,726,908"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="874,792,1082,826"/>
<area shape="poly" title=" " alt="" coords="735,904,791,869,862,834,879,828,881,833,864,839,794,874,737,908"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32" title=" " alt="" coords="871,849,1085,883"/>
<area shape="poly" title=" " alt="" coords="791,903,880,884,881,889,792,909"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="872,907,1084,940"/>
<area shape="poly" title=" " alt="" coords="807,921,856,921,856,926,807,926"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214" title=" " alt="" coords="871,964,1085,998"/>
<area shape="poly" title=" " alt="" coords="792,938,881,958,880,963,791,944"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="872,1021,1084,1055"/>
<area shape="poly" title=" " alt="" coords="743,939,816,980,839,995,864,1008,880,1014,878,1019,862,1013,837,1000,813,984,740,943"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a422dae339fb612dbf5723dabf2ea93ab" title=" " alt="" coords="931,1079,1025,1112"/>
<area shape="poly" title=" " alt="" coords="755,939,787,957,817,980,833,1004,840,1026,847,1046,864,1065,889,1079,916,1087,914,1092,887,1084,861,1070,843,1049,835,1027,828,1006,813,984,784,961,752,943"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#a2ab347c929ea42e974beced745d73de3" title=" " alt="" coords="880,1136,1076,1170"/>
<area shape="poly" title=" " alt="" coords="759,939,789,956,817,980,829,1000,836,1019,839,1056,843,1090,850,1106,865,1123,868,1126,865,1130,861,1127,846,1109,838,1091,834,1056,831,1020,825,1002,813,984,786,960,756,943"/>
<area shape="poly" title=" " alt="" coords="739,1115,795,1147,864,1180,912,1195,910,1200,862,1185,793,1152,736,1119"/>
<area shape="rect" href="../../d9/d65/ulog_8c.html#aa98943b7174469752250aa9314bf45ff" title=" " alt="" coords="919,1251,1037,1284"/>
<area shape="poly" title=" " alt="" coords="768,1247,904,1259,903,1264,768,1252"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a90282b93d8528c3fc4e5b188bc5fbc1c" title=" " alt="" coords="938,344,1018,378"/>
<area shape="poly" title=" " alt="" coords="751,428,862,386,922,370,923,375,863,391,753,433"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58" title=" " alt="" coords="895,401,1061,435"/>
<area shape="poly" title=" " alt="" coords="784,437,879,426,879,432,785,442"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a05316067521d0e4efd9b8d3a3a322591" title=" " alt="" coords="863,459,1093,492"/>
<area shape="poly" title=" " alt="" coords="785,453,848,459,847,465,784,458"/>
<area shape="poly" title=" " alt="" coords="1018,354,1125,343,1126,348,1019,359"/>
</map>
</div>

</div>
</div>
<a id="a1728f56060bd8af8a310528a54e86843" name="a1728f56060bd8af8a310528a54e86843"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1728f56060bd8af8a310528a54e86843">&#9670;&#160;</a></span>system_rootfs_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * system_rootfs_type </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00049">49</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>                                            {</div>
<div class="line"><span class="lineno">   50</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> proc_mounts[] = <span class="stringliteral">&quot;/proc/self/mounts&quot;</span>;</div>
<div class="line"><span class="lineno">   51</span>    <span class="keyword">static</span> <span class="keywordtype">char</span> fstype[16] = { 0 };</div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordtype">char</span> *mountstr = NULL, *mp = <span class="stringliteral">&quot;/&quot;</span>, *pos, *tmp;</div>
<div class="line"><span class="lineno">   53</span>    FILE *<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#ab73004ccbdbc7a5bcf2d7534135070c5">mounts</a>;</div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordtype">size_t</span> len = 0;</div>
<div class="line"><span class="lineno">   55</span>    <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#ac27bf7208ee9ade15186848187be3f15">initramfs</a>)</div>
<div class="line"><span class="lineno">   58</span>        <span class="keywordflow">return</span> <span class="stringliteral">&quot;initramfs&quot;</span>;</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">if</span> (fstype[0])</div>
<div class="line"><span class="lineno">   61</span>        <span class="keywordflow">return</span> fstype;</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>    <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#ab73004ccbdbc7a5bcf2d7534135070c5">mounts</a> = fopen(proc_mounts, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#ab73004ccbdbc7a5bcf2d7534135070c5">mounts</a>)</div>
<div class="line"><span class="lineno">   65</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>    <span class="keywordflow">while</span> (getline(&amp;mountstr, &amp;len, <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#ab73004ccbdbc7a5bcf2d7534135070c5">mounts</a>) != -1) {</div>
<div class="line"><span class="lineno">   68</span>        pos = strchr(mountstr, <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><span class="lineno">   69</span>        <span class="keywordflow">if</span> (!pos)</div>
<div class="line"><span class="lineno">   70</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span>        tmp = pos + 1;</div>
<div class="line"><span class="lineno">   73</span>        pos = strchr(tmp, <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><span class="lineno">   74</span>        <span class="keywordflow">if</span> (!pos)</div>
<div class="line"><span class="lineno">   75</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>        *pos = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">   78</span>        <span class="keywordflow">if</span> (strcmp(tmp, mp))</div>
<div class="line"><span class="lineno">   79</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>        tmp = pos + 1;</div>
<div class="line"><span class="lineno">   82</span>        pos = strchr(tmp, <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><span class="lineno">   83</span>        <span class="keywordflow">if</span> (!pos)</div>
<div class="line"><span class="lineno">   84</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>        *pos = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>        <span class="keywordflow">if</span> (!strcmp(tmp, <span class="stringliteral">&quot;overlay&quot;</span>)) {</div>
<div class="line"><span class="lineno">   89</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno">   90</span><span class="comment">             * there is no point in parsing overlay option string for</span></div>
<div class="line"><span class="lineno">   91</span><span class="comment">             * lowerdir, as that can point to &quot;/&quot; being a previous</span></div>
<div class="line"><span class="lineno">   92</span><span class="comment">             * overlay mount (after firstboot or sysuprade config</span></div>
<div class="line"><span class="lineno">   93</span><span class="comment">             * restore). Hence just assume the lowerdir is &quot;/rom&quot; and</span></div>
<div class="line"><span class="lineno">   94</span><span class="comment">             * restart searching for that instead if that&#39;s not</span></div>
<div class="line"><span class="lineno">   95</span><span class="comment">             * already the case.</span></div>
<div class="line"><span class="lineno">   96</span><span class="comment">             */</span></div>
<div class="line"><span class="lineno">   97</span>            <span class="keywordflow">if</span> (!strcmp(mp, <span class="stringliteral">&quot;/rom&quot;</span>))</div>
<div class="line"><span class="lineno">   98</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>            mp = <span class="stringliteral">&quot;/rom&quot;</span>;</div>
<div class="line"><span class="lineno">  101</span>            fseek(<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#ab73004ccbdbc7a5bcf2d7534135070c5">mounts</a>, 0, SEEK_SET);</div>
<div class="line"><span class="lineno">  102</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  103</span>        }</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>        found = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  107</span>    }</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>    <span class="keywordflow">if</span> (found)</div>
<div class="line"><span class="lineno">  110</span>        strncpy(fstype, tmp, <span class="keyword">sizeof</span>(fstype) - 1);</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    fstype[<span class="keyword">sizeof</span>(fstype) - 1]= <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  113</span>    free(mountstr);</div>
<div class="line"><span class="lineno">  114</span>    fclose(<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#ab73004ccbdbc7a5bcf2d7534135070c5">mounts</a>);</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>    <span class="keywordflow">if</span> (found)</div>
<div class="line"><span class="lineno">  117</span>        <span class="keywordflow">return</span> fstype;</div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  119</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  120</span>}</div>
<div class="ttc" id="afs_8c_html_ab73004ccbdbc7a5bcf2d7534135070c5"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#ab73004ccbdbc7a5bcf2d7534135070c5">mounts</a></div><div class="ttdeci">struct avl_tree mounts</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d5a/fs_8c_source.html#l00056">fs.c:56</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_ac27bf7208ee9ade15186848187be3f15"><div class="ttname"><a href="#ac27bf7208ee9ade15186848187be3f15">initramfs</a></div><div class="ttdeci">static int initramfs</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00041">system.c:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00041">initramfs</a>, and <a class="el" href="../../d2/d5a/fs_8c_source.html#l00056">mounts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00122">system_board()</a>.</p>

</div>
</div>
<a id="a971a97328aa4e052756235e6690602f7" name="a971a97328aa4e052756235e6690602f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a971a97328aa4e052756235e6690602f7">&#9670;&#160;</a></span>sysupgrade()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sysupgrade </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *</td>          <td class="paramname"><span class="paramname"><em>req</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00764">764</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  767</span>{</div>
<div class="line"><span class="lineno">  768</span>    <span class="keyword">enum</span> {</div>
<div class="line"><span class="lineno">  769</span>        VALIDATION_VALID,</div>
<div class="line"><span class="lineno">  770</span>        VALIDATION_FORCEABLE,</div>
<div class="line"><span class="lineno">  771</span>        VALIDATION_ALLOW_BACKUP,</div>
<div class="line"><span class="lineno">  772</span>        __VALIDATION_MAX</div>
<div class="line"><span class="lineno">  773</span>    };</div>
<div class="line"><span class="lineno">  774</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../dd/dad/blobmsg_8h.html#d3/d4d/structblobmsg__policy">blobmsg_policy</a> validation_policy[__VALIDATION_MAX] = {</div>
<div class="line"><span class="lineno">  775</span>        [VALIDATION_VALID] = { .name = <span class="stringliteral">&quot;valid&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a65f050be4633329d0af340d88e209df6">BLOBMSG_TYPE_BOOL</a> },</div>
<div class="line"><span class="lineno">  776</span>        [VALIDATION_FORCEABLE] = { .name = <span class="stringliteral">&quot;forceable&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a65f050be4633329d0af340d88e209df6">BLOBMSG_TYPE_BOOL</a> },</div>
<div class="line"><span class="lineno">  777</span>        [VALIDATION_ALLOW_BACKUP] = { .name = <span class="stringliteral">&quot;allow_backup&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a65f050be4633329d0af340d88e209df6">BLOBMSG_TYPE_BOOL</a> },</div>
<div class="line"><span class="lineno">  778</span>    };</div>
<div class="line"><span class="lineno">  779</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *validation[__VALIDATION_MAX];</div>
<div class="line"><span class="lineno">  780</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84ad472358e502d3158f0115e36923dabf4">__SYSUPGRADE_MAX</a>];</div>
<div class="line"><span class="lineno">  781</span>    <span class="keywordtype">bool</span> valid, forceable, allow_backup;</div>
<div class="line"><span class="lineno">  782</span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a> ret = <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb">VJSON_ERROR</a>;</div>
<div class="line"><span class="lineno">  783</span>    <span class="keywordtype">char</span> *<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>;</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>    <span class="keywordflow">if</span> (!msg)</div>
<div class="line"><span class="lineno">  786</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312a01547e86014c16f5a948f832185ce2e7">UBUS_STATUS_INVALID_ARGUMENT</a>;</div>
<div class="line"><span class="lineno">  787</span> </div>
<div class="line"><span class="lineno">  788</span>    <a class="code hl_function" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed">blobmsg_parse</a>(<a class="code hl_variable" href="#ab8cf62096176a253e423aa32e1550ec2">sysupgrade_policy</a>, <a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84ad472358e502d3158f0115e36923dabf4">__SYSUPGRADE_MAX</a>, tb, <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857">blob_data</a>(msg), <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32">blob_len</a>(msg));</div>
<div class="line"><span class="lineno">  789</span>    <span class="keywordflow">if</span> (!tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84aecf07f19495a7d89ae380803cae97557">SYSUPGRADE_PATH</a>] || !tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84ad4a0316f464ea73c347dab5c826866d5">SYSUPGRADE_PREFIX</a>])</div>
<div class="line"><span class="lineno">  790</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312a01547e86014c16f5a948f832185ce2e7">UBUS_STATUS_INVALID_ARGUMENT</a>;</div>
<div class="line"><span class="lineno">  791</span> </div>
<div class="line"><span class="lineno">  792</span>    ret = <a class="code hl_function" href="#a91a439107e9ff41b6c2b9082b73f1972">validate_firmware_image_call</a>(<a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603">blobmsg_get_string</a>(tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84aecf07f19495a7d89ae380803cae97557">SYSUPGRADE_PATH</a>]), &amp;<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>);</div>
<div class="line"><span class="lineno">  793</span>    <span class="keywordflow">if</span> (ret != <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfa2dfac29cc5f20e29835881399b63a4b9">VJSON_SUCCESS</a>) {</div>
<div class="line"><span class="lineno">  794</span>        <a class="code hl_function" href="#a9c77c01c21439286a9fdebb814d5b523">sysupgrade_error</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, req, <a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>);</div>
<div class="line"><span class="lineno">  795</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab8845eab4efc86465452fa517b43c2b5">UBUS_STATUS_UNKNOWN_ERROR</a>;</div>
<div class="line"><span class="lineno">  796</span>    }</div>
<div class="line"><span class="lineno">  797</span> </div>
<div class="line"><span class="lineno">  798</span>    <a class="code hl_function" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed">blobmsg_parse</a>(validation_policy, __VALIDATION_MAX, validation, <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857">blob_data</a>(<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>.<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#af6065d74116605108b22c11e75ec669c">head</a>), <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32">blob_len</a>(<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>.<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#af6065d74116605108b22c11e75ec669c">head</a>));</div>
<div class="line"><span class="lineno">  799</span> </div>
<div class="line"><span class="lineno">  800</span>    <span class="keywordflow">if</span> (!validation[VALIDATION_VALID] || !validation[VALIDATION_FORCEABLE] ||</div>
<div class="line"><span class="lineno">  801</span>        !validation[VALIDATION_ALLOW_BACKUP]) {</div>
<div class="line"><span class="lineno">  802</span>        <a class="code hl_function" href="#a9c77c01c21439286a9fdebb814d5b523">sysupgrade_error</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, req, <span class="stringliteral">&quot;Validation script provided invalid input&quot;</span>);</div>
<div class="line"><span class="lineno">  803</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312a01547e86014c16f5a948f832185ce2e7">UBUS_STATUS_INVALID_ARGUMENT</a>;</div>
<div class="line"><span class="lineno">  804</span>    }</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>    valid = validation[VALIDATION_VALID] &amp;&amp; <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#adfbec0b532211a1442310392496a45f2">blobmsg_get_bool</a>(validation[VALIDATION_VALID]);</div>
<div class="line"><span class="lineno">  807</span>    forceable = validation[VALIDATION_FORCEABLE] &amp;&amp; <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#adfbec0b532211a1442310392496a45f2">blobmsg_get_bool</a>(validation[VALIDATION_FORCEABLE]);</div>
<div class="line"><span class="lineno">  808</span>    allow_backup = validation[VALIDATION_ALLOW_BACKUP] &amp;&amp; <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#adfbec0b532211a1442310392496a45f2">blobmsg_get_bool</a>(validation[VALIDATION_ALLOW_BACKUP]);</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>    <span class="keywordflow">if</span> (!valid) {</div>
<div class="line"><span class="lineno">  811</span>        <span class="keywordflow">if</span> (!forceable) {</div>
<div class="line"><span class="lineno">  812</span>            <a class="code hl_function" href="#a9c77c01c21439286a9fdebb814d5b523">sysupgrade_error</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, req, <span class="stringliteral">&quot;Firmware image is broken and cannot be installed&quot;</span>);</div>
<div class="line"><span class="lineno">  813</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ad74e2dea71b3e0779258d7d3f0893577">UBUS_STATUS_NOT_SUPPORTED</a>;</div>
<div class="line"><span class="lineno">  814</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84aee73114f6762d420874b85f2275283e0">SYSUPGRADE_FORCE</a>] || !<a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#adfbec0b532211a1442310392496a45f2">blobmsg_get_bool</a>(tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84aee73114f6762d420874b85f2275283e0">SYSUPGRADE_FORCE</a>])) {</div>
<div class="line"><span class="lineno">  815</span>            <a class="code hl_function" href="#a9c77c01c21439286a9fdebb814d5b523">sysupgrade_error</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, req, <span class="stringliteral">&quot;Firmware image is invalid&quot;</span>);</div>
<div class="line"><span class="lineno">  816</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ad74e2dea71b3e0779258d7d3f0893577">UBUS_STATUS_NOT_SUPPORTED</a>;</div>
<div class="line"><span class="lineno">  817</span>        }</div>
<div class="line"><span class="lineno">  818</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!allow_backup &amp;&amp; tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84a0e4256eca723c8d05cb9ce33a09991c4">SYSUPGRADE_BACKUP</a>]) {</div>
<div class="line"><span class="lineno">  819</span>        <a class="code hl_function" href="#a9c77c01c21439286a9fdebb814d5b523">sysupgrade_error</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, req, <span class="stringliteral">&quot;Firmware image doesn&#39;t allow preserving a backup&quot;</span>);</div>
<div class="line"><span class="lineno">  820</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ad74e2dea71b3e0779258d7d3f0893577">UBUS_STATUS_NOT_SUPPORTED</a>;</div>
<div class="line"><span class="lineno">  821</span>    }</div>
<div class="line"><span class="lineno">  822</span> </div>
<div class="line"><span class="lineno">  823</span>    <a class="code hl_function" href="../../d7/d1d/service_8c.html#a637cdad6e9e1e5b837c0072ae9b4a1ce">service_stop_all</a>();</div>
<div class="line"><span class="lineno">  824</span> </div>
<div class="line"><span class="lineno">  825</span>    <a class="code hl_function" href="../../db/d65/sysupgrade_8c.html#a2f25b3ed2b57dbfdd9171d17a0e527c6">sysupgrade_exec_upgraded</a>(<a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603">blobmsg_get_string</a>(tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84ad4a0316f464ea73c347dab5c826866d5">SYSUPGRADE_PREFIX</a>]),</div>
<div class="line"><span class="lineno">  826</span>                 <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603">blobmsg_get_string</a>(tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84aecf07f19495a7d89ae380803cae97557">SYSUPGRADE_PATH</a>]),</div>
<div class="line"><span class="lineno">  827</span>                 tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84a0e4256eca723c8d05cb9ce33a09991c4">SYSUPGRADE_BACKUP</a>] ? <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603">blobmsg_get_string</a>(tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84a0e4256eca723c8d05cb9ce33a09991c4">SYSUPGRADE_BACKUP</a>]) : NULL,</div>
<div class="line"><span class="lineno">  828</span>                 tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84add0332b3083ec16ddf04e8729cc75fde">SYSUPGRADE_COMMAND</a>] ? <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603">blobmsg_get_string</a>(tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84add0332b3083ec16ddf04e8729cc75fde">SYSUPGRADE_COMMAND</a>]) : NULL,</div>
<div class="line"><span class="lineno">  829</span>                 tb[<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84ab99b1085b4d7dcbf8a6c6489a59c625d">SYSUPGRADE_OPTIONS</a>]);</div>
<div class="line"><span class="lineno">  830</span> </div>
<div class="line"><span class="lineno">  831</span>    <span class="comment">/* sysupgrade_exec_upgraded() will never return unless something has gone wrong */</span></div>
<div class="line"><span class="lineno">  832</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab8845eab4efc86465452fa517b43c2b5">UBUS_STATUS_UNKNOWN_ERROR</a>;</div>
<div class="line"><span class="lineno">  833</span>}</div>
<div class="ttc" id="ablobmsg_8h_html_a6c1cc8e52e96bf9698f6b0f65ad48603"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603">blobmsg_get_string</a></div><div class="ttdeci">static char * blobmsg_get_string(struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00348">blobmsg.h:348</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a9e3efca3093410d90ef04154aefde2c9a65f050be4633329d0af340d88e209df6"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a65f050be4633329d0af340d88e209df6">BLOBMSG_TYPE_BOOL</a></div><div class="ttdeci">@ BLOBMSG_TYPE_BOOL</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00034">blobmsg.h:34</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_adfbec0b532211a1442310392496a45f2"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#adfbec0b532211a1442310392496a45f2">blobmsg_get_bool</a></div><div class="ttdeci">static bool blobmsg_get_bool(struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00283">blobmsg.h:283</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_d3/d4d/structblobmsg__policy"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#d3/d4d/structblobmsg__policy">blobmsg_policy</a></div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00046">blobmsg.h:46</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a37b14f2a457d8d58a8c857b0d8bdb5cf"><div class="ttname"><a href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a></div><div class="ttdeci">vjson_state</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00043">system.c:43</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a91a439107e9ff41b6c2b9082b73f1972"><div class="ttname"><a href="#a91a439107e9ff41b6c2b9082b73f1972">validate_firmware_image_call</a></div><div class="ttdeci">static enum vjson_state validate_firmware_image_call(const char *file, char **err)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00643">system.c:643</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a9c77c01c21439286a9fdebb814d5b523"><div class="ttname"><a href="#a9c77c01c21439286a9fdebb814d5b523">sysupgrade_error</a></div><div class="ttdeci">static void sysupgrade_error(struct ubus_context *ctx, struct ubus_request_data *req, const char *message)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00749">system.c:749</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_ab8cf62096176a253e423aa32e1550ec2"><div class="ttname"><a href="#ab8cf62096176a253e423aa32e1550ec2">sysupgrade_policy</a></div><div class="ttdeci">static const struct blobmsg_policy sysupgrade_policy[__SYSUPGRADE_MAX]</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00740">system.c:740</a></div></div>
<div class="ttc" id="aservice_8c_html_a637cdad6e9e1e5b837c0072ae9b4a1ce"><div class="ttname"><a href="../../d7/d1d/service_8c.html#a637cdad6e9e1e5b837c0072ae9b4a1ce">service_stop_all</a></div><div class="ttdeci">void service_stop_all(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d1d/service_8c_source.html#l00673">service.c:673</a></div></div>
<div class="ttc" id="asysupgrade_8c_html_a2f25b3ed2b57dbfdd9171d17a0e527c6"><div class="ttname"><a href="../../db/d65/sysupgrade_8c.html#a2f25b3ed2b57dbfdd9171d17a0e527c6">sysupgrade_exec_upgraded</a></div><div class="ttdeci">void sysupgrade_exec_upgraded(const char *prefix, char *path, const char *backup, char *command, struct blob_attr *options)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d65/sysupgrade_8c_source.html#l00028">sysupgrade.c:28</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a99bec0c168a4d5ac338ad787dfb73312ad74e2dea71b3e0779258d7d3f0893577"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ad74e2dea71b3e0779258d7d3f0893577">UBUS_STATUS_NOT_SUPPORTED</a></div><div class="ttdeci">@ UBUS_STATUS_NOT_SUPPORTED</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00127">ubusmsg.h:127</a></div></div>
<div class="ttc" id="audevtrigger_8c_html_abdc0ddb6c825c951cdc8e45b53459445"><div class="ttname"><a href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a></div><div class="ttdeci">#define err(format, arg...)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d62/udevtrigger_8c_source.html#l00058">udevtrigger.c:58</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00737">__SYSUPGRADE_MAX</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00038">b</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00075">blob_data()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00100">blob_len()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00283">blobmsg_get_bool()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00348">blobmsg_get_string()</a>, <a class="el" href="../../d1/d30/blobmsg_8c_source.html#l00166">blobmsg_parse()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00034">BLOBMSG_TYPE_BOOL</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../d2/d62/udevtrigger_8c_source.html#l00058">err</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00065">blob_buf::head</a>, <a class="el" href="../../d7/d1d/service_8c_source.html#l00673">service_stop_all()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00733">SYSUPGRADE_BACKUP</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00735">SYSUPGRADE_COMMAND</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00749">sysupgrade_error()</a>, <a class="el" href="../../db/d65/sysupgrade_8c_source.html#l00028">sysupgrade_exec_upgraded()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00732">SYSUPGRADE_FORCE</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00736">SYSUPGRADE_OPTIONS</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00731">SYSUPGRADE_PATH</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00740">sysupgrade_policy</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00734">SYSUPGRADE_PREFIX</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00121">UBUS_STATUS_INVALID_ARGUMENT</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00127">UBUS_STATUS_NOT_SUPPORTED</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00128">UBUS_STATUS_UNKNOWN_ERROR</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00643">validate_firmware_image_call()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00044">VJSON_ERROR</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00046">VJSON_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de5/preinit_8c_source.html#l00054">check_sysupgrade()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_a971a97328aa4e052756235e6690602f7_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_a971a97328aa4e052756235e6690602f7_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_a971a97328aa4e052756235e6690602f7_cgraph" id="ad8/d1d/procd_2system_8c_a971a97328aa4e052756235e6690602f7_cgraph">
<area shape="rect" title=" " alt="" coords="5,538,136,572"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1374,463,1485,497"/>
<area shape="poly" title=" " alt="" coords="73,537,85,491,107,429,139,361,159,328,182,298,290,173,339,122,389,80,442,47,503,22,575,8,661,3,964,3,1063,4,1104,8,1141,16,1177,29,1212,47,1249,73,1288,107,1322,146,1351,191,1374,238,1392,286,1416,377,1427,447,1422,448,1411,378,1387,288,1369,240,1346,193,1318,150,1284,111,1245,77,1209,52,1175,33,1140,21,1103,14,1062,10,964,8,661,8,576,13,505,27,445,51,392,84,343,126,294,176,186,302,163,331,143,364,112,431,90,493,78,538"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1156,638,1254,672"/>
<area shape="poly" title=" " alt="" coords="78,536,117,469,147,431,182,397,261,343,369,281,496,219,632,163,768,119,833,104,894,95,950,92,1000,96,1043,108,1077,130,1090,145,1100,165,1111,216,1115,278,1114,345,1111,477,1115,532,1126,574,1145,602,1169,626,1166,630,1141,606,1121,576,1110,533,1106,477,1109,345,1109,278,1106,217,1095,167,1086,148,1074,134,1041,113,999,101,950,97,895,100,834,110,769,125,634,168,498,224,371,286,264,347,185,401,151,434,121,472,82,539"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#adfbec0b532211a1442310392496a45f2" title=" " alt="" coords="235,481,423,514"/>
<area shape="poly" title=" " alt="" coords="135,535,183,523,219,515,220,520,184,528,136,540"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603" title=" " alt="" coords="227,538,431,572"/>
<area shape="poly" title=" " alt="" coords="136,552,211,552,211,557,136,557"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed" title=" " alt="" coords="248,793,410,826"/>
<area shape="poly" title=" " alt="" coords="91,570,301,779,298,783,87,574"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#a637cdad6e9e1e5b837c0072ae9b4a1ce" title=" " alt="" coords="246,1026,412,1060"/>
<area shape="poly" title=" " alt="" coords="80,571,119,685,150,762,186,837,248,935,306,1012,302,1016,244,938,181,840,145,764,114,687,75,573"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a9c77c01c21439286a9fdebb814d5b523" title=" " alt="" coords="237,1227,421,1261"/>
<area shape="poly" title=" " alt="" coords="75,571,82,652,99,778,113,851,132,926,156,1000,186,1071,211,1113,241,1152,299,1215,295,1218,236,1156,206,1116,181,1073,151,1002,127,927,108,852,94,779,76,653,70,572"/>
<area shape="rect" href="../../db/d65/sysupgrade_8c.html#a2f25b3ed2b57dbfdd9171d17a0e527c6" title=" " alt="" coords="522,311,802,345"/>
<area shape="poly" title=" " alt="" coords="88,535,129,500,182,466,275,424,372,391,465,365,548,346,549,351,466,370,373,396,277,429,185,470,132,504,91,539"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a91a439107e9ff41b6c2b9082b73f1972" title=" " alt="" coords="184,1418,474,1452"/>
<area shape="poly" title=" " alt="" coords="76,572,88,704,111,909,144,1122,164,1209,186,1272,209,1312,238,1348,296,1406,292,1410,234,1352,205,1315,181,1274,159,1210,139,1123,106,910,82,704,71,572"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="1129,529,1281,562"/>
<area shape="poly" title=" " alt="" coords="423,496,715,505,895,514,1076,527,1114,531,1113,536,1075,532,895,519,714,510,423,502"/>
<area shape="poly" title=" " alt="" coords="1264,525,1358,498,1359,503,1266,531"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a673de80167cf18faad1b4a21670d0cf3" title=" " alt="" coords="1339,921,1520,954"/>
<area shape="poly" title=" " alt="" coords="1232,561,1261,588,1288,624,1302,655,1309,682,1313,732,1316,782,1323,809,1336,839,1364,877,1396,909,1392,912,1360,881,1332,841,1318,810,1311,783,1308,733,1304,683,1297,657,1284,627,1257,592,1228,565"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ac239a83ed3c7f835e2b49f785953c934" title=" " alt="" coords="1344,595,1514,629"/>
<area shape="poly" title=" " alt="" coords="1265,560,1356,588,1354,593,1263,565"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a7613e130753e766f5d381c06b1f7b86f" title=" " alt="" coords="1334,794,1524,828"/>
<area shape="poly" title=" " alt="" coords="1227,561,1288,624,1356,707,1409,779,1405,782,1351,710,1284,627,1223,564"/>
<area shape="poly" title=" " alt="" coords="431,551,1113,544,1113,549,431,556"/>
<area shape="poly" title=" " alt="" coords="348,790,537,618,669,491,800,356,813,338,821,323,831,309,849,296,887,282,926,273,966,270,1007,271,1087,285,1165,312,1237,347,1302,384,1397,451,1394,456,1299,389,1235,351,1163,317,1085,291,1006,276,966,275,927,278,889,287,852,301,835,312,826,326,817,341,804,359,673,494,541,622,352,794"/>
<area shape="poly" title=" " alt="" coords="351,825,423,878,471,906,523,927,630,953,741,969,853,977,963,980,1068,977,1164,970,1323,952,1323,957,1165,975,1068,982,963,985,853,983,741,974,629,958,521,932,469,911,420,883,348,829"/>
<area shape="poly" title=" " alt="" coords="378,824,446,846,523,867,676,901,798,921,857,925,920,925,1075,909,1156,894,1235,874,1367,831,1369,836,1236,879,1157,900,1076,915,920,930,857,930,797,926,675,906,521,872,445,852,377,829"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac79cacbc6a47f754832dc10bafa3b761" title=" " alt="" coords="919,866,1007,900"/>
<area shape="poly" title=" " alt="" coords="410,816,904,873,904,879,410,821"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5a5283071ac5677652515d9a8460e655" title=" " alt="" coords="541,751,784,785"/>
<area shape="poly" title=" " alt="" coords="410,797,525,782,525,788,411,802"/>
<area shape="poly" title=" " alt="" coords="679,749,749,686,797,651,849,622,898,605,965,588,1113,558,1114,563,967,593,899,610,851,626,800,656,752,690,682,753"/>
<area shape="poly" title=" " alt="" coords="702,783,851,852,905,868,903,873,849,857,700,788"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6b6c429265d86411d05951d2fae7289a" title=" " alt="" coords="876,809,1050,842"/>
<area shape="poly" title=" " alt="" coords="755,783,861,803,860,808,754,788"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="892,694,1034,728"/>
<area shape="poly" title=" " alt="" coords="754,748,876,724,877,730,755,753"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a131936c081164c18e6241d79f3b276d1" title=" " alt="" coords="850,751,1076,785"/>
<area shape="poly" title=" " alt="" coords="784,765,835,765,835,771,784,771"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a065ed993444c3173838a480ba4aac052" title=" " alt="" coords="869,637,1057,670"/>
<area shape="poly" title=" " alt="" coords="695,748,765,714,849,679,869,672,871,677,851,684,767,719,697,753"/>
<area shape="poly" title=" " alt="" coords="1034,692,1140,667,1141,672,1035,697"/>
<area shape="poly" title=" " alt="" coords="1034,748,1193,707,1285,682,1303,659,1311,636,1318,611,1332,581,1364,540,1396,506,1400,510,1368,544,1336,584,1323,612,1316,638,1308,662,1287,686,1194,713,1035,753"/>
<area shape="poly" title=" " alt="" coords="1052,748,1074,738,1089,726,1098,715,1107,702,1122,689,1142,676,1145,681,1125,693,1111,705,1102,718,1093,730,1077,742,1054,753"/>
<area shape="poly" title=" " alt="" coords="1040,783,1077,793,1242,854,1377,911,1375,916,1240,859,1075,799,1039,788"/>
<area shape="poly" title=" " alt="" coords="1076,767,1180,755,1234,743,1285,726,1319,708,1350,685,1401,639,1404,643,1354,689,1322,712,1287,730,1235,749,1181,761,1077,772"/>
<area shape="poly" title=" " alt="" coords="1076,776,1319,798,1318,803,1076,781"/>
<area shape="poly" title=" " alt="" coords="1050,633,1182,603,1242,587,1285,572,1344,540,1394,505,1397,509,1347,544,1287,577,1244,592,1183,608,1051,638"/>
<area shape="poly" title=" " alt="" coords="1058,651,1140,652,1140,657,1058,657"/>
<area shape="poly" title=" " alt="" coords="1030,633,1074,615,1098,598,1122,579,1146,567,1148,571,1125,584,1102,602,1077,620,1032,638"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#ad9838f76756511bb65b58e40ae6c1e21" title=" " alt="" coords="574,1083,750,1117"/>
<area shape="poly" title=" " alt="" coords="413,1054,559,1080,558,1085,412,1060"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#af3b9ade91d1e7ed45bde5222ce9a2da9" title=" " alt="" coords="561,1026,763,1060"/>
<area shape="poly" title=" " alt="" coords="412,1040,546,1040,546,1045,412,1045"/>
<area shape="rect" href="../../d2/d28/instance_8c.html#a6c353f4e81db370ec9cdc34fffeb85f1" title=" " alt="" coords="889,1026,1037,1060"/>
<area shape="poly" title=" " alt="" coords="764,1040,873,1040,873,1045,764,1045"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="893,1367,1033,1401"/>
<area shape="poly" title=" " alt="" coords="352,1259,425,1310,472,1336,523,1356,616,1377,711,1388,801,1390,878,1388,878,1394,801,1396,711,1393,615,1382,521,1361,470,1341,422,1314,349,1263"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="558,1141,766,1174"/>
<area shape="poly" title=" " alt="" coords="382,1224,521,1183,552,1175,554,1181,523,1188,383,1229"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="556,1198,768,1232"/>
<area shape="poly" title=" " alt="" coords="421,1233,540,1223,541,1228,421,1239"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="557,1255,768,1289"/>
<area shape="poly" title=" " alt="" coords="421,1249,541,1259,541,1265,421,1254"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aab336677450493ac2229e8a2f70fa0e4" title=" " alt="" coords="574,1313,750,1346"/>
<area shape="poly" title=" " alt="" coords="384,1259,523,1299,559,1307,558,1312,521,1304,383,1264"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1152,1367,1258,1401"/>
<area shape="poly" title=" " alt="" coords="1033,1381,1136,1381,1136,1387,1033,1387"/>
<area shape="poly" title=" " alt="" coords="751,1343,878,1366,877,1371,750,1348"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a38fb5688af8a7f3e9eae5c653ed2bb50" title=" " alt="" coords="870,426,1056,460"/>
<area shape="poly" title=" " alt="" coords="697,343,767,377,851,412,871,419,869,424,849,417,765,382,695,348"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a856562b4d96007d3ce1a052998451a0f" title=" " alt="" coords="870,311,1056,345"/>
<area shape="poly" title=" " alt="" coords="803,325,855,325,855,331,803,331"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#af2c32f6db6f49388da60dda520d86c4d" title=" " alt="" coords="876,369,1050,402"/>
<area shape="poly" title=" " alt="" coords="755,343,861,363,860,369,754,348"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a6ee526c7b55debcecad8e34e3e6108d0" title=" " alt="" coords="1124,122,1286,156"/>
<area shape="poly" title=" " alt="" coords="671,309,697,269,736,218,787,168,817,146,849,130,883,118,918,110,990,104,1059,107,1120,116,1119,121,1058,112,990,109,919,115,884,123,851,134,820,151,791,172,740,222,701,272,676,312"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#ae02caa227c18af4c5c42fee4b8d94ba9" title=" " alt="" coords="893,145,1033,178"/>
<area shape="poly" title=" " alt="" coords="680,309,750,249,798,216,849,187,877,176,879,181,851,192,801,220,754,253,683,313"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#aaed3ec52f2a4e3003e8733a933945fe7" title=" " alt="" coords="850,202,1076,236"/>
<area shape="poly" title=" " alt="" coords="705,308,849,252,890,238,892,243,851,257,707,313"/>
<area shape="poly" title=" " alt="" coords="1025,458,1077,476,1162,518,1159,523,1075,481,1024,463"/>
<area shape="poly" title=" " alt="" coords="1057,343,1077,354,1117,390,1150,433,1176,476,1193,513,1189,515,1171,478,1146,436,1113,394,1074,358,1055,347"/>
<area shape="poly" title=" " alt="" coords="1051,399,1077,411,1110,434,1140,461,1185,514,1181,518,1136,465,1107,438,1074,416,1049,404"/>
<area shape="poly" title=" " alt="" coords="1220,154,1288,253,1412,449,1407,452,1284,256,1216,157"/>
<area shape="poly" title=" " alt="" coords="474,1424,802,1400,877,1392,878,1397,803,1405,475,1429"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a16857e064f48c4074ea2492dc5732624" title=" " alt="" coords="597,1473,728,1506"/>
<area shape="poly" title=" " alt="" coords="436,1449,582,1474,581,1479,435,1455"/>
</map>
</div>

</div>
</div>
<a id="a9c77c01c21439286a9fdebb814d5b523" name="a9c77c01c21439286a9fdebb814d5b523"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c77c01c21439286a9fdebb814d5b523">&#9670;&#160;</a></span>sysupgrade_error()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sysupgrade_error </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *</td>          <td class="paramname"><span class="paramname"><em>req</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>message</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00749">749</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  752</span>{</div>
<div class="line"><span class="lineno">  753</span>    <span class="keywordtype">void</span> *c;</div>
<div class="line"><span class="lineno">  754</span> </div>
<div class="line"><span class="lineno">  755</span>    <a class="code hl_function" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, 0);</div>
<div class="line"><span class="lineno">  756</span> </div>
<div class="line"><span class="lineno">  757</span>    c = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;error&quot;</span>);</div>
<div class="line"><span class="lineno">  758</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;message&quot;</span>, message);</div>
<div class="line"><span class="lineno">  759</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, c);</div>
<div class="line"><span class="lineno">  760</span> </div>
<div class="line"><span class="lineno">  761</span>    <a class="code hl_function" href="../../d2/de5/libubus-req_8c.html#aab336677450493ac2229e8a2f70fa0e4">ubus_send_reply</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, req, <a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>.<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#af6065d74116605108b22c11e75ec669c">head</a>);</div>
<div class="line"><span class="lineno">  762</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00038">b</a>, <a class="el" href="../../d4/da0/blob_8c_source.html#l00091">blob_buf_init()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00235">blobmsg_add_string()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00268">blobmsg_close_table()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00256">blobmsg_open_table()</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00065">blob_buf::head</a>, and <a class="el" href="../../d2/de5/libubus-req_8c_source.html#l00205">ubus_send_reply()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00764">sysupgrade()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_a9c77c01c21439286a9fdebb814d5b523_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_a9c77c01c21439286a9fdebb814d5b523_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_a9c77c01c21439286a9fdebb814d5b523_cgraph" id="ad8/d1d/procd_2system_8c_a9c77c01c21439286a9fdebb814d5b523_cgraph">
<area shape="rect" title=" " alt="" coords="5,492,189,526"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="778,165,917,199"/>
<area shape="poly" title=" " alt="" coords="152,489,260,452,405,398,566,330,724,251,748,234,772,216,793,204,796,209,775,220,751,238,727,255,568,334,407,403,262,457,154,494"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="239,576,447,610"/>
<area shape="poly" title=" " alt="" coords="150,524,278,568,276,573,148,529"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="237,492,449,526"/>
<area shape="poly" title=" " alt="" coords="189,506,221,506,221,512,189,512"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="237,712,449,746"/>
<area shape="poly" title=" " alt="" coords="119,524,313,699,309,703,116,528"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aab336677450493ac2229e8a2f70fa0e4" title=" " alt="" coords="255,261,431,295"/>
<area shape="poly" title=" " alt="" coords="110,490,162,427,235,352,300,302,303,306,238,356,166,430,114,493"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1241,273,1346,307"/>
<area shape="poly" title=" " alt="" coords="918,196,1226,271,1225,277,917,202"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="970,115,1150,148"/>
<area shape="poly" title=" " alt="" coords="917,163,971,150,972,155,918,168"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1640,300,1782,334"/>
<area shape="poly" title=" " alt="" coords="1346,301,1437,317,1514,320,1592,317,1624,316,1624,322,1592,322,1514,325,1436,322,1346,306"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1436,216,1592,250"/>
<area shape="poly" title=" " alt="" coords="1346,274,1431,252,1432,257,1347,279"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="1640,216,1782,250"/>
<area shape="poly" title=" " alt="" coords="1313,271,1366,233,1400,215,1436,201,1489,192,1544,192,1596,199,1642,209,1641,214,1595,204,1543,198,1489,197,1437,206,1402,220,1369,238,1316,275"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1446,433,1582,467"/>
<area shape="poly" title=" " alt="" coords="1320,305,1478,422,1475,426,1317,310"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="1464,273,1564,307"/>
<area shape="poly" title=" " alt="" coords="1346,288,1449,288,1449,293,1346,293"/>
<area shape="poly" title=" " alt="" coords="1566,248,1593,258,1663,291,1661,295,1591,263,1564,253"/>
<area shape="poly" title=" " alt="" coords="1592,230,1625,230,1625,236,1592,236"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="1640,565,1782,599"/>
<area shape="poly" title=" " alt="" coords="1542,465,1673,554,1670,559,1539,470"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1830,433,1971,467"/>
<area shape="poly" title=" " alt="" coords="1583,448,1814,448,1814,453,1583,453"/>
<area shape="poly" title=" " alt="" coords="1735,563,1861,474,1864,478,1738,567"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="2019,433,2118,467"/>
<area shape="poly" title=" " alt="" coords="1972,448,2004,448,2004,453,1972,453"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="514,671,708,704"/>
<area shape="poly" title=" " alt="" coords="394,608,548,663,546,668,392,613"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aed178aa087a351c74f7f6cd34e56ba0c" title=" " alt="" coords="773,764,922,798"/>
<area shape="poly" title=" " alt="" coords="657,702,790,755,788,760,655,707"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1238,752,1349,786"/>
<area shape="poly" title=" " alt="" coords="922,776,1222,768,1222,773,922,782"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aee908e6de67c16a4d810d08f28ed1803" title=" " alt="" coords="1006,553,1114,587"/>
<area shape="poly" title=" " alt="" coords="864,762,1028,597,1032,600,868,765"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="984,815,1136,848"/>
<area shape="poly" title=" " alt="" coords="922,796,972,808,971,813,920,801"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ac239a83ed3c7f835e2b49f785953c934" title=" " alt="" coords="1208,924,1378,958"/>
<area shape="poly" title=" " alt="" coords="891,796,923,815,947,838,957,848,971,859,1025,883,1083,902,1193,927,1192,932,1082,908,1024,888,968,863,953,852,943,842,920,819,888,801"/>
<area shape="poly" title=" " alt="" coords="1113,556,1148,536,1173,512,1196,485,1233,426,1261,368,1279,321,1284,323,1266,370,1238,429,1200,488,1177,516,1152,540,1116,560"/>
<area shape="poly" title=" " alt="" coords="1115,569,1198,572,1624,579,1624,584,1198,577,1114,575"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac9fd36cdb87493b31a675621ed53a8d7" title=" " alt="" coords="1458,644,1570,678"/>
<area shape="poly" title=" " alt="" coords="1105,585,1199,622,1262,636,1327,645,1443,655,1442,661,1327,651,1262,641,1197,627,1103,590"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a189526712fcc12adfb6ea6a5c8eede54" title=" " alt="" coords="1204,695,1382,728"/>
<area shape="poly" title=" " alt="" coords="1116,584,1152,604,1168,622,1176,640,1184,657,1200,673,1218,685,1215,690,1196,678,1180,660,1172,642,1163,625,1148,608,1113,588"/>
<area shape="poly" title=" " alt="" coords="1557,641,1651,603,1653,608,1559,646"/>
<area shape="poly" title=" " alt="" coords="1125,811,1222,785,1223,790,1126,817"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a673de80167cf18faad1b4a21670d0cf3" title=" " alt="" coords="1203,809,1384,843"/>
<area shape="poly" title=" " alt="" coords="1136,827,1187,826,1187,831,1136,832"/>
<area shape="poly" title=" " alt="" coords="1108,846,1152,869,1175,891,1199,911,1208,915,1206,920,1197,915,1172,895,1148,874,1105,851"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a7613e130753e766f5d381c06b1f7b86f" title=" " alt="" coords="1198,867,1388,900"/>
<area shape="poly" title=" " alt="" coords="1137,846,1201,860,1199,865,1135,851"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="983,492,1137,526"/>
<area shape="poly" title=" " alt="" coords="450,506,967,506,967,512,450,512"/>
<area shape="poly" title=" " alt="" coords="1129,489,1223,462,1340,424,1467,375,1590,317,1674,257,1677,262,1593,322,1469,380,1342,429,1224,467,1130,494"/>
<area shape="poly" title=" " alt="" coords="1138,515,1625,570,1624,575,1137,520"/>
<area shape="poly" title=" " alt="" coords="1137,505,1513,502,1712,502,1842,498,1971,477,2004,469,2005,474,1972,482,1843,503,1712,507,1513,507,1137,510"/>
<area shape="poly" title=" " alt="" coords="1124,524,1151,539,1191,572,1226,610,1276,680,1272,683,1221,613,1187,576,1149,543,1122,529"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aaac450f6a679be8a392d17c3ed8700b4" title=" " alt="" coords="497,791,725,824"/>
<area shape="poly" title=" " alt="" coords="404,744,537,783,536,788,402,749"/>
<area shape="poly" title=" " alt="" coords="726,804,775,809,826,819,876,835,923,859,940,875,948,892,956,909,971,924,1027,958,1079,984,1128,1002,1175,1013,1223,1015,1273,1008,1327,993,1387,968,1445,934,1498,891,1545,843,1587,791,1623,739,1653,690,1693,612,1698,615,1657,693,1627,742,1591,794,1549,846,1501,895,1448,938,1390,973,1329,998,1274,1014,1223,1020,1174,1018,1126,1008,1077,989,1025,962,968,928,951,912,943,895,936,878,920,863,874,840,824,825,774,815,726,810"/>
<area shape="poly" title=" " alt="" coords="726,792,758,788,758,794,726,797"/>
<area shape="poly" title=" " alt="" coords="652,788,708,767,773,749,883,730,994,719,1188,709,1189,714,995,724,884,736,774,754,710,772,654,793"/>
<area shape="poly" title=" " alt="" coords="632,823,691,872,731,898,774,917,828,932,883,943,995,955,1101,956,1192,950,1192,956,1102,961,995,960,882,948,826,937,772,922,729,902,688,877,628,827"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="776,873,919,907"/>
<area shape="poly" title=" " alt="" coords="662,822,784,865,782,870,661,827"/>
<area shape="poly" title=" " alt="" coords="431,259,762,196,763,201,432,264"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a0e8112f19ea399af22d957f19cf6cfc7" title=" " alt="" coords="533,549,690,583"/>
<area shape="poly" title=" " alt="" coords="362,294,585,536,582,539,358,297"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a3e8e6d098f2808fa135bfefa3c0e81f8" title=" " alt="" coords="526,128,696,162"/>
<area shape="poly" title=" " alt="" coords="377,259,496,198,560,166,563,171,498,203,379,263"/>
<area shape="poly" title=" " alt="" coords="635,547,752,468,840,415,942,358,1057,302,1179,250,1307,207,1436,178,1534,163,1613,157,1651,160,1691,168,1783,201,1826,223,1867,249,1941,309,2003,370,2046,419,2042,423,1999,374,1938,313,1864,254,1823,228,1781,206,1689,173,1650,165,1613,162,1535,168,1437,183,1308,213,1181,255,1059,306,945,363,842,420,755,473,638,551"/>
<area shape="poly" title=" " alt="" coords="672,581,1223,746,1222,751,670,586"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="797,553,898,587"/>
<area shape="poly" title=" " alt="" coords="690,565,781,566,781,572,690,570"/>
<area shape="poly" title=" " alt="" coords="899,580,1047,619,1114,639,1152,655,1169,676,1177,698,1183,719,1200,739,1224,753,1222,757,1196,743,1179,721,1172,700,1165,679,1148,659,1113,644,1046,624,898,585"/>
<area shape="poly" title=" " alt="" coords="899,568,990,568,990,573,899,573"/>
<area shape="poly" title=" " alt="" coords="697,156,763,166,762,171,696,161"/>
<area shape="poly" title=" " alt="" coords="682,125,853,92,955,79,1058,74,1515,74,1561,76,1600,81,1634,90,1664,103,1693,120,1721,143,1784,202,1826,255,1857,314,1880,371,1894,417,1889,419,1875,372,1852,316,1821,257,1780,205,1718,147,1690,125,1662,108,1632,95,1599,86,1560,81,1515,79,1059,79,956,85,853,97,683,130"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a9a256a75cd053ed5d3443060e0a19a3f" title=" " alt="" coords="782,5,913,39"/>
<area shape="poly" title=" " alt="" coords="643,125,772,56,796,44,798,48,775,61,645,130"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#ad1aaffb83e802ad470cb77be9f56977c" title=" " alt="" coords="1005,5,1115,39"/>
<area shape="poly" title=" " alt="" coords="913,20,989,20,989,25,913,25"/>
</map>
</div>

</div>
</div>
<a id="a85e2e12a800605fd650000d7d85cee98" name="a85e2e12a800605fd650000d7d85cee98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85e2e12a800605fd650000d7d85cee98">&#9670;&#160;</a></span>ubus_init_system()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ubus_init_system </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00876">876</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  877</span>{</div>
<div class="line"><span class="lineno">  878</span>    <span class="keywordtype">int</span> ret;</div>
<div class="line"><span class="lineno">  879</span> </div>
<div class="line"><span class="lineno">  880</span>    <a class="code hl_variable" href="#af85a8208a05e85268c56cc20ca9fa894">_ctx</a> = <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>;</div>
<div class="line"><span class="lineno">  881</span> </div>
<div class="line"><span class="lineno">  882</span>    <a class="code hl_variable" href="#ac27bf7208ee9ade15186848187be3f15">initramfs</a> = !!getenv(<span class="stringliteral">&quot;INITRAMFS&quot;</span>);</div>
<div class="line"><span class="lineno">  883</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#ac27bf7208ee9ade15186848187be3f15">initramfs</a>)</div>
<div class="line"><span class="lineno">  884</span>        unsetenv(<span class="stringliteral">&quot;INITRAMFS&quot;</span>);</div>
<div class="line"><span class="lineno">  885</span> </div>
<div class="line"><span class="lineno">  886</span>    ret = <a class="code hl_function" href="../../db/dda/libubus-obj_8c.html#a91976fc505121a3ddd2c4456e730401c">ubus_add_object</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, &amp;<a class="code hl_variable" href="#a99446f8964fa2f19ca768dfb3c0e83e6">system_object</a>);</div>
<div class="line"><span class="lineno">  887</span>    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><span class="lineno">  888</span>        <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;Failed to add object: %s\n&quot;</span>, <a class="code hl_function" href="../../d4/db9/libubus_8c.html#a70c6962fdc98eff62f5399893ae71b69">ubus_strerror</a>(ret));</div>
<div class="line"><span class="lineno">  889</span>}</div>
<div class="ttc" id="alibubus-obj_8c_html_a91976fc505121a3ddd2c4456e730401c"><div class="ttname"><a href="../../db/dda/libubus-obj_8c.html#a91976fc505121a3ddd2c4456e730401c">ubus_add_object</a></div><div class="ttdeci">int ubus_add_object(struct ubus_context *ctx, struct ubus_object *obj)</div><div class="ttdef"><b>Definition</b> <a href="../../db/dda/libubus-obj_8c_source.html#l00209">libubus-obj.c:209</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00040">_ctx</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">ERROR</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00041">initramfs</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00855">system_object</a>, <a class="el" href="../../db/dda/libubus-obj_8c_source.html#l00209">ubus_add_object()</a>, and <a class="el" href="../../d4/db9/libubus_8c_source.html#l00059">ubus_strerror()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d89/procd_2ubus_8c_source.html#l00067">ubus_connect_cb()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_a85e2e12a800605fd650000d7d85cee98_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_a85e2e12a800605fd650000d7d85cee98_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_a85e2e12a800605fd650000d7d85cee98_cgraph" id="ad8/d1d/procd_2system_8c_a85e2e12a800605fd650000d7d85cee98_cgraph">
<area shape="rect" title=" " alt="" coords="5,392,187,426"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a91976fc505121a3ddd2c4456e730401c" title=" " alt="" coords="235,363,411,396"/>
<area shape="poly" title=" " alt="" coords="187,394,219,390,220,396,188,400"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a70c6962fdc98eff62f5399893ae71b69" title=" " alt="" coords="251,420,395,454"/>
<area shape="poly" title=" " alt="" coords="188,417,236,423,235,429,187,423"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="510,81,649,115"/>
<area shape="poly" title=" " alt="" coords="333,361,384,289,457,200,500,158,542,123,546,127,504,162,461,204,388,292,338,364"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="497,215,661,248"/>
<area shape="poly" title=" " alt="" coords="341,360,391,317,458,272,502,252,504,257,460,276,395,321,344,364"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a04cdb66afbb720a35153317f3246e069" title=" " alt="" coords="476,423,683,456"/>
<area shape="poly" title=" " alt="" coords="398,394,490,416,489,421,397,400"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="459,680,699,714"/>
<area shape="poly" title=" " alt="" coords="396,395,413,406,441,444,483,516,564,665,559,668,479,519,437,447,409,409,393,399"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a517a0ee8c6971f08ba4370900300e84b" title=" " alt="" coords="461,287,698,320"/>
<area shape="poly" title=" " alt="" coords="382,360,504,323,506,328,383,365"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="480,835,678,868"/>
<area shape="poly" title=" " alt="" coords="401,395,413,406,440,446,451,485,453,522,449,560,443,598,441,637,445,679,461,725,479,754,500,780,544,823,540,826,496,783,474,757,457,727,440,681,435,637,438,597,444,559,448,522,446,486,435,448,409,409,397,399"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1299,136,1404,170"/>
<area shape="poly" title=" " alt="" coords="650,100,1283,145,1283,151,649,106"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="783,27,964,60"/>
<area shape="poly" title=" " alt="" coords="649,83,768,60,768,66,650,88"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1680,191,1822,224"/>
<area shape="poly" title=" " alt="" coords="1405,164,1477,180,1574,192,1665,200,1664,205,1573,197,1476,185,1403,169"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1476,136,1632,170"/>
<area shape="poly" title=" " alt="" coords="1404,150,1461,150,1461,156,1404,156"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="1680,24,1822,58"/>
<area shape="poly" title=" " alt="" coords="1369,134,1415,97,1444,78,1475,64,1523,50,1572,41,1664,35,1665,40,1573,46,1524,55,1477,69,1446,83,1418,101,1372,138"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1486,245,1622,279"/>
<area shape="poly" title=" " alt="" coords="1381,168,1478,224,1502,236,1499,241,1475,229,1379,173"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="1504,79,1604,112"/>
<area shape="poly" title=" " alt="" coords="1403,136,1488,111,1490,116,1405,141"/>
<area shape="poly" title=" " alt="" coords="1618,168,1674,183,1672,189,1617,173"/>
<area shape="poly" title=" " alt="" coords="1608,133,1630,122,1676,95,1716,65,1719,70,1679,99,1633,127,1610,138"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1680,299,1822,332"/>
<area shape="poly" title=" " alt="" coords="1620,277,1673,292,1671,297,1618,282"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="823,187,924,220"/>
<area shape="poly" title=" " alt="" coords="661,221,807,207,808,212,662,226"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1081,175,1193,208"/>
<area shape="poly" title=" " alt="" coords="924,199,1065,192,1066,197,925,204"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aee908e6de67c16a4d810d08f28ed1803" title=" " alt="" coords="1083,232,1191,266"/>
<area shape="poly" title=" " alt="" coords="925,210,1068,234,1067,240,924,215"/>
<area shape="poly" title=" " alt="" coords="1190,231,1225,218,1308,175,1310,180,1227,223,1192,236"/>
<area shape="poly" title=" " alt="" coords="672,419,747,408,1009,376,1268,350,1665,319,1665,324,1269,356,1010,381,748,413,672,425"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#ab9041e08938920d5ae722e2d57dc20e2" title=" " alt="" coords="818,423,929,456"/>
<area shape="poly" title=" " alt="" coords="683,437,803,437,803,442,683,442"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a1e6079c1ffa0e8f05ca64a51d7332919" title=" " alt="" coords="801,480,946,514"/>
<area shape="poly" title=" " alt="" coords="670,454,786,477,785,482,669,460"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="785,537,962,571"/>
<area shape="poly" title=" " alt="" coords="610,455,672,489,748,524,770,531,769,536,746,529,670,494,607,459"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#a55d3dbabb73970f597eff3d04809f4ef" title=" " alt="" coords="1072,429,1202,463"/>
<area shape="poly" title=" " alt="" coords="929,438,1057,441,1057,447,929,444"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#abd4899daa8ad959e6c9694dd5e4132a8" title=" " alt="" coords="1056,487,1218,520"/>
<area shape="poly" title=" " alt="" coords="930,449,1000,465,1058,480,1056,485,999,470,928,454"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#ab6f5b72e706a1955a5a5d6af278c677e" title=" " alt="" coords="1048,544,1226,578"/>
<area shape="poly" title=" " alt="" coords="930,441,966,449,1001,465,1018,481,1026,499,1034,515,1049,531,1055,534,1052,539,1046,535,1030,518,1022,501,1014,485,998,470,964,454,929,446"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#a6de877c20c7b55fa52c80e7be87715fa" title=" " alt="" coords="1088,601,1186,635"/>
<area shape="poly" title=" " alt="" coords="930,438,967,446,1001,465,1015,481,1022,496,1027,528,1031,559,1037,574,1049,588,1075,604,1072,608,1046,592,1033,576,1026,560,1022,528,1017,498,1011,484,998,470,965,451,928,443"/>
<area shape="poly" title=" " alt="" coords="1098,430,1094,420,1100,411,1114,405,1137,403,1161,405,1175,412,1173,416,1160,410,1137,408,1115,410,1103,415,1099,420,1103,428"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a6a067ed16631bbe3826be535287879e4" title=" " alt="" coords="794,709,953,743"/>
<area shape="poly" title=" " alt="" coords="700,706,778,714,778,719,700,712"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aca15427cb882afec28ce476b9e8e8b34" title=" " alt="" coords="753,767,994,824"/>
<area shape="poly" title=" " alt="" coords="630,712,748,753,767,759,766,764,746,758,628,717"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a5497c370318a5cc03dd662523915ea92" title=" " alt="" coords="794,848,953,882"/>
<area shape="poly" title=" " alt="" coords="598,712,660,772,702,805,749,833,780,846,778,851,746,838,699,810,657,776,594,716"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8af6cb580774621aef719d6923cb5072" title=" " alt="" coords="769,595,978,628"/>
<area shape="poly" title=" " alt="" coords="626,677,747,637,773,630,774,635,748,642,628,682"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ab53faf25fad8c6edbcd804eabeb14c6a" title=" " alt="" coords="779,652,968,686"/>
<area shape="poly" title=" " alt="" coords="700,683,763,677,764,682,700,688"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="1274,5,1428,39"/>
<area shape="poly" title=" " alt="" coords="654,284,677,273,698,259,714,238,720,216,727,194,746,172,785,149,839,127,977,88,1128,56,1259,33,1260,39,1129,62,978,94,841,133,787,154,749,176,732,196,725,218,718,240,701,263,679,278,656,289"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a02523c6489a895ee963d17b13582be7a" title=" " alt="" coords="792,244,955,278"/>
<area shape="poly" title=" " alt="" coords="698,284,777,272,777,277,699,289"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#aaa9f26d5d8368ec973a73264e42dc770" title=" " alt="" coords="747,301,1000,335"/>
<area shape="poly" title=" " alt="" coords="698,307,732,308,731,314,698,312"/>
<area shape="poly" title=" " alt="" coords="1428,16,1525,15,1632,20,1665,23,1664,28,1631,25,1525,21,1428,22"/>
<area shape="poly" title=" " alt="" coords="956,268,1115,286,1310,301,1408,305,1497,305,1574,300,1631,289,1656,278,1680,264,1720,233,1723,237,1683,269,1658,283,1632,294,1574,305,1498,311,1408,310,1310,306,1114,291,955,274"/>
<area shape="poly" title=" " alt="" coords="955,254,1067,249,1067,255,955,260"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a7da0a155290c1fd4d3b5911ced43d5a2" title=" " alt="" coords="765,905,982,939"/>
<area shape="poly" title=" " alt="" coords="648,866,748,892,778,899,777,904,747,897,646,872"/>
</map>
</div>

</div>
</div>
<a id="a389bc474521bdb3825edcb68f5d77e41" name="a389bc474521bdb3825edcb68f5d77e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a389bc474521bdb3825edcb68f5d77e41">&#9670;&#160;</a></span>validate_firmware_image()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int validate_firmware_image </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *</td>          <td class="paramname"><span class="paramname"><em>req</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00705">705</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  709</span>{</div>
<div class="line"><span class="lineno">  710</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *tb[<a class="code hl_enumvalue" href="#a3babbf89cae9b856a12864a41506efbda85c02d6607283362170aa5374d01c903">__VALIDATE_FIRMWARE_IMAGE_MAX</a>];</div>
<div class="line"><span class="lineno">  711</span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a> ret = <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb">VJSON_ERROR</a>;</div>
<div class="line"><span class="lineno">  712</span>    <span class="keywordtype">char</span> *<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>;</div>
<div class="line"><span class="lineno">  713</span> </div>
<div class="line"><span class="lineno">  714</span>    <span class="keywordflow">if</span> (!msg)</div>
<div class="line"><span class="lineno">  715</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312a01547e86014c16f5a948f832185ce2e7">UBUS_STATUS_INVALID_ARGUMENT</a>;</div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>    <a class="code hl_function" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed">blobmsg_parse</a>(<a class="code hl_variable" href="#a45928dbe4e9a632c1e09fde8dea6b6f2">validate_firmware_image_policy</a>, <a class="code hl_enumvalue" href="#a3babbf89cae9b856a12864a41506efbda85c02d6607283362170aa5374d01c903">__VALIDATE_FIRMWARE_IMAGE_MAX</a>, tb, <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857">blob_data</a>(msg), <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32">blob_len</a>(msg));</div>
<div class="line"><span class="lineno">  718</span>    <span class="keywordflow">if</span> (!tb[<a class="code hl_enumvalue" href="#a3babbf89cae9b856a12864a41506efbda2b93c76e6b03e8bec28afefe65f06c82">VALIDATE_FIRMWARE_IMAGE_PATH</a>])</div>
<div class="line"><span class="lineno">  719</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312a01547e86014c16f5a948f832185ce2e7">UBUS_STATUS_INVALID_ARGUMENT</a>;</div>
<div class="line"><span class="lineno">  720</span> </div>
<div class="line"><span class="lineno">  721</span>    ret = <a class="code hl_function" href="#a91a439107e9ff41b6c2b9082b73f1972">validate_firmware_image_call</a>(<a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603">blobmsg_get_string</a>(tb[<a class="code hl_enumvalue" href="#a3babbf89cae9b856a12864a41506efbda2b93c76e6b03e8bec28afefe65f06c82">VALIDATE_FIRMWARE_IMAGE_PATH</a>]), &amp;<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>);</div>
<div class="line"><span class="lineno">  722</span>    <span class="keywordflow">if</span> (ret != <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfa2dfac29cc5f20e29835881399b63a4b9">VJSON_SUCCESS</a>)</div>
<div class="line"><span class="lineno">  723</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab8845eab4efc86465452fa517b43c2b5">UBUS_STATUS_UNKNOWN_ERROR</a>;</div>
<div class="line"><span class="lineno">  724</span> </div>
<div class="line"><span class="lineno">  725</span>    <a class="code hl_function" href="../../d2/de5/libubus-req_8c.html#aab336677450493ac2229e8a2f70fa0e4">ubus_send_reply</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, req, <a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>.<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#af6065d74116605108b22c11e75ec669c">head</a>);</div>
<div class="line"><span class="lineno">  726</span> </div>
<div class="line"><span class="lineno">  727</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab7a81fcac034b9ddc28cbf812d2ae6eb">UBUS_STATUS_OK</a>;</div>
<div class="line"><span class="lineno">  728</span>}</div>
<div class="ttc" id="aprocd_2system_8c_html_a45928dbe4e9a632c1e09fde8dea6b6f2"><div class="ttname"><a href="#a45928dbe4e9a632c1e09fde8dea6b6f2">validate_firmware_image_policy</a></div><div class="ttdeci">static const struct blobmsg_policy validate_firmware_image_policy[__VALIDATE_FIRMWARE_IMAGE_MAX]</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00701">system.c:701</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00698">__VALIDATE_FIRMWARE_IMAGE_MAX</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00038">b</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00075">blob_data()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00100">blob_len()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00348">blobmsg_get_string()</a>, <a class="el" href="../../d1/d30/blobmsg_8c_source.html#l00166">blobmsg_parse()</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../d2/d62/udevtrigger_8c_source.html#l00058">err</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00065">blob_buf::head</a>, <a class="el" href="../../d2/de5/libubus-req_8c_source.html#l00205">ubus_send_reply()</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00121">UBUS_STATUS_INVALID_ARGUMENT</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00119">UBUS_STATUS_OK</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00128">UBUS_STATUS_UNKNOWN_ERROR</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00643">validate_firmware_image_call()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00697">VALIDATE_FIRMWARE_IMAGE_PATH</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00701">validate_firmware_image_policy</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00044">VJSON_ERROR</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00046">VJSON_SUCCESS</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_a389bc474521bdb3825edcb68f5d77e41_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_a389bc474521bdb3825edcb68f5d77e41_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_a389bc474521bdb3825edcb68f5d77e41_cgraph" id="ad8/d1d/procd_2system_8c_a389bc474521bdb3825edcb68f5d77e41_cgraph">
<area shape="rect" title=" " alt="" coords="5,535,256,568"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1486,433,1597,467"/>
<area shape="poly" title=" " alt="" coords="256,533,490,510,627,501,762,498,1030,498,1152,494,1272,484,1470,459,1470,464,1273,489,1152,499,1030,503,762,503,627,507,491,515,256,538"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="2267,535,2366,568"/>
<area shape="poly" title=" " alt="" coords="256,549,2252,549,2252,554,256,554"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603" title=" " alt="" coords="347,36,551,70"/>
<area shape="poly" title=" " alt="" coords="132,534,147,463,179,358,201,299,229,241,262,184,302,132,341,99,385,74,387,79,344,103,306,136,267,187,234,243,206,302,184,360,153,464,137,535"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed" title=" " alt="" coords="368,147,530,180"/>
<area shape="poly" title=" " alt="" coords="144,533,422,191,426,194,148,536"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aab336677450493ac2229e8a2f70fa0e4" title=" " alt="" coords="361,733,537,767"/>
<area shape="poly" title=" " alt="" coords="161,566,408,722,406,727,158,571"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a91a439107e9ff41b6c2b9082b73f1972" title=" " alt="" coords="304,908,594,942"/>
<area shape="poly" title=" " alt="" coords="146,567,212,659,306,778,366,842,420,895,416,899,362,846,302,781,207,662,141,570"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="1210,119,1361,152"/>
<area shape="poly" title=" " alt="" coords="551,35,669,23,813,17,891,18,970,24,1049,33,1125,49,1160,60,1193,75,1249,107,1246,112,1190,79,1158,65,1124,54,1048,39,970,29,891,24,813,22,669,28,551,40"/>
<area shape="poly" title=" " alt="" coords="1341,150,1372,166,1400,187,1448,244,1486,308,1514,369,1533,418,1528,420,1509,371,1481,310,1444,247,1396,191,1369,170,1338,155"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a673de80167cf18faad1b4a21670d0cf3" title=" " alt="" coords="1451,61,1632,95"/>
<area shape="poly" title=" " alt="" coords="1361,116,1448,96,1449,101,1362,121"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ac239a83ed3c7f835e2b49f785953c934" title=" " alt="" coords="1456,176,1626,210"/>
<area shape="poly" title=" " alt="" coords="1362,150,1449,169,1448,175,1361,155"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a7613e130753e766f5d381c06b1f7b86f" title=" " alt="" coords="1446,119,1636,152"/>
<area shape="poly" title=" " alt="" coords="1362,133,1431,133,1431,138,1362,138"/>
<area shape="poly" title=" " alt="" coords="484,179,561,218,671,270,800,324,934,370,1000,387,1052,395,1173,407,1470,441,1470,446,1172,413,1051,400,999,392,933,375,798,329,669,275,559,223,481,183"/>
<area shape="poly" title=" " alt="" coords="480,144,593,80,616,64,641,52,752,24,866,8,981,3,1094,6,1201,14,1299,27,1454,55,1453,60,1298,32,1200,19,1094,11,981,8,867,14,753,29,643,57,619,69,595,84,482,148"/>
<area shape="poly" title=" " alt="" coords="495,143,563,120,641,97,775,64,881,45,988,40,1125,49,1203,59,1263,71,1399,103,1442,112,1440,118,1397,109,1261,77,1202,64,1124,54,988,45,882,51,776,70,643,102,565,125,497,148"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac79cacbc6a47f754832dc10bafa3b761" title=" " alt="" coords="985,64,1073,98"/>
<area shape="poly" title=" " alt="" coords="530,149,969,86,970,92,531,155"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5a5283071ac5677652515d9a8460e655" title=" " alt="" coords="642,173,885,207"/>
<area shape="poly" title=" " alt="" coords="531,168,627,176,626,181,530,173"/>
<area shape="poly" title=" " alt="" coords="855,170,933,158,1070,145,1194,137,1194,142,1070,150,934,163,856,175"/>
<area shape="poly" title=" " alt="" coords="828,170,884,148,908,131,932,114,969,98,972,102,935,119,911,136,887,152,830,175"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6b6c429265d86411d05951d2fae7289a" title=" " alt="" coords="942,173,1116,207"/>
<area shape="poly" title=" " alt="" coords="886,187,926,187,926,193,886,193"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="2078,741,2219,775"/>
<area shape="poly" title=" " alt="" coords="788,205,935,326,1000,346,1084,359,1284,375,1485,389,1570,401,1637,418,1713,451,1788,489,1859,532,1926,577,2040,663,2119,729,2115,733,2037,667,1923,581,1856,537,1785,494,1711,455,1635,423,1569,406,1484,395,1283,380,1083,365,998,351,932,331,784,210"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a131936c081164c18e6241d79f3b276d1" title=" " alt="" coords="1173,201,1398,235"/>
<area shape="poly" title=" " alt="" coords="849,205,934,217,1029,220,1125,217,1157,217,1157,222,1125,222,1029,225,933,222,848,210"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a065ed993444c3173838a480ba4aac052" title=" " alt="" coords="935,283,1123,316"/>
<area shape="poly" title=" " alt="" coords="805,205,934,261,968,274,966,279,932,266,803,210"/>
<area shape="poly" title=" " alt="" coords="2162,739,2290,579,2294,582,2166,742"/>
<area shape="poly" title=" " alt="" coords="1307,234,1512,421,1508,425,1304,238"/>
<area shape="poly" title=" " alt="" coords="1399,226,1569,239,1761,245,1960,245,2037,240,2099,233,2129,235,2158,241,2188,255,2221,277,2247,303,2267,333,2284,365,2296,399,2311,465,2317,519,2312,519,2306,466,2291,401,2279,367,2263,335,2243,306,2218,281,2186,259,2156,246,2128,240,2099,239,2037,245,1960,250,1761,250,1569,244,1398,232"/>
<area shape="poly" title=" " alt="" coords="1333,198,1365,183,1396,163,1411,148,1419,133,1428,119,1444,104,1451,100,1454,104,1448,108,1432,122,1424,136,1415,151,1400,167,1368,187,1335,203"/>
<area shape="poly" title=" " alt="" coords="1398,204,1441,200,1441,205,1399,210"/>
<area shape="poly" title=" " alt="" coords="1335,198,1445,161,1465,155,1466,160,1447,166,1337,203"/>
<area shape="poly" title=" " alt="" coords="1090,314,1471,427,1470,432,1089,319"/>
<area shape="poly" title=" " alt="" coords="1124,296,1540,295,1960,295,2017,302,2071,321,2121,349,2168,383,2209,420,2245,457,2297,520,2292,524,2241,461,2205,424,2164,387,2119,354,2069,326,2016,308,1960,301,1540,301,1124,302"/>
<area shape="poly" title=" " alt="" coords="1048,280,1102,236,1171,186,1227,157,1230,161,1174,191,1105,240,1051,284"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="959,908,1099,942"/>
<area shape="poly" title=" " alt="" coords="481,765,553,803,643,841,721,865,802,884,944,911,943,916,801,889,720,870,641,846,551,808,479,770"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a0e8112f19ea399af22d957f19cf6cfc7" title=" " alt="" coords="685,668,842,702"/>
<area shape="poly" title=" " alt="" coords="533,730,669,702,670,707,534,735"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a3e8e6d098f2808fa135bfefa3c0e81f8" title=" " alt="" coords="679,797,849,831"/>
<area shape="poly" title=" " alt="" coords="536,765,664,791,663,796,535,770"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1489,905,1594,939"/>
<area shape="poly" title=" " alt="" coords="1099,922,1473,920,1473,925,1099,927"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1195,960,1376,994"/>
<area shape="poly" title=" " alt="" coords="1100,936,1184,954,1183,959,1099,942"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1888,919,2030,952"/>
<area shape="poly" title=" " alt="" coords="1594,921,1872,930,1872,935,1594,926"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1684,960,1840,994"/>
<area shape="poly" title=" " alt="" coords="1595,932,1677,953,1676,958,1594,938"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="1888,1001,2030,1035"/>
<area shape="poly" title=" " alt="" coords="1565,937,1618,973,1651,990,1685,1004,1732,1014,1781,1020,1872,1022,1872,1028,1780,1026,1731,1020,1684,1009,1648,995,1615,977,1562,942"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1694,851,1830,884"/>
<area shape="poly" title=" " alt="" coords="1594,907,1678,885,1679,891,1595,912"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="1712,1069,1812,1103"/>
<area shape="poly" title=" " alt="" coords="1560,937,1613,990,1686,1048,1706,1060,1703,1064,1683,1052,1610,994,1556,941"/>
<area shape="poly" title=" " alt="" coords="1840,958,1872,951,1873,956,1841,963"/>
<area shape="poly" title=" " alt="" coords="1841,990,1873,997,1872,1003,1840,996"/>
<area shape="poly" title=" " alt="" coords="1830,864,1926,854,1978,844,2029,829,2074,808,2112,782,2115,787,2076,812,2031,834,1980,849,1927,859,1831,869"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="1888,741,2030,775"/>
<area shape="poly" title=" " alt="" coords="1793,848,1912,780,1915,785,1795,852"/>
<area shape="poly" title=" " alt="" coords="2030,755,2062,755,2062,761,2030,761"/>
<area shape="poly" title=" " alt="" coords="811,665,933,625,1063,593,1167,576,1269,555,1397,517,1448,496,1495,472,1497,477,1451,500,1399,522,1270,561,1168,581,1064,599,934,630,813,670"/>
<area shape="poly" title=" " alt="" coords="843,684,1125,683,1434,671,1674,649,1913,616,2219,567,2252,562,2252,567,2220,573,1914,621,1675,655,1434,676,1125,689,843,689"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="978,640,1080,674"/>
<area shape="poly" title=" " alt="" coords="842,674,963,661,963,666,843,679"/>
<area shape="poly" title=" " alt="" coords="1079,650,1145,641,1226,626,1313,602,1397,568,1430,548,1462,524,1513,476,1516,480,1465,528,1433,552,1399,572,1315,607,1227,631,1146,646,1080,655"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aee908e6de67c16a4d810d08f28ed1803" title=" " alt="" coords="1231,741,1340,775"/>
<area shape="poly" title=" " alt="" coords="1075,672,1228,733,1226,738,1073,677"/>
<area shape="poly" title=" " alt="" coords="1315,773,1502,894,1499,899,1312,778"/>
<area shape="poly" title=" " alt="" coords="1340,746,1434,734,1558,722,1698,718,1770,720,1840,726,1885,734,1884,740,1839,731,1770,725,1698,723,1559,727,1434,739,1340,752"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac9fd36cdb87493b31a675621ed53a8d7" title=" " alt="" coords="1706,741,1818,775"/>
<area shape="poly" title=" " alt="" coords="1340,755,1691,755,1691,761,1340,761"/>
<area shape="poly" title=" " alt="" coords="1818,755,1872,755,1872,761,1818,761"/>
<area shape="poly" title=" " alt="" coords="849,811,1284,810,1763,810,1897,805,2030,785,2070,777,2071,782,2030,790,1898,810,1763,815,1284,815,849,816"/>
<area shape="poly" title=" " alt="" coords="838,829,887,850,902,862,911,873,921,884,935,894,946,900,944,905,932,899,917,888,907,877,898,866,884,855,835,834"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a9a256a75cd053ed5d3443060e0a19a3f" title=" " alt="" coords="963,851,1095,884"/>
<area shape="poly" title=" " alt="" coords="850,829,948,849,947,854,849,834"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#ad1aaffb83e802ad470cb77be9f56977c" title=" " alt="" coords="1231,851,1340,884"/>
<area shape="poly" title=" " alt="" coords="1095,865,1215,865,1215,870,1095,870"/>
<area shape="poly" title=" " alt="" coords="594,922,944,922,944,927,594,927"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a16857e064f48c4074ea2492dc5732624" title=" " alt="" coords="698,977,829,1011"/>
<area shape="poly" title=" " alt="" coords="530,940,684,974,682,979,528,945"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a7adddfeb0bc82cc5f816ab7f5b7635d2" title=" " alt="" coords="933,992,1125,1026"/>
<area shape="poly" title=" " alt="" coords="830,995,918,1000,918,1005,830,1000"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#a2ade37d9874e44a8462fb27351e11e22" title=" " alt="" coords="1180,1017,1391,1051"/>
<area shape="poly" title=" " alt="" coords="1125,1016,1165,1020,1164,1025,1125,1021"/>
</map>
</div>

</div>
</div>
<a id="a91a439107e9ff41b6c2b9082b73f1972" name="a91a439107e9ff41b6c2b9082b73f1972"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91a439107e9ff41b6c2b9082b73f1972">&#9670;&#160;</a></span>validate_firmware_image_call()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a> validate_firmware_image_call </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>err</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00643">643</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  644</span>{</div>
<div class="line"><span class="lineno">  645</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="../../df/d0e/ubusd__obj_8c.html#a9ece2e576492090c46d5e3b435cef7d4">path</a> = <span class="stringliteral">&quot;/usr/libexec/validate_firmware_image&quot;</span>;</div>
<div class="line"><span class="lineno">  646</span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a> ret = <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb">VJSON_ERROR</a>;</div>
<div class="line"><span class="lineno">  647</span>    <span class="keywordtype">int</span> _errno;</div>
<div class="line"><span class="lineno">  648</span>    <span class="keywordtype">int</span> fds[2];</div>
<div class="line"><span class="lineno">  649</span>    <span class="keywordtype">int</span> fd;</div>
<div class="line"><span class="lineno">  650</span> </div>
<div class="line"><span class="lineno">  651</span>    <a class="code hl_function" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, 0);</div>
<div class="line"><span class="lineno">  652</span>    vjson_error(<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>, <span class="stringliteral">&quot;unhandled error&quot;</span>);</div>
<div class="line"><span class="lineno">  653</span> </div>
<div class="line"><span class="lineno">  654</span>    <span class="keywordflow">if</span> (pipe(fds)) {</div>
<div class="line"><span class="lineno">  655</span>        _errno = errno;</div>
<div class="line"><span class="lineno">  656</span>        <span class="keywordflow">return</span> vjson_error(<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>, <span class="stringliteral">&quot;pipe() failed: %s (%d)&quot;</span>,</div>
<div class="line"><span class="lineno">  657</span>                   strerror(_errno), _errno);</div>
<div class="line"><span class="lineno">  658</span>    }</div>
<div class="line"><span class="lineno">  659</span> </div>
<div class="line"><span class="lineno">  660</span>    <span class="keywordflow">switch</span> (fork()) {</div>
<div class="line"><span class="lineno">  661</span>    <span class="keywordflow">case</span> -1:</div>
<div class="line"><span class="lineno">  662</span>        _errno = errno;</div>
<div class="line"><span class="lineno">  663</span> </div>
<div class="line"><span class="lineno">  664</span>        close(fds[0]);</div>
<div class="line"><span class="lineno">  665</span>        close(fds[1]);</div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span>        <span class="keywordflow">return</span> vjson_error(<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>, <span class="stringliteral">&quot;fork() failed: %s (%d)&quot;</span>,</div>
<div class="line"><span class="lineno">  668</span>                   strerror(_errno), _errno);</div>
<div class="line"><span class="lineno">  669</span>    <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno">  670</span>        <span class="comment">/* Set stdin &amp; stderr to /dev/null */</span></div>
<div class="line"><span class="lineno">  671</span>        fd = open(<span class="stringliteral">&quot;/dev/null&quot;</span>, O_RDWR);</div>
<div class="line"><span class="lineno">  672</span>        <span class="keywordflow">if</span> (fd &gt;= 0) {</div>
<div class="line"><span class="lineno">  673</span>            dup2(fd, 0);</div>
<div class="line"><span class="lineno">  674</span>            dup2(fd, 2);</div>
<div class="line"><span class="lineno">  675</span>            close(fd);</div>
<div class="line"><span class="lineno">  676</span>        }</div>
<div class="line"><span class="lineno">  677</span> </div>
<div class="line"><span class="lineno">  678</span>        <span class="comment">/* Set stdout to the shared pipe */</span></div>
<div class="line"><span class="lineno">  679</span>        dup2(fds[1], 1);</div>
<div class="line"><span class="lineno">  680</span>        close(fds[0]);</div>
<div class="line"><span class="lineno">  681</span>        close(fds[1]);</div>
<div class="line"><span class="lineno">  682</span> </div>
<div class="line"><span class="lineno">  683</span>        execl(<a class="code hl_variable" href="../../df/d0e/ubusd__obj_8c.html#a9ece2e576492090c46d5e3b435cef7d4">path</a>, <a class="code hl_variable" href="../../df/d0e/ubusd__obj_8c.html#a9ece2e576492090c46d5e3b435cef7d4">path</a>, file, NULL);</div>
<div class="line"><span class="lineno">  684</span>        exit(errno);</div>
<div class="line"><span class="lineno">  685</span>    }</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>    <span class="comment">/* Parent process */</span></div>
<div class="line"><span class="lineno">  688</span>    close(fds[1]);</div>
<div class="line"><span class="lineno">  689</span> </div>
<div class="line"><span class="lineno">  690</span>    ret = <a class="code hl_function" href="#a16857e064f48c4074ea2492dc5732624">vjson_parse</a>(fds[0], <a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>);</div>
<div class="line"><span class="lineno">  691</span>    close(fds[0]);</div>
<div class="line"><span class="lineno">  692</span> </div>
<div class="line"><span class="lineno">  693</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  694</span>}</div>
<div class="ttc" id="aprocd_2system_8c_html_a16857e064f48c4074ea2492dc5732624"><div class="ttname"><a href="#a16857e064f48c4074ea2492dc5732624">vjson_parse</a></div><div class="ttdeci">static enum vjson_state vjson_parse(int fd, char **err)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00597">system.c:597</a></div></div>
<div class="ttc" id="aubusd__obj_8c_html_a9ece2e576492090c46d5e3b435cef7d4"><div class="ttname"><a href="../../df/d0e/ubusd__obj_8c.html#a9ece2e576492090c46d5e3b435cef7d4">path</a></div><div class="ttdeci">struct avl_tree path</div><div class="ttdef"><b>Definition</b> <a href="../../df/d0e/ubusd__obj_8c_source.html#l00019">ubusd_obj.c:19</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00038">b</a>, <a class="el" href="../../d4/da0/blob_8c_source.html#l00091">blob_buf_init()</a>, <a class="el" href="../../d2/d62/udevtrigger_8c_source.html#l00058">err</a>, <a class="el" href="../../df/d0e/ubusd__obj_8c_source.html#l00019">path</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00044">VJSON_ERROR</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00597">vjson_parse()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00764">sysupgrade()</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00705">validate_firmware_image()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_a91a439107e9ff41b6c2b9082b73f1972_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_a91a439107e9ff41b6c2b9082b73f1972_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_a91a439107e9ff41b6c2b9082b73f1972_cgraph" id="ad8/d1d/procd_2system_8c_a91a439107e9ff41b6c2b9082b73f1972_cgraph">
<area shape="rect" title=" " alt="" coords="5,337,296,370"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="344,199,483,233"/>
<area shape="poly" title=" " alt="" coords="184,334,365,238,367,243,186,338"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a16857e064f48c4074ea2492dc5732624" title=" " alt="" coords="348,365,479,398"/>
<area shape="poly" title=" " alt="" coords="296,366,332,370,332,375,296,371"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="2330,199,2435,233"/>
<area shape="poly" title=" " alt="" coords="484,213,874,213,1970,213,2314,213,2314,219,1970,219,874,219,484,219"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="537,145,717,178"/>
<area shape="poly" title=" " alt="" coords="481,196,543,180,544,185,483,201"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="2723,174,2865,208"/>
<area shape="poly" title=" " alt="" coords="2435,210,2708,193,2708,199,2436,215"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="2520,145,2675,178"/>
<area shape="poly" title=" " alt="" coords="2435,200,2513,180,2514,185,2436,205"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="2723,90,2865,124"/>
<area shape="poly" title=" " alt="" coords="2403,196,2454,161,2485,143,2519,129,2566,117,2615,108,2707,102,2708,107,2616,114,2567,122,2521,135,2488,148,2457,166,2406,201"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="2529,254,2666,288"/>
<area shape="poly" title=" " alt="" coords="2436,227,2514,247,2513,252,2435,232"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="2548,311,2647,345"/>
<area shape="poly" title=" " alt="" coords="2410,231,2460,264,2521,298,2534,304,2532,309,2518,302,2457,268,2407,236"/>
<area shape="poly" title=" " alt="" coords="2676,170,2708,175,2707,180,2675,176"/>
<area shape="poly" title=" " alt="" coords="2660,141,2716,126,2717,131,2661,146"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="2723,366,2865,400"/>
<area shape="poly" title=" " alt="" coords="2653,286,2676,296,2722,325,2762,354,2759,358,2719,329,2674,301,2651,291"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="2913,254,3055,288"/>
<area shape="poly" title=" " alt="" coords="2666,268,2897,268,2897,273,2666,273"/>
<area shape="poly" title=" " alt="" coords="2823,363,2940,293,2942,298,2826,367"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="3103,122,3201,156"/>
<area shape="poly" title=" " alt="" coords="3005,251,3116,163,3119,167,3009,255"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a7adddfeb0bc82cc5f816ab7f5b7635d2" title=" " alt="" coords="531,419,722,453"/>
<area shape="poly" title=" " alt="" coords="480,396,544,412,543,417,479,401"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#a2ade37d9874e44a8462fb27351e11e22" title=" " alt="" coords="770,474,981,508"/>
<area shape="poly" title=" " alt="" coords="707,451,781,467,780,472,706,456"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#ac4540592ac006fea0d36183930658bde" title=" " alt="" coords="1029,474,1305,508"/>
<area shape="poly" title=" " alt="" coords="981,497,1013,497,1013,502,981,502"/>
<area shape="poly" title=" " alt="" coords="1028,484,996,484,996,479,1028,479"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#aaa4d3c10ae1f486fa321100f0964a374" title=" " alt="" coords="1361,417,1563,450"/>
<area shape="poly" title=" " alt="" coords="1302,471,1392,452,1393,457,1303,476"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ada699b1624254d4fbc463f51ffed6e80" title=" " alt="" coords="1353,755,1570,789"/>
<area shape="poly" title=" " alt="" coords="1178,507,1201,554,1239,618,1291,685,1321,716,1355,742,1361,746,1358,750,1351,746,1318,720,1287,689,1235,621,1197,557,1173,509"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="1635,641,1830,674"/>
<area shape="poly" title=" " alt="" coords="1275,505,1440,536,1516,553,1571,568,1637,598,1694,630,1691,634,1635,602,1569,573,1515,558,1439,541,1274,511"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="1358,583,1566,617"/>
<area shape="poly" title=" " alt="" coords="1211,506,1354,562,1393,575,1391,580,1352,566,1209,511"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393" title=" " alt="" coords="1367,641,1557,674"/>
<area shape="poly" title=" " alt="" coords="1188,506,1257,565,1304,598,1354,627,1366,632,1364,637,1352,632,1301,603,1254,569,1184,510"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa" title=" " alt="" coords="1367,698,1557,732"/>
<area shape="poly" title=" " alt="" coords="1181,506,1208,544,1248,592,1297,642,1354,684,1363,689,1360,694,1352,689,1294,646,1244,596,1204,547,1177,509"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2" title=" " alt="" coords="1373,813,1551,846"/>
<area shape="poly" title=" " alt="" coords="1176,507,1196,564,1232,643,1256,686,1284,728,1317,766,1355,799,1360,803,1357,807,1351,803,1314,770,1280,731,1251,689,1227,646,1191,566,1171,509"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32" title=" " alt="" coords="1625,254,1840,288"/>
<area shape="poly" title=" " alt="" coords="1178,472,1205,436,1245,392,1294,347,1352,311,1415,288,1482,273,1548,265,1610,262,1610,268,1549,270,1483,278,1417,293,1354,316,1298,351,1248,395,1209,440,1182,475"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="1626,311,1839,345"/>
<area shape="poly" title=" " alt="" coords="1181,471,1210,442,1250,406,1298,371,1352,344,1417,326,1484,316,1550,312,1611,313,1611,318,1550,318,1485,321,1418,331,1354,349,1301,376,1253,410,1214,446,1185,475"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214" title=" " alt="" coords="1355,359,1568,393"/>
<area shape="poly" title=" " alt="" coords="1199,471,1268,437,1352,402,1371,395,1373,400,1354,406,1271,442,1201,476"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="1356,474,1567,508"/>
<area shape="poly" title=" " alt="" coords="1305,488,1340,488,1340,493,1305,493"/>
<area shape="poly" title=" " alt="" coords="1361,447,1236,472,1235,467,1360,442"/>
<area shape="poly" title=" " alt="" coords="1538,752,1569,742,1633,712,1689,680,1692,685,1636,717,1571,746,1540,757"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aed178aa087a351c74f7f6cd34e56ba0c" title=" " alt="" coords="1895,637,2043,670"/>
<area shape="poly" title=" " alt="" coords="1830,653,1879,652,1879,658,1830,658"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="2327,710,2438,744"/>
<area shape="poly" title=" " alt="" coords="1992,669,2036,700,2063,715,2092,725,2148,737,2206,741,2262,739,2311,735,2312,740,2262,745,2206,746,2148,742,2090,731,2061,719,2033,704,1989,673"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aee908e6de67c16a4d810d08f28ed1803" title=" " alt="" coords="2114,413,2222,446"/>
<area shape="poly" title=" " alt="" coords="1983,634,2140,456,2144,460,1987,638"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="2093,682,2244,716"/>
<area shape="poly" title=" " alt="" coords="2044,668,2078,675,2077,681,2043,673"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ac239a83ed3c7f835e2b49f785953c934" title=" " alt="" coords="2297,627,2468,661"/>
<area shape="poly" title=" " alt="" coords="2044,649,2282,644,2282,649,2044,654"/>
<area shape="poly" title=" " alt="" coords="2185,410,2352,242,2356,245,2189,414"/>
<area shape="poly" title=" " alt="" coords="2223,425,2422,418,2675,399,2707,395,2708,400,2675,404,2422,423,2223,431"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a189526712fcc12adfb6ea6a5c8eede54" title=" " alt="" coords="2293,362,2472,396"/>
<area shape="poly" title=" " alt="" coords="2222,414,2293,397,2294,402,2224,419"/>
<area shape="poly" title=" " alt="" coords="2244,706,2312,715,2312,720,2244,711"/>
<area shape="poly" title=" " alt="" coords="2236,679,2298,663,2300,668,2238,684"/>
<area shape="poly" title=" " alt="" coords="1545,615,1635,634,1634,639,1544,620"/>
<area shape="poly" title=" " alt="" coords="1557,655,1620,655,1620,660,1557,660"/>
<area shape="poly" title=" " alt="" coords="1544,695,1634,675,1635,681,1545,700"/>
<area shape="poly" title=" " alt="" coords="1545,810,1569,799,1610,773,1647,743,1705,684,1709,688,1650,747,1613,777,1572,804,1547,814"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="2091,278,2245,312"/>
<area shape="poly" title=" " alt="" coords="1840,274,2075,287,2075,292,1840,279"/>
<area shape="poly" title=" " alt="" coords="2183,276,2230,231,2292,184,2352,150,2400,128,2452,112,2519,99,2567,92,2617,90,2708,94,2707,99,2617,96,2568,98,2520,104,2453,118,2402,133,2354,155,2295,189,2233,235,2187,279"/>
<area shape="poly" title=" " alt="" coords="2246,306,2520,355,2708,374,2707,379,2519,360,2245,311"/>
<area shape="poly" title=" " alt="" coords="2176,276,2220,206,2253,165,2292,129,2367,71,2432,32,2466,19,2503,10,2546,4,2596,3,2796,3,2842,6,2888,14,2976,42,3053,78,3113,111,3110,116,3051,82,2974,47,2886,19,2841,11,2795,8,2596,8,2546,10,2504,15,2467,24,2434,37,2370,76,2295,133,2257,169,2224,209,2181,279"/>
<area shape="poly" title=" " alt="" coords="2214,310,2324,353,2322,358,2212,315"/>
<area shape="poly" title=" " alt="" coords="1839,317,2075,299,2076,304,1839,323"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aaac450f6a679be8a392d17c3ed8700b4" title=" " alt="" coords="1618,474,1847,508"/>
<area shape="poly" title=" " alt="" coords="1540,391,1571,402,1636,431,1692,463,1689,468,1633,436,1569,406,1538,396"/>
<area shape="poly" title=" " alt="" coords="1847,485,2167,481,2384,481,2482,473,2579,453,2667,428,2736,403,2738,408,2668,433,2581,459,2483,479,2384,487,2167,487,1847,491"/>
<area shape="poly" title=" " alt="" coords="1757,506,1818,554,1896,610,1923,626,1920,631,1893,614,1815,559,1753,510"/>
<area shape="poly" title=" " alt="" coords="1789,471,1925,433,2007,413,2091,397,2186,386,2278,379,2278,385,2187,391,2091,403,2009,419,1926,438,1790,476"/>
<area shape="poly" title=" " alt="" coords="1764,506,1824,537,1895,565,1968,582,2070,600,2282,629,2282,635,2069,605,1967,588,1894,571,1821,541,1762,510"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1898,522,2040,556"/>
<area shape="poly" title=" " alt="" coords="1819,506,1883,519,1882,524,1818,511"/>
<area shape="poly" title=" " alt="" coords="1568,488,1603,488,1603,493,1568,493"/>
</map>
</div>

</div>
</div>
<a id="a16857e064f48c4074ea2492dc5732624" name="a16857e064f48c4074ea2492dc5732624"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16857e064f48c4074ea2492dc5732624">&#9670;&#160;</a></span>vjson_parse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a> vjson_parse </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>err</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00597">597</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  598</span>{</div>
<div class="line"><span class="lineno">  599</span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a> <a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a> = <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfae98619504bf079b1f2a1480a7e32cacb">VJSON_ERROR</a>;</div>
<div class="line"><span class="lineno">  600</span>    <span class="keywordtype">size_t</span> read_count = 0;</div>
<div class="line"><span class="lineno">  601</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>[64] = { 0 };</div>
<div class="line"><span class="lineno">  602</span>    json_tokener *tok;</div>
<div class="line"><span class="lineno">  603</span>    ssize_t len;</div>
<div class="line"><span class="lineno">  604</span>    <span class="keywordtype">int</span> _errno;</div>
<div class="line"><span class="lineno">  605</span> </div>
<div class="line"><span class="lineno">  606</span>    tok = json_tokener_new();</div>
<div class="line"><span class="lineno">  607</span>    <span class="keywordflow">if</span> (!tok)</div>
<div class="line"><span class="lineno">  608</span>        <span class="keywordflow">return</span> vjson_error(<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>, <span class="stringliteral">&quot;json_tokener_new() failed&quot;</span>);</div>
<div class="line"><span class="lineno">  609</span> </div>
<div class="line"><span class="lineno">  610</span>    vjson_error(<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>, <span class="stringliteral">&quot;incomplete JSON input&quot;</span>);</div>
<div class="line"><span class="lineno">  611</span> </div>
<div class="line"><span class="lineno">  612</span>    <span class="keywordflow">while</span> ((len = read(fd, <a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>)))) {</div>
<div class="line"><span class="lineno">  613</span>        <span class="keywordflow">if</span> (len &lt; 0 &amp;&amp; errno == EINTR)</div>
<div class="line"><span class="lineno">  614</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span>        <span class="keywordflow">if</span> (len &lt; 0) {</div>
<div class="line"><span class="lineno">  617</span>            _errno = errno;</div>
<div class="line"><span class="lineno">  618</span>            json_tokener_free(tok);</div>
<div class="line"><span class="lineno">  619</span>            <span class="keywordflow">return</span> vjson_error(<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>, <span class="stringliteral">&quot;read() failed: %s (%d)&quot;</span>,</div>
<div class="line"><span class="lineno">  620</span>                       strerror(_errno), _errno);</div>
<div class="line"><span class="lineno">  621</span>        }</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>        read_count += len;</div>
<div class="line"><span class="lineno">  624</span>        <a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a> = <a class="code hl_function" href="#a7adddfeb0bc82cc5f816ab7f5b7635d2">vjson_parse_token</a>(tok, <a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>, len, <a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>);</div>
<div class="line"><span class="lineno">  625</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a> != <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfad12804dc870d3fb5e1b0d28a252e3f74">VJSON_CONTINUE</a>)</div>
<div class="line"><span class="lineno">  626</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>        memset(<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>));</div>
<div class="line"><span class="lineno">  629</span>    }</div>
<div class="line"><span class="lineno">  630</span> </div>
<div class="line"><span class="lineno">  631</span>    <span class="keywordflow">if</span> (read_count == 0)</div>
<div class="line"><span class="lineno">  632</span>        vjson_error(<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>, <span class="stringliteral">&quot;no JSON input&quot;</span>);</div>
<div class="line"><span class="lineno">  633</span> </div>
<div class="line"><span class="lineno">  634</span>    json_tokener_free(tok);</div>
<div class="line"><span class="lineno">  635</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a>;</div>
<div class="line"><span class="lineno">  636</span>}</div>
<div class="ttc" id="aprocd_2system_8c_html_a7adddfeb0bc82cc5f816ab7f5b7635d2"><div class="ttname"><a href="#a7adddfeb0bc82cc5f816ab7f5b7635d2">vjson_parse_token</a></div><div class="ttdeci">static enum vjson_state vjson_parse_token(json_tokener *tok, char *buf, ssize_t len, char **err)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00573">system.c:573</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d9a/mkdev_8c_source.html#l00034">buf</a>, <a class="el" href="../../d2/d62/udevtrigger_8c_source.html#l00058">err</a>, <a class="el" href="../../d1/d5c/rcS_8c_source.html#l00036">r</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00045">VJSON_CONTINUE</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00044">VJSON_ERROR</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00573">vjson_parse_token()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00643">validate_firmware_image_call()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_a16857e064f48c4074ea2492dc5732624_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_a16857e064f48c4074ea2492dc5732624_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_a16857e064f48c4074ea2492dc5732624_cgraph" id="ad8/d1d/procd_2system_8c_a16857e064f48c4074ea2492dc5732624_cgraph">
<area shape="rect" title=" " alt="" coords="5,260,137,294"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a7adddfeb0bc82cc5f816ab7f5b7635d2" title=" " alt="" coords="185,260,376,294"/>
<area shape="poly" title=" " alt="" coords="137,274,169,274,169,280,137,280"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#a2ade37d9874e44a8462fb27351e11e22" title=" " alt="" coords="424,260,634,294"/>
<area shape="poly" title=" " alt="" coords="376,274,409,274,409,280,376,280"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#ac4540592ac006fea0d36183930658bde" title=" " alt="" coords="682,260,959,294"/>
<area shape="poly" title=" " alt="" coords="635,283,667,283,667,288,635,288"/>
<area shape="poly" title=" " alt="" coords="682,271,650,271,650,265,682,265"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#aaa4d3c10ae1f486fa321100f0964a374" title=" " alt="" coords="1014,5,1217,39"/>
<area shape="poly" title=" " alt="" coords="832,258,858,217,897,164,947,108,975,82,1005,60,1048,41,1050,46,1008,64,978,86,950,112,901,167,863,220,837,261"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ada699b1624254d4fbc463f51ffed6e80" title=" " alt="" coords="1007,287,1224,320"/>
<area shape="poly" title=" " alt="" coords="959,287,991,290,991,295,959,292"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="1289,187,1483,220"/>
<area shape="poly" title=" " alt="" coords="956,257,1274,215,1274,221,956,262"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="1011,344,1220,378"/>
<area shape="poly" title=" " alt="" coords="878,292,1007,330,1032,337,1030,342,1006,335,877,297"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393" title=" " alt="" coords="1020,63,1211,96"/>
<area shape="poly" title=" " alt="" coords="834,258,902,184,951,141,1005,105,1015,100,1018,105,1008,110,954,146,906,188,838,261"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa" title=" " alt="" coords="1020,120,1211,154"/>
<area shape="poly" title=" " alt="" coords="844,257,914,211,959,185,1006,162,1021,156,1023,161,1008,167,961,190,917,215,847,262"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2" title=" " alt="" coords="1026,177,1205,211"/>
<area shape="poly" title=" " alt="" coords="883,257,1037,213,1039,218,884,262"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32" title=" " alt="" coords="1279,571,1493,604"/>
<area shape="poly" title=" " alt="" coords="830,293,851,346,887,417,911,455,939,491,972,523,1008,549,1069,577,1135,592,1201,599,1264,599,1264,604,1201,604,1134,597,1067,582,1005,554,968,527,935,494,907,458,882,420,846,348,825,295"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="1280,513,1492,547"/>
<area shape="poly" title=" " alt="" coords="832,293,855,338,893,396,945,456,975,482,1008,502,1070,527,1136,540,1203,545,1264,543,1265,549,1202,550,1136,545,1069,532,1005,507,972,486,941,460,889,400,851,340,827,295"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214" title=" " alt="" coords="1009,459,1222,492"/>
<area shape="poly" title=" " alt="" coords="838,293,906,367,954,409,1008,445,1018,450,1015,455,1005,450,951,413,902,371,834,296"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="1010,401,1221,435"/>
<area shape="poly" title=" " alt="" coords="847,292,917,339,961,365,1008,388,1023,394,1021,399,1006,393,959,370,914,344,844,296"/>
<area shape="poly" title=" " alt="" coords="1015,36,1008,40,978,62,950,88,901,144,863,200,837,247,832,245,858,198,897,141,947,84,975,58,1005,36,1012,32"/>
<area shape="poly" title=" " alt="" coords="1169,284,1223,265,1328,224,1330,229,1225,270,1171,289"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aed178aa087a351c74f7f6cd34e56ba0c" title=" " alt="" coords="1548,187,1697,220"/>
<area shape="poly" title=" " alt="" coords="1484,201,1533,201,1533,206,1484,206"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1987,77,2098,111"/>
<area shape="poly" title=" " alt="" coords="1690,183,1971,110,1972,115,1691,189"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aee908e6de67c16a4d810d08f28ed1803" title=" " alt="" coords="1768,351,1876,384"/>
<area shape="poly" title=" " alt="" coords="1679,219,1698,229,1740,272,1798,337,1794,341,1736,276,1695,234,1676,223"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="1746,187,1898,220"/>
<area shape="poly" title=" " alt="" coords="1697,201,1731,201,1731,206,1697,206"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ac239a83ed3c7f835e2b49f785953c934" title=" " alt="" coords="1957,249,2127,283"/>
<area shape="poly" title=" " alt="" coords="1689,218,1745,230,1846,245,1942,256,1941,261,1846,250,1744,235,1688,223"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1990,513,2095,547"/>
<area shape="poly" title=" " alt="" coords="1848,383,2008,502,2004,506,1845,387"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="2389,431,2531,464"/>
<area shape="poly" title=" " alt="" coords="1876,364,1965,364,2082,368,2211,380,2341,401,2407,422,2406,427,2340,406,2211,385,2081,374,1965,369,1876,369"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac9fd36cdb87493b31a675621ed53a8d7" title=" " alt="" coords="2207,300,2319,334"/>
<area shape="poly" title=" " alt="" coords="1876,359,1947,350,2192,322,2192,327,1947,355,1877,364"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a189526712fcc12adfb6ea6a5c8eede54" title=" " alt="" coords="1953,571,2131,604"/>
<area shape="poly" title=" " alt="" coords="1841,383,1870,417,1901,459,1915,488,1921,513,1930,535,1949,558,1952,560,1949,564,1945,561,1925,538,1916,515,1910,490,1897,462,1866,420,1837,386"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="2389,648,2531,682"/>
<area shape="poly" title=" " alt="" coords="2097,538,2139,556,2155,570,2163,585,2172,599,2187,612,2232,633,2280,647,2329,656,2374,661,2373,666,2328,661,2279,652,2230,638,2184,616,2168,603,2159,588,2150,574,2136,560,2094,542"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="2185,677,2341,711"/>
<area shape="poly" title=" " alt="" coords="2096,535,2119,543,2139,556,2158,581,2165,606,2171,631,2187,656,2201,667,2198,671,2183,660,2166,633,2160,608,2153,584,2136,560,2116,548,2094,540"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="2389,732,2531,766"/>
<area shape="poly" title=" " alt="" coords="2096,533,2119,542,2139,556,2155,578,2162,600,2162,643,2161,664,2163,684,2171,703,2187,721,2229,746,2277,759,2326,763,2373,761,2373,767,2326,769,2276,764,2227,751,2184,726,2166,706,2158,685,2156,664,2157,643,2157,600,2150,580,2135,560,2117,547,2094,538"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="2195,568,2331,602"/>
<area shape="poly" title=" " alt="" coords="2096,541,2180,562,2179,567,2095,546"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="2213,511,2313,544"/>
<area shape="poly" title=" " alt="" coords="2095,527,2198,526,2198,531,2095,532"/>
<area shape="poly" title=" " alt="" coords="2341,680,2373,675,2374,680,2341,685"/>
<area shape="poly" title=" " alt="" coords="2327,709,2383,725,2381,730,2326,714"/>
<area shape="poly" title=" " alt="" coords="2319,565,2339,555,2391,515,2432,474,2436,478,2394,519,2342,559,2321,570"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="2579,568,2720,602"/>
<area shape="poly" title=" " alt="" coords="2332,582,2563,582,2563,588,2332,588"/>
<area shape="poly" title=" " alt="" coords="2486,463,2614,556,2611,561,2483,467"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="2768,701,2867,735"/>
<area shape="poly" title=" " alt="" coords="2674,600,2785,689,2781,693,2671,604"/>
<area shape="poly" title=" " alt="" coords="2307,332,2342,351,2390,384,2431,418,2427,423,2387,389,2339,355,2304,337"/>
<area shape="poly" title=" " alt="" coords="1844,184,1889,152,1946,120,1971,110,1973,115,1948,125,1892,156,1847,188"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a673de80167cf18faad1b4a21670d0cf3" title=" " alt="" coords="1952,135,2133,168"/>
<area shape="poly" title=" " alt="" coords="1896,183,1952,170,1954,175,1897,189"/>
<area shape="poly" title=" " alt="" coords="1885,218,1966,242,1965,247,1883,224"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a7613e130753e766f5d381c06b1f7b86f" title=" " alt="" coords="1947,192,2137,226"/>
<area shape="poly" title=" " alt="" coords="1898,203,1931,203,1931,209,1898,208"/>
<area shape="poly" title=" " alt="" coords="1197,341,1223,330,1261,308,1297,281,1356,230,1359,234,1301,286,1264,312,1225,335,1199,346"/>
<area shape="poly" title=" " alt="" coords="1195,94,1225,105,1293,139,1350,175,1347,180,1290,144,1223,110,1193,99"/>
<area shape="poly" title=" " alt="" coords="1187,152,1301,180,1299,185,1186,157"/>
<area shape="poly" title=" " alt="" coords="1205,195,1274,197,1274,202,1205,200"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="1745,571,1899,604"/>
<area shape="poly" title=" " alt="" coords="1494,585,1729,585,1729,590,1494,590"/>
<area shape="poly" title=" " alt="" coords="1849,603,1906,640,1987,688,2084,734,2135,753,2186,768,2233,775,2282,776,2373,766,2374,771,2282,781,2233,780,2185,773,2133,758,2081,739,1985,692,1903,645,1846,607"/>
<area shape="poly" title=" " alt="" coords="1840,568,1886,531,1915,513,1946,498,2001,480,2059,467,2174,449,2283,442,2373,441,2373,446,2283,447,2175,454,2060,472,2003,486,1948,503,1917,518,1889,536,1843,572"/>
<area shape="poly" title=" " alt="" coords="1833,603,1850,636,1875,678,1908,721,1949,757,2027,807,2061,823,2095,834,2168,845,2262,848,2461,848,2507,845,2552,836,2640,809,2717,774,2776,741,2778,746,2719,779,2642,814,2553,841,2507,850,2461,853,2262,853,2168,850,2094,839,2059,827,2025,811,1945,762,1904,724,1871,681,1845,639,1828,606"/>
<area shape="poly" title=" " alt="" coords="1899,585,1937,585,1937,590,1899,590"/>
<area shape="poly" title=" " alt="" coords="1493,540,1697,566,1730,571,1729,576,1696,571,1492,545"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aaac450f6a679be8a392d17c3ed8700b4" title=" " alt="" coords="1272,401,1500,435"/>
<area shape="poly" title=" " alt="" coords="1198,455,1288,436,1289,441,1199,461"/>
<area shape="poly" title=" " alt="" coords="1396,399,1454,319,1497,271,1547,229,1552,226,1555,230,1550,234,1501,275,1458,322,1400,402"/>
<area shape="poly" title=" " alt="" coords="1501,417,1821,420,2044,420,2220,425,2373,437,2373,442,2219,431,2043,425,1820,425,1501,422"/>
<area shape="poly" title=" " alt="" coords="1456,433,1960,564,1959,569,1454,438"/>
<area shape="poly" title=" " alt="" coords="1462,398,1950,285,1951,290,1463,403"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1551,244,1694,278"/>
<area shape="poly" title=" " alt="" coords="1406,399,1468,350,1547,295,1568,283,1570,287,1550,299,1471,354,1410,403"/>
<area shape="poly" title=" " alt="" coords="1221,416,1256,416,1256,421,1221,421"/>
</map>
</div>

</div>
</div>
<a id="a7adddfeb0bc82cc5f816ab7f5b7635d2" name="a7adddfeb0bc82cc5f816ab7f5b7635d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7adddfeb0bc82cc5f816ab7f5b7635d2">&#9670;&#160;</a></span>vjson_parse_token()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="#a37b14f2a457d8d58a8c857b0d8bdb5cf">vjson_state</a> vjson_parse_token </td>
          <td>(</td>
          <td class="paramtype">json_tokener *</td>          <td class="paramname"><span class="paramname"><em>tok</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>err</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00573">573</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  574</span>{</div>
<div class="line"><span class="lineno">  575</span>    json_object *jsobj = NULL;</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>    jsobj = json_tokener_parse_ex(tok, <a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>, len);</div>
<div class="line"><span class="lineno">  578</span>    <span class="keywordflow">if</span> (json_tokener_get_error(tok) == json_tokener_continue)</div>
<div class="line"><span class="lineno">  579</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfad12804dc870d3fb5e1b0d28a252e3f74">VJSON_CONTINUE</a>;</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>    <span class="keywordflow">if</span> (json_tokener_get_error(tok) == json_tokener_success) {</div>
<div class="line"><span class="lineno">  582</span>        <span class="keywordflow">if</span> (json_object_get_type(jsobj) != json_type_object) {</div>
<div class="line"><span class="lineno">  583</span>            json_object_put(jsobj);</div>
<div class="line"><span class="lineno">  584</span>            <span class="keywordflow">return</span> vjson_error(<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>, <span class="stringliteral">&quot;result is not an JSON object&quot;</span>);</div>
<div class="line"><span class="lineno">  585</span>        }</div>
<div class="line"><span class="lineno">  586</span> </div>
<div class="line"><span class="lineno">  587</span>        <a class="code hl_function" href="../../d5/d7f/blobmsg__json_8c.html#a2ade37d9874e44a8462fb27351e11e22">blobmsg_add_object</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, jsobj);</div>
<div class="line"><span class="lineno">  588</span>        json_object_put(jsobj);</div>
<div class="line"><span class="lineno">  589</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="#a37b14f2a457d8d58a8c857b0d8bdb5cfa2dfac29cc5f20e29835881399b63a4b9">VJSON_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  590</span>    }</div>
<div class="line"><span class="lineno">  591</span> </div>
<div class="line"><span class="lineno">  592</span>    <span class="keywordflow">return</span> vjson_error(<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>, <span class="stringliteral">&quot;failed to parse JSON: %s (%d)&quot;</span>,</div>
<div class="line"><span class="lineno">  593</span>               json_tokener_error_desc(json_tokener_get_error(tok)),</div>
<div class="line"><span class="lineno">  594</span>               json_tokener_get_error(tok));</div>
<div class="line"><span class="lineno">  595</span>}</div>
<div class="ttc" id="ablobmsg__json_8c_html_a2ade37d9874e44a8462fb27351e11e22"><div class="ttname"><a href="../../d5/d7f/blobmsg__json_8c.html#a2ade37d9874e44a8462fb27351e11e22">blobmsg_add_object</a></div><div class="ttdeci">bool blobmsg_add_object(struct blob_buf *b, json_object *obj)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d7f/blobmsg__json_8c_source.html#l00026">blobmsg_json.c:26</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00038">b</a>, <a class="el" href="../../d5/d7f/blobmsg__json_8c_source.html#l00026">blobmsg_add_object()</a>, <a class="el" href="../../d7/d9a/mkdev_8c_source.html#l00034">buf</a>, <a class="el" href="../../d2/d62/udevtrigger_8c_source.html#l00058">err</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00045">VJSON_CONTINUE</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00046">VJSON_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00597">vjson_parse()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_a7adddfeb0bc82cc5f816ab7f5b7635d2_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_a7adddfeb0bc82cc5f816ab7f5b7635d2_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_a7adddfeb0bc82cc5f816ab7f5b7635d2_cgraph" id="ad8/d1d/procd_2system_8c_a7adddfeb0bc82cc5f816ab7f5b7635d2_cgraph">
<area shape="rect" title=" " alt="" coords="5,260,197,294"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#a2ade37d9874e44a8462fb27351e11e22" title=" " alt="" coords="245,260,455,294"/>
<area shape="poly" title=" " alt="" coords="197,274,229,274,229,280,197,280"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#ac4540592ac006fea0d36183930658bde" title=" " alt="" coords="503,260,779,294"/>
<area shape="poly" title=" " alt="" coords="455,283,487,283,487,288,455,288"/>
<area shape="poly" title=" " alt="" coords="503,271,471,271,471,265,503,265"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#aaa4d3c10ae1f486fa321100f0964a374" title=" " alt="" coords="835,5,1037,39"/>
<area shape="poly" title=" " alt="" coords="653,258,679,217,718,164,767,108,796,82,826,60,869,41,871,46,829,64,799,86,771,112,722,167,684,220,657,261"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ada699b1624254d4fbc463f51ffed6e80" title=" " alt="" coords="827,287,1045,320"/>
<area shape="poly" title=" " alt="" coords="780,287,812,290,812,295,779,292"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="1110,187,1304,220"/>
<area shape="poly" title=" " alt="" coords="776,257,1094,215,1095,221,777,262"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="832,344,1040,378"/>
<area shape="poly" title=" " alt="" coords="699,292,828,330,852,337,851,342,827,335,697,297"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393" title=" " alt="" coords="841,63,1031,96"/>
<area shape="poly" title=" " alt="" coords="654,258,723,184,772,141,826,105,836,100,838,105,829,110,775,146,726,188,658,261"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a49c8f3302820716f41cd9bdafab331fa" title=" " alt="" coords="841,120,1031,154"/>
<area shape="poly" title=" " alt="" coords="664,257,735,211,780,185,826,162,842,156,844,161,828,167,782,190,738,215,667,262"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2" title=" " alt="" coords="847,177,1025,211"/>
<area shape="poly" title=" " alt="" coords="703,257,858,213,859,218,705,262"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32" title=" " alt="" coords="1100,571,1314,604"/>
<area shape="poly" title=" " alt="" coords="651,293,671,346,708,417,732,455,760,491,792,523,829,549,890,577,956,592,1022,599,1085,599,1084,604,1022,604,955,597,888,582,826,554,789,527,756,494,728,458,703,420,667,348,646,295"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="1101,513,1313,547"/>
<area shape="poly" title=" " alt="" coords="653,293,676,338,714,396,765,456,795,482,829,502,891,527,957,540,1023,545,1085,543,1085,549,1023,550,956,545,889,532,826,507,792,486,761,460,710,400,671,340,648,295"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214" title=" " alt="" coords="829,459,1043,492"/>
<area shape="poly" title=" " alt="" coords="658,293,726,367,775,409,829,445,838,450,836,455,826,450,771,413,722,371,654,296"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="830,401,1042,435"/>
<area shape="poly" title=" " alt="" coords="667,292,737,339,782,365,828,388,844,394,842,399,826,393,779,370,735,344,664,296"/>
<area shape="poly" title=" " alt="" coords="836,36,829,40,799,62,771,88,722,144,684,200,658,247,653,245,679,198,718,141,767,84,796,58,826,36,833,32"/>
<area shape="poly" title=" " alt="" coords="990,284,1044,265,1148,224,1150,229,1046,270,992,289"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aed178aa087a351c74f7f6cd34e56ba0c" title=" " alt="" coords="1369,187,1517,220"/>
<area shape="poly" title=" " alt="" coords="1305,201,1353,201,1353,206,1305,206"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1807,77,1919,111"/>
<area shape="poly" title=" " alt="" coords="1510,183,1791,110,1793,115,1512,189"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aee908e6de67c16a4d810d08f28ed1803" title=" " alt="" coords="1588,351,1697,384"/>
<area shape="poly" title=" " alt="" coords="1500,219,1519,229,1561,272,1618,337,1614,341,1557,276,1516,234,1497,223"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="1567,187,1718,220"/>
<area shape="poly" title=" " alt="" coords="1518,201,1551,201,1551,206,1518,206"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ac239a83ed3c7f835e2b49f785953c934" title=" " alt="" coords="1778,249,1948,283"/>
<area shape="poly" title=" " alt="" coords="1510,218,1566,230,1667,245,1763,256,1762,261,1666,250,1565,235,1509,223"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1810,513,1916,547"/>
<area shape="poly" title=" " alt="" coords="1669,383,1828,502,1825,506,1666,387"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="2209,431,2352,464"/>
<area shape="poly" title=" " alt="" coords="1697,364,1786,364,1902,368,2032,380,2162,401,2228,422,2226,427,2161,406,2031,385,1902,374,1786,369,1697,369"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac9fd36cdb87493b31a675621ed53a8d7" title=" " alt="" coords="2028,300,2139,334"/>
<area shape="poly" title=" " alt="" coords="1697,359,1767,350,2012,322,2013,327,1768,355,1697,364"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a189526712fcc12adfb6ea6a5c8eede54" title=" " alt="" coords="1774,571,1952,604"/>
<area shape="poly" title=" " alt="" coords="1662,383,1691,417,1722,459,1736,488,1742,513,1750,535,1770,558,1773,560,1769,564,1766,561,1746,538,1737,515,1730,490,1717,462,1687,420,1658,386"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="2209,648,2352,682"/>
<area shape="poly" title=" " alt="" coords="1917,538,1959,556,1975,570,1984,585,1992,599,2007,612,2053,633,2101,647,2149,656,2194,661,2194,666,2148,661,2100,652,2051,638,2005,616,1988,603,1979,588,1971,574,1957,560,1915,542"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="2006,677,2161,711"/>
<area shape="poly" title=" " alt="" coords="1917,535,1939,543,1960,556,1979,581,1986,606,1991,631,2008,656,2022,667,2018,671,2004,660,1987,633,1980,608,1974,584,1956,560,1937,548,1915,540"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="2209,732,2352,766"/>
<area shape="poly" title=" " alt="" coords="1917,533,1940,542,1960,556,1975,578,1983,600,1983,643,1982,664,1984,684,1991,703,2008,721,2050,746,2097,759,2147,763,2194,761,2194,767,2147,769,2097,764,2048,751,2004,726,1987,706,1979,685,1976,664,1977,643,1977,600,1971,580,1956,560,1937,547,1915,538"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="2016,568,2152,602"/>
<area shape="poly" title=" " alt="" coords="1917,541,2001,562,2000,567,1915,546"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="2034,511,2133,544"/>
<area shape="poly" title=" " alt="" coords="1916,527,2019,526,2019,531,1916,532"/>
<area shape="poly" title=" " alt="" coords="2161,680,2194,675,2195,680,2162,685"/>
<area shape="poly" title=" " alt="" coords="2148,709,2203,725,2202,730,2146,714"/>
<area shape="poly" title=" " alt="" coords="2139,565,2160,555,2211,515,2253,474,2256,478,2215,519,2163,559,2142,570"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="2400,568,2541,602"/>
<area shape="poly" title=" " alt="" coords="2152,582,2384,582,2384,588,2152,588"/>
<area shape="poly" title=" " alt="" coords="2307,463,2435,556,2432,561,2304,467"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="2589,701,2687,735"/>
<area shape="poly" title=" " alt="" coords="2495,600,2605,689,2602,693,2492,604"/>
<area shape="poly" title=" " alt="" coords="2128,332,2163,351,2210,384,2251,418,2248,423,2207,389,2160,355,2125,337"/>
<area shape="poly" title=" " alt="" coords="1664,184,1710,152,1767,120,1792,110,1794,115,1769,125,1713,156,1667,188"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a673de80167cf18faad1b4a21670d0cf3" title=" " alt="" coords="1772,135,1954,168"/>
<area shape="poly" title=" " alt="" coords="1716,183,1773,170,1774,175,1718,189"/>
<area shape="poly" title=" " alt="" coords="1705,218,1787,242,1786,247,1704,224"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a7613e130753e766f5d381c06b1f7b86f" title=" " alt="" coords="1768,192,1958,226"/>
<area shape="poly" title=" " alt="" coords="1719,203,1752,203,1752,209,1719,208"/>
<area shape="poly" title=" " alt="" coords="1018,341,1043,330,1082,308,1118,281,1176,230,1180,234,1121,286,1085,312,1046,335,1020,346"/>
<area shape="poly" title=" " alt="" coords="1016,94,1046,105,1113,139,1170,175,1168,180,1111,144,1044,110,1014,99"/>
<area shape="poly" title=" " alt="" coords="1008,152,1121,180,1120,185,1007,157"/>
<area shape="poly" title=" " alt="" coords="1026,195,1095,197,1094,202,1025,200"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="1565,571,1720,604"/>
<area shape="poly" title=" " alt="" coords="1315,585,1550,585,1550,590,1315,590"/>
<area shape="poly" title=" " alt="" coords="1670,603,1727,640,1808,688,1904,734,1955,753,2007,768,2054,775,2103,776,2194,766,2195,771,2103,781,2054,780,2005,773,1954,758,1902,739,1805,692,1724,645,1667,607"/>
<area shape="poly" title=" " alt="" coords="1661,568,1706,531,1735,513,1767,498,1822,480,1879,467,1995,449,2104,442,2194,441,2194,446,2104,447,1996,454,1880,472,1823,486,1769,503,1738,518,1709,536,1664,572"/>
<area shape="poly" title=" " alt="" coords="1654,603,1670,636,1696,678,1729,721,1769,757,1848,807,1882,823,1916,834,1989,845,2082,848,2282,848,2327,845,2373,836,2460,809,2537,774,2596,741,2599,746,2540,779,2462,814,2374,841,2328,850,2282,853,2082,853,1988,850,1914,839,1880,827,1845,811,1766,762,1725,724,1691,681,1666,639,1649,606"/>
<area shape="poly" title=" " alt="" coords="1720,585,1758,585,1758,590,1720,590"/>
<area shape="poly" title=" " alt="" coords="1314,540,1518,566,1551,571,1550,576,1517,571,1313,545"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aaac450f6a679be8a392d17c3ed8700b4" title=" " alt="" coords="1093,401,1321,435"/>
<area shape="poly" title=" " alt="" coords="1018,455,1109,436,1110,441,1019,461"/>
<area shape="poly" title=" " alt="" coords="1217,399,1275,319,1318,271,1367,229,1372,226,1375,230,1371,234,1322,275,1279,322,1221,402"/>
<area shape="poly" title=" " alt="" coords="1321,417,1641,420,1864,420,2040,425,2194,437,2193,442,2040,431,1864,425,1641,425,1321,422"/>
<area shape="poly" title=" " alt="" coords="1276,433,1781,564,1779,569,1275,438"/>
<area shape="poly" title=" " alt="" coords="1283,398,1771,285,1772,290,1284,403"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1372,244,1514,278"/>
<area shape="poly" title=" " alt="" coords="1227,399,1288,350,1368,295,1388,283,1391,287,1370,299,1292,354,1230,403"/>
<area shape="poly" title=" " alt="" coords="1042,416,1077,416,1077,421,1042,421"/>
</map>
</div>

</div>
</div>
<a id="a7d2a3a8b57f72aac47833e7098d65716" name="a7d2a3a8b57f72aac47833e7098d65716"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d2a3a8b57f72aac47833e7098d65716">&#9670;&#160;</a></span>watchdog_set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int watchdog_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *</td>          <td class="paramname"><span class="paramname"><em>req</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">463</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  466</span>{</div>
<div class="line"><span class="lineno">  467</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *tb[<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80a888c2b2f926dd541677758f38a333bc7">__WDT_MAX</a>];</div>
<div class="line"><span class="lineno">  468</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *status;</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>    <span class="keywordflow">if</span> (!msg)</div>
<div class="line"><span class="lineno">  471</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312a01547e86014c16f5a948f832185ce2e7">UBUS_STATUS_INVALID_ARGUMENT</a>;</div>
<div class="line"><span class="lineno">  472</span> </div>
<div class="line"><span class="lineno">  473</span>    <a class="code hl_function" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed">blobmsg_parse</a>(<a class="code hl_variable" href="#aee87538e9d304b68e883653f62dd19cb">watchdog_policy</a>, <a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80a888c2b2f926dd541677758f38a333bc7">__WDT_MAX</a>, tb, <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857">blob_data</a>(msg), <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32">blob_len</a>(msg));</div>
<div class="line"><span class="lineno">  474</span>    <span class="keywordflow">if</span> (tb[<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80a5d7a644c9a0129e165f67cfaa2985fb3">WDT_FREQUENCY</a>]) {</div>
<div class="line"><span class="lineno">  475</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = tb[<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80ad1bf507acb7ed3315e1c8e5aab875b30">WDT_TIMEOUT</a>] ? <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a856562b4d96007d3ce1a052998451a0f">blobmsg_get_u32</a>(tb[<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80ad1bf507acb7ed3315e1c8e5aab875b30">WDT_TIMEOUT</a>]) :</div>
<div class="line"><span class="lineno">  476</span>                        <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a9cb0f6cbef0cbe8203eb22795acc9446">watchdog_timeout</a>(0);</div>
<div class="line"><span class="lineno">  477</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> freq = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a856562b4d96007d3ce1a052998451a0f">blobmsg_get_u32</a>(tb[<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80a5d7a644c9a0129e165f67cfaa2985fb3">WDT_FREQUENCY</a>]);</div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span>        <span class="keywordflow">if</span> (freq) {</div>
<div class="line"><span class="lineno">  480</span>            <span class="keywordflow">if</span> (freq &gt; <a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> / 2)</div>
<div class="line"><span class="lineno">  481</span>                freq = <a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> / 2;</div>
<div class="line"><span class="lineno">  482</span>            <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#aa5a3542e62faac548615860ffa297d1b">watchdog_frequency</a>(freq);</div>
<div class="line"><span class="lineno">  483</span>        }</div>
<div class="line"><span class="lineno">  484</span>    }</div>
<div class="line"><span class="lineno">  485</span> </div>
<div class="line"><span class="lineno">  486</span>    <span class="keywordflow">if</span> (tb[<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80ad1bf507acb7ed3315e1c8e5aab875b30">WDT_TIMEOUT</a>]) {</div>
<div class="line"><span class="lineno">  487</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a856562b4d96007d3ce1a052998451a0f">blobmsg_get_u32</a>(tb[<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80ad1bf507acb7ed3315e1c8e5aab875b30">WDT_TIMEOUT</a>]);</div>
<div class="line"><span class="lineno">  488</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> frequency = <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#aa5a3542e62faac548615860ffa297d1b">watchdog_frequency</a>(0);</div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> &lt;= frequency)</div>
<div class="line"><span class="lineno">  491</span>            <a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = frequency * 2;</div>
<div class="line"><span class="lineno">  492</span>        <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a9cb0f6cbef0cbe8203eb22795acc9446">watchdog_timeout</a>(<a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>);</div>
<div class="line"><span class="lineno">  493</span>    }</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>    <span class="keywordflow">if</span> (tb[<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80aeabaceb3971c2f35bcea085b09b0820d">WDT_MAGICCLOSE</a>])</div>
<div class="line"><span class="lineno">  496</span>        <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a17cc5d8e2a9be6590ae9944c3abf3555">watchdog_set_magicclose</a>(<a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#adfbec0b532211a1442310392496a45f2">blobmsg_get_bool</a>(tb[<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80aeabaceb3971c2f35bcea085b09b0820d">WDT_MAGICCLOSE</a>]));</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>    <span class="keywordflow">if</span> (tb[<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80acf74482596b6b7bff085a4398c28feeb">WDT_STOP</a>])</div>
<div class="line"><span class="lineno">  499</span>        <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a441b97e6f07ed2aefef37cd2309adafc">watchdog_set_stopped</a>(<a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#adfbec0b532211a1442310392496a45f2">blobmsg_get_bool</a>(tb[<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80acf74482596b6b7bff085a4398c28feeb">WDT_STOP</a>]));</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d88/watchdog_8c.html#ae02caa227c18af4c5c42fee4b8d94ba9">watchdog_fd</a>() == NULL)</div>
<div class="line"><span class="lineno">  502</span>        status = <span class="stringliteral">&quot;offline&quot;</span>;</div>
<div class="line"><span class="lineno">  503</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d88/watchdog_8c.html#ad28218c9cb9943272f216b52ed33f680">watchdog_get_stopped</a>())</div>
<div class="line"><span class="lineno">  504</span>        status = <span class="stringliteral">&quot;stopped&quot;</span>;</div>
<div class="line"><span class="lineno">  505</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  506</span>        status = <span class="stringliteral">&quot;running&quot;</span>;</div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>    <a class="code hl_function" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, 0);</div>
<div class="line"><span class="lineno">  509</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;status&quot;</span>, status);</div>
<div class="line"><span class="lineno">  510</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393">blobmsg_add_u32</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;timeout&quot;</span>, <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a9cb0f6cbef0cbe8203eb22795acc9446">watchdog_timeout</a>(0));</div>
<div class="line"><span class="lineno">  511</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393">blobmsg_add_u32</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;frequency&quot;</span>, <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#aa5a3542e62faac548615860ffa297d1b">watchdog_frequency</a>(0));</div>
<div class="line"><span class="lineno">  512</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2">blobmsg_add_u8</a>(&amp;<a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, <span class="stringliteral">&quot;magicclose&quot;</span>, <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a23ac65088fc496c0c827cfa697b62e83">watchdog_get_magicclose</a>());</div>
<div class="line"><span class="lineno">  513</span>    <a class="code hl_function" href="../../d2/de5/libubus-req_8c.html#aab336677450493ac2229e8a2f70fa0e4">ubus_send_reply</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, req, <a class="code hl_variable" href="#a8f565d46decc2d5d8ac81923ceec43fd">b</a>.<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#af6065d74116605108b22c11e75ec669c">head</a>);</div>
<div class="line"><span class="lineno">  514</span> </div>
<div class="line"><span class="lineno">  515</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  516</span>}</div>
<div class="ttc" id="ablobmsg_8h_html_a381e9943751280e58fbbdf5f59f3bec2"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2">blobmsg_add_u8</a></div><div class="ttdeci">static int blobmsg_add_u8(struct blob_buf *buf, const char *name, uint8_t val)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00208">blobmsg.h:208</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_aee87538e9d304b68e883653f62dd19cb"><div class="ttname"><a href="#aee87538e9d304b68e883653f62dd19cb">watchdog_policy</a></div><div class="ttdeci">static const struct blobmsg_policy watchdog_policy[__WDT_MAX]</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00456">system.c:456</a></div></div>
<div class="ttc" id="aprocd_2ubus_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition</b> <a href="../../de/d89/procd_2ubus_8c_source.html#l00025">ubus.c:25</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a17cc5d8e2a9be6590ae9944c3abf3555"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a17cc5d8e2a9be6590ae9944c3abf3555">watchdog_set_magicclose</a></div><div class="ttdeci">void watchdog_set_magicclose(bool val)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00127">watchdog.c:127</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a23ac65088fc496c0c827cfa697b62e83"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a23ac65088fc496c0c827cfa697b62e83">watchdog_get_magicclose</a></div><div class="ttdeci">bool watchdog_get_magicclose(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00132">watchdog.c:132</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a441b97e6f07ed2aefef37cd2309adafc"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a441b97e6f07ed2aefef37cd2309adafc">watchdog_set_stopped</a></div><div class="ttdeci">void watchdog_set_stopped(bool val)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00137">watchdog.c:137</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a9cb0f6cbef0cbe8203eb22795acc9446"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a9cb0f6cbef0cbe8203eb22795acc9446">watchdog_timeout</a></div><div class="ttdeci">int watchdog_timeout(int timeout)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00156">watchdog.c:156</a></div></div>
<div class="ttc" id="awatchdog_8c_html_aa5a3542e62faac548615860ffa297d1b"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#aa5a3542e62faac548615860ffa297d1b">watchdog_frequency</a></div><div class="ttdeci">int watchdog_frequency(int frequency)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00169">watchdog.c:169</a></div></div>
<div class="ttc" id="awatchdog_8c_html_ad28218c9cb9943272f216b52ed33f680"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#ad28218c9cb9943272f216b52ed33f680">watchdog_get_stopped</a></div><div class="ttdeci">bool watchdog_get_stopped(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00151">watchdog.c:151</a></div></div>
<div class="ttc" id="awatchdog_8c_html_ae02caa227c18af4c5c42fee4b8d94ba9"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#ae02caa227c18af4c5c42fee4b8d94ba9">watchdog_fd</a></div><div class="ttdeci">char * watchdog_fd(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00179">watchdog.c:179</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00453">__WDT_MAX</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00038">b</a>, <a class="el" href="../../d4/da0/blob_8c_source.html#l00091">blob_buf_init()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00075">blob_data()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00100">blob_len()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00235">blobmsg_add_string()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00221">blobmsg_add_u32()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00208">blobmsg_add_u8()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00283">blobmsg_get_bool()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00293">blobmsg_get_u32()</a>, <a class="el" href="../../d1/d30/blobmsg_8c_source.html#l00166">blobmsg_parse()</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00065">blob_buf::head</a>, <a class="el" href="../../de/d89/procd_2ubus_8c_source.html#l00025">timeout</a>, <a class="el" href="../../d2/de5/libubus-req_8c_source.html#l00205">ubus_send_reply()</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00121">UBUS_STATUS_INVALID_ARGUMENT</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00179">watchdog_fd()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00169">watchdog_frequency()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00132">watchdog_get_magicclose()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00151">watchdog_get_stopped()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00456">watchdog_policy</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00127">watchdog_set_magicclose()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00137">watchdog_set_stopped()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00156">watchdog_timeout()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00449">WDT_FREQUENCY</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00451">WDT_MAGICCLOSE</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00452">WDT_STOP</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00450">WDT_TIMEOUT</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d1d/procd_2system_8c_a7d2a3a8b57f72aac47833e7098d65716_cgraph.png" border="0" usemap="#ad8/d1d/procd_2system_8c_a7d2a3a8b57f72aac47833e7098d65716_cgraph" alt=""/></div>
<map name="ad8/d1d/procd_2system_8c_a7d2a3a8b57f72aac47833e7098d65716_cgraph" id="ad8/d1d/procd_2system_8c_a7d2a3a8b57f72aac47833e7098d65716_cgraph">
<area shape="rect" title=" " alt="" coords="5,649,154,683"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="834,60,974,94"/>
<area shape="poly" title=" " alt="" coords="80,649,90,543,113,387,129,306,149,231,172,171,185,147,200,130,234,101,270,77,309,58,350,43,436,23,525,16,612,18,694,27,768,39,829,53,828,58,767,45,694,32,612,23,525,21,437,28,352,48,311,63,273,82,237,105,204,133,190,150,177,173,154,233,134,307,118,388,96,544,85,649"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1067,307,1179,340"/>
<area shape="poly" title=" " alt="" coords="81,648,92,601,113,537,129,504,149,471,172,441,200,416,251,383,305,354,362,331,421,313,481,299,542,288,663,277,779,276,886,283,979,294,1052,306,1051,311,978,299,886,289,779,282,663,282,542,293,482,304,422,318,364,336,308,359,254,387,203,420,176,445,153,474,134,506,118,539,97,602,86,649"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="855,223,953,256"/>
<area shape="poly" title=" " alt="" coords="77,649,78,577,83,528,92,474,106,418,129,364,159,315,200,273,222,260,250,249,321,232,406,223,500,219,689,222,839,231,839,237,689,227,500,224,406,228,321,238,252,254,224,265,203,278,163,318,133,366,112,420,97,475,88,528,84,577,83,649"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="229,707,437,740"/>
<area shape="poly" title=" " alt="" coords="152,681,202,693,235,700,234,705,201,698,150,686"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393" title=" " alt="" coords="238,592,428,626"/>
<area shape="poly" title=" " alt="" coords="150,646,201,634,234,627,235,632,202,639,152,651"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2" title=" " alt="" coords="244,649,422,683"/>
<area shape="poly" title=" " alt="" coords="154,664,228,664,228,669,154,669"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#adfbec0b532211a1442310392496a45f2" title=" " alt="" coords="552,593,740,627"/>
<area shape="poly" title=" " alt="" coords="89,647,132,592,164,564,201,542,272,519,302,514,331,514,391,523,465,542,480,549,490,556,513,572,552,586,551,591,511,577,487,561,477,553,463,547,390,528,331,519,303,520,273,524,203,547,167,568,136,596,94,650"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a856562b4d96007d3ce1a052998451a0f" title=" " alt="" coords="554,651,739,684"/>
<area shape="poly" title=" " alt="" coords="96,647,140,609,169,591,201,577,274,555,335,545,364,545,395,551,465,577,482,591,491,607,499,623,514,637,540,650,538,655,510,642,494,626,486,610,478,594,463,582,394,556,364,551,335,550,275,560,203,582,172,595,144,613,99,651"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed" title=" " alt="" coords="252,431,414,464"/>
<area shape="poly" title=" " alt="" coords="85,648,101,613,125,568,159,522,200,483,236,464,238,468,203,487,163,526,130,571,106,615,90,650"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aab336677450493ac2229e8a2f70fa0e4" title=" " alt="" coords="245,144,421,178"/>
<area shape="poly" title=" " alt="" coords="78,649,82,574,97,462,113,400,134,337,163,277,200,223,226,199,257,182,259,186,229,204,204,227,167,280,139,339,118,401,103,463,87,574,83,649"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#ae02caa227c18af4c5c42fee4b8d94ba9" title=" " alt="" coords="263,764,403,798"/>
<area shape="poly" title=" " alt="" coords="101,682,146,717,203,750,249,766,247,771,201,755,143,721,98,686"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#aa5a3542e62faac548615860ffa297d1b" title=" " alt="" coords="226,821,440,855"/>
<area shape="poly" title=" " alt="" coords="92,682,135,745,166,779,203,808,213,813,211,818,200,812,163,783,130,748,88,685"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a23ac65088fc496c0c827cfa697b62e83" title=" " alt="" coords="202,879,464,912"/>
<area shape="poly" title=" " alt="" coords="88,683,102,721,126,771,159,823,180,846,203,865,209,869,206,873,200,870,176,849,155,826,121,774,98,723,83,684"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#ad28218c9cb9943272f216b52ed33f680" title=" " alt="" coords="216,936,450,970"/>
<area shape="poly" title=" " alt="" coords="86,683,97,731,118,797,134,832,153,865,176,896,203,923,207,925,203,930,200,927,172,900,148,868,129,834,113,799,92,733,81,684"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a17cc5d8e2a9be6590ae9944c3abf3555" title=" " alt="" coords="203,993,463,1027"/>
<area shape="poly" title=" " alt="" coords="85,683,92,741,110,822,126,865,146,907,172,947,203,980,206,982,203,986,200,984,167,950,141,910,121,867,105,823,86,742,79,684"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a441b97e6f07ed2aefef37cd2309adafc" title=" " alt="" coords="217,1051,449,1084"/>
<area shape="poly" title=" " alt="" coords="83,683,87,750,103,846,118,898,139,949,167,997,204,1038,206,1039,202,1043,200,1041,163,1000,134,952,113,900,98,847,82,751,78,684"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a9cb0f6cbef0cbe8203eb22795acc9446" title=" " alt="" coords="237,1123,429,1156"/>
<area shape="poly" title=" " alt="" coords="83,683,85,757,90,810,99,868,114,928,136,988,165,1045,204,1095,228,1113,224,1117,200,1099,160,1048,131,991,109,930,94,869,85,810,80,758,78,683"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1070,32,1176,66"/>
<area shape="poly" title=" " alt="" coords="974,65,1054,55,1055,60,975,71"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1033,89,1213,123"/>
<area shape="poly" title=" " alt="" coords="975,84,1018,89,1017,95,974,89"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1469,5,1612,39"/>
<area shape="poly" title=" " alt="" coords="1175,33,1266,17,1344,14,1421,17,1454,17,1454,23,1421,22,1344,19,1266,22,1176,38"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1266,32,1421,66"/>
<area shape="poly" title=" " alt="" coords="1176,46,1250,46,1250,52,1176,52"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1276,89,1412,123"/>
<area shape="poly" title=" " alt="" coords="1177,60,1262,82,1261,87,1175,65"/>
<area shape="poly" title=" " alt="" coords="1421,36,1454,31,1455,36,1422,41"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="549,708,743,742"/>
<area shape="poly" title=" " alt="" coords="438,721,534,722,534,727,438,727"/>
<area shape="poly" title=" " alt="" coords="430,619,465,635,482,650,490,666,498,681,514,695,535,705,533,710,510,699,494,684,486,668,478,653,463,639,428,624"/>
<area shape="poly" title=" " alt="" coords="423,680,538,702,537,707,422,685"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="828,491,980,524"/>
<area shape="poly" title=" " alt="" coords="690,590,845,528,847,533,692,595"/>
<area shape="poly" title=" " alt="" coords="963,488,978,478,995,456,1003,435,1010,412,1026,387,1049,365,1075,347,1078,351,1052,369,1030,391,1015,414,1008,437,1000,459,981,481,966,492"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a673de80167cf18faad1b4a21670d0cf3" title=" " alt="" coords="1032,401,1214,435"/>
<area shape="poly" title=" " alt="" coords="952,488,979,477,1068,439,1070,444,981,482,954,493"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a7613e130753e766f5d381c06b1f7b86f" title=" " alt="" coords="1028,517,1218,551"/>
<area shape="poly" title=" " alt="" coords="981,514,1012,518,1012,523,980,519"/>
<area shape="poly" title=" " alt="" coords="738,653,779,637,810,615,839,589,881,536,886,539,842,592,814,619,782,642,740,658"/>
<area shape="poly" title=" " alt="" coords="408,427,512,406,812,360,1051,329,1052,334,812,365,512,411,409,433"/>
<area shape="poly" title=" " alt="" coords="414,437,512,429,785,418,1016,415,1016,421,785,423,512,434,415,442"/>
<area shape="poly" title=" " alt="" coords="368,462,446,501,513,528,578,540,645,549,780,556,906,553,1012,545,1012,550,906,558,780,561,645,554,577,545,511,533,444,506,366,467"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac79cacbc6a47f754832dc10bafa3b761" title=" " alt="" coords="860,433,948,467"/>
<area shape="poly" title=" " alt="" coords="414,445,845,447,845,453,414,451"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5a5283071ac5677652515d9a8460e655" title=" " alt="" coords="525,484,768,518"/>
<area shape="poly" title=" " alt="" coords="415,459,529,478,528,483,414,464"/>
<area shape="poly" title=" " alt="" coords="768,501,813,502,812,508,768,507"/>
<area shape="poly" title=" " alt="" coords="735,481,845,459,846,464,736,486"/>
<area shape="poly" title=" " alt="" coords="376,141,439,119,511,100,592,87,674,79,818,73,819,79,675,85,593,92,513,105,441,124,378,146"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a0e8112f19ea399af22d957f19cf6cfc7" title=" " alt="" coords="568,172,725,206"/>
<area shape="poly" title=" " alt="" coords="422,166,552,178,552,183,421,171"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a3e8e6d098f2808fa135bfefa3c0e81f8" title=" " alt="" coords="561,115,731,148"/>
<area shape="poly" title=" " alt="" coords="421,150,546,138,546,144,422,155"/>
<area shape="poly" title=" " alt="" coords="725,178,783,177,848,179,915,189,981,208,1015,225,1047,247,1098,293,1094,297,1044,251,1013,230,979,213,914,194,847,185,782,182,725,184"/>
<area shape="poly" title=" " alt="" coords="726,202,840,224,839,230,725,207"/>
<area shape="poly" title=" " alt="" coords="728,111,819,92,820,97,729,117"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a6231184d2f54ac1bc945ecb73c517d91" title=" " alt="" coords="536,921,756,955"/>
<area shape="poly" title=" " alt="" coords="444,1048,462,1037,478,1020,485,1002,493,982,510,964,521,958,523,962,514,968,498,985,490,1004,483,1023,466,1042,446,1052"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a5b72bc58af8576da573b81ac0cc51103" title=" " alt="" coords="563,979,730,1012"/>
<area shape="poly" title=" " alt="" coords="421,1047,463,1037,511,1021,546,1012,548,1017,513,1026,465,1042,422,1053"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58" title=" " alt="" coords="563,1036,729,1070"/>
<area shape="poly" title=" " alt="" coords="449,1059,548,1055,548,1060,450,1065"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1" title=" " alt="" coords="512,1151,780,1184"/>
<area shape="poly" title=" " alt="" coords="398,1082,465,1108,489,1123,513,1137,531,1143,529,1148,511,1142,486,1128,463,1113,396,1087"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a5a3159d3f3390614400f8f403c5aac73" title=" " alt="" coords="535,1093,757,1127"/>
<area shape="poly" title=" " alt="" coords="450,1081,520,1090,519,1096,449,1086"/>
<area shape="poly" title=" " alt="" coords="429,1145,497,1151,496,1157,429,1151"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af85a8208a05e85268c56cc20ca9fa894" name="af85a8208a05e85268c56cc20ca9fa894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af85a8208a05e85268c56cc20ca9fa894">&#9670;&#160;</a></span>_ctx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a>* _ctx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00040">40</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00864">procd_bcast_event()</a>, <a class="el" href="../../d7/d1d/service_8c_source.html#l01081">ubus_init_service()</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00876">ubus_init_system()</a>.</p>

</div>
</div>
<a id="a8f565d46decc2d5d8ac81923ceec43fd" name="a8f565d46decc2d5d8ac81923ceec43fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f565d46decc2d5d8ac81923ceec43fd">&#9670;&#160;</a></span>b</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d3c/blob_8h.html#d3/dcb/structblob__buf">blob_buf</a> b</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00038">38</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00547">__attribute__()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00327">kscale()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00122">system_board()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00332">system_info()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00764">sysupgrade()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00749">sysupgrade_error()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00705">validate_firmware_image()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00643">validate_firmware_image_call()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00573">vjson_parse_token()</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>

</div>
</div>
<a id="ac27bf7208ee9ade15186848187be3f15" name="ac27bf7208ee9ade15186848187be3f15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac27bf7208ee9ade15186848187be3f15">&#9670;&#160;</a></span>initramfs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int initramfs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00041">41</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00049">system_rootfs_type()</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00876">ubus_init_system()</a>.</p>

</div>
</div>
<a id="a6c17ea8bcc28c91e490e1112d5348541" name="a6c17ea8bcc28c91e490e1112d5348541"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c17ea8bcc28c91e490e1112d5348541">&#9670;&#160;</a></span>notify</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int notify</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00039">39</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00864">procd_bcast_event()</a>, <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00836">procd_subscribe_cb()</a>, and <a class="el" href="../../d8/d5d/udebug_8c_source.html#l00642">udebug_entry_add()</a>.</p>

</div>
</div>
<a id="a962a736c58860d8a979277528ef9096e" name="a962a736c58860d8a979277528ef9096e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a962a736c58860d8a979277528ef9096e">&#9670;&#160;</a></span>signal_policy</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/dad/blobmsg_8h.html#d3/d4d/structblobmsg__policy">blobmsg_policy</a> signal_policy[<a class="el" href="#aa491173a6b1628f4ff82067b2e1ceaa9aea1000087187314b530f0ed34970a4a9">__SIGNAL_MAX</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    [<a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9a0b6e012eb7381b509358c1d189b788f5">SIGNAL_PID</a>] = { .name = <span class="stringliteral">&quot;pid&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9acf0b8181117c037f7db537ed6270fafd">BLOBMSG_TYPE_INT32</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9a713800d76f77ca845d56e3ee69fd0b84">SIGNAL_NUM</a>] = { .name = <span class="stringliteral">&quot;signum&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9acf0b8181117c037f7db537ed6270fafd">BLOBMSG_TYPE_INT32</a> },</div>
<div class="line">}</div>
<div class="ttc" id="ablobmsg_8h_html_a9e3efca3093410d90ef04154aefde2c9acf0b8181117c037f7db537ed6270fafd"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9acf0b8181117c037f7db537ed6270fafd">BLOBMSG_TYPE_INT32</a></div><div class="ttdeci">@ BLOBMSG_TYPE_INT32</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00031">blobmsg.h:31</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00524">524</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  524</span>                                                                 {</div>
<div class="line"><span class="lineno">  525</span>    [<a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9a0b6e012eb7381b509358c1d189b788f5">SIGNAL_PID</a>] = { .name = <span class="stringliteral">&quot;pid&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9acf0b8181117c037f7db537ed6270fafd">BLOBMSG_TYPE_INT32</a> },</div>
<div class="line"><span class="lineno">  526</span>    [<a class="code hl_enumvalue" href="#aa491173a6b1628f4ff82067b2e1ceaa9a713800d76f77ca845d56e3ee69fd0b84">SIGNAL_NUM</a>] = { .name = <span class="stringliteral">&quot;signum&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9acf0b8181117c037f7db537ed6270fafd">BLOBMSG_TYPE_INT32</a> },</div>
<div class="line"><span class="lineno">  527</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00529">proc_signal()</a>.</p>

</div>
</div>
<a id="a79932be4b41ac42a225150cefd236647" name="a79932be4b41ac42a225150cefd236647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79932be4b41ac42a225150cefd236647">&#9670;&#160;</a></span>system_methods</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d9/d8b/structubus__method">ubus_method</a> system_methods[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <a class="code hl_define" href="../../db/d55/libubus_8h.html#ab3772ca422a2cdb9394098d7629c1473">UBUS_METHOD_NOARG</a>(<span class="stringliteral">&quot;board&quot;</span>, <a class="code hl_function" href="#a1b0c56f2aad9be40439f08c6b9d7407d">system_board</a>),</div>
<div class="line">    <a class="code hl_define" href="../../db/d55/libubus_8h.html#ab3772ca422a2cdb9394098d7629c1473">UBUS_METHOD_NOARG</a>(<span class="stringliteral">&quot;info&quot;</span>,  <a class="code hl_function" href="#a5e16c193b6021498dee2b3a854b60ffa">system_info</a>),</div>
<div class="line">    <a class="code hl_define" href="../../db/d55/libubus_8h.html#ab3772ca422a2cdb9394098d7629c1473">UBUS_METHOD_NOARG</a>(<span class="stringliteral">&quot;reboot&quot;</span>, <a class="code hl_function" href="#a7021c7b54efb1e1c02aa12bbc0bdfb11">system_reboot</a>),</div>
<div class="line">    <a class="code hl_define" href="../../db/d55/libubus_8h.html#aac021711c90050abc4c65261f9799687">UBUS_METHOD</a>(<span class="stringliteral">&quot;watchdog&quot;</span>, <a class="code hl_function" href="#a7d2a3a8b57f72aac47833e7098d65716">watchdog_set</a>, <a class="code hl_variable" href="#aee87538e9d304b68e883653f62dd19cb">watchdog_policy</a>),</div>
<div class="line">    <a class="code hl_define" href="../../db/d55/libubus_8h.html#aac021711c90050abc4c65261f9799687">UBUS_METHOD</a>(<span class="stringliteral">&quot;signal&quot;</span>, <a class="code hl_function" href="#aefcddf37def5f4c154117f1294068488">proc_signal</a>, <a class="code hl_variable" href="#a962a736c58860d8a979277528ef9096e">signal_policy</a>),</div>
<div class="line">    <a class="code hl_define" href="../../db/d55/libubus_8h.html#aac021711c90050abc4c65261f9799687">UBUS_METHOD</a>(<span class="stringliteral">&quot;validate_firmware_image&quot;</span>, <a class="code hl_function" href="#a389bc474521bdb3825edcb68f5d77e41">validate_firmware_image</a>, <a class="code hl_variable" href="#a45928dbe4e9a632c1e09fde8dea6b6f2">validate_firmware_image_policy</a>),</div>
<div class="line">    <a class="code hl_define" href="../../db/d55/libubus_8h.html#aac021711c90050abc4c65261f9799687">UBUS_METHOD</a>(<span class="stringliteral">&quot;sysupgrade&quot;</span>, <a class="code hl_function" href="#a971a97328aa4e052756235e6690602f7">sysupgrade</a>, <a class="code hl_variable" href="#ab8cf62096176a253e423aa32e1550ec2">sysupgrade_policy</a>),</div>
<div class="line">}</div>
<div class="ttc" id="alibubus_8h_html_aac021711c90050abc4c65261f9799687"><div class="ttname"><a href="../../db/d55/libubus_8h.html#aac021711c90050abc4c65261f9799687">UBUS_METHOD</a></div><div class="ttdeci">#define UBUS_METHOD(_name, _handler, _policy)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00086">libubus.h:86</a></div></div>
<div class="ttc" id="alibubus_8h_html_ab3772ca422a2cdb9394098d7629c1473"><div class="ttname"><a href="../../db/d55/libubus_8h.html#ab3772ca422a2cdb9394098d7629c1473">UBUS_METHOD_NOARG</a></div><div class="ttdeci">#define UBUS_METHOD_NOARG(_name, _handler)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00098">libubus.h:98</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a1b0c56f2aad9be40439f08c6b9d7407d"><div class="ttname"><a href="#a1b0c56f2aad9be40439f08c6b9d7407d">system_board</a></div><div class="ttdeci">static int system_board(struct ubus_context *ctx, struct ubus_object *obj, struct ubus_request_data *req, const char *method, struct blob_attr *msg)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00122">system.c:122</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a389bc474521bdb3825edcb68f5d77e41"><div class="ttname"><a href="#a389bc474521bdb3825edcb68f5d77e41">validate_firmware_image</a></div><div class="ttdeci">static int validate_firmware_image(struct ubus_context *ctx, struct ubus_object *obj, struct ubus_request_data *req, const char *method, struct blob_attr *msg)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00705">system.c:705</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a5e16c193b6021498dee2b3a854b60ffa"><div class="ttname"><a href="#a5e16c193b6021498dee2b3a854b60ffa">system_info</a></div><div class="ttdeci">static int system_info(struct ubus_context *ctx, struct ubus_object *obj, struct ubus_request_data *req, const char *method, struct blob_attr *msg)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00332">system.c:332</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a7021c7b54efb1e1c02aa12bbc0bdfb11"><div class="ttname"><a href="#a7021c7b54efb1e1c02aa12bbc0bdfb11">system_reboot</a></div><div class="ttdeci">static int system_reboot(struct ubus_context *ctx, struct ubus_object *obj, struct ubus_request_data *req, const char *method, struct blob_attr *msg)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00440">system.c:440</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a7d2a3a8b57f72aac47833e7098d65716"><div class="ttname"><a href="#a7d2a3a8b57f72aac47833e7098d65716">watchdog_set</a></div><div class="ttdeci">static int watchdog_set(struct ubus_context *ctx, struct ubus_object *obj, struct ubus_request_data *req, const char *method, struct blob_attr *msg)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00463">system.c:463</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a971a97328aa4e052756235e6690602f7"><div class="ttname"><a href="#a971a97328aa4e052756235e6690602f7">sysupgrade</a></div><div class="ttdeci">static int sysupgrade(struct ubus_context *ctx, struct ubus_object *obj, struct ubus_request_data *req, const char *method, struct blob_attr *msg)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00764">system.c:764</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_aefcddf37def5f4c154117f1294068488"><div class="ttname"><a href="#aefcddf37def5f4c154117f1294068488">proc_signal</a></div><div class="ttdeci">static int proc_signal(struct ubus_context *ctx, struct ubus_object *obj, struct ubus_request_data *req, const char *method, struct blob_attr *msg)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00529">system.c:529</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00842">842</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  842</span>                                                   {</div>
<div class="line"><span class="lineno">  843</span>    <a class="code hl_define" href="../../db/d55/libubus_8h.html#ab3772ca422a2cdb9394098d7629c1473">UBUS_METHOD_NOARG</a>(<span class="stringliteral">&quot;board&quot;</span>, <a class="code hl_function" href="#a1b0c56f2aad9be40439f08c6b9d7407d">system_board</a>),</div>
<div class="line"><span class="lineno">  844</span>    <a class="code hl_define" href="../../db/d55/libubus_8h.html#ab3772ca422a2cdb9394098d7629c1473">UBUS_METHOD_NOARG</a>(<span class="stringliteral">&quot;info&quot;</span>,  <a class="code hl_function" href="#a5e16c193b6021498dee2b3a854b60ffa">system_info</a>),</div>
<div class="line"><span class="lineno">  845</span>    <a class="code hl_define" href="../../db/d55/libubus_8h.html#ab3772ca422a2cdb9394098d7629c1473">UBUS_METHOD_NOARG</a>(<span class="stringliteral">&quot;reboot&quot;</span>, <a class="code hl_function" href="#a7021c7b54efb1e1c02aa12bbc0bdfb11">system_reboot</a>),</div>
<div class="line"><span class="lineno">  846</span>    <a class="code hl_define" href="../../db/d55/libubus_8h.html#aac021711c90050abc4c65261f9799687">UBUS_METHOD</a>(<span class="stringliteral">&quot;watchdog&quot;</span>, <a class="code hl_function" href="#a7d2a3a8b57f72aac47833e7098d65716">watchdog_set</a>, <a class="code hl_variable" href="#aee87538e9d304b68e883653f62dd19cb">watchdog_policy</a>),</div>
<div class="line"><span class="lineno">  847</span>    <a class="code hl_define" href="../../db/d55/libubus_8h.html#aac021711c90050abc4c65261f9799687">UBUS_METHOD</a>(<span class="stringliteral">&quot;signal&quot;</span>, <a class="code hl_function" href="#aefcddf37def5f4c154117f1294068488">proc_signal</a>, <a class="code hl_variable" href="#a962a736c58860d8a979277528ef9096e">signal_policy</a>),</div>
<div class="line"><span class="lineno">  848</span>    <a class="code hl_define" href="../../db/d55/libubus_8h.html#aac021711c90050abc4c65261f9799687">UBUS_METHOD</a>(<span class="stringliteral">&quot;validate_firmware_image&quot;</span>, <a class="code hl_function" href="#a389bc474521bdb3825edcb68f5d77e41">validate_firmware_image</a>, <a class="code hl_variable" href="#a45928dbe4e9a632c1e09fde8dea6b6f2">validate_firmware_image_policy</a>),</div>
<div class="line"><span class="lineno">  849</span>    <a class="code hl_define" href="../../db/d55/libubus_8h.html#aac021711c90050abc4c65261f9799687">UBUS_METHOD</a>(<span class="stringliteral">&quot;sysupgrade&quot;</span>, <a class="code hl_function" href="#a971a97328aa4e052756235e6690602f7">sysupgrade</a>, <a class="code hl_variable" href="#ab8cf62096176a253e423aa32e1550ec2">sysupgrade_policy</a>),</div>
<div class="line"><span class="lineno">  850</span>};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a99446f8964fa2f19ca768dfb3c0e83e6" name="a99446f8964fa2f19ca768dfb3c0e83e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99446f8964fa2f19ca768dfb3c0e83e6">&#9670;&#160;</a></span>system_object</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> system_object</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .name = <span class="stringliteral">&quot;system&quot;</span>,</div>
<div class="line">    .type = &amp;<a class="code hl_variable" href="#a3a971327d354568fef731983b02363fb">system_object_type</a>,</div>
<div class="line">    .<a class="code hl_variable" href="../../d9/d00/ubusd__obj_8h.html#a73400f69761b61903631e803f69dda5d">methods</a> = <a class="code hl_variable" href="#a79932be4b41ac42a225150cefd236647">system_methods</a>,</div>
<div class="line">    .n_methods = <a class="code hl_define" href="../../d8/d6a/test-blobmsg-types_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a>(<a class="code hl_variable" href="#a79932be4b41ac42a225150cefd236647">system_methods</a>),</div>
<div class="line">    .subscribe_cb = <a class="code hl_function" href="#abeeaef1cc35e957de75db7c200176df1">procd_subscribe_cb</a>,</div>
<div class="line">}</div>
<div class="ttc" id="aprocd_2system_8c_html_a3a971327d354568fef731983b02363fb"><div class="ttname"><a href="#a3a971327d354568fef731983b02363fb">system_object_type</a></div><div class="ttdeci">static struct ubus_object_type system_object_type</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00852">system.c:852</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_a79932be4b41ac42a225150cefd236647"><div class="ttname"><a href="#a79932be4b41ac42a225150cefd236647">system_methods</a></div><div class="ttdeci">static const struct ubus_method system_methods[]</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00842">system.c:842</a></div></div>
<div class="ttc" id="aprocd_2system_8c_html_abeeaef1cc35e957de75db7c200176df1"><div class="ttname"><a href="#abeeaef1cc35e957de75db7c200176df1">procd_subscribe_cb</a></div><div class="ttdeci">static void procd_subscribe_cb(struct ubus_context *ctx, struct ubus_object *obj)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d1d/procd_2system_8c_source.html#l00836">system.c:836</a></div></div>
<div class="ttc" id="atest-blobmsg-types_8c_html_a6242a25f9d996f0cc4f4cdb911218b75"><div class="ttname"><a href="../../d8/d6a/test-blobmsg-types_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(x)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d6a/test-blobmsg-types_8c_source.html#l00120">test-blobmsg-types.c:120</a></div></div>
<div class="ttc" id="aubusd__obj_8h_html_a73400f69761b61903631e803f69dda5d"><div class="ttname"><a href="../../d9/d00/ubusd__obj_8h.html#a73400f69761b61903631e803f69dda5d">ubus_object_type::methods</a></div><div class="ttdeci">const struct ubus_method * methods</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00122">libubus.h:122</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00855">855</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  855</span>                                          {</div>
<div class="line"><span class="lineno">  856</span>    .name = <span class="stringliteral">&quot;system&quot;</span>,</div>
<div class="line"><span class="lineno">  857</span>    .type = &amp;<a class="code hl_variable" href="#a3a971327d354568fef731983b02363fb">system_object_type</a>,</div>
<div class="line"><span class="lineno">  858</span>    .<a class="code hl_variable" href="../../d9/d00/ubusd__obj_8h.html#a73400f69761b61903631e803f69dda5d">methods</a> = <a class="code hl_variable" href="#a79932be4b41ac42a225150cefd236647">system_methods</a>,</div>
<div class="line"><span class="lineno">  859</span>    .n_methods = <a class="code hl_define" href="../../d8/d6a/test-blobmsg-types_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a>(<a class="code hl_variable" href="#a79932be4b41ac42a225150cefd236647">system_methods</a>),</div>
<div class="line"><span class="lineno">  860</span>    .subscribe_cb = <a class="code hl_function" href="#abeeaef1cc35e957de75db7c200176df1">procd_subscribe_cb</a>,</div>
<div class="line"><span class="lineno">  861</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00864">procd_bcast_event()</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00876">ubus_init_system()</a>.</p>

</div>
</div>
<a id="a3a971327d354568fef731983b02363fb" name="a3a971327d354568fef731983b02363fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a971327d354568fef731983b02363fb">&#9670;&#160;</a></span>system_object_type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d4/d66/structubus__object__type">ubus_object_type</a> system_object_type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">    <a class="code hl_define" href="../../db/d55/libubus_8h.html#a2537aa13909031a58e3d881d6670d68d">UBUS_OBJECT_TYPE</a>(<span class="stringliteral">&quot;system&quot;</span>, <a class="code hl_variable" href="#a79932be4b41ac42a225150cefd236647">system_methods</a>)</div>
<div class="ttc" id="alibubus_8h_html_a2537aa13909031a58e3d881d6670d68d"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a2537aa13909031a58e3d881d6670d68d">UBUS_OBJECT_TYPE</a></div><div class="ttdeci">#define UBUS_OBJECT_TYPE(_name, _methods)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00068">libubus.h:68</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00852">852</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>

</div>
</div>
<a id="ab8cf62096176a253e423aa32e1550ec2" name="ab8cf62096176a253e423aa32e1550ec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8cf62096176a253e423aa32e1550ec2">&#9670;&#160;</a></span>sysupgrade_policy</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/dad/blobmsg_8h.html#d3/d4d/structblobmsg__policy">blobmsg_policy</a> sysupgrade_policy[<a class="el" href="#aa57e16cd48de3b9a989056ff8df26f84ad472358e502d3158f0115e36923dabf4">__SYSUPGRADE_MAX</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    [<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84aecf07f19495a7d89ae380803cae97557">SYSUPGRADE_PATH</a>] = { .name = <span class="stringliteral">&quot;path&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84aee73114f6762d420874b85f2275283e0">SYSUPGRADE_FORCE</a>] = { .name = <span class="stringliteral">&quot;force&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a65f050be4633329d0af340d88e209df6">BLOBMSG_TYPE_BOOL</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84a0e4256eca723c8d05cb9ce33a09991c4">SYSUPGRADE_BACKUP</a>] = { .name = <span class="stringliteral">&quot;backup&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84ad4a0316f464ea73c347dab5c826866d5">SYSUPGRADE_PREFIX</a>] = { .name = <span class="stringliteral">&quot;prefix&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84add0332b3083ec16ddf04e8729cc75fde">SYSUPGRADE_COMMAND</a>] = { .name = <span class="stringliteral">&quot;command&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84ab99b1085b4d7dcbf8a6c6489a59c625d">SYSUPGRADE_OPTIONS</a>] = { .name = <span class="stringliteral">&quot;options&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a32115da5d02a4fba2b0ddad9f3ff82a7">BLOBMSG_TYPE_TABLE</a> },</div>
<div class="line">}</div>
<div class="ttc" id="ablobmsg_8h_html_a9e3efca3093410d90ef04154aefde2c9a32115da5d02a4fba2b0ddad9f3ff82a7"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a32115da5d02a4fba2b0ddad9f3ff82a7">BLOBMSG_TYPE_TABLE</a></div><div class="ttdeci">@ BLOBMSG_TYPE_TABLE</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00028">blobmsg.h:28</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a></div><div class="ttdeci">@ BLOBMSG_TYPE_STRING</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00029">blobmsg.h:29</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00740">740</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  740</span>                                                                         {</div>
<div class="line"><span class="lineno">  741</span>    [<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84aecf07f19495a7d89ae380803cae97557">SYSUPGRADE_PATH</a>] = { .name = <span class="stringliteral">&quot;path&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> },</div>
<div class="line"><span class="lineno">  742</span>    [<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84aee73114f6762d420874b85f2275283e0">SYSUPGRADE_FORCE</a>] = { .name = <span class="stringliteral">&quot;force&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a65f050be4633329d0af340d88e209df6">BLOBMSG_TYPE_BOOL</a> },</div>
<div class="line"><span class="lineno">  743</span>    [<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84a0e4256eca723c8d05cb9ce33a09991c4">SYSUPGRADE_BACKUP</a>] = { .name = <span class="stringliteral">&quot;backup&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> },</div>
<div class="line"><span class="lineno">  744</span>    [<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84ad4a0316f464ea73c347dab5c826866d5">SYSUPGRADE_PREFIX</a>] = { .name = <span class="stringliteral">&quot;prefix&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> },</div>
<div class="line"><span class="lineno">  745</span>    [<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84add0332b3083ec16ddf04e8729cc75fde">SYSUPGRADE_COMMAND</a>] = { .name = <span class="stringliteral">&quot;command&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> },</div>
<div class="line"><span class="lineno">  746</span>    [<a class="code hl_enumvalue" href="#aa57e16cd48de3b9a989056ff8df26f84ab99b1085b4d7dcbf8a6c6489a59c625d">SYSUPGRADE_OPTIONS</a>] = { .name = <span class="stringliteral">&quot;options&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a32115da5d02a4fba2b0ddad9f3ff82a7">BLOBMSG_TYPE_TABLE</a> },</div>
<div class="line"><span class="lineno">  747</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00764">sysupgrade()</a>.</p>

</div>
</div>
<a id="a45928dbe4e9a632c1e09fde8dea6b6f2" name="a45928dbe4e9a632c1e09fde8dea6b6f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45928dbe4e9a632c1e09fde8dea6b6f2">&#9670;&#160;</a></span>validate_firmware_image_policy</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/dad/blobmsg_8h.html#d3/d4d/structblobmsg__policy">blobmsg_policy</a> validate_firmware_image_policy[<a class="el" href="#a3babbf89cae9b856a12864a41506efbda85c02d6607283362170aa5374d01c903">__VALIDATE_FIRMWARE_IMAGE_MAX</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    [<a class="code hl_enumvalue" href="#a3babbf89cae9b856a12864a41506efbda2b93c76e6b03e8bec28afefe65f06c82">VALIDATE_FIRMWARE_IMAGE_PATH</a>] = { .name = <span class="stringliteral">&quot;path&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> },</div>
<div class="line">}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00701">701</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  701</span>                                                                                                   {</div>
<div class="line"><span class="lineno">  702</span>    [<a class="code hl_enumvalue" href="#a3babbf89cae9b856a12864a41506efbda2b93c76e6b03e8bec28afefe65f06c82">VALIDATE_FIRMWARE_IMAGE_PATH</a>] = { .name = <span class="stringliteral">&quot;path&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> },</div>
<div class="line"><span class="lineno">  703</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00705">validate_firmware_image()</a>.</p>

</div>
</div>
<a id="aee87538e9d304b68e883653f62dd19cb" name="aee87538e9d304b68e883653f62dd19cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee87538e9d304b68e883653f62dd19cb">&#9670;&#160;</a></span>watchdog_policy</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/dad/blobmsg_8h.html#d3/d4d/structblobmsg__policy">blobmsg_policy</a> watchdog_policy[<a class="el" href="#a4b4213b1f9d54da7c7e36bde32fc7c80a888c2b2f926dd541677758f38a333bc7">__WDT_MAX</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    [<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80a5d7a644c9a0129e165f67cfaa2985fb3">WDT_FREQUENCY</a>] = { .name = <span class="stringliteral">&quot;frequency&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9acf0b8181117c037f7db537ed6270fafd">BLOBMSG_TYPE_INT32</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80ad1bf507acb7ed3315e1c8e5aab875b30">WDT_TIMEOUT</a>] = { .name = <span class="stringliteral">&quot;timeout&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9acf0b8181117c037f7db537ed6270fafd">BLOBMSG_TYPE_INT32</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80aeabaceb3971c2f35bcea085b09b0820d">WDT_MAGICCLOSE</a>] = { .name = <span class="stringliteral">&quot;magicclose&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a65f050be4633329d0af340d88e209df6">BLOBMSG_TYPE_BOOL</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80acf74482596b6b7bff085a4398c28feeb">WDT_STOP</a>] = { .name = <span class="stringliteral">&quot;stop&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a65f050be4633329d0af340d88e209df6">BLOBMSG_TYPE_BOOL</a> },</div>
<div class="line">}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00456">456</a> of file <a class="el" href="../../d8/d1d/procd_2system_8c_source.html">system.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  456</span>                                                                {</div>
<div class="line"><span class="lineno">  457</span>    [<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80a5d7a644c9a0129e165f67cfaa2985fb3">WDT_FREQUENCY</a>] = { .name = <span class="stringliteral">&quot;frequency&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9acf0b8181117c037f7db537ed6270fafd">BLOBMSG_TYPE_INT32</a> },</div>
<div class="line"><span class="lineno">  458</span>    [<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80ad1bf507acb7ed3315e1c8e5aab875b30">WDT_TIMEOUT</a>] = { .name = <span class="stringliteral">&quot;timeout&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9acf0b8181117c037f7db537ed6270fafd">BLOBMSG_TYPE_INT32</a> },</div>
<div class="line"><span class="lineno">  459</span>    [<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80aeabaceb3971c2f35bcea085b09b0820d">WDT_MAGICCLOSE</a>] = { .name = <span class="stringliteral">&quot;magicclose&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a65f050be4633329d0af340d88e209df6">BLOBMSG_TYPE_BOOL</a> },</div>
<div class="line"><span class="lineno">  460</span>    [<a class="code hl_enumvalue" href="#a4b4213b1f9d54da7c7e36bde32fc7c80acf74482596b6b7bff085a4398c28feeb">WDT_STOP</a>] = { .name = <span class="stringliteral">&quot;stop&quot;</span>, .type = <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a65f050be4633329d0af340d88e209df6">BLOBMSG_TYPE_BOOL</a> },</div>
<div class="line"><span class="lineno">  461</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
