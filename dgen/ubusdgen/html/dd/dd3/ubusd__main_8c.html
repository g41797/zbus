<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>zbus: /home/g41797/CLionProjects/github.com/g41797/zbus/src/libs/ubus/ubusd_main.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">zbus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_87a455bccb09a92130c26a11a880c98a.html">libs</a></li><li class="navelem"><a class="el" href="../../dir_1e974a0feb376015fdf1a5b531ce0d1a.html">ubus</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">ubusd_main.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;syslog.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d1/dd5/usock_8h_source.html">libubox/usock.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d2/dbe/ubusd_8h_source.html">ubusd.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="../../df/df3/ulog_8h_source.html">libubox/ulog.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ubusd_main.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d89/ubusd__main_8c__incl.png" border="0" usemap="#a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2ubus_2ubusd__main_8c" alt=""/></div>
<map name="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2ubus_2ubusd__main_8c" id="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2ubus_2ubusd__main_8c">
<area shape="rect" title=" " alt="" coords="1049,5,1335,85"/>
<area shape="rect" title=" " alt="" coords="5,133,141,167"/>
<area shape="poly" title=" " alt="" coords="1048,57,648,85,404,108,160,136,156,136,155,131,159,130,403,102,647,80,1048,52"/>
<area shape="rect" title=" " alt="" coords="235,460,346,493"/>
<area shape="poly" title=" " alt="" coords="1048,60,795,85,509,123,380,146,276,172,236,186,206,201,187,216,181,231,181,314,184,365,192,386,206,410,225,432,248,449,244,453,221,436,202,413,187,388,179,367,176,315,176,230,183,213,203,196,234,181,274,167,379,141,508,118,794,80,1048,55"/>
<area shape="rect" title=" " alt="" coords="1284,460,1411,493"/>
<area shape="poly" title=" " alt="" coords="1255,84,1289,112,1319,146,1342,185,1348,207,1350,230,1350,315,1350,444,1345,444,1345,315,1345,230,1343,208,1337,188,1315,149,1285,115,1252,88"/>
<area shape="rect" title=" " alt="" coords="216,378,309,412"/>
<area shape="poly" title=" " alt="" coords="1048,63,930,81,794,111,724,132,654,156,587,184,522,217,487,244,465,272,443,302,408,332,367,356,325,375,323,370,364,351,405,328,439,298,460,269,483,240,520,212,584,179,653,151,723,126,793,106,929,76,1047,57"/>
<area shape="rect" title=" " alt="" coords="1528,215,1626,248"/>
<area shape="poly" title=" " alt="" coords="1336,63,1402,75,1465,91,1518,109,1553,131,1565,146,1573,164,1580,199,1574,200,1568,165,1560,149,1550,135,1516,114,1463,96,1401,81,1335,68"/>
<area shape="rect" href="../../d1/dd5/usock_8h.html" title=" " alt="" coords="1615,133,1782,167"/>
<area shape="poly" title=" " alt="" coords="1336,73,1604,127,1603,132,1335,78"/>
<area shape="rect" href="../../d2/dbe/ubusd_8h.html" title=" " alt="" coords="987,133,1084,167"/>
<area shape="poly" title=" " alt="" coords="1133,88,1074,126,1071,122,1130,83"/>
<area shape="rect" href="../../df/df3/ulog_8h.html" title=" " alt="" coords="1386,133,1539,167"/>
<area shape="poly" title=" " alt="" coords="1296,83,1406,125,1405,130,1295,88"/>
<area shape="rect" href="../../da/d23/list_8h.html" title=" " alt="" coords="1487,460,1627,493"/>
<area shape="poly" title=" " alt="" coords="1085,156,1195,178,1323,212,1419,246,1508,294,1569,326,1592,345,1613,377,1617,397,1612,416,1602,435,1589,451,1585,447,1597,432,1607,414,1612,397,1608,379,1588,349,1566,331,1505,299,1416,251,1322,217,1194,183,1084,162"/>
<area shape="rect" href="../../dc/d56/uloop_8h.html" title=" " alt="" coords="1146,378,1310,412"/>
<area shape="poly" title=" " alt="" coords="1006,169,980,189,959,216,953,234,952,250,955,264,961,278,984,303,1016,328,1043,344,1071,358,1131,376,1130,381,1070,363,1040,349,1013,332,980,307,957,281,950,266,946,250,948,233,955,213,976,185,1003,165"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html" title=" " alt="" coords="700,215,894,248"/>
<area shape="poly" title=" " alt="" coords="988,170,861,212,859,207,987,165"/>
<area shape="rect" href="../../dc/d3c/ubus__common_8h.html" title=" " alt="" coords="221,296,395,330"/>
<area shape="poly" title=" " alt="" coords="987,155,898,159,782,170,651,188,522,217,474,233,428,252,350,291,348,286,426,247,473,228,520,212,650,183,781,164,898,154,986,150"/>
<area shape="rect" href="../../d6/d41/ubusd__id_8h.html" title=" " alt="" coords="1026,296,1149,330"/>
<area shape="poly" title=" " alt="" coords="1069,165,1095,185,1117,213,1122,231,1121,250,1109,284,1104,282,1115,249,1116,232,1112,216,1092,189,1065,169"/>
<area shape="rect" href="../../d9/d00/ubusd__obj_8h.html" title=" " alt="" coords="969,215,1103,248"/>
<area shape="poly" title=" " alt="" coords="1038,167,1038,199,1033,199,1033,167"/>
<area shape="rect" href="../../d5/d79/ubusmsg_8h.html" title=" " alt="" coords="533,215,658,248"/>
<area shape="poly" title=" " alt="" coords="987,163,674,219,673,214,986,157"/>
<area shape="rect" href="../../df/d2e/ubusd__acl_8h.html" title=" " alt="" coords="1178,215,1310,248"/>
<area shape="poly" title=" " alt="" coords="1079,165,1188,206,1186,211,1077,170"/>
<area shape="rect" title=" " alt="" coords="1562,541,1659,575"/>
<area shape="poly" title=" " alt="" coords="1570,492,1593,527,1589,530,1566,495"/>
<area shape="rect" title=" " alt="" coords="921,541,1028,575"/>
<area shape="poly" title=" " alt="" coords="1487,493,1468,496,1235,528,1044,552,1043,546,1235,523,1467,491,1486,488"/>
<area shape="poly" title=" " alt="" coords="1253,410,1312,449,1309,453,1250,414"/>
<area shape="poly" title=" " alt="" coords="1295,410,1476,453,1475,458,1294,415"/>
<area shape="poly" title=" " alt="" coords="1211,414,1165,453,1105,496,1027,537,1025,532,1102,491,1161,449,1208,410"/>
<area shape="rect" title=" " alt="" coords="857,460,974,493"/>
<area shape="poly" title=" " alt="" coords="1165,415,990,459,989,454,1163,410"/>
<area shape="rect" title=" " alt="" coords="999,460,1091,493"/>
<area shape="poly" title=" " alt="" coords="1192,415,1097,456,1095,451,1190,410"/>
<area shape="rect" title=" " alt="" coords="1166,460,1260,493"/>
<area shape="poly" title=" " alt="" coords="1227,413,1221,445,1216,444,1222,412"/>
<area shape="rect" title=" " alt="" coords="972,378,1070,412"/>
<area shape="poly" title=" " alt="" coords="816,247,860,285,915,328,979,368,976,372,911,332,856,289,813,251"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html" title=" " alt="" coords="556,296,635,330"/>
<area shape="poly" title=" " alt="" coords="757,251,651,293,649,288,755,246"/>
<area shape="poly" title=" " alt="" coords="556,327,328,381,325,381,324,376,327,375,555,321"/>
<area shape="poly" title=" " alt="" coords="556,325,470,345,421,361,373,380,347,396,322,414,280,433,240,450,225,459,217,468,216,478,224,491,237,500,258,508,324,521,412,532,514,540,730,550,905,554,905,559,730,555,514,545,411,537,323,526,257,513,234,505,220,495,211,480,212,466,222,454,237,445,278,428,320,409,344,392,370,376,419,356,469,340,555,319"/>
<area shape="poly" title=" " alt="" coords="636,318,739,340,799,356,859,376,940,412,1008,449,1005,454,937,416,857,380,798,361,737,345,635,324"/>
<area shape="rect" title=" " alt="" coords="756,378,846,412"/>
<area shape="poly" title=" " alt="" coords="637,327,746,369,744,374,635,332"/>
<area shape="rect" title=" " alt="" coords="536,378,621,412"/>
<area shape="poly" title=" " alt="" coords="595,331,588,363,583,362,590,330"/>
<area shape="rect" title=" " alt="" coords="644,378,731,412"/>
<area shape="poly" title=" " alt="" coords="616,328,659,366,656,370,613,333"/>
<area shape="rect" href="../../d5/d1d/libubox_2utils_8h.html" title=" " alt="" coords="383,378,462,412"/>
<area shape="poly" title=" " alt="" coords="562,333,472,374,470,369,559,328"/>
<area shape="poly" title=" " alt="" coords="397,414,331,454,328,449,394,410"/>
<area shape="poly" title=" " alt="" coords="462,400,524,409,732,425,895,430,1059,436,1269,457,1268,462,1059,442,895,435,731,431,523,414,461,406"/>
<area shape="poly" title=" " alt="" coords="462,405,480,409,569,422,640,425,709,432,749,442,795,457,822,473,846,491,926,532,924,537,844,496,819,477,793,462,748,447,709,437,639,430,568,427,479,414,461,410"/>
<area shape="poly" title=" " alt="" coords="462,405,480,409,580,426,659,435,738,443,839,457,842,458,841,463,838,462,737,448,658,440,580,431,479,414,461,410"/>
<area shape="poly" title=" " alt="" coords="462,405,480,409,619,428,730,433,842,439,984,457,983,462,841,444,730,439,619,433,479,414,461,410"/>
<area shape="rect" title=" " alt="" coords="370,460,467,493"/>
<area shape="poly" title=" " alt="" coords="424,412,423,444,417,444,419,412"/>
<area shape="rect" title=" " alt="" coords="492,460,572,493"/>
<area shape="poly" title=" " alt="" coords="446,410,499,448,496,452,443,414"/>
<area shape="rect" title=" " alt="" coords="595,460,783,493"/>
<area shape="poly" title=" " alt="" coords="462,405,621,452,620,457,461,410"/>
<area shape="poly" title=" " alt="" coords="263,333,231,352,217,364,206,379,199,402,196,435,199,468,210,492,223,500,245,508,312,521,402,532,507,540,728,550,905,554,905,559,727,555,507,545,402,537,311,526,243,513,220,505,206,495,193,469,190,435,194,401,201,377,213,361,227,348,260,328"/>
<area shape="poly" title=" " alt="" coords="1027,332,990,351,975,364,962,379,957,398,965,417,981,434,1002,449,999,454,978,438,961,419,952,399,957,377,971,360,987,346,1024,327"/>
<area shape="rect" href="../../d3/d51/avl_8h.html" title=" " alt="" coords="1436,378,1577,412"/>
<area shape="poly" title=" " alt="" coords="1150,324,1421,375,1420,380,1149,329"/>
<area shape="poly" title=" " alt="" coords="1519,411,1541,445,1536,448,1514,414"/>
<area shape="poly" title=" " alt="" coords="1576,410,1613,429,1629,442,1642,458,1648,476,1647,495,1633,529,1628,527,1642,494,1643,477,1637,461,1625,446,1610,433,1574,415"/>
<area shape="poly" title=" " alt="" coords="1500,414,1471,456,1450,478,1425,496,1394,508,1353,519,1251,536,1140,548,1044,556,1043,550,1140,543,1250,531,1352,514,1393,503,1422,491,1446,474,1467,452,1496,411"/>
<area shape="poly" title=" " alt="" coords="1048,247,1071,282,1067,285,1044,250"/>
<area shape="poly" title=" " alt="" coords="581,250,553,283,525,326,516,348,512,370,514,391,526,410,540,422,558,432,607,446,666,453,733,455,869,454,931,454,984,457,983,463,931,459,869,459,733,460,666,458,606,451,556,437,537,426,522,413,509,393,506,370,511,347,520,323,549,280,577,247"/>
<area shape="poly" title=" " alt="" coords="598,249,598,281,593,281,593,249"/>
<area shape="poly" title=" " alt="" coords="1487,165,1543,203,1540,208,1484,169"/>
<area shape="rect" href="../../de/dd2/udebug_8h.html" title=" " alt="" coords="1385,296,1495,330"/>
<area shape="poly" title=" " alt="" coords="1463,168,1447,281,1441,281,1457,167"/>
<area shape="poly" title=" " alt="" coords="1433,332,1367,447,1362,445,1428,329"/>
<area shape="poly" title=" " alt="" coords="1496,320,1548,339,1572,355,1591,377,1598,394,1596,413,1581,448,1576,446,1591,412,1592,395,1587,379,1569,359,1546,344,1494,325"/>
<area shape="poly" title=" " alt="" coords="1398,333,1286,375,1284,370,1396,328"/>
<area shape="poly" title=" " alt="" coords="1384,318,1329,323,1265,334,1198,352,1134,380,1114,395,1095,412,1065,448,1061,445,1091,408,1110,391,1132,376,1196,347,1264,329,1328,318,1384,313"/>
<area shape="poly" title=" " alt="" coords="1385,326,1090,381,1086,381,1085,376,1088,375,1384,321"/>
<area shape="poly" title=" " alt="" coords="1455,329,1485,364,1481,368,1451,332"/>
</map>
</div>
</div>
<p><a href="../../dd/dd3/ubusd__main_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aad8d8dc892f0e4cb324b52fef8651c26" id="r_aad8d8dc892f0e4cb324b52fef8651c26"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad8d8dc892f0e4cb324b52fef8651c26">handle_client_disconnect</a> (struct <a class="el" href="../../d2/dbe/ubusd_8h.html#df/d3f/structubus__client">ubus_client</a> *cl)</td></tr>
<tr class="separator:aad8d8dc892f0e4cb324b52fef8651c26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a159bb0ae05f7dc767b4f708564c74cc9" id="r_a159bb0ae05f7dc767b4f708564c74cc9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a159bb0ae05f7dc767b4f708564c74cc9">ubus_client_cmd_free</a> (struct <a class="el" href="../../d2/dbe/ubusd_8h.html#dc/de0/structubus__client__cmd">ubus_client_cmd</a> *<a class="el" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>)</td></tr>
<tr class="separator:a159bb0ae05f7dc767b4f708564c74cc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ec3ebd839e77b52ac1a6ff54b7c647" id="r_a05ec3ebd839e77b52ac1a6ff54b7c647"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a05ec3ebd839e77b52ac1a6ff54b7c647">ubus_client_cmd_queue_process</a> (struct <a class="el" href="../../d2/dbe/ubusd_8h.html#df/d3f/structubus__client">ubus_client</a> *cl)</td></tr>
<tr class="separator:a05ec3ebd839e77b52ac1a6ff54b7c647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68e5902ffa76dfe0ac5324af9c7d22cb" id="r_a68e5902ffa76dfe0ac5324af9c7d22cb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a68e5902ffa76dfe0ac5324af9c7d22cb">client_cb</a> (struct <a class="el" href="../../dc/d56/uloop_8h.html#db/d9e/structuloop__fd">uloop_fd</a> *sock, unsigned int <a class="el" href="../../d3/d91/uloop-epoll_8c.html#a0e992398f478de38db56a1146ea84e93">events</a>)</td></tr>
<tr class="separator:a68e5902ffa76dfe0ac5324af9c7d22cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3c285a813814059551f5f446105b5af" id="r_ac3c285a813814059551f5f446105b5af"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac3c285a813814059551f5f446105b5af">get_next_connection</a> (int fd)</td></tr>
<tr class="separator:ac3c285a813814059551f5f446105b5af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a267b473df8c4d0aa4be8a445dc0ade60" id="r_a267b473df8c4d0aa4be8a445dc0ade60"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a267b473df8c4d0aa4be8a445dc0ade60">server_cb</a> (struct <a class="el" href="../../dc/d56/uloop_8h.html#db/d9e/structuloop__fd">uloop_fd</a> *fd, unsigned int <a class="el" href="../../d3/d91/uloop-epoll_8c.html#a0e992398f478de38db56a1146ea84e93">events</a>)</td></tr>
<tr class="separator:a267b473df8c4d0aa4be8a445dc0ade60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a412ef69ce50879d3397862be3c891c56" id="r_a412ef69ce50879d3397862be3c891c56"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a412ef69ce50879d3397862be3c891c56">usage</a> (const char *progname)</td></tr>
<tr class="separator:a412ef69ce50879d3397862be3c891c56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4fc211275d5cc53c3a39146db938b40" id="r_ad4fc211275d5cc53c3a39146db938b40"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4fc211275d5cc53c3a39146db938b40">sighup_handler</a> (int sig)</td></tr>
<tr class="separator:ad4fc211275d5cc53c3a39146db938b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a338d80cf8692d97a0a6d5f188d000113" id="r_a338d80cf8692d97a0a6d5f188d000113"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a338d80cf8692d97a0a6d5f188d000113">mkdir_sockdir</a> ()</td></tr>
<tr class="separator:a338d80cf8692d97a0a6d5f188d000113"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627" id="r_a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abd686ae00120ec939bbcd9aaadf8634a" id="r_abd686ae00120ec939bbcd9aaadf8634a"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d56/uloop_8h.html#db/d9e/structuloop__fd">uloop_fd</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abd686ae00120ec939bbcd9aaadf8634a">server_fd</a></td></tr>
<tr class="separator:abd686ae00120ec939bbcd9aaadf8634a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a68e5902ffa76dfe0ac5324af9c7d22cb" name="a68e5902ffa76dfe0ac5324af9c7d22cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68e5902ffa76dfe0ac5324af9c7d22cb">&#9670;&#160;</a></span>client_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void client_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d56/uloop_8h.html#db/d9e/structuloop__fd">uloop_fd</a> *</td>          <td class="paramname"><span class="paramname"><em>sock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>events</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00057">57</a> of file <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html">ubusd_main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>{</div>
<div class="line"><span class="lineno">   59</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d2/dbe/ubusd_8h.html#df/d3f/structubus__client">ubus_client</a> *cl = <a class="code hl_define" href="../../da/d23/list_8h.html#af8c317a42292b61c93aae91e59118a46">container_of</a>(<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#af9b7da62766d014bf03edda730edf6d6">sock</a>, <span class="keyword">struct</span> <a class="code hl_struct" href="../../d2/dbe/ubusd_8h.html#df/d3f/structubus__client">ubus_client</a>, <a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#af9b7da62766d014bf03edda730edf6d6">sock</a>);</div>
<div class="line"><span class="lineno">   60</span>    uint8_t fd_buf[CMSG_SPACE(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>))] = { 0 };</div>
<div class="line"><span class="lineno">   61</span>    <span class="keyword">struct </span>msghdr msghdr = { 0 };</div>
<div class="line"><span class="lineno">   62</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a> *ub;</div>
<div class="line"><span class="lineno">   63</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d2/dbe/ubusd_8h.html#dc/dac/structubus__msg__buf__list">ubus_msg_buf_list</a> *ubl, *ubl2;</div>
<div class="line"><span class="lineno">   64</span>    <span class="keyword">static</span> <span class="keyword">struct </span>iovec iov;</div>
<div class="line"><span class="lineno">   65</span>    <span class="keyword">struct </span>cmsghdr *cmsg;</div>
<div class="line"><span class="lineno">   66</span>    <span class="keywordtype">int</span> *pfd;</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>    msghdr.msg_iov = &amp;iov,</div>
<div class="line"><span class="lineno">   69</span>    msghdr.msg_iovlen = 1,</div>
<div class="line"><span class="lineno">   70</span>    msghdr.msg_control = fd_buf;</div>
<div class="line"><span class="lineno">   71</span>    msghdr.msg_controllen = <span class="keyword">sizeof</span>(fd_buf);</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>    cmsg = CMSG_FIRSTHDR(&amp;msghdr);</div>
<div class="line"><span class="lineno">   74</span>    cmsg-&gt;cmsg_type = SCM_RIGHTS;</div>
<div class="line"><span class="lineno">   75</span>    cmsg-&gt;cmsg_level = SOL_SOCKET;</div>
<div class="line"><span class="lineno">   76</span>    cmsg-&gt;cmsg_len = CMSG_LEN(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>    pfd = (<span class="keywordtype">int</span> *) CMSG_DATA(cmsg);</div>
<div class="line"><span class="lineno">   79</span>    msghdr.msg_controllen = cmsg-&gt;cmsg_len;</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>    <span class="comment">/* first try to tx more pending data */</span></div>
<div class="line"><span class="lineno">   82</span>    <a class="code hl_define" href="../../da/d23/list_8h.html#a698670b36c7c0ca13822698ee825ddc8">list_for_each_entry_safe</a>(ubl, ubl2, &amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a979525a026010d1138a38b1a78b5b492">tx_queue</a>, list) {</div>
<div class="line"><span class="lineno">   83</span>        ssize_t written;</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>        ub = ubl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a8308a8af5d50b18f555604c9e81a2099">msg</a>;</div>
<div class="line"><span class="lineno">   86</span>        written = <a class="code hl_function" href="../../d9/de0/ubusd_8c.html#ae582a1a0e18dbe57e756c692f97d2a7d">ubus_msg_writev</a>(sock-&gt;<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>, ub, cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a673a8525fda653dc75b6f277292ec461">txq_ofs</a>);</div>
<div class="line"><span class="lineno">   87</span>        <span class="keywordflow">if</span> (written &lt; 0) {</div>
<div class="line"><span class="lineno">   88</span>            <span class="keywordflow">switch</span>(errno) {</div>
<div class="line"><span class="lineno">   89</span>            <span class="keywordflow">case</span> EINTR:</div>
<div class="line"><span class="lineno">   90</span>            <span class="keywordflow">case</span> EAGAIN:</div>
<div class="line"><span class="lineno">   91</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   92</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">   93</span>                <span class="keywordflow">goto</span> disconnect;</div>
<div class="line"><span class="lineno">   94</span>            }</div>
<div class="line"><span class="lineno">   95</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   96</span>        }</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>        cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a673a8525fda653dc75b6f277292ec461">txq_ofs</a> += written;</div>
<div class="line"><span class="lineno">   99</span>        cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a04b9afcb4e61998c373cb10187068dce">txq_len</a> -= written;</div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">if</span> (cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a673a8525fda653dc75b6f277292ec461">txq_ofs</a> &lt; ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">len</a> + <span class="keyword">sizeof</span>(ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>))</div>
<div class="line"><span class="lineno">  101</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span>        cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a673a8525fda653dc75b6f277292ec461">txq_ofs</a> = 0;</div>
<div class="line"><span class="lineno">  104</span>        <a class="code hl_function" href="../../d9/de0/ubusd_8c.html#a7685d99564c18e282d91b3bdb61c32ac">ubus_msg_list_free</a>(ubl);</div>
<div class="line"><span class="lineno">  105</span>    }</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d">list_empty</a>(&amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a979525a026010d1138a38b1a78b5b492">tx_queue</a>) &amp;&amp; (<a class="code hl_variable" href="../../d3/d91/uloop-epoll_8c.html#a0e992398f478de38db56a1146ea84e93">events</a> &amp; <a class="code hl_define" href="../../dc/d56/uloop_8h.html#a9b481ffad35824d85a7109d06e7ada3f">ULOOP_WRITE</a>)) {</div>
<div class="line"><span class="lineno">  108</span>        <span class="comment">/* Process queued commands */</span></div>
<div class="line"><span class="lineno">  109</span>        <a class="code hl_function" href="#a05ec3ebd839e77b52ac1a6ff54b7c647">ubus_client_cmd_queue_process</a>(cl);</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>        <span class="comment">/* prevent further ULOOP_WRITE events if we don&#39;t have data</span></div>
<div class="line"><span class="lineno">  112</span><span class="comment">         * to send anymore */</span></div>
<div class="line"><span class="lineno">  113</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d">list_empty</a>(&amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a979525a026010d1138a38b1a78b5b492">tx_queue</a>))</div>
<div class="line"><span class="lineno">  114</span>            <a class="code hl_function" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0">uloop_fd_add</a>(sock, <a class="code hl_define" href="../../dc/d56/uloop_8h.html#ac20cd5fed660ef784791db47283d9ebf">ULOOP_READ</a> | <a class="code hl_define" href="../../dc/d56/uloop_8h.html#ae0a4bba54063aede5669dbd4782ad6f5">ULOOP_EDGE_TRIGGER</a>);</div>
<div class="line"><span class="lineno">  115</span>    }</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>retry:</div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordflow">if</span> (!sock-&gt;<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a0a2e642791b9398c2a113e8e95897a40">eof</a> &amp;&amp; cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#acbfb65d7868af52c07f06a25e8e36bb3">pending_msg_offset</a> &lt; (<span class="keywordtype">int</span>) <span class="keyword">sizeof</span>(cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>)) {</div>
<div class="line"><span class="lineno">  119</span>        <span class="keywordtype">int</span> offset = cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#acbfb65d7868af52c07f06a25e8e36bb3">pending_msg_offset</a>;</div>
<div class="line"><span class="lineno">  120</span>        <span class="keywordtype">int</span> bytes;</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>        *pfd = -1;</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>        iov.iov_base = ((<span class="keywordtype">char</span> *) &amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>) + offset;</div>
<div class="line"><span class="lineno">  125</span>        iov.iov_len = <span class="keyword">sizeof</span>(cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>) - offset;</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>        <span class="keywordflow">if</span> (cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a6d416dedeb2b108a50fd31b24614a529">pending_msg_fd</a> &lt; 0) {</div>
<div class="line"><span class="lineno">  128</span>            msghdr.msg_control = fd_buf;</div>
<div class="line"><span class="lineno">  129</span>            msghdr.msg_controllen = cmsg-&gt;cmsg_len;</div>
<div class="line"><span class="lineno">  130</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  131</span>            msghdr.msg_control = NULL;</div>
<div class="line"><span class="lineno">  132</span>            msghdr.msg_controllen = 0;</div>
<div class="line"><span class="lineno">  133</span>        }</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>        bytes = recvmsg(sock-&gt;<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>, &amp;msghdr, 0);</div>
<div class="line"><span class="lineno">  136</span>        <span class="keywordflow">if</span> (bytes &lt; 0)</div>
<div class="line"><span class="lineno">  137</span>            <span class="keywordflow">goto</span> out;</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>        <span class="keywordflow">if</span> (*pfd &gt;= 0)</div>
<div class="line"><span class="lineno">  140</span>            cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a6d416dedeb2b108a50fd31b24614a529">pending_msg_fd</a> = *pfd;</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>        cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#acbfb65d7868af52c07f06a25e8e36bb3">pending_msg_offset</a> += bytes;</div>
<div class="line"><span class="lineno">  143</span>        <span class="keywordflow">if</span> (cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#acbfb65d7868af52c07f06a25e8e36bb3">pending_msg_offset</a> &lt; (<span class="keywordtype">int</span>) <span class="keyword">sizeof</span>(cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>))</div>
<div class="line"><span class="lineno">  144</span>            <span class="keywordflow">goto</span> out;</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01">blob_raw_len</a>(&amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>.data) &lt; <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a>))</div>
<div class="line"><span class="lineno">  147</span>            <span class="keywordflow">goto</span> disconnect;</div>
<div class="line"><span class="lineno">  148</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b">blob_pad_len</a>(&amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>.data) &gt; UBUS_MAX_MSGLEN)</div>
<div class="line"><span class="lineno">  149</span>            <span class="keywordflow">goto</span> disconnect;</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>        cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a6e1b26b0d4fe6536fa298cf4a94f8fdc">pending_msg</a> = <a class="code hl_function" href="../../d9/de0/ubusd_8c.html#ae88c2071350154e2eed8a6844e60a9da">ubus_msg_new</a>(NULL, <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01">blob_raw_len</a>(&amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>.data), <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordflow">if</span> (!cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a6e1b26b0d4fe6536fa298cf4a94f8fdc">pending_msg</a>)</div>
<div class="line"><span class="lineno">  153</span>            <span class="keywordflow">goto</span> disconnect;</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>        cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>.hdr.seq = <a class="code hl_define" href="../../d5/d1d/libubox_2utils_8h.html#a48f33ad7b3de0010e5c802ced48f8a7b">be16_to_cpu</a>(cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>.hdr.seq);</div>
<div class="line"><span class="lineno">  156</span>        cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>.hdr.peer = <a class="code hl_define" href="../../d5/d1d/libubox_2utils_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>.hdr.peer);</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>        memcpy(&amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a6e1b26b0d4fe6536fa298cf4a94f8fdc">pending_msg</a>-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>, &amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>.hdr, <span class="keyword">sizeof</span>(cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>.hdr));</div>
<div class="line"><span class="lineno">  159</span>        memcpy(cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a6e1b26b0d4fe6536fa298cf4a94f8fdc">pending_msg</a>-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">data</a>, &amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>.data, <span class="keyword">sizeof</span>(cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">hdrbuf</a>.data));</div>
<div class="line"><span class="lineno">  160</span>    }</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>    ub = cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a6e1b26b0d4fe6536fa298cf4a94f8fdc">pending_msg</a>;</div>
<div class="line"><span class="lineno">  163</span>    <span class="keywordflow">if</span> (ub) {</div>
<div class="line"><span class="lineno">  164</span>        <span class="keywordtype">int</span> offset = cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#acbfb65d7868af52c07f06a25e8e36bb3">pending_msg_offset</a> - <span class="keyword">sizeof</span>(ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">hdr</a>);</div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordtype">int</span> len = <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01">blob_raw_len</a>(ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">data</a>) - offset;</div>
<div class="line"><span class="lineno">  166</span>        <span class="keywordtype">int</span> bytes = 0;</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>        <span class="keywordflow">if</span> (len &gt; 0) {</div>
<div class="line"><span class="lineno">  169</span>            bytes = read(sock-&gt;<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>, (<span class="keywordtype">char</span> *) ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">data</a> + offset, len);</div>
<div class="line"><span class="lineno">  170</span>            <span class="keywordflow">if</span> (bytes &lt;= 0)</div>
<div class="line"><span class="lineno">  171</span>                <span class="keywordflow">goto</span> out;</div>
<div class="line"><span class="lineno">  172</span>        }</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordflow">if</span> (bytes &lt; len) {</div>
<div class="line"><span class="lineno">  175</span>            cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#acbfb65d7868af52c07f06a25e8e36bb3">pending_msg_offset</a> += bytes;</div>
<div class="line"><span class="lineno">  176</span>            <span class="keywordflow">goto</span> out;</div>
<div class="line"><span class="lineno">  177</span>        }</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>        <span class="comment">/* accept message */</span></div>
<div class="line"><span class="lineno">  180</span>        ub-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a9c2e58870db73235b8596411324dd260">fd</a> = cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a6d416dedeb2b108a50fd31b24614a529">pending_msg_fd</a>;</div>
<div class="line"><span class="lineno">  181</span>        cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a6d416dedeb2b108a50fd31b24614a529">pending_msg_fd</a> = -1;</div>
<div class="line"><span class="lineno">  182</span>        cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#acbfb65d7868af52c07f06a25e8e36bb3">pending_msg_offset</a> = 0;</div>
<div class="line"><span class="lineno">  183</span>        cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a6e1b26b0d4fe6536fa298cf4a94f8fdc">pending_msg</a> = NULL;</div>
<div class="line"><span class="lineno">  184</span>        <a class="code hl_function" href="../../d2/dbe/ubusd_8h.html#a6b03538b7a75504cb920317621b1cd6e">ubusd_monitor_message</a>(cl, ub, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  185</span>        <a class="code hl_function" href="../../d2/dbe/ubusd_8h.html#ad8fbea68d11defe37f3b8f10ef41eff2">ubusd_proto_receive_message</a>(cl, ub);</div>
<div class="line"><span class="lineno">  186</span>        <span class="keywordflow">goto</span> retry;</div>
<div class="line"><span class="lineno">  187</span>    }</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>out:</div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordflow">if</span> (!sock-&gt;<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a0a2e642791b9398c2a113e8e95897a40">eof</a> || !<a class="code hl_function" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d">list_empty</a>(&amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a979525a026010d1138a38b1a78b5b492">tx_queue</a>))</div>
<div class="line"><span class="lineno">  191</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>disconnect:</div>
<div class="line"><span class="lineno">  194</span>    <a class="code hl_function" href="#aad8d8dc892f0e4cb324b52fef8651c26">handle_client_disconnect</a>(cl);</div>
<div class="line"><span class="lineno">  195</span>}</div>
<div class="ttc" id="ablob_8h_html_a2c4753820a7472bba7b999fbba79df01"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01">blob_raw_len</a></div><div class="ttdeci">static size_t blob_raw_len(const struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00109">blob.h:109</a></div></div>
<div class="ttc" id="ablob_8h_html_a3071b18c2bb742e04d7622379ee8fd3b"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b">blob_pad_len</a></div><div class="ttdeci">static size_t blob_pad_len(const struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00118">blob.h:118</a></div></div>
<div class="ttc" id="ablob_8h_html_dc/dd9/structblob__attr"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a></div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00052">blob.h:52</a></div></div>
<div class="ttc" id="alibubox_2utils_8h_html_a48f33ad7b3de0010e5c802ced48f8a7b"><div class="ttname"><a href="../../d5/d1d/libubox_2utils_8h.html#a48f33ad7b3de0010e5c802ced48f8a7b">be16_to_cpu</a></div><div class="ttdeci">#define be16_to_cpu(x)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d1d/libubox_2utils_8h_source.html#l00168">utils.h:168</a></div></div>
<div class="ttc" id="alibubox_2utils_8h_html_a650ecb20996a13e0c0bc530ba83fe5dc"><div class="ttname"><a href="../../d5/d1d/libubox_2utils_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a></div><div class="ttdeci">#define be32_to_cpu(x)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d1d/libubox_2utils_8h_source.html#l00167">utils.h:167</a></div></div>
<div class="ttc" id="alist_8h_html_a698670b36c7c0ca13822698ee825ddc8"><div class="ttname"><a href="../../da/d23/list_8h.html#a698670b36c7c0ca13822698ee825ddc8">list_for_each_entry_safe</a></div><div class="ttdeci">#define list_for_each_entry_safe(p, n, h, field)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d23/list_8h_source.html#l00146">list.h:146</a></div></div>
<div class="ttc" id="alist_8h_html_a6ff0e5eee443d7b27def83827340634d"><div class="ttname"><a href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d">list_empty</a></div><div class="ttdeci">static bool list_empty(const struct list_head *head)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d23/list_8h_source.html#l00069">list.h:69</a></div></div>
<div class="ttc" id="alist_8h_html_af8c317a42292b61c93aae91e59118a46"><div class="ttname"><a href="../../da/d23/list_8h.html#af8c317a42292b61c93aae91e59118a46">container_of</a></div><div class="ttdeci">#define container_of(ptr, type, member)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d23/list_8h_source.html#l00038">list.h:38</a></div></div>
<div class="ttc" id="aubusd_8c_html_a7685d99564c18e282d91b3bdb61c32ac"><div class="ttname"><a href="../../d9/de0/ubusd_8c.html#a7685d99564c18e282d91b3bdb61c32ac">ubus_msg_list_free</a></div><div class="ttdeci">void ubus_msg_list_free(struct ubus_msg_buf_list *ubl)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/de0/ubusd_8c_source.html#l00136">ubusd.c:136</a></div></div>
<div class="ttc" id="aubusd_8c_html_ae582a1a0e18dbe57e756c692f97d2a7d"><div class="ttname"><a href="../../d9/de0/ubusd_8c.html#ae582a1a0e18dbe57e756c692f97d2a7d">ubus_msg_writev</a></div><div class="ttdeci">ssize_t ubus_msg_writev(int fd, struct ubus_msg_buf *ub, size_t offset)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/de0/ubusd_8c_source.html#l00083">ubusd.c:83</a></div></div>
<div class="ttc" id="aubusd_8c_html_ae88c2071350154e2eed8a6844e60a9da"><div class="ttname"><a href="../../d9/de0/ubusd_8c.html#ae88c2071350154e2eed8a6844e60a9da">ubus_msg_new</a></div><div class="ttdeci">struct ubus_msg_buf * ubus_msg_new(void *data, int len, bool shared)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/de0/ubusd_8c_source.html#l00039">ubusd.c:39</a></div></div>
<div class="ttc" id="aubusd_8h_html_a04b9afcb4e61998c373cb10187068dce"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a04b9afcb4e61998c373cb10187068dce">ubus_client::txq_len</a></div><div class="ttdeci">unsigned int txq_len</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00065">ubusd.h:65</a></div></div>
<div class="ttc" id="aubusd_8h_html_a325aba3ea0240a91ee87d56bfea7b099"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a325aba3ea0240a91ee87d56bfea7b099">ubus_msg_buf::data</a></div><div class="ttdeci">struct blob_attr * data</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00034">ubusd.h:34</a></div></div>
<div class="ttc" id="aubusd_8h_html_a673a8525fda653dc75b6f277292ec461"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a673a8525fda653dc75b6f277292ec461">ubus_client::txq_ofs</a></div><div class="ttdeci">unsigned int txq_ofs</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00064">ubusd.h:64</a></div></div>
<div class="ttc" id="aubusd_8h_html_a6b03538b7a75504cb920317621b1cd6e"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a6b03538b7a75504cb920317621b1cd6e">ubusd_monitor_message</a></div><div class="ttdeci">void ubusd_monitor_message(struct ubus_client *cl, struct ubus_msg_buf *ub, bool send)</div><div class="ttdef"><b>Definition</b> <a href="../../db/dc5/ubusd__monitor_8c_source.html#l00077">ubusd_monitor.c:77</a></div></div>
<div class="ttc" id="aubusd_8h_html_a6d416dedeb2b108a50fd31b24614a529"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a6d416dedeb2b108a50fd31b24614a529">ubus_client::pending_msg_fd</a></div><div class="ttdeci">int pending_msg_fd</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00070">ubusd.h:70</a></div></div>
<div class="ttc" id="aubusd_8h_html_a6e1b26b0d4fe6536fa298cf4a94f8fdc"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a6e1b26b0d4fe6536fa298cf4a94f8fdc">ubus_client::pending_msg</a></div><div class="ttdeci">struct ubus_msg_buf * pending_msg</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00067">ubusd.h:67</a></div></div>
<div class="ttc" id="aubusd_8h_html_a71b145ba82bb363167b19d596e414c7a"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a71b145ba82bb363167b19d596e414c7a">ubus_msg_buf::hdr</a></div><div class="ttdeci">struct ubus_msghdr hdr</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00033">ubusd.h:33</a></div></div>
<div class="ttc" id="aubusd_8h_html_a8308a8af5d50b18f555604c9e81a2099"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a8308a8af5d50b18f555604c9e81a2099">ubus_msg_buf_list::msg</a></div><div class="ttdeci">struct ubus_msg_buf * msg</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00041">ubusd.h:41</a></div></div>
<div class="ttc" id="aubusd_8h_html_a979525a026010d1138a38b1a78b5b492"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a979525a026010d1138a38b1a78b5b492">ubus_client::tx_queue</a></div><div class="ttdeci">struct list_head tx_queue</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00063">ubusd.h:63</a></div></div>
<div class="ttc" id="aubusd_8h_html_a9c2e58870db73235b8596411324dd260"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a9c2e58870db73235b8596411324dd260">ubus_msg_buf::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00035">ubusd.h:35</a></div></div>
<div class="ttc" id="aubusd_8h_html_aa5ff1734dacc7127e30f4f349ec1f178"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">ubus_client::hdrbuf</a></div><div class="ttdeci">struct ubus_client::@144 hdrbuf</div></div>
<div class="ttc" id="aubusd_8h_html_acbfb65d7868af52c07f06a25e8e36bb3"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#acbfb65d7868af52c07f06a25e8e36bb3">ubus_client::pending_msg_offset</a></div><div class="ttdeci">int pending_msg_offset</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00069">ubusd.h:69</a></div></div>
<div class="ttc" id="aubusd_8h_html_ad8fbea68d11defe37f3b8f10ef41eff2"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#ad8fbea68d11defe37f3b8f10ef41eff2">ubusd_proto_receive_message</a></div><div class="ttdeci">void ubusd_proto_receive_message(struct ubus_client *cl, struct ubus_msg_buf *ub)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d8a/ubusd__proto_8c_source.html#l00512">ubusd_proto.c:512</a></div></div>
<div class="ttc" id="aubusd_8h_html_ae0a0523224a363f085b3ace0f6f28bdc"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#ae0a0523224a363f085b3ace0f6f28bdc">ubus_msg_buf::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00036">ubusd.h:36</a></div></div>
<div class="ttc" id="aubusd_8h_html_af9b7da62766d014bf03edda730edf6d6"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#af9b7da62766d014bf03edda730edf6d6">ubus_client::sock</a></div><div class="ttdeci">struct uloop_fd sock</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00052">ubusd.h:52</a></div></div>
<div class="ttc" id="aubusd_8h_html_db/d40/structubus__msg__buf"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#db/d40/structubus__msg__buf">ubus_msg_buf</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00031">ubusd.h:31</a></div></div>
<div class="ttc" id="aubusd_8h_html_dc/dac/structubus__msg__buf__list"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#dc/dac/structubus__msg__buf__list">ubus_msg_buf_list</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00039">ubusd.h:39</a></div></div>
<div class="ttc" id="aubusd_8h_html_df/d3f/structubus__client"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#df/d3f/structubus__client">ubus_client</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00050">ubusd.h:50</a></div></div>
<div class="ttc" id="aubusd__main_8c_html_a05ec3ebd839e77b52ac1a6ff54b7c647"><div class="ttname"><a href="#a05ec3ebd839e77b52ac1a6ff54b7c647">ubus_client_cmd_queue_process</a></div><div class="ttdeci">static void ubus_client_cmd_queue_process(struct ubus_client *cl)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dd3/ubusd__main_8c_source.html#l00042">ubusd_main.c:42</a></div></div>
<div class="ttc" id="aubusd__main_8c_html_aad8d8dc892f0e4cb324b52fef8651c26"><div class="ttname"><a href="#aad8d8dc892f0e4cb324b52fef8651c26">handle_client_disconnect</a></div><div class="ttdeci">static void handle_client_disconnect(struct ubus_client *cl)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dd3/ubusd__main_8c_source.html#l00020">ubusd_main.c:20</a></div></div>
<div class="ttc" id="auloop-epoll_8c_html_a0e992398f478de38db56a1146ea84e93"><div class="ttname"><a href="../../d3/d91/uloop-epoll_8c.html#a0e992398f478de38db56a1146ea84e93">events</a></div><div class="ttdeci">static struct epoll_event events[ULOOP_MAX_EVENTS]</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d91/uloop-epoll_8c_source.html#l00060">uloop-epoll.c:60</a></div></div>
<div class="ttc" id="auloop_8c_html_a570d5b4ff73cb373a6ca0ac54a9726a0"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0">uloop_fd_add</a></div><div class="ttdeci">int uloop_fd_add(struct uloop_fd *sock, unsigned int flags)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00235">uloop.c:235</a></div></div>
<div class="ttc" id="auloop_8h_html_a0a2e642791b9398c2a113e8e95897a40"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#a0a2e642791b9398c2a113e8e95897a40">uloop_fd::eof</a></div><div class="ttdeci">bool eof</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00066">uloop.h:66</a></div></div>
<div class="ttc" id="auloop_8h_html_a9b481ffad35824d85a7109d06e7ada3f"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#a9b481ffad35824d85a7109d06e7ada3f">ULOOP_WRITE</a></div><div class="ttdeci">#define ULOOP_WRITE</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00048">uloop.h:48</a></div></div>
<div class="ttc" id="auloop_8h_html_ac20cd5fed660ef784791db47283d9ebf"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#ac20cd5fed660ef784791db47283d9ebf">ULOOP_READ</a></div><div class="ttdeci">#define ULOOP_READ</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00047">uloop.h:47</a></div></div>
<div class="ttc" id="auloop_8h_html_ad8badf8512adcf9a8819ed088bde09cc"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">uloop_fd::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00065">uloop.h:65</a></div></div>
<div class="ttc" id="auloop_8h_html_ae0a4bba54063aede5669dbd4782ad6f5"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#ae0a4bba54063aede5669dbd4782ad6f5">ULOOP_EDGE_TRIGGER</a></div><div class="ttdeci">#define ULOOP_EDGE_TRIGGER</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00049">uloop.h:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d1d/libubox_2utils_8h_source.html#l00168">be16_to_cpu</a>, <a class="el" href="../../d5/d1d/libubox_2utils_8h_source.html#l00167">be32_to_cpu</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00118">blob_pad_len()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00109">blob_raw_len()</a>, <a class="el" href="../../da/d23/list_8h_source.html#l00038">container_of</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00034">ubus_msg_buf::data</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00066">uloop_fd::eof</a>, <a class="el" href="../../d3/d91/uloop-epoll_8c_source.html#l00060">events</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00035">ubus_msg_buf::fd</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00065">uloop_fd::fd</a>, <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00020">handle_client_disconnect()</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00033">ubus_msg_buf::hdr</a>, <a class="el" href="../../d2/dbe/ubusd_8h.html#aa5ff1734dacc7127e30f4f349ec1f178">ubus_client::hdrbuf</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00036">ubus_msg_buf::len</a>, <a class="el" href="../../da/d23/list_8h_source.html#l00069">list_empty()</a>, <a class="el" href="../../da/d23/list_8h_source.html#l00146">list_for_each_entry_safe</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00041">ubus_msg_buf_list::msg</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00067">ubus_client::pending_msg</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00070">ubus_client::pending_msg_fd</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00069">ubus_client::pending_msg_offset</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00052">ubus_client::sock</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00063">ubus_client::tx_queue</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00065">ubus_client::txq_len</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00064">ubus_client::txq_ofs</a>, <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00042">ubus_client_cmd_queue_process()</a>, <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00136">ubus_msg_list_free()</a>, <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00039">ubus_msg_new()</a>, <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00083">ubus_msg_writev()</a>, <a class="el" href="../../db/dc5/ubusd__monitor_8c_source.html#l00077">ubusd_monitor_message()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00512">ubusd_proto_receive_message()</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00049">ULOOP_EDGE_TRIGGER</a>, <a class="el" href="../../d1/d08/uloop_8c_source.html#l00235">uloop_fd_add()</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00047">ULOOP_READ</a>, and <a class="el" href="../../dc/d56/uloop_8h_source.html#l00048">ULOOP_WRITE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00197">get_next_connection()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dd3/ubusd__main_8c_a68e5902ffa76dfe0ac5324af9c7d22cb_cgraph.png" border="0" usemap="#add/dd3/ubusd__main_8c_a68e5902ffa76dfe0ac5324af9c7d22cb_cgraph" alt=""/></div>
<map name="add/dd3/ubusd__main_8c_a68e5902ffa76dfe0ac5324af9c7d22cb_cgraph" id="add/dd3/ubusd__main_8c_a68e5902ffa76dfe0ac5324af9c7d22cb_cgraph">
<area shape="rect" title=" " alt="" coords="5,855,108,889"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="206,1380,348,1414"/>
<area shape="poly" title=" " alt="" coords="62,889,70,985,87,1127,100,1200,116,1267,135,1322,158,1360,173,1373,192,1382,189,1387,170,1377,154,1363,131,1325,111,1269,95,1201,82,1128,64,986,56,889"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1377,1242,1518,1275"/>
<area shape="poly" title=" " alt="" coords="63,889,74,965,94,1072,122,1175,139,1215,158,1242,206,1284,252,1313,297,1331,343,1340,392,1344,445,1343,571,1340,882,1340,1014,1334,1145,1318,1264,1297,1361,1277,1362,1282,1265,1302,1145,1323,1014,1339,882,1345,571,1345,445,1349,392,1349,343,1346,296,1336,250,1318,203,1288,154,1246,135,1218,117,1177,89,1073,69,966,57,890"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#aad8d8dc892f0e4cb324b52fef8651c26" title=" " alt="" coords="446,432,698,466"/>
<area shape="poly" title=" " alt="" coords="55,855,56,794,68,708,80,662,98,616,122,574,154,537,183,513,216,494,286,465,360,449,430,442,431,447,361,455,288,471,218,498,186,517,158,541,126,577,103,618,85,663,73,709,62,795,60,855"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a7685d99564c18e282d91b3bdb61c32ac" title=" " alt="" coords="782,432,980,466"/>
<area shape="poly" title=" " alt="" coords="57,854,66,811,83,753,111,692,131,664,154,639,200,610,264,582,341,557,428,533,608,493,767,464,768,469,609,498,429,538,343,562,265,587,202,615,157,643,135,667,116,694,88,754,71,812,63,855"/>
<area shape="rect" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d" title=" " alt="" coords="1389,756,1505,790"/>
<area shape="poly" title=" " alt="" coords="72,853,108,821,155,792,284,745,398,719,500,708,598,709,804,728,924,738,1064,741,1190,736,1245,736,1316,741,1375,751,1374,757,1316,747,1245,741,1190,742,1064,747,924,743,803,733,598,714,500,713,398,724,286,750,157,797,111,825,76,856"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#a05ec3ebd839e77b52ac1a6ff54b7c647" title=" " alt="" coords="156,844,398,900"/>
<area shape="poly" title=" " alt="" coords="108,869,140,869,140,875,108,875"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae582a1a0e18dbe57e756c692f97d2a7d" title=" " alt="" coords="1099,756,1281,790"/>
<area shape="poly" title=" " alt="" coords="91,852,122,839,155,829,283,805,414,787,545,774,673,766,905,762,1083,765,1083,771,905,767,673,772,546,779,415,792,284,810,156,835,124,845,93,857"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#a6b03538b7a75504cb920317621b1cd6e" title=" " alt="" coords="1064,1018,1316,1051"/>
<area shape="poly" title=" " alt="" coords="70,888,105,937,129,963,157,986,237,1035,308,1071,373,1097,436,1116,501,1129,572,1139,747,1163,823,1176,884,1185,943,1183,976,1176,1015,1163,1030,1154,1039,1144,1062,1119,1147,1058,1150,1062,1065,1123,1043,1148,1033,1159,1017,1168,978,1181,944,1189,883,1191,822,1181,746,1168,571,1145,500,1134,435,1121,371,1102,305,1076,234,1039,154,990,125,967,101,940,66,891"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae88c2071350154e2eed8a6844e60a9da" title=" " alt="" coords="1366,1184,1529,1218"/>
<area shape="poly" title=" " alt="" coords="62,889,69,934,85,995,97,1027,113,1059,133,1087,157,1111,229,1162,305,1203,386,1236,471,1261,557,1279,645,1290,733,1296,820,1297,988,1288,1141,1268,1271,1244,1371,1220,1372,1225,1273,1249,1142,1274,989,1294,820,1303,732,1302,644,1296,556,1284,469,1266,385,1241,303,1208,226,1166,154,1115,129,1090,108,1061,92,1030,80,997,64,936,57,890"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0" title=" " alt="" coords="1118,647,1262,681"/>
<area shape="poly" title=" " alt="" coords="59,854,69,818,87,772,115,726,133,706,154,690,176,681,209,674,304,663,428,657,571,653,867,654,1102,659,1102,664,867,659,571,659,429,662,304,668,210,679,178,686,157,694,136,710,119,729,91,774,74,819,64,855"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#ad8fbea68d11defe37f3b8f10ef41eff2" title=" " alt="" coords="467,998,678,1055"/>
<area shape="poly" title=" " alt="" coords="98,887,157,909,310,957,452,995,451,1000,308,962,155,914,96,892"/>
<area shape="poly" title=" " alt="" coords="349,1407,524,1428,639,1437,768,1440,904,1436,1043,1423,1182,1398,1250,1380,1315,1359,1345,1344,1373,1326,1419,1285,1422,1289,1376,1330,1348,1349,1317,1364,1251,1386,1183,1403,1044,1428,904,1442,768,1445,639,1442,523,1434,348,1412"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1639,1186,1737,1219"/>
<area shape="poly" title=" " alt="" coords="1517,1240,1623,1215,1624,1220,1519,1245"/>
<area shape="poly" title=" " alt="" coords="699,447,767,447,767,452,699,452"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#acc3894569e20b93c18061181c212342d" title=" " alt="" coords="746,320,1016,354"/>
<area shape="poly" title=" " alt="" coords="620,429,817,357,819,362,622,434"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aba92530b6ba85fd3a1ce8ad18cde741c" title=" " alt="" coords="761,126,1001,159"/>
<area shape="poly" title=" " alt="" coords="589,430,850,168,854,172,593,434"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c" title=" " alt="" coords="1364,592,1530,626"/>
<area shape="poly" title=" " alt="" coords="669,464,1350,589,1349,594,668,469"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae1cde0f50b85945cfff23be4fc1586f4" title=" " alt="" coords="1128,378,1252,411"/>
<area shape="poly" title=" " alt="" coords="980,429,1112,406,1113,411,981,434"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a19a646e5c3d7ddd2cb4004d68896f12a" title=" " alt="" coords="1367,487,1528,521"/>
<area shape="poly" title=" " alt="" coords="980,448,1138,455,1316,472,1364,481,1363,486,1316,477,1138,460,980,453"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#a43f63f868886320fb36981be6e4ccde1" title=" " alt="" coords="1087,320,1293,354"/>
<area shape="poly" title=" " alt="" coords="1016,335,1072,335,1072,340,1016,340"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#aee0b705d52b50ba29f429de1b04ff8d4" title=" " alt="" coords="1087,211,1293,245"/>
<area shape="poly" title=" " alt="" coords="930,317,1125,248,1126,253,932,322"/>
<area shape="rect" href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title=" " alt="" coords="1405,211,1490,245"/>
<area shape="poly" title=" " alt="" coords="1293,225,1389,225,1389,231,1293,231"/>
<area shape="poly" title=" " alt="" coords="905,158,974,206,1018,233,1065,255,1102,266,1135,272,1194,272,1223,272,1252,277,1283,287,1318,306,1359,343,1393,387,1419,433,1437,471,1432,474,1414,435,1389,390,1356,346,1314,310,1281,292,1251,282,1222,278,1194,277,1134,277,1100,272,1063,260,1016,237,971,211,902,162"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59" title=" " alt="" coords="1117,39,1263,73"/>
<area shape="poly" title=" " alt="" coords="931,123,1063,81,1101,72,1102,77,1064,87,933,128"/>
<area shape="rect" href="../../d6/d41/ubusd__id_8h.html#a75eac2b0fe238d440cb31282163bfeb1" title=" " alt="" coords="1378,70,1516,103"/>
<area shape="poly" title=" " alt="" coords="900,123,968,71,1013,44,1063,24,1133,7,1189,3,1246,9,1317,24,1364,39,1406,60,1403,64,1362,44,1315,29,1245,15,1189,8,1134,13,1064,29,1016,49,971,75,903,127"/>
<area shape="rect" href="../../dd/d84/ubusd__acl_8c.html#a5b54d3d2bf7a16054d9f166ee7ba5a92" title=" " alt="" coords="1081,96,1299,130"/>
<area shape="poly" title=" " alt="" coords="1001,129,1065,122,1065,128,1002,134"/>
<area shape="rect" href="../../df/d0e/ubusd__obj_8c.html#af73eaf6c25db903d28f1a0a94dbecdf3" title=" " alt="" coords="1095,154,1285,187"/>
<area shape="poly" title=" " alt="" coords="1002,151,1080,158,1079,163,1001,156"/>
<area shape="poly" title=" " alt="" coords="1270,185,1317,196,1390,213,1389,218,1315,201,1268,191"/>
<area shape="poly" title=" " alt="" coords="1278,151,1315,140,1396,108,1398,113,1317,145,1279,156"/>
<area shape="poly" title=" " alt="" coords="1286,176,1303,184,1318,197,1330,216,1340,239,1350,297,1353,366,1352,441,1349,588,1354,649,1366,695,1385,722,1409,745,1405,749,1381,726,1362,697,1348,650,1344,588,1347,441,1348,366,1345,298,1335,241,1326,218,1314,200,1300,189,1284,180"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#ae98d2f54596aacb1f0f176d0e565e2e2" title=" " alt="" coords="1596,622,1780,655"/>
<area shape="poly" title=" " alt="" coords="1531,617,1581,623,1580,628,1530,622"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#abe443fe3f794c14f0aaa0c5f18a27ddd" title=" " alt="" coords="1578,564,1798,598"/>
<area shape="poly" title=" " alt="" coords="1530,597,1563,593,1563,598,1531,602"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#a159bb0ae05f7dc767b4f708564c74cc9" title=" " alt="" coords="1080,487,1300,521"/>
<area shape="poly" title=" " alt="" coords="338,841,646,703,852,617,1063,537,1107,523,1109,528,1065,542,854,622,648,708,340,846"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a52fc73dcc0aa2e5f27126bd5439c61ad" title=" " alt="" coords="473,900,671,934"/>
<area shape="poly" title=" " alt="" coords="399,888,458,897,457,902,398,893"/>
<area shape="poly" title=" " alt="" coords="1301,501,1351,501,1351,507,1301,507"/>
<area shape="poly" title=" " alt="" coords="1225,484,1270,458,1314,422,1350,381,1382,337,1428,258,1433,260,1387,340,1354,384,1318,426,1273,462,1228,489"/>
<area shape="poly" title=" " alt="" coords="672,932,889,970,1017,995,1034,1011,1043,1028,1051,1045,1066,1062,1141,1122,1206,1160,1365,1228,1378,1234,1376,1238,1363,1233,1203,1164,1138,1126,1062,1066,1047,1047,1039,1030,1030,1014,1014,1000,888,975,671,937"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1632,938,1744,971"/>
<area shape="poly" title=" " alt="" coords="659,897,746,885,967,869,1140,865,1312,877,1531,908,1622,930,1621,935,1530,913,1311,882,1139,870,967,874,747,891,660,902"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ac663b82c91f957ef4dea52b243cb1f89" title=" " alt="" coords="796,900,966,934"/>
<area shape="poly" title=" " alt="" coords="672,915,780,915,780,920,672,920"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="792,1010,970,1043"/>
<area shape="poly" title=" " alt="" coords="611,932,674,960,747,988,794,1003,793,1008,745,993,672,965,609,937"/>
<area shape="poly" title=" " alt="" coords="950,897,1373,789,1375,794,951,903"/>
<area shape="poly" title=" " alt="" coords="905,898,974,853,1063,807,1101,793,1103,798,1065,812,977,858,908,902"/>
<area shape="poly" title=" " alt="" coords="918,932,1017,963,1123,1009,1121,1013,1015,968,917,937"/>
<area shape="poly" title=" " alt="" coords="917,898,966,869,1014,829,1029,807,1037,786,1045,765,1062,742,1098,711,1137,686,1140,691,1101,715,1066,746,1050,768,1042,788,1034,809,1018,832,969,873,920,902"/>
<area shape="poly" title=" " alt="" coords="1209,1050,1318,1170,1340,1202,1350,1215,1366,1228,1371,1232,1368,1236,1362,1233,1346,1219,1336,1205,1314,1174,1205,1054"/>
<area shape="poly" title=" " alt="" coords="1222,1050,1287,1084,1365,1119,1433,1142,1503,1161,1624,1188,1623,1194,1501,1166,1432,1147,1363,1124,1284,1089,1220,1054"/>
<area shape="poly" title=" " alt="" coords="1200,1016,1254,927,1286,866,1313,802,1323,769,1329,740,1332,688,1338,638,1347,610,1362,579,1382,551,1406,529,1410,532,1386,555,1366,581,1351,612,1343,639,1337,689,1334,740,1329,770,1319,804,1291,868,1259,929,1205,1019"/>
<area shape="poly" title=" " alt="" coords="1206,1016,1417,800,1420,803,1210,1019"/>
<area shape="poly" title=" " alt="" coords="1292,1015,1364,1003,1616,963,1617,968,1364,1008,1293,1020"/>
<area shape="poly" title=" " alt="" coords="1169,1020,1102,982,1015,944,981,933,982,927,1017,939,1104,977,1172,1015"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1378,1018,1517,1051"/>
<area shape="poly" title=" " alt="" coords="1317,1032,1362,1032,1362,1037,1317,1037"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1397,1075,1498,1109"/>
<area shape="poly" title=" " alt="" coords="1269,1049,1382,1075,1381,1080,1268,1055"/>
<area shape="poly" title=" " alt="" coords="1220,1050,1318,1119,1341,1142,1366,1163,1387,1175,1384,1180,1362,1167,1338,1146,1314,1123,1217,1054"/>
<area shape="poly" title=" " alt="" coords="1497,1075,1529,1062,1596,1021,1653,979,1656,984,1599,1025,1532,1066,1499,1080"/>
<area shape="poly" title=" " alt="" coords="1262,646,1349,627,1350,633,1263,651"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#a1b6212744c4241320adc3a2170525f20" title=" " alt="" coords="1380,650,1514,683"/>
<area shape="poly" title=" " alt="" coords="1262,662,1364,663,1364,668,1262,667"/>
<area shape="poly" title=" " alt="" coords="601,1053,664,1111,704,1140,747,1163,828,1193,911,1216,997,1233,1081,1245,1237,1257,1361,1259,1361,1264,1237,1263,1080,1250,996,1238,910,1221,826,1198,745,1168,701,1144,661,1115,598,1057"/>
<area shape="poly" title=" " alt="" coords="625,995,661,972,696,945,721,916,744,886,901,755,1000,677,1062,632,1137,596,1215,566,1356,523,1357,528,1216,571,1139,601,1065,637,1004,681,904,760,748,890,725,919,700,949,665,976,628,1000"/>
<area shape="poly" title=" " alt="" coords="679,1045,747,1053,824,1064,885,1075,914,1077,944,1075,977,1067,1014,1054,1029,1043,1038,1030,1046,1015,1062,1003,1105,985,1142,974,1176,970,1209,969,1278,973,1364,972,1617,955,1617,961,1364,977,1278,978,1209,975,1177,975,1143,980,1107,990,1065,1008,1050,1019,1042,1033,1033,1047,1017,1058,978,1073,944,1080,914,1082,884,1080,823,1069,746,1059,678,1050"/>
<area shape="poly" title=" " alt="" coords="653,995,816,937,818,942,655,1000"/>
<area shape="poly" title=" " alt="" coords="678,1024,777,1024,777,1029,678,1029"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a9eb2d430d517951c781b4427b658e143" title=" " alt="" coords="781,1119,981,1153"/>
<area shape="poly" title=" " alt="" coords="637,1053,747,1097,794,1112,793,1117,745,1102,635,1058"/>
</map>
</div>

</div>
</div>
<a id="ac3c285a813814059551f5f446105b5af" name="ac3c285a813814059551f5f446105b5af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3c285a813814059551f5f446105b5af">&#9670;&#160;</a></span>get_next_connection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool get_next_connection </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>fd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00197">197</a> of file <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html">ubusd_main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  198</span>{</div>
<div class="line"><span class="lineno">  199</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d2/dbe/ubusd_8h.html#df/d3f/structubus__client">ubus_client</a> *cl;</div>
<div class="line"><span class="lineno">  200</span>    <span class="keywordtype">int</span> client_fd;</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>    client_fd = accept(fd, NULL, 0);</div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">if</span> (client_fd &lt; 0) {</div>
<div class="line"><span class="lineno">  204</span>        <span class="keywordflow">switch</span> (errno) {</div>
<div class="line"><span class="lineno">  205</span>        <span class="keywordflow">case</span> ECONNABORTED:</div>
<div class="line"><span class="lineno">  206</span>        <span class="keywordflow">case</span> EINTR:</div>
<div class="line"><span class="lineno">  207</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  208</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  209</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  210</span>        }</div>
<div class="line"><span class="lineno">  211</span>    }</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>    cl = <a class="code hl_function" href="../../d2/dbe/ubusd_8h.html#a9b74f1028bad4948836b42094838eb64">ubusd_proto_new_client</a>(client_fd, <a class="code hl_function" href="#a68e5902ffa76dfe0ac5324af9c7d22cb">client_cb</a>);</div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordflow">if</span> (cl)</div>
<div class="line"><span class="lineno">  215</span>        <a class="code hl_function" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0">uloop_fd_add</a>(&amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#af9b7da62766d014bf03edda730edf6d6">sock</a>, <a class="code hl_define" href="../../dc/d56/uloop_8h.html#ac20cd5fed660ef784791db47283d9ebf">ULOOP_READ</a> | <a class="code hl_define" href="../../dc/d56/uloop_8h.html#ae0a4bba54063aede5669dbd4782ad6f5">ULOOP_EDGE_TRIGGER</a>);</div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  217</span>        close(client_fd);</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  220</span>}</div>
<div class="ttc" id="aubusd_8h_html_a9b74f1028bad4948836b42094838eb64"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a9b74f1028bad4948836b42094838eb64">ubusd_proto_new_client</a></div><div class="ttdeci">struct ubus_client * ubusd_proto_new_client(int fd, uloop_fd_handler cb)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d8a/ubusd__proto_8c_source.html#l00564">ubusd_proto.c:564</a></div></div>
<div class="ttc" id="aubusd__main_8c_html_a68e5902ffa76dfe0ac5324af9c7d22cb"><div class="ttname"><a href="#a68e5902ffa76dfe0ac5324af9c7d22cb">client_cb</a></div><div class="ttdeci">static void client_cb(struct uloop_fd *sock, unsigned int events)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dd3/ubusd__main_8c_source.html#l00057">ubusd_main.c:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00057">client_cb()</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00052">ubus_client::sock</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00564">ubusd_proto_new_client()</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00049">ULOOP_EDGE_TRIGGER</a>, <a class="el" href="../../d1/d08/uloop_8c_source.html#l00235">uloop_fd_add()</a>, and <a class="el" href="../../dc/d56/uloop_8h_source.html#l00047">ULOOP_READ</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00222">server_cb()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dd3/ubusd__main_8c_ac3c285a813814059551f5f446105b5af_cgraph.png" border="0" usemap="#add/dd3/ubusd__main_8c_ac3c285a813814059551f5f446105b5af_cgraph" alt=""/></div>
<map name="add/dd3/ubusd__main_8c_ac3c285a813814059551f5f446105b5af_cgraph" id="add/dd3/ubusd__main_8c_ac3c285a813814059551f5f446105b5af_cgraph">
<area shape="rect" title=" " alt="" coords="5,646,217,680"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#a68e5902ffa76dfe0ac5324af9c7d22cb" title=" " alt="" coords="265,646,367,680"/>
<area shape="poly" title=" " alt="" coords="217,660,249,660,249,665,217,665"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0" title=" " alt="" coords="1335,35,1479,69"/>
<area shape="poly" title=" " alt="" coords="112,645,122,588,141,501,170,396,213,285,239,231,269,179,303,131,341,89,383,53,431,26,483,9,540,3,851,3,1043,5,1233,21,1320,33,1319,39,1233,27,1042,11,851,8,540,8,484,14,433,31,387,58,345,93,307,135,273,182,244,233,217,288,176,398,146,502,127,589,117,646"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a9b74f1028bad4948836b42094838eb64" title=" " alt="" coords="420,1209,662,1242"/>
<area shape="poly" title=" " alt="" coords="126,678,241,846,326,964,417,1082,515,1195,511,1199,413,1086,322,967,237,849,122,681"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="470,137,612,170"/>
<area shape="poly" title=" " alt="" coords="316,645,324,551,342,414,355,343,371,278,390,224,413,188,432,172,454,162,456,167,435,177,417,191,395,227,376,280,360,344,348,415,330,552,321,646"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1594,297,1735,330"/>
<area shape="poly" title=" " alt="" coords="321,644,355,572,381,529,413,489,515,374,559,326,603,284,651,251,705,226,770,211,849,205,1134,205,1248,204,1337,205,1424,216,1534,243,1583,262,1626,286,1623,290,1581,267,1533,248,1423,221,1336,210,1248,209,1134,211,849,211,771,216,707,231,653,256,606,289,563,329,519,378,417,492,386,532,360,575,326,646"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#aad8d8dc892f0e4cb324b52fef8651c26" title=" " alt="" coords="415,831,667,865"/>
<area shape="poly" title=" " alt="" coords="326,679,359,743,384,779,417,810,438,822,435,827,413,814,380,783,354,746,321,681"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a7685d99564c18e282d91b3bdb61c32ac" title=" " alt="" coords="751,946,949,980"/>
<area shape="poly" title=" " alt="" coords="322,679,331,720,348,774,376,829,394,854,417,875,452,899,491,919,532,935,574,946,659,960,736,965,736,970,658,966,573,951,531,940,489,924,450,904,413,879,390,858,371,832,343,776,326,721,317,680"/>
<area shape="rect" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d" title=" " alt="" coords="1606,566,1723,600"/>
<area shape="poly" title=" " alt="" coords="367,647,456,626,576,602,711,584,849,576,1134,576,1591,579,1591,584,1134,581,849,581,711,589,577,608,457,631,368,652"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#a05ec3ebd839e77b52ac1a6ff54b7c647" title=" " alt="" coords="420,700,662,756"/>
<area shape="poly" title=" " alt="" coords="368,675,428,692,426,697,366,680"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae582a1a0e18dbe57e756c692f97d2a7d" title=" " alt="" coords="1316,777,1498,810"/>
<area shape="poly" title=" " alt="" coords="329,679,363,725,388,748,416,766,449,778,489,788,588,802,705,810,833,813,1091,809,1301,798,1301,803,1091,814,833,819,705,816,588,807,488,793,447,783,414,770,384,752,359,728,325,682"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#a6b03538b7a75504cb920317621b1cd6e" title=" " alt="" coords="1281,667,1533,701"/>
<area shape="poly" title=" " alt="" coords="368,661,1266,679,1266,684,367,666"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae88c2071350154e2eed8a6844e60a9da" title=" " alt="" coords="1583,1049,1746,1082"/>
<area shape="poly" title=" " alt="" coords="320,680,323,735,336,813,349,855,366,896,388,933,417,966,469,1008,518,1037,565,1055,613,1064,663,1067,718,1066,849,1063,1134,1063,1567,1063,1567,1068,1134,1068,849,1068,718,1072,663,1072,612,1069,563,1060,515,1042,466,1013,413,970,384,937,361,898,344,857,331,814,318,736,314,680"/>
<area shape="poly" title=" " alt="" coords="315,645,320,538,335,380,348,299,365,224,386,163,399,140,413,122,443,101,481,83,527,68,580,56,700,39,834,31,972,29,1105,31,1320,42,1319,48,1105,36,972,34,834,36,701,44,581,61,528,73,483,88,445,105,417,126,403,143,391,165,370,225,353,300,341,381,326,539,320,645"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#ad8fbea68d11defe37f3b8f10ef41eff2" title=" " alt="" coords="744,394,956,451"/>
<area shape="poly" title=" " alt="" coords="327,643,363,601,387,578,414,558,491,517,573,484,654,459,728,441,730,446,656,464,575,489,493,522,416,562,390,582,367,604,331,647"/>
<area shape="poly" title=" " alt="" coords="613,147,817,139,1085,137,1221,141,1348,150,1455,164,1499,175,1534,187,1568,206,1599,231,1645,282,1641,286,1595,235,1565,210,1532,192,1497,180,1454,170,1347,155,1221,146,1085,142,817,144,613,152"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1802,415,1901,449"/>
<area shape="poly" title=" " alt="" coords="1712,328,1749,347,1788,374,1822,402,1819,407,1785,379,1746,352,1710,333"/>
<area shape="poly" title=" " alt="" coords="576,863,651,902,716,932,737,939,735,944,714,937,649,907,574,868"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#acc3894569e20b93c18061181c212342d" title=" " alt="" coords="715,831,985,865"/>
<area shape="poly" title=" " alt="" coords="668,845,700,845,700,851,668,851"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aba92530b6ba85fd3a1ce8ad18cde741c" title=" " alt="" coords="730,889,970,922"/>
<area shape="poly" title=" " alt="" coords="636,863,741,882,740,888,635,868"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c" title=" " alt="" coords="1581,90,1748,124"/>
<area shape="poly" title=" " alt="" coords="587,828,630,803,649,786,665,767,679,740,689,715,696,665,693,619,684,573,676,527,674,480,685,432,696,407,713,381,754,333,800,291,851,254,905,222,961,195,1020,171,1142,136,1263,114,1378,102,1481,98,1566,98,1566,104,1481,103,1378,107,1263,119,1143,141,1022,176,964,200,907,227,854,259,804,295,758,337,717,384,701,409,690,434,680,481,681,526,689,572,698,618,702,666,694,716,684,742,670,769,653,790,633,808,589,833"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae1cde0f50b85945cfff23be4fc1586f4" title=" " alt="" coords="1071,1154,1195,1188"/>
<area shape="poly" title=" " alt="" coords="876,978,1097,1142,1094,1146,873,982"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a19a646e5c3d7ddd2cb4004d68896f12a" title=" " alt="" coords="1584,862,1745,896"/>
<area shape="poly" title=" " alt="" coords="949,952,1213,927,1533,893,1568,889,1569,894,1534,899,1213,932,949,957"/>
<area shape="rect" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4" title=" " alt="" coords="1323,1154,1491,1188"/>
<area shape="poly" title=" " alt="" coords="1195,1168,1307,1168,1307,1173,1195,1173"/>
<area shape="poly" title=" " alt="" coords="971,899,1568,879,1568,884,971,904"/>
<area shape="rect" href="../../d6/d41/ubusd__id_8h.html#a75eac2b0fe238d440cb31282163bfeb1" title=" " alt="" coords="1064,994,1202,1028"/>
<area shape="poly" title=" " alt="" coords="951,920,986,931,1043,956,1093,983,1090,988,1040,961,984,936,949,925"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#a159bb0ae05f7dc767b4f708564c74cc9" title=" " alt="" coords="1297,834,1517,868"/>
<area shape="poly" title=" " alt="" coords="663,742,1282,830,1281,836,663,748"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a52fc73dcc0aa2e5f27126bd5439c61ad" title=" " alt="" coords="751,507,949,541"/>
<area shape="poly" title=" " alt="" coords="584,697,808,548,811,552,587,701"/>
<area shape="poly" title=" " alt="" coords="1518,860,1569,866,1568,871,1518,865"/>
<area shape="poly" title=" " alt="" coords="949,506,1084,482,1232,449,1436,390,1601,333,1603,338,1437,395,1234,455,1085,487,950,512"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1796,591,1907,625"/>
<area shape="poly" title=" " alt="" coords="950,519,1138,517,1369,518,1589,528,1680,538,1748,551,1783,564,1814,580,1811,585,1781,569,1747,556,1679,543,1589,534,1368,524,1138,522,950,524"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ac663b82c91f957ef4dea52b243cb1f89" title=" " alt="" coords="1048,617,1218,650"/>
<area shape="poly" title=" " alt="" coords="897,539,1074,608,1072,613,895,544"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="1044,406,1222,440"/>
<area shape="poly" title=" " alt="" coords="899,504,1069,443,1071,448,900,509"/>
<area shape="poly" title=" " alt="" coords="1218,624,1533,595,1590,589,1591,594,1534,600,1219,629"/>
<area shape="poly" title=" " alt="" coords="1165,648,1364,766,1362,770,1162,653"/>
<area shape="poly" title=" " alt="" coords="1189,648,1267,664,1265,670,1188,653"/>
<area shape="poly" title=" " alt="" coords="1142,615,1182,544,1231,451,1325,242,1391,82,1396,85,1330,244,1235,453,1187,546,1147,617"/>
<area shape="poly" title=" " alt="" coords="1418,665,1641,342,1645,345,1423,668"/>
<area shape="poly" title=" " alt="" coords="1511,664,1657,636,1715,622,1746,610,1780,577,1806,538,1825,498,1838,463,1843,465,1830,500,1811,541,1784,581,1749,614,1717,627,1658,641,1512,669"/>
<area shape="poly" title=" " alt="" coords="1496,699,1535,718,1582,770,1643,848,1639,851,1578,774,1532,722,1494,704"/>
<area shape="poly" title=" " alt="" coords="1480,664,1532,646,1556,632,1580,616,1606,604,1608,609,1583,621,1559,636,1534,650,1482,669"/>
<area shape="poly" title=" " alt="" coords="1534,682,1639,673,1694,665,1747,653,1806,630,1808,635,1748,659,1695,670,1639,679,1534,687"/>
<area shape="poly" title=" " alt="" coords="1351,669,1233,646,1234,641,1352,664"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1595,1211,1734,1245"/>
<area shape="poly" title=" " alt="" coords="1455,699,1498,725,1519,742,1536,763,1559,807,1570,848,1573,887,1571,924,1566,1002,1571,1045,1584,1094,1611,1150,1642,1197,1638,1200,1607,1153,1579,1096,1565,1046,1561,1002,1566,924,1568,887,1565,849,1554,809,1531,765,1515,746,1495,729,1452,704"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1614,726,1715,760"/>
<area shape="poly" title=" " alt="" coords="1485,699,1599,725,1598,730,1484,704"/>
<area shape="poly" title=" " alt="" coords="1451,699,1495,725,1517,742,1535,762,1557,799,1566,832,1571,866,1584,907,1616,975,1648,1033,1643,1036,1611,978,1579,909,1566,867,1560,833,1552,801,1531,766,1513,746,1492,729,1448,704"/>
<area shape="poly" title=" " alt="" coords="1712,723,1746,704,1789,670,1824,634,1828,638,1792,674,1749,709,1714,728"/>
<area shape="poly" title=" " alt="" coords="1480,65,1568,83,1567,89,1479,70"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#a1b6212744c4241320adc3a2170525f20" title=" " alt="" coords="1597,33,1732,66"/>
<area shape="poly" title=" " alt="" coords="1480,49,1582,48,1582,53,1480,54"/>
<area shape="poly" title=" " alt="" coords="875,392,904,364,941,332,984,303,1032,281,1106,262,1182,251,1260,248,1336,250,1476,267,1587,290,1586,295,1475,272,1335,255,1260,253,1183,257,1107,267,1034,287,987,308,944,337,908,368,879,396"/>
<area shape="poly" title=" " alt="" coords="931,449,961,468,987,493,1001,516,1007,539,1008,581,1011,622,1019,641,1035,661,1064,684,1092,697,1119,704,1146,706,1207,704,1242,705,1281,711,1354,721,1411,725,1467,735,1535,762,1566,780,1595,803,1641,848,1637,852,1591,807,1563,785,1532,766,1466,740,1410,731,1353,726,1281,716,1242,711,1207,709,1146,711,1118,709,1090,702,1061,688,1031,665,1014,644,1005,623,1003,582,1002,539,996,518,983,496,957,472,928,454"/>
<area shape="poly" title=" " alt="" coords="956,400,1032,391,1133,384,1233,391,1383,408,1500,426,1555,440,1612,459,1676,485,1749,520,1791,548,1825,578,1822,582,1788,552,1746,525,1674,490,1611,464,1553,445,1499,431,1382,413,1233,396,1133,389,1033,396,956,405"/>
<area shape="poly" title=" " alt="" coords="914,449,986,492,1054,549,1107,603,1104,607,1050,553,983,497,911,454"/>
<area shape="poly" title=" " alt="" coords="956,420,1029,420,1029,425,956,425"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a9eb2d430d517951c781b4427b658e143" title=" " alt="" coords="1033,297,1233,330"/>
<area shape="poly" title=" " alt="" coords="920,391,1032,347,1067,333,1069,338,1034,352,922,396"/>
<area shape="poly" title=" " alt="" coords="663,1223,925,1218,1079,1210,1233,1197,1307,1187,1308,1192,1233,1203,1079,1215,925,1223,663,1228"/>
<area shape="poly" title=" " alt="" coords="573,1206,638,1173,714,1139,893,1076,1050,1030,1052,1035,895,1081,716,1144,640,1178,576,1210"/>
<area shape="rect" href="../../d5/d3d/ubusd__id_8c.html#adc97bf3966f925ae5d90d1273ca650ef" title=" " alt="" coords="778,1314,922,1348"/>
<area shape="poly" title=" " alt="" coords="583,1240,716,1292,764,1307,763,1312,714,1297,581,1245"/>
<area shape="rect" href="../../dd/d84/ubusd__acl_8c.html#a2503db2a1e93952c2e32cca2857c660d" title=" " alt="" coords="744,1371,956,1405"/>
<area shape="poly" title=" " alt="" coords="561,1240,625,1299,669,1331,717,1358,731,1364,729,1368,714,1362,666,1335,622,1303,557,1244"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a3bf49ccabf18c2e50486c84abc3b0b1f" title=" " alt="" coords="1283,1211,1531,1245"/>
<area shape="poly" title=" " alt="" coords="663,1237,715,1241,974,1250,1233,1241,1267,1239,1268,1245,1233,1247,974,1255,715,1247,663,1243"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a6c73c051e7c38f91ea4f1a4087e93a7a" title=" " alt="" coords="757,1154,943,1188"/>
<area shape="poly" title=" " alt="" coords="640,1205,741,1187,742,1192,641,1211"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#ab9041e08938920d5ae722e2d57dc20e2" title=" " alt="" coords="1078,1365,1188,1398"/>
<area shape="poly" title=" " alt="" coords="923,1341,1062,1366,1061,1371,922,1346"/>
<area shape="poly" title=" " alt="" coords="1520,1209,1531,1198,1539,1184,1546,1159,1556,1086,1567,883,1572,676,1579,553,1594,494,1612,436,1647,343,1652,345,1617,437,1599,495,1584,554,1577,677,1572,883,1561,1086,1551,1160,1544,1186,1535,1202,1523,1213"/>
<area shape="poly" title=" " alt="" coords="1532,1225,1580,1225,1580,1231,1532,1231"/>
<area shape="poly" title=" " alt="" coords="1509,1208,1532,1198,1565,1175,1595,1147,1641,1093,1645,1096,1599,1151,1569,1179,1535,1202,1511,1213"/>
<area shape="poly" title=" " alt="" coords="943,1154,984,1144,1169,1084,1347,1016,1501,950,1612,900,1614,905,1503,955,1349,1021,1170,1089,985,1149,944,1159"/>
<area shape="poly" title=" " alt="" coords="864,1152,920,1083,953,1038,982,991,1028,900,1067,809,1119,664,1124,666,1072,810,1033,903,987,993,957,1041,924,1087,869,1155"/>
<area shape="poly" title=" " alt="" coords="918,1186,1082,1223,1181,1241,1281,1255,1407,1264,1533,1255,1584,1246,1584,1251,1534,1260,1407,1269,1281,1260,1180,1247,1081,1228,916,1191"/>
</map>
</div>

</div>
</div>
<a id="aad8d8dc892f0e4cb324b52fef8651c26" name="aad8d8dc892f0e4cb324b52fef8651c26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad8d8dc892f0e4cb324b52fef8651c26">&#9670;&#160;</a></span>handle_client_disconnect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_client_disconnect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#df/d3f/structubus__client">ubus_client</a> *</td>          <td class="paramname"><span class="paramname"><em>cl</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00020">20</a> of file <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html">ubusd_main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   21</span>{</div>
<div class="line"><span class="lineno">   22</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d2/dbe/ubusd_8h.html#dc/dac/structubus__msg__buf__list">ubus_msg_buf_list</a> *ubl, *ubl2;</div>
<div class="line"><span class="lineno">   23</span>    <a class="code hl_define" href="../../da/d23/list_8h.html#a698670b36c7c0ca13822698ee825ddc8">list_for_each_entry_safe</a>(ubl, ubl2, &amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a979525a026010d1138a38b1a78b5b492">tx_queue</a>, <a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aeabc7d62295447c76dd31808c28a8c4c">list</a>)</div>
<div class="line"><span class="lineno">   24</span>        <a class="code hl_function" href="../../d9/de0/ubusd_8c.html#a7685d99564c18e282d91b3bdb61c32ac">ubus_msg_list_free</a>(ubl);</div>
<div class="line"><span class="lineno">   25</span> </div>
<div class="line"><span class="lineno">   26</span>    <a class="code hl_function" href="../../d2/dbe/ubusd_8h.html#acc3894569e20b93c18061181c212342d">ubusd_monitor_disconnect</a>(cl);</div>
<div class="line"><span class="lineno">   27</span>    <a class="code hl_function" href="../../d2/dbe/ubusd_8h.html#aba92530b6ba85fd3a1ce8ad18cde741c">ubusd_proto_free_client</a>(cl);</div>
<div class="line"><span class="lineno">   28</span>    <span class="keywordflow">if</span> (cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a6d416dedeb2b108a50fd31b24614a529">pending_msg_fd</a> &gt;= 0)</div>
<div class="line"><span class="lineno">   29</span>        close(cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a6d416dedeb2b108a50fd31b24614a529">pending_msg_fd</a>);</div>
<div class="line"><span class="lineno">   30</span>    <a class="code hl_function" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c">uloop_fd_delete</a>(&amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#af9b7da62766d014bf03edda730edf6d6">sock</a>);</div>
<div class="line"><span class="lineno">   31</span>    close(cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#af9b7da62766d014bf03edda730edf6d6">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>);</div>
<div class="line"><span class="lineno">   32</span>    free(cl);</div>
<div class="line"><span class="lineno">   33</span>}</div>
<div class="ttc" id="aubusd_8h_html_aba92530b6ba85fd3a1ce8ad18cde741c"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#aba92530b6ba85fd3a1ce8ad18cde741c">ubusd_proto_free_client</a></div><div class="ttdeci">void ubusd_proto_free_client(struct ubus_client *cl)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d8a/ubusd__proto_8c_source.html#l00600">ubusd_proto.c:600</a></div></div>
<div class="ttc" id="aubusd_8h_html_acc3894569e20b93c18061181c212342d"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#acc3894569e20b93c18061181c212342d">ubusd_monitor_disconnect</a></div><div class="ttdeci">void ubusd_monitor_disconnect(struct ubus_client *cl)</div><div class="ttdef"><b>Definition</b> <a href="../../db/dc5/ubusd__monitor_8c_source.html#l00065">ubusd_monitor.c:65</a></div></div>
<div class="ttc" id="aubusd_8h_html_aeabc7d62295447c76dd31808c28a8c4c"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#aeabc7d62295447c76dd31808c28a8c4c">ubus_msg_buf_list::list</a></div><div class="ttdeci">struct list_head list</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00040">ubusd.h:40</a></div></div>
<div class="ttc" id="auloop_8c_html_a73e0613a3dcdc677611d2fd6efdcca9c"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c">uloop_fd_delete</a></div><div class="ttdeci">int uloop_fd_delete(struct uloop_fd *fd)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00265">uloop.c:265</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d56/uloop_8h_source.html#l00065">uloop_fd::fd</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00040">ubus_msg_buf_list::list</a>, <a class="el" href="../../da/d23/list_8h_source.html#l00146">list_for_each_entry_safe</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00070">ubus_client::pending_msg_fd</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00052">ubus_client::sock</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00063">ubus_client::tx_queue</a>, <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00136">ubus_msg_list_free()</a>, <a class="el" href="../../db/dc5/ubusd__monitor_8c_source.html#l00065">ubusd_monitor_disconnect()</a>, <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00600">ubusd_proto_free_client()</a>, and <a class="el" href="../../d1/d08/uloop_8c_source.html#l00265">uloop_fd_delete()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00057">client_cb()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dd3/ubusd__main_8c_aad8d8dc892f0e4cb324b52fef8651c26_cgraph.png" border="0" usemap="#add/dd3/ubusd__main_8c_aad8d8dc892f0e4cb324b52fef8651c26_cgraph" alt=""/></div>
<map name="add/dd3/ubusd__main_8c_aad8d8dc892f0e4cb324b52fef8651c26_cgraph" id="add/dd3/ubusd__main_8c_aad8d8dc892f0e4cb324b52fef8651c26_cgraph">
<area shape="rect" title=" " alt="" coords="5,500,258,534"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a7685d99564c18e282d91b3bdb61c32ac" title=" " alt="" coords="1206,140,1403,174"/>
<area shape="poly" title=" " alt="" coords="149,498,219,436,330,349,397,303,469,260,544,221,622,191,696,170,773,155,850,145,927,139,1071,137,1191,143,1190,148,1071,142,927,144,851,150,774,160,697,175,624,196,547,226,471,264,400,308,333,353,223,440,153,502"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#acc3894569e20b93c18061181c212342d" title=" " alt="" coords="306,90,575,123"/>
<area shape="poly" title=" " alt="" coords="133,499,147,432,178,335,200,283,228,231,263,182,304,141,322,128,325,133,307,145,267,186,233,234,205,285,183,337,152,434,138,501"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aba92530b6ba85fd3a1ce8ad18cde741c" title=" " alt="" coords="320,798,561,831"/>
<area shape="poly" title=" " alt="" coords="152,533,412,785,408,788,149,536"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c" title=" " alt="" coords="357,1052,524,1086"/>
<area shape="poly" title=" " alt="" coords="144,533,211,662,308,843,423,1037,418,1040,303,845,206,665,139,536"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae1cde0f50b85945cfff23be4fc1586f4" title=" " alt="" coords="1525,31,1648,65"/>
<area shape="poly" title=" " alt="" coords="1349,137,1526,68,1528,73,1351,142"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a19a646e5c3d7ddd2cb4004d68896f12a" title=" " alt="" coords="1506,191,1667,225"/>
<area shape="poly" title=" " alt="" coords="1402,172,1491,188,1490,193,1401,177"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae0988579c6b622299ee0f79accbf0779" title=" " alt="" coords="2111,136,2205,170"/>
<area shape="poly" title=" " alt="" coords="1647,28,1706,15,1778,5,1855,4,1893,8,1930,16,1988,37,2042,66,2089,97,2126,124,2123,129,2086,101,2039,70,1985,42,1929,21,1892,13,1854,9,1778,11,1707,20,1648,33"/>
<area shape="rect" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4" title=" " alt="" coords="1752,31,1921,65"/>
<area shape="poly" title=" " alt="" coords="1648,45,1737,45,1737,51,1648,51"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#a43f63f868886320fb36981be6e4ccde1" title=" " alt="" coords="630,90,835,123"/>
<area shape="poly" title=" " alt="" coords="575,104,615,104,615,109,575,109"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#aee0b705d52b50ba29f429de1b04ff8d4" title=" " alt="" coords="908,60,1113,94"/>
<area shape="poly" title=" " alt="" coords="531,86,623,75,763,69,892,70,892,75,763,74,623,80,532,92"/>
<area shape="rect" href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title=" " alt="" coords="1978,296,2063,330"/>
<area shape="poly" title=" " alt="" coords="1114,85,1264,102,1430,125,1564,147,1696,176,1816,200,1868,214,1931,242,1963,262,1992,284,1989,288,1960,266,1928,246,1866,219,1815,205,1695,181,1563,153,1430,131,1263,108,1113,90"/>
<area shape="poly" title=" " alt="" coords="2034,294,2130,181,2134,184,2038,298"/>
<area shape="poly" title=" " alt="" coords="446,796,494,694,535,620,586,538,647,453,718,372,799,300,843,268,889,241,938,224,1003,212,1081,204,1166,199,1341,197,1490,201,1490,206,1341,202,1167,204,1082,209,1004,217,939,229,891,246,846,273,802,304,722,376,651,457,590,541,539,622,499,696,451,798"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59" title=" " alt="" coords="660,938,806,971"/>
<area shape="poly" title=" " alt="" coords="469,830,538,872,624,916,659,930,657,935,622,921,535,876,466,834"/>
<area shape="rect" href="../../d6/d41/ubusd__id_8h.html#a75eac2b0fe238d440cb31282163bfeb1" title=" " alt="" coords="1235,844,1374,878"/>
<area shape="poly" title=" " alt="" coords="558,829,625,844,698,864,773,890,844,923,859,934,868,946,877,957,891,965,958,989,1013,999,1040,998,1067,993,1129,966,1146,949,1153,930,1160,909,1177,889,1197,877,1219,869,1221,874,1200,882,1180,893,1165,911,1158,932,1151,952,1132,970,1069,998,1040,1003,1013,1004,956,994,889,970,873,961,864,950,855,938,841,928,771,895,696,869,623,849,556,835"/>
<area shape="rect" href="../../dd/d84/ubusd__acl_8c.html#a5b54d3d2bf7a16054d9f166ee7ba5a92" title=" " alt="" coords="624,995,842,1029"/>
<area shape="poly" title=" " alt="" coords="457,830,524,904,571,946,624,982,634,986,632,991,622,986,568,950,520,908,453,834"/>
<area shape="rect" href="../../df/d0e/ubusd__obj_8c.html#af73eaf6c25db903d28f1a0a94dbecdf3" title=" " alt="" coords="638,711,827,745"/>
<area shape="poly" title=" " alt="" coords="499,795,658,747,660,752,501,800"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#aff86971e7141b6e9af18b7601066b106" title=" " alt="" coords="1530,844,1644,878"/>
<area shape="poly" title=" " alt="" coords="1374,859,1514,859,1514,864,1374,864"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#adcd20fb25eb25a816468018d720977e6" title=" " alt="" coords="1743,758,1930,791"/>
<area shape="poly" title=" " alt="" coords="1637,841,1694,820,1742,800,1760,794,1761,799,1744,805,1696,825,1639,846"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#a6de877c20c7b55fa52c80e7be87715fa" title=" " alt="" coords="1787,815,1886,849"/>
<area shape="poly" title=" " alt="" coords="1644,852,1771,837,1772,842,1644,857"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#a678c2372f389572c6513ffe9bb65d73f" title=" " alt="" coords="1773,930,1900,963"/>
<area shape="poly" title=" " alt="" coords="1634,876,1744,916,1763,922,1761,927,1742,921,1632,881"/>
<area shape="rect" href="../../da/d23/list_8h.html#abb4dd1eb7346eb35ea621351220e80ce" title=" " alt="" coords="1779,872,1894,906"/>
<area shape="poly" title=" " alt="" coords="1644,865,1764,878,1763,884,1644,870"/>
<area shape="poly" title=" " alt="" coords="1803,758,1799,748,1804,739,1817,733,1837,731,1858,734,1870,740,1867,745,1856,739,1836,736,1818,738,1808,743,1805,749,1808,756"/>
<area shape="poly" title=" " alt="" coords="1899,935,1915,928,1928,917,1941,898,1952,873,1972,808,1988,729,1999,642,2012,471,2016,346,2021,346,2017,471,2004,642,1993,729,1978,809,1957,875,1945,900,1932,920,1918,932,1901,940"/>
<area shape="poly" title=" " alt="" coords="738,710,757,662,789,596,833,525,859,491,888,461,988,371,1031,336,1075,308,1121,287,1173,272,1233,263,1303,260,1588,260,1692,264,1796,274,1963,300,1962,305,1795,280,1692,269,1588,265,1303,265,1233,268,1174,277,1123,292,1078,313,1035,341,991,375,892,464,863,495,837,528,793,599,762,664,743,712"/>
<area shape="poly" title=" " alt="" coords="753,743,811,791,850,816,891,835,976,856,1064,867,1148,869,1220,867,1220,872,1148,875,1064,872,975,862,889,840,847,820,808,795,750,747"/>
<area shape="poly" title=" " alt="" coords="828,736,1131,776,1281,801,1430,829,1514,845,1513,850,1430,835,1280,806,1130,781,828,741"/>
<area shape="rect" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d" title=" " alt="" coords="1778,599,1895,633"/>
<area shape="poly" title=" " alt="" coords="828,728,1029,731,1279,729,1521,719,1620,708,1695,693,1751,670,1799,640,1802,644,1754,674,1696,698,1621,713,1521,724,1279,735,1029,736,828,733"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a44eb06251f30ca22ec9540f8dc4165e4" title=" " alt="" coords="1179,516,1430,550"/>
<area shape="poly" title=" " alt="" coords="751,708,810,662,849,637,889,616,957,591,1028,571,1163,545,1164,550,1029,576,959,596,891,621,851,642,813,666,755,713"/>
<area shape="rect" href="../../df/d0e/ubusd__obj_8c.html#a850b1d5538aa321d68d88db484da8f53" title=" " alt="" coords="890,791,1131,825"/>
<area shape="poly" title=" " alt="" coords="795,743,935,784,934,789,793,748"/>
<area shape="rect" href="../../df/d0e/ubusd__obj_8c.html#a2e0423e6d6af3222e185c23c60bd48c7" title=" " alt="" coords="915,475,1106,509"/>
<area shape="poly" title=" " alt="" coords="742,709,799,631,841,584,889,542,940,513,943,517,892,546,845,588,803,634,747,713"/>
<area shape="rect" href="../../d1/df2/ubusd__event_8c.html#a8e4375e2859cf5e629cd1728d4b4c08d" title=" " alt="" coords="899,900,1122,956"/>
<area shape="poly" title=" " alt="" coords="750,744,808,808,848,846,892,879,911,890,909,895,889,883,844,850,804,812,746,747"/>
<area shape="rect" href="../../d1/df2/ubusd__event_8c.html#a2ec3c0dbb6c1ce2520caf0ef0555a303" title=" " alt="" coords="895,631,1126,665"/>
<area shape="poly" title=" " alt="" coords="793,708,934,667,935,672,795,713"/>
<area shape="poly" title=" " alt="" coords="1413,514,1428,503,1450,478,1458,452,1463,423,1476,388,1522,305,1564,236,1568,239,1526,307,1480,390,1469,424,1463,453,1454,480,1432,507,1415,518"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1517,459,1656,493"/>
<area shape="poly" title=" " alt="" coords="1390,513,1501,490,1502,496,1391,518"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#ab812f2d14bed983bbb71ee3d2f642e51" title=" " alt="" coords="1478,516,1695,550"/>
<area shape="poly" title=" " alt="" coords="1430,531,1462,531,1462,536,1430,536"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#abc9a8e0d7133a3c01b42e0ce3d92ce43" title=" " alt="" coords="1510,402,1664,435"/>
<area shape="poly" title=" " alt="" coords="1408,513,1428,503,1444,489,1452,475,1460,459,1476,444,1494,435,1496,440,1480,449,1465,463,1456,477,1448,493,1432,507,1410,518"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ac663b82c91f957ef4dea52b243cb1f89" title=" " alt="" coords="1502,574,1672,607"/>
<area shape="poly" title=" " alt="" coords="1391,548,1487,568,1486,573,1390,553"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#abf3e73f0aa9945ec083cbee2c8275c89" title=" " alt="" coords="1492,631,1682,665"/>
<area shape="poly" title=" " alt="" coords="1337,548,1401,583,1479,617,1497,624,1495,629,1477,622,1399,587,1334,553"/>
<area shape="poly" title=" " alt="" coords="1673,597,1763,606,1762,611,1672,602"/>
<area shape="poly" title=" " alt="" coords="1131,800,1250,791,1392,777,1544,756,1695,727,1766,714,1824,706,1850,698,1875,687,1901,669,1928,643,1954,609,1975,570,1990,529,2002,487,2014,408,2017,346,2022,346,2019,408,2007,488,1995,531,1979,573,1958,612,1932,647,1904,673,1878,691,1852,703,1825,711,1767,720,1696,732,1545,761,1392,782,1250,797,1131,805"/>
<area shape="poly" title=" " alt="" coords="1108,823,1220,843,1220,849,1107,828"/>
<area shape="poly" title=" " alt="" coords="1060,472,1242,414,1358,382,1478,356,1613,336,1748,323,1962,312,1962,317,1749,328,1614,341,1478,361,1360,387,1243,419,1062,477"/>
<area shape="poly" title=" " alt="" coords="1044,507,1118,545,1224,594,1348,641,1413,660,1479,675,1539,685,1587,689,1635,685,1695,675,1745,659,1791,638,1793,643,1747,664,1696,680,1635,691,1587,694,1538,690,1477,680,1412,665,1347,646,1222,599,1116,550,1042,512"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aabbe7c769da84e401d67eb79203c3ea7" title=" " alt="" coords="1179,459,1430,493"/>
<area shape="poly" title=" " alt="" coords="1106,484,1163,481,1164,486,1106,489"/>
<area shape="poly" title=" " alt="" coords="1322,457,1554,234,1558,238,1325,461"/>
<area shape="poly" title=" " alt="" coords="1330,456,1397,418,1442,398,1491,380,1543,367,1595,362,1647,368,1697,387,1724,405,1747,428,1785,482,1812,537,1829,583,1824,585,1807,539,1781,484,1743,432,1720,410,1694,392,1646,373,1595,368,1544,372,1492,385,1444,402,1400,423,1333,461"/>
<area shape="poly" title=" " alt="" coords="1430,473,1501,473,1501,479,1430,479"/>
<area shape="poly" title=" " alt="" coords="1391,491,1486,510,1485,515,1390,496"/>
<area shape="poly" title=" " alt="" coords="1390,456,1494,435,1495,440,1391,461"/>
<area shape="poly" title=" " alt="" coords="1410,491,1432,502,1448,516,1456,532,1465,547,1480,560,1489,566,1486,570,1476,565,1460,550,1452,534,1444,520,1428,506,1408,496"/>
<area shape="rect" href="../../d1/df2/ubusd__event_8c.html#a043f72dcdf33700472dfd013b1397ecf" title=" " alt="" coords="1201,902,1408,959"/>
<area shape="poly" title=" " alt="" coords="1122,926,1186,927,1186,932,1122,932"/>
<area shape="poly" title=" " alt="" coords="1366,957,1483,1003,1556,1023,1633,1038,1713,1044,1790,1038,1828,1029,1863,1015,1897,997,1928,974,1936,962,1944,941,1960,877,1986,692,2004,491,2014,345,2020,346,2010,492,1991,693,1965,878,1949,943,1941,965,1932,978,1900,1002,1865,1020,1829,1034,1791,1043,1713,1050,1633,1044,1554,1029,1481,1008,1364,962"/>
<area shape="poly" title=" " alt="" coords="1407,903,1513,876,1515,881,1408,908"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#ae98d2f54596aacb1f0f176d0e565e2e2" title=" " alt="" coords="641,1052,825,1086"/>
<area shape="poly" title=" " alt="" coords="524,1067,625,1067,625,1072,524,1072"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#abe443fe3f794c14f0aaa0c5f18a27ddd" title=" " alt="" coords="623,1110,842,1143"/>
<area shape="poly" title=" " alt="" coords="524,1083,629,1104,628,1109,523,1088"/>
</map>
</div>

</div>
</div>
<a id="a3c04138a5bfe5d72780bb7e82a18e627" name="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>argc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>argv</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00265">265</a> of file <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html">ubusd_main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  266</span>{</div>
<div class="line"><span class="lineno">  267</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="../../dc/dab/procd_8h.html#ab29f32d8b129b17967a560ad9703e382">ubus_socket</a> = UBUS_UNIX_SOCKET;</div>
<div class="line"><span class="lineno">  268</span>    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><span class="lineno">  269</span>    <span class="keywordtype">int</span> ch;</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>    signal(SIGPIPE, SIG_IGN);</div>
<div class="line"><span class="lineno">  272</span>    signal(SIGHUP, <a class="code hl_function" href="#ad4fc211275d5cc53c3a39146db938b40">sighup_handler</a>);</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>    <a class="code hl_function" href="../../d9/d65/ulog_8c.html#a962767ce46bee1f4c9b44ecd408dd669">ulog_open</a>(<a class="code hl_enumvalue" href="../../df/df3/ulog_8h.html#abed82baf7f470b522273a3e37c24c600ab84d66e68af94f2a6904e4a9ac1d27a4">ULOG_KMSG</a> | <a class="code hl_enumvalue" href="../../df/df3/ulog_8h.html#abed82baf7f470b522273a3e37c24c600a7dae4d40f7113445dfc3e27553e90d48">ULOG_SYSLOG</a>, LOG_DAEMON, <span class="stringliteral">&quot;ubusd&quot;</span>);</div>
<div class="line"><span class="lineno">  275</span>    openlog(<span class="stringliteral">&quot;ubusd&quot;</span>, LOG_PID, LOG_DAEMON);</div>
<div class="line"><span class="lineno">  276</span>    <a class="code hl_function" href="../../d1/d08/uloop_8c.html#ae960d01033fb72572bc1aa539a501fe7">uloop_init</a>();</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>    <span class="keywordflow">while</span> ((ch = getopt(argc, argv, <span class="stringliteral">&quot;A:s:&quot;</span>)) != -1) {</div>
<div class="line"><span class="lineno">  279</span>        <span class="keywordflow">switch</span> (ch) {</div>
<div class="line"><span class="lineno">  280</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div>
<div class="line"><span class="lineno">  281</span>            <a class="code hl_variable" href="../../dc/dab/procd_8h.html#ab29f32d8b129b17967a560ad9703e382">ubus_socket</a> = optarg;</div>
<div class="line"><span class="lineno">  282</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  283</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span>:</div>
<div class="line"><span class="lineno">  284</span>            <a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a26a981ba69867d98d31a9a1dcccc2197">ubusd_acl_dir</a> = optarg;</div>
<div class="line"><span class="lineno">  285</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  286</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  287</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/d26/jail_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f">usage</a>(argv[0]);</div>
<div class="line"><span class="lineno">  288</span>        }</div>
<div class="line"><span class="lineno">  289</span>    }</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>    <a class="code hl_function" href="#a338d80cf8692d97a0a6d5f188d000113">mkdir_sockdir</a>();</div>
<div class="line"><span class="lineno">  292</span>    unlink(<a class="code hl_variable" href="../../dc/dab/procd_8h.html#ab29f32d8b129b17967a560ad9703e382">ubus_socket</a>);</div>
<div class="line"><span class="lineno">  293</span>    umask(0111);</div>
<div class="line"><span class="lineno">  294</span>    <a class="code hl_variable" href="#abd686ae00120ec939bbcd9aaadf8634a">server_fd</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a> = <a class="code hl_function" href="../../d2/d90/usock_8c.html#aa75bb163bb0164a604ab8b9c554dddc5">usock</a>(<a class="code hl_define" href="../../d1/dd5/usock_8h.html#a64a294fea616500ad02b1110e6a1e515">USOCK_UNIX</a> | <a class="code hl_define" href="../../d1/dd5/usock_8h.html#af284063a38222098ab822c5ba4b78bdc">USOCK_SERVER</a> | <a class="code hl_define" href="../../d1/dd5/usock_8h.html#aa561cfaf87560a0d14b4ffda00349603">USOCK_NONBLOCK</a>, <a class="code hl_variable" href="../../dc/dab/procd_8h.html#ab29f32d8b129b17967a560ad9703e382">ubus_socket</a>, NULL);</div>
<div class="line"><span class="lineno">  295</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#abd686ae00120ec939bbcd9aaadf8634a">server_fd</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a> &lt; 0) {</div>
<div class="line"><span class="lineno">  296</span>        perror(<span class="stringliteral">&quot;usock&quot;</span>);</div>
<div class="line"><span class="lineno">  297</span>        ret = -1;</div>
<div class="line"><span class="lineno">  298</span>        <span class="keywordflow">goto</span> out;</div>
<div class="line"><span class="lineno">  299</span>    }</div>
<div class="line"><span class="lineno">  300</span>    <a class="code hl_function" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0">uloop_fd_add</a>(&amp;<a class="code hl_variable" href="#abd686ae00120ec939bbcd9aaadf8634a">server_fd</a>, <a class="code hl_define" href="../../dc/d56/uloop_8h.html#ac20cd5fed660ef784791db47283d9ebf">ULOOP_READ</a> | <a class="code hl_define" href="../../dc/d56/uloop_8h.html#ae0a4bba54063aede5669dbd4782ad6f5">ULOOP_EDGE_TRIGGER</a>);</div>
<div class="line"><span class="lineno">  301</span>    <a class="code hl_function" href="../../dd/d84/ubusd__acl_8c.html#aee4a5e1b0cb03672435025aa003573ba">ubusd_acl_load</a>();</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>    <a class="code hl_function" href="../../dc/d56/uloop_8h.html#aba97081464ac3304fef640bcfc7d3077">uloop_run</a>();</div>
<div class="line"><span class="lineno">  304</span>    unlink(<a class="code hl_variable" href="../../dc/dab/procd_8h.html#ab29f32d8b129b17967a560ad9703e382">ubus_socket</a>);</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>out:</div>
<div class="line"><span class="lineno">  307</span>    <a class="code hl_function" href="../../d1/d08/uloop_8c.html#ac0bcdd57d004a600844745bd38e83a2d">uloop_done</a>();</div>
<div class="line"><span class="lineno">  308</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  309</span>}</div>
<div class="ttc" id="ajail_8c_html_ad96d407a911fbb914fa8e4cfbf2faf0f"><div class="ttname"><a href="../../dd/d26/jail_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f">usage</a></div><div class="ttdeci">static void usage(void)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d26/jail_8c_source.html#l01001">jail.c:1001</a></div></div>
<div class="ttc" id="aprocd_8h_html_ab29f32d8b129b17967a560ad9703e382"><div class="ttname"><a href="../../dc/dab/procd_8h.html#ab29f32d8b129b17967a560ad9703e382">ubus_socket</a></div><div class="ttdeci">char * ubus_socket</div><div class="ttdef"><b>Definition</b> <a href="../../de/d89/procd_2ubus_8c_source.html#l00022">ubus.c:22</a></div></div>
<div class="ttc" id="aubusd_8h_html_a26a981ba69867d98d31a9a1dcccc2197"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a26a981ba69867d98d31a9a1dcccc2197">ubusd_acl_dir</a></div><div class="ttdeci">const char * ubusd_acl_dir</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d84/ubusd__acl_8c_source.html#l00071">ubusd_acl.c:71</a></div></div>
<div class="ttc" id="aubusd__acl_8c_html_aee4a5e1b0cb03672435025aa003573ba"><div class="ttname"><a href="../../dd/d84/ubusd__acl_8c.html#aee4a5e1b0cb03672435025aa003573ba">ubusd_acl_load</a></div><div class="ttdeci">void ubusd_acl_load(void)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d84/ubusd__acl_8c_source.html#l00445">ubusd_acl.c:445</a></div></div>
<div class="ttc" id="aubusd__main_8c_html_a338d80cf8692d97a0a6d5f188d000113"><div class="ttname"><a href="#a338d80cf8692d97a0a6d5f188d000113">mkdir_sockdir</a></div><div class="ttdeci">static void mkdir_sockdir()</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dd3/ubusd__main_8c_source.html#l00250">ubusd_main.c:250</a></div></div>
<div class="ttc" id="aubusd__main_8c_html_abd686ae00120ec939bbcd9aaadf8634a"><div class="ttname"><a href="#abd686ae00120ec939bbcd9aaadf8634a">server_fd</a></div><div class="ttdeci">static struct uloop_fd server_fd</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dd3/ubusd__main_8c_source.html#l00231">ubusd_main.c:231</a></div></div>
<div class="ttc" id="aubusd__main_8c_html_ad4fc211275d5cc53c3a39146db938b40"><div class="ttname"><a href="#ad4fc211275d5cc53c3a39146db938b40">sighup_handler</a></div><div class="ttdeci">static void sighup_handler(int sig)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dd3/ubusd__main_8c_source.html#l00245">ubusd_main.c:245</a></div></div>
<div class="ttc" id="aulog_8c_html_a962767ce46bee1f4c9b44ecd408dd669"><div class="ttname"><a href="../../d9/d65/ulog_8c.html#a962767ce46bee1f4c9b44ecd408dd669">ulog_open</a></div><div class="ttdeci">void ulog_open(int channels, int facility, const char *ident)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d65/ulog_8c_source.html#l00129">ulog.c:129</a></div></div>
<div class="ttc" id="aulog_8h_html_abed82baf7f470b522273a3e37c24c600a7dae4d40f7113445dfc3e27553e90d48"><div class="ttname"><a href="../../df/df3/ulog_8h.html#abed82baf7f470b522273a3e37c24c600a7dae4d40f7113445dfc3e27553e90d48">ULOG_SYSLOG</a></div><div class="ttdeci">@ ULOG_SYSLOG</div><div class="ttdef"><b>Definition</b> <a href="../../df/df3/ulog_8h_source.html#l00028">ulog.h:28</a></div></div>
<div class="ttc" id="aulog_8h_html_abed82baf7f470b522273a3e37c24c600ab84d66e68af94f2a6904e4a9ac1d27a4"><div class="ttname"><a href="../../df/df3/ulog_8h.html#abed82baf7f470b522273a3e37c24c600ab84d66e68af94f2a6904e4a9ac1d27a4">ULOG_KMSG</a></div><div class="ttdeci">@ ULOG_KMSG</div><div class="ttdef"><b>Definition</b> <a href="../../df/df3/ulog_8h_source.html#l00027">ulog.h:27</a></div></div>
<div class="ttc" id="auloop_8c_html_ac0bcdd57d004a600844745bd38e83a2d"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#ac0bcdd57d004a600844745bd38e83a2d">uloop_done</a></div><div class="ttdeci">void uloop_done(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00686">uloop.c:686</a></div></div>
<div class="ttc" id="auloop_8c_html_ae960d01033fb72572bc1aa539a501fe7"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#ae960d01033fb72572bc1aa539a501fe7">uloop_init</a></div><div class="ttdeci">int uloop_init(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00150">uloop.c:150</a></div></div>
<div class="ttc" id="auloop_8h_html_aba97081464ac3304fef640bcfc7d3077"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#aba97081464ac3304fef640bcfc7d3077">uloop_run</a></div><div class="ttdeci">static int uloop_run(void)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00147">uloop.h:147</a></div></div>
<div class="ttc" id="ausock_8c_html_aa75bb163bb0164a604ab8b9c554dddc5"><div class="ttname"><a href="../../d2/d90/usock_8c.html#aa75bb163bb0164a604ab8b9c554dddc5">usock</a></div><div class="ttdeci">int usock(int type, const char *host, const char *service)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d90/usock_8c_source.html#l00252">usock.c:252</a></div></div>
<div class="ttc" id="ausock_8h_html_a64a294fea616500ad02b1110e6a1e515"><div class="ttname"><a href="../../d1/dd5/usock_8h.html#a64a294fea616500ad02b1110e6a1e515">USOCK_UNIX</a></div><div class="ttdeci">#define USOCK_UNIX</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dd5/usock_8h_source.html#l00031">usock.h:31</a></div></div>
<div class="ttc" id="ausock_8h_html_aa561cfaf87560a0d14b4ffda00349603"><div class="ttname"><a href="../../d1/dd5/usock_8h.html#aa561cfaf87560a0d14b4ffda00349603">USOCK_NONBLOCK</a></div><div class="ttdeci">#define USOCK_NONBLOCK</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dd5/usock_8h_source.html#l00027">usock.h:27</a></div></div>
<div class="ttc" id="ausock_8h_html_af284063a38222098ab822c5ba4b78bdc"><div class="ttname"><a href="../../d1/dd5/usock_8h.html#af284063a38222098ab822c5ba4b78bdc">USOCK_SERVER</a></div><div class="ttdeci">#define USOCK_SERVER</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dd5/usock_8h_source.html#l00025">usock.h:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d56/uloop_8h_source.html#l00065">uloop_fd::fd</a>, <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00250">mkdir_sockdir()</a>, <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00231">server_fd</a>, <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00245">sighup_handler()</a>, <a class="el" href="../../de/d89/procd_2ubus_8c_source.html#l00022">ubus_socket</a>, <a class="el" href="../../dd/d84/ubusd__acl_8c_source.html#l00071">ubusd_acl_dir</a>, <a class="el" href="../../dd/d84/ubusd__acl_8c_source.html#l00445">ubusd_acl_load()</a>, <a class="el" href="../../df/df3/ulog_8h_source.html#l00027">ULOG_KMSG</a>, <a class="el" href="../../d9/d65/ulog_8c_source.html#l00129">ulog_open()</a>, <a class="el" href="../../df/df3/ulog_8h_source.html#l00028">ULOG_SYSLOG</a>, <a class="el" href="../../d1/d08/uloop_8c_source.html#l00686">uloop_done()</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00049">ULOOP_EDGE_TRIGGER</a>, <a class="el" href="../../d1/d08/uloop_8c_source.html#l00235">uloop_fd_add()</a>, <a class="el" href="../../d1/d08/uloop_8c_source.html#l00150">uloop_init()</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00047">ULOOP_READ</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00147">uloop_run()</a>, <a class="el" href="../../dd/d26/jail_8c_source.html#l01001">usage()</a>, <a class="el" href="../../d2/d90/usock_8c_source.html#l00252">usock()</a>, <a class="el" href="../../d1/dd5/usock_8h_source.html#l00027">USOCK_NONBLOCK</a>, <a class="el" href="../../d1/dd5/usock_8h_source.html#l00025">USOCK_SERVER</a>, and <a class="el" href="../../d1/dd5/usock_8h_source.html#l00031">USOCK_UNIX</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dd3/ubusd__main_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph.png" border="0" usemap="#add/dd3/ubusd__main_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph" alt=""/></div>
<map name="add/dd3/ubusd__main_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph" id="add/dd3/ubusd__main_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph">
<area shape="rect" title=" " alt="" coords="5,663,73,696"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#a338d80cf8692d97a0a6d5f188d000113" title=" " alt="" coords="127,413,279,447"/>
<area shape="poly" title=" " alt="" coords="40,662,47,622,61,570,84,514,100,488,119,464,132,453,135,457,123,468,104,491,89,517,66,572,52,624,45,663"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#ad4fc211275d5cc53c3a39146db938b40" title=" " alt="" coords="121,523,285,556"/>
<area shape="poly" title=" " alt="" coords="46,661,74,614,95,588,119,565,124,562,127,566,122,570,99,591,78,617,51,664"/>
<area shape="rect" href="../../dd/d84/ubusd__acl_8c.html#aee4a5e1b0cb03672435025aa003573ba" title=" " alt="" coords="349,435,511,468"/>
<area shape="poly" title=" " alt="" coords="41,662,48,629,63,587,86,544,101,525,119,508,156,490,209,476,332,458,333,463,210,482,158,495,122,512,105,528,90,547,68,589,54,630,46,663"/>
<area shape="rect" href="../../d9/d65/ulog_8c.html#a962767ce46bee1f4c9b44ecd408dd669" title=" " alt="" coords="145,580,261,614"/>
<area shape="poly" title=" " alt="" coords="67,660,119,630,145,618,148,623,122,635,70,664"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ac0bcdd57d004a600844745bd38e83a2d" title=" " alt="" coords="366,604,493,638"/>
<area shape="poly" title=" " alt="" coords="72,672,350,630,351,635,73,677"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0" title=" " alt="" coords="624,773,768,807"/>
<area shape="poly" title=" " alt="" coords="64,695,122,733,224,785,271,800,333,814,405,822,478,821,547,815,608,806,609,811,548,821,478,827,405,827,333,819,270,806,222,789,119,738,61,699"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae960d01033fb72572bc1aa539a501fe7" title=" " alt="" coords="148,689,258,723"/>
<area shape="poly" title=" " alt="" coords="73,682,133,692,132,697,73,688"/>
<area shape="rect" href="../../dc/d56/uloop_8h.html#aba97081464ac3304fef640bcfc7d3077" title=" " alt="" coords="146,880,260,914"/>
<area shape="poly" title=" " alt="" coords="46,696,55,730,70,773,92,819,123,859,136,870,133,874,119,863,87,821,65,775,50,731,41,697"/>
<area shape="rect" href="../../dd/d26/jail_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f" title=" " alt="" coords="164,937,242,971"/>
<area shape="poly" title=" " alt="" coords="44,696,48,741,60,802,84,867,101,898,122,924,151,942,148,946,119,928,96,901,79,870,55,804,43,742,38,697"/>
<area shape="rect" href="../../d2/d90/usock_8c.html#aa75bb163bb0164a604ab8b9c554dddc5" title=" " alt="" coords="165,995,241,1028"/>
<area shape="poly" title=" " alt="" coords="42,697,44,751,53,827,63,869,77,909,97,948,123,982,136,992,151,1000,149,1005,133,997,119,985,92,951,72,911,58,870,48,828,38,752,37,697"/>
<area shape="poly" title=" " alt="" coords="247,520,369,472,371,477,249,525"/>
<area shape="rect" href="../../dd/d84/ubusd__acl_8c.html#a4b15243c3f4548a3bfa98899d55a0553" title=" " alt="" coords="596,320,796,354"/>
<area shape="poly" title=" " alt="" coords="453,432,506,397,573,362,590,356,592,361,575,367,509,401,456,437"/>
<area shape="rect" href="../../dd/d84/ubusd__acl_8c.html#a64f201561c29a4fc1e771965716cd0d3" title=" " alt="" coords="574,166,818,223"/>
<area shape="poly" title=" " alt="" coords="446,432,572,306,651,231,655,235,576,309,450,436"/>
<area shape="rect" href="../../d1/df2/ubusd__event_8c.html#a61cd69c42b611b4f218395e2eb1a7cbd" title=" " alt="" coords="599,377,793,411"/>
<area shape="poly" title=" " alt="" coords="511,431,599,412,600,417,512,437"/>
<area shape="rect" href="../../d5/d9a/vlist_8c.html#a62a8ae640752531c644d53311b98d53a" title=" " alt="" coords="639,435,753,468"/>
<area shape="poly" title=" " alt="" coords="511,449,623,449,623,454,511,454"/>
<area shape="rect" href="../../dd/d1d/vlist_8h.html#ac66f6ee1f1beb49157d2e737c68713ba" title=" " alt="" coords="629,492,763,526"/>
<area shape="poly" title=" " alt="" coords="512,466,615,489,614,494,511,472"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="937,235,1076,268"/>
<area shape="poly" title=" " alt="" coords="742,317,865,277,921,264,922,269,866,282,744,322"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="936,292,1077,326"/>
<area shape="poly" title=" " alt="" coords="796,325,920,314,921,319,796,331"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#a7f16b1915ac39b6888614f5fcc0661f8" title=" " alt="" coords="866,349,1147,383"/>
<area shape="poly" title=" " alt="" coords="796,344,851,349,850,354,796,349"/>
<area shape="rect" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4" title=" " alt="" coords="922,407,1091,440"/>
<area shape="poly" title=" " alt="" coords="788,352,819,362,843,378,867,393,908,406,906,411,865,398,840,383,816,367,786,357"/>
<area shape="rect" href="../../d5/d9a/vlist_8c.html#ac913b1e12f698be7f0d79ed459a68cd7" title=" " alt="" coords="955,464,1058,498"/>
<area shape="poly" title=" " alt="" coords="797,350,819,363,837,385,844,408,850,430,867,451,902,468,940,477,938,482,900,473,864,455,846,433,839,410,833,387,816,367,794,354"/>
<area shape="poly" title=" " alt="" coords="819,214,922,233,921,239,818,219"/>
<area shape="poly" title=" " alt="" coords="746,221,803,251,867,278,921,293,920,298,865,283,800,256,743,225"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="929,63,1084,96"/>
<area shape="poly" title=" " alt="" coords="743,163,800,132,865,105,913,91,915,97,867,110,803,137,746,168"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a02523c6489a895ee963d17b13582be7a" title=" " alt="" coords="925,120,1088,154"/>
<area shape="poly" title=" " alt="" coords="818,169,910,152,910,157,819,174"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="924,177,1089,211"/>
<area shape="poly" title=" " alt="" coords="818,192,908,192,908,197,818,197"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393" title=" " alt="" coords="911,5,1102,39"/>
<area shape="poly" title=" " alt="" coords="720,164,782,104,821,73,865,48,895,36,897,41,867,53,824,78,785,108,724,167"/>
<area shape="rect" href="../../d9/d65/ulog_8c.html#aa98943b7174469752250aa9314bf45ff" title=" " alt="" coords="371,547,488,580"/>
<area shape="poly" title=" " alt="" coords="261,586,355,572,356,577,262,591"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a13ca20f7af9aa4aa3057b1114e23e7f1" title=" " alt="" coords="582,549,810,583"/>
<area shape="poly" title=" " alt="" coords="493,605,595,584,596,589,494,610"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#afe30e87975d460220899f69103f90d0d" title=" " alt="" coords="588,607,804,640"/>
<area shape="poly" title=" " alt="" coords="494,619,572,620,572,625,494,624"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c" title=" " alt="" coords="923,688,1090,722"/>
<area shape="poly" title=" " alt="" coords="494,634,575,650,751,676,908,693,907,699,750,681,574,655,493,639"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a28e87c6264a681dc2a422d32794416c5" title=" " alt="" coords="592,716,800,750"/>
<area shape="poly" title=" " alt="" coords="495,632,528,647,543,659,552,671,561,683,576,695,603,708,601,713,573,699,558,687,548,674,539,663,525,651,493,637"/>
<area shape="poly" title=" " alt="" coords="768,772,817,760,936,724,938,729,818,765,769,777"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#a1b6212744c4241320adc3a2170525f20" title=" " alt="" coords="939,773,1074,807"/>
<area shape="poly" title=" " alt="" coords="769,788,924,788,924,793,769,793"/>
<area shape="poly" title=" " alt="" coords="242,686,332,646,350,640,352,645,334,651,244,691"/>
<area shape="poly" title=" " alt="" coords="259,706,577,724,576,729,258,712"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#a5b8f7c4e758eaf7384d7dafa9cd59502" title=" " alt="" coords="344,661,515,695"/>
<area shape="poly" title=" " alt="" coords="258,697,328,688,329,693,259,702"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae9d27835a99bfac45ed3f07a26287d7a" title=" " alt="" coords="373,771,487,804"/>
<area shape="poly" title=" " alt="" coords="253,721,367,762,365,767,251,726"/>
<area shape="poly" title=" " alt="" coords="487,785,608,787,608,792,487,791"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a14d4e1fa83f245cd59f0c68f48c90d75" title=" " alt="" coords="333,880,526,914"/>
<area shape="poly" title=" " alt="" coords="260,894,317,894,317,900,260,900"/>
<area shape="rect" href="../../d1/dd5/usock_8h.html#a7be021755da2683746e60598709bb718" title=" " alt="" coords="370,965,489,999"/>
<area shape="poly" title=" " alt="" coords="240,1004,354,989,355,994,241,1009"/>
<area shape="rect" href="../../d2/d90/usock_8c.html#a7794edcc739eb0b2e1440bf2f966647c" title=" " alt="" coords="368,1023,492,1056"/>
<area shape="poly" title=" " alt="" coords="241,1013,352,1027,351,1033,240,1019"/>
</map>
</div>

</div>
</div>
<a id="a338d80cf8692d97a0a6d5f188d000113" name="a338d80cf8692d97a0a6d5f188d000113"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a338d80cf8692d97a0a6d5f188d000113">&#9670;&#160;</a></span>mkdir_sockdir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mkdir_sockdir </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00250">250</a> of file <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html">ubusd_main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  251</span>{</div>
<div class="line"><span class="lineno">  252</span>    <span class="keywordtype">char</span> *<a class="code hl_variable" href="../../db/d3d/netifd_8c.html#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>, *tmp;</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>    <a class="code hl_variable" href="../../db/d3d/netifd_8c.html#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a> = strdup(UBUS_UNIX_SOCKET);</div>
<div class="line"><span class="lineno">  255</span>    tmp = strrchr(<a class="code hl_variable" href="../../db/d3d/netifd_8c.html#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><span class="lineno">  256</span>    <span class="keywordflow">if</span> (tmp) {</div>
<div class="line"><span class="lineno">  257</span>        *tmp = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  258</span>        mkdir(<a class="code hl_variable" href="../../db/d3d/netifd_8c.html#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>, 0755);</div>
<div class="line"><span class="lineno">  259</span>    }</div>
<div class="line"><span class="lineno">  260</span>    free(<a class="code hl_variable" href="../../db/d3d/netifd_8c.html#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>);</div>
<div class="line"><span class="lineno">  261</span>}</div>
<div class="ttc" id="anetifd_8c_html_af2c6d0302ae2ea1147a41c9d05d81e3a"><div class="ttname"><a href="../../db/d3d/netifd_8c.html#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a></div><div class="ttdeci">static char * ubus_sock_dir</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00051">netifd.c:51</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">ubus_sock_dir</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00265">main()</a>.</p>

</div>
</div>
<a id="a267b473df8c4d0aa4be8a445dc0ade60" name="a267b473df8c4d0aa4be8a445dc0ade60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a267b473df8c4d0aa4be8a445dc0ade60">&#9670;&#160;</a></span>server_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void server_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d56/uloop_8h.html#db/d9e/structuloop__fd">uloop_fd</a> *</td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>events</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00222">222</a> of file <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html">ubusd_main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  223</span>{</div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordtype">bool</span> next;</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno">  227</span>        next = <a class="code hl_function" href="#ac3c285a813814059551f5f446105b5af">get_next_connection</a>(fd-&gt;<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>);</div>
<div class="line"><span class="lineno">  228</span>    } <span class="keywordflow">while</span> (next);</div>
<div class="line"><span class="lineno">  229</span>}</div>
<div class="ttc" id="aubusd__main_8c_html_ac3c285a813814059551f5f446105b5af"><div class="ttname"><a href="#ac3c285a813814059551f5f446105b5af">get_next_connection</a></div><div class="ttdeci">static bool get_next_connection(int fd)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dd3/ubusd__main_8c_source.html#l00197">ubusd_main.c:197</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d56/uloop_8h_source.html#l00065">uloop_fd::fd</a>, and <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00197">get_next_connection()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dd3/ubusd__main_8c_a267b473df8c4d0aa4be8a445dc0ade60_cgraph.png" border="0" usemap="#add/dd3/ubusd__main_8c_a267b473df8c4d0aa4be8a445dc0ade60_cgraph" alt=""/></div>
<map name="add/dd3/ubusd__main_8c_a267b473df8c4d0aa4be8a445dc0ade60_cgraph" id="add/dd3/ubusd__main_8c_a267b473df8c4d0aa4be8a445dc0ade60_cgraph">
<area shape="rect" title=" " alt="" coords="5,1108,117,1142"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#ac3c285a813814059551f5f446105b5af" title=" " alt="" coords="165,1108,376,1142"/>
<area shape="poly" title=" " alt="" coords="117,1122,149,1122,149,1128,117,1128"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#a68e5902ffa76dfe0ac5324af9c7d22cb" title=" " alt="" coords="424,593,526,627"/>
<area shape="poly" title=" " alt="" coords="276,1107,459,640,464,642,281,1109"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0" title=" " alt="" coords="1514,1245,1659,1279"/>
<area shape="poly" title=" " alt="" coords="287,1141,346,1206,390,1247,441,1290,499,1330,562,1363,629,1386,664,1392,699,1394,1011,1394,1125,1394,1214,1390,1302,1376,1411,1346,1483,1318,1544,1285,1546,1290,1485,1323,1413,1352,1303,1381,1215,1395,1125,1399,1011,1400,699,1400,663,1397,628,1391,560,1368,496,1335,438,1294,386,1251,342,1209,283,1144"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a9b74f1028bad4948836b42094838eb64" title=" " alt="" coords="579,1108,822,1142"/>
<area shape="poly" title=" " alt="" coords="376,1122,564,1122,564,1128,376,1128"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="629,759,772,792"/>
<area shape="poly" title=" " alt="" coords="501,626,665,747,662,751,498,630"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1773,537,1915,571"/>
<area shape="poly" title=" " alt="" coords="527,612,574,614,700,617,827,614,1271,611,1464,603,1712,578,1758,571,1758,576,1713,584,1465,608,1271,617,827,620,700,622,574,620,527,617"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#aad8d8dc892f0e4cb324b52fef8651c26" title=" " alt="" coords="574,948,827,982"/>
<area shape="poly" title=" " alt="" coords="481,627,489,676,506,743,535,818,554,853,576,886,608,916,645,939,642,943,605,920,572,889,549,856,530,820,501,745,484,677,476,628"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a7685d99564c18e282d91b3bdb61c32ac" title=" " alt="" coords="911,891,1108,924"/>
<area shape="poly" title=" " alt="" coords="483,627,493,664,511,712,538,761,556,784,576,803,612,828,651,848,735,878,819,896,896,904,895,909,818,901,733,883,649,853,609,832,573,807,552,787,534,764,506,714,487,666,477,628"/>
<area shape="rect" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d" title=" " alt="" coords="1786,153,1902,187"/>
<area shape="poly" title=" " alt="" coords="475,593,485,502,503,370,516,302,532,240,551,188,572,153,622,104,669,68,717,44,766,30,818,22,874,19,1008,20,1303,20,1367,17,1423,12,1519,3,1564,4,1610,13,1660,31,1714,62,1733,81,1740,103,1746,124,1762,144,1773,151,1770,156,1759,148,1742,127,1735,105,1728,84,1711,66,1657,36,1609,18,1564,10,1519,9,1423,18,1367,23,1304,25,1008,25,874,25,818,27,767,35,719,49,672,73,625,108,576,156,555,190,537,241,522,303,508,371,490,502,481,593"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#a05ec3ebd839e77b52ac1a6ff54b7c647" title=" " alt="" coords="579,549,822,605"/>
<area shape="poly" title=" " alt="" coords="526,600,563,595,564,600,527,605"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae582a1a0e18dbe57e756c692f97d2a7d" title=" " alt="" coords="1495,123,1678,156"/>
<area shape="poly" title=" " alt="" coords="476,593,484,546,500,482,529,412,549,379,572,350,620,305,672,266,728,233,787,204,848,180,911,161,1039,134,1166,120,1285,115,1392,118,1480,124,1480,129,1391,123,1285,121,1166,125,1040,139,912,166,850,186,789,209,730,237,675,270,623,309,576,353,553,382,534,415,506,484,489,547,481,594"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#a6b03538b7a75504cb920317621b1cd6e" title=" " alt="" coords="1460,269,1713,303"/>
<area shape="poly" title=" " alt="" coords="481,592,515,527,541,489,572,455,650,388,721,336,787,297,854,268,925,246,1002,228,1192,197,1254,187,1303,183,1352,185,1413,197,1451,209,1487,224,1549,259,1546,263,1485,229,1449,214,1412,202,1351,191,1303,188,1254,193,1192,202,1003,234,926,251,856,273,790,302,724,341,653,392,576,459,546,493,520,530,486,594"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae88c2071350154e2eed8a6844e60a9da" title=" " alt="" coords="1762,263,1926,296"/>
<area shape="poly" title=" " alt="" coords="474,593,476,531,489,441,501,392,519,343,542,296,572,254,622,201,669,159,716,126,763,103,815,87,871,77,935,72,1008,70,1303,70,1367,68,1423,62,1519,51,1565,52,1611,59,1660,77,1714,108,1734,128,1743,150,1750,173,1763,198,1812,251,1809,254,1758,201,1745,175,1738,152,1730,131,1711,112,1658,82,1609,65,1564,57,1520,57,1423,67,1367,73,1304,76,1008,76,935,77,872,82,816,92,765,108,718,131,673,163,626,205,576,257,547,299,523,345,506,394,494,442,482,531,479,593"/>
<area shape="poly" title=" " alt="" coords="480,627,489,732,507,888,520,970,536,1046,555,1109,577,1153,620,1204,670,1246,725,1279,785,1306,849,1325,915,1338,984,1346,1052,1349,1189,1343,1316,1326,1427,1303,1514,1281,1515,1286,1428,1308,1317,1331,1189,1348,1052,1354,983,1351,915,1343,848,1330,783,1311,723,1284,667,1250,616,1207,572,1156,550,1111,531,1047,515,971,502,889,484,732,475,628"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#ad8fbea68d11defe37f3b8f10ef41eff2" title=" " alt="" coords="904,313,1115,369"/>
<area shape="poly" title=" " alt="" coords="495,591,531,563,573,535,662,486,753,442,916,373,918,378,755,447,664,491,576,539,534,567,499,595"/>
<area shape="poly" title=" " alt="" coords="746,791,807,811,875,828,1025,852,1144,863,1201,863,1262,858,1412,836,1502,819,1571,800,1636,771,1711,720,1747,688,1778,652,1824,583,1828,586,1782,655,1751,692,1714,724,1638,775,1573,805,1503,824,1413,841,1263,864,1201,868,1144,868,1025,857,874,833,805,816,744,796"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1982,481,2080,515"/>
<area shape="poly" title=" " alt="" coords="1902,534,1967,515,1968,520,1903,539"/>
<area shape="poly" title=" " alt="" coords="794,945,899,925,900,931,795,950"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#acc3894569e20b93c18061181c212342d" title=" " alt="" coords="875,948,1144,982"/>
<area shape="poly" title=" " alt="" coords="827,962,859,962,859,968,827,968"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aba92530b6ba85fd3a1ce8ad18cde741c" title=" " alt="" coords="889,1108,1130,1142"/>
<area shape="poly" title=" " alt="" coords="736,980,963,1098,960,1103,734,985"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c" title=" " alt="" coords="1761,1068,1927,1102"/>
<area shape="poly" title=" " alt="" coords="788,980,875,992,1009,997,1144,992,1192,988,1340,978,1456,972,1512,974,1571,980,1637,993,1714,1013,1763,1033,1806,1057,1803,1062,1760,1038,1712,1018,1635,998,1570,985,1511,979,1456,977,1340,984,1192,993,1144,997,1009,1003,874,997,787,985"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae1cde0f50b85945cfff23be4fc1586f4" title=" " alt="" coords="1241,1003,1364,1036"/>
<area shape="poly" title=" " alt="" coords="1109,922,1145,933,1208,961,1263,992,1260,997,1206,966,1143,938,1108,927"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a19a646e5c3d7ddd2cb4004d68896f12a" title=" " alt="" coords="1763,764,1925,798"/>
<area shape="poly" title=" " alt="" coords="1109,920,1233,931,1386,934,1468,930,1551,920,1633,904,1712,880,1742,866,1770,847,1816,807,1819,811,1773,851,1745,870,1714,885,1634,909,1552,925,1469,935,1386,940,1233,937,1108,925"/>
<area shape="rect" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4" title=" " alt="" coords="1502,1028,1671,1062"/>
<area shape="poly" title=" " alt="" coords="1365,1022,1488,1034,1487,1039,1364,1028"/>
<area shape="poly" title=" " alt="" coords="1130,1128,1282,1131,1453,1126,1534,1119,1607,1108,1668,1093,1711,1072,1741,1046,1766,1015,1787,980,1803,943,1825,871,1836,813,1842,814,1830,872,1808,945,1792,982,1771,1018,1745,1050,1714,1077,1670,1098,1608,1114,1535,1125,1453,1132,1282,1136,1130,1133"/>
<area shape="rect" href="../../d6/d41/ubusd__id_8h.html#a75eac2b0fe238d440cb31282163bfeb1" title=" " alt="" coords="1233,1163,1371,1196"/>
<area shape="poly" title=" " alt="" coords="1104,1140,1218,1161,1217,1167,1103,1145"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#a159bb0ae05f7dc767b4f708564c74cc9" title=" " alt="" coords="1192,792,1412,826"/>
<area shape="poly" title=" " alt="" coords="719,604,744,645,779,692,823,739,849,758,876,775,912,790,949,802,1028,817,1105,823,1176,821,1176,827,1105,828,1027,823,948,807,910,795,873,779,846,763,820,743,775,696,739,648,715,607"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a52fc73dcc0aa2e5f27126bd5439c61ad" title=" " alt="" coords="910,484,1109,518"/>
<area shape="poly" title=" " alt="" coords="818,545,923,519,924,525,819,551"/>
<area shape="poly" title=" " alt="" coords="1412,801,1748,783,1748,789,1413,806"/>
<area shape="poly" title=" " alt="" coords="1098,516,1266,545,1461,568,1586,573,1712,568,1758,564,1758,569,1713,573,1586,579,1460,573,1265,550,1097,521"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1975,264,2086,298"/>
<area shape="poly" title=" " alt="" coords="1109,513,1179,517,1257,514,1336,501,1375,489,1411,473,1426,461,1434,445,1442,429,1459,415,1524,387,1583,376,1638,376,1691,382,1744,389,1799,392,1859,385,1926,364,1968,338,2003,307,2006,311,1972,342,1928,369,1860,390,1799,397,1743,395,1690,388,1638,381,1584,381,1526,392,1462,419,1447,432,1439,448,1430,464,1414,478,1377,494,1338,506,1257,520,1179,522,1109,519"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ac663b82c91f957ef4dea52b243cb1f89" title=" " alt="" coords="1217,269,1387,303"/>
<area shape="poly" title=" " alt="" coords="1032,482,1264,311,1267,315,1036,486"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="1214,429,1391,463"/>
<area shape="poly" title=" " alt="" coords="1103,481,1198,463,1199,468,1104,486"/>
<area shape="poly" title=" " alt="" coords="1384,266,1770,183,1771,188,1385,271"/>
<area shape="poly" title=" " alt="" coords="1387,268,1411,256,1426,243,1435,229,1444,213,1459,198,1490,177,1522,161,1524,165,1492,182,1462,202,1448,217,1439,231,1430,246,1414,261,1389,273"/>
<area shape="poly" title=" " alt="" coords="1388,292,1445,293,1445,298,1388,297"/>
<area shape="poly" title=" " alt="" coords="1326,302,1373,349,1396,381,1415,416,1432,465,1445,511,1455,595,1453,671,1445,744,1435,816,1431,893,1438,977,1448,1024,1463,1073,1483,1120,1509,1163,1561,1232,1557,1235,1504,1166,1478,1122,1458,1075,1443,1025,1433,978,1426,893,1430,816,1439,743,1448,671,1450,595,1439,512,1427,467,1410,418,1392,384,1369,353,1322,306"/>
<area shape="poly" title=" " alt="" coords="1610,302,1661,350,1689,382,1715,416,1730,447,1736,474,1743,499,1763,524,1765,527,1761,531,1759,528,1738,502,1730,475,1725,449,1710,418,1685,385,1657,354,1606,306"/>
<area shape="poly" title=" " alt="" coords="1625,301,1981,472,1979,477,1623,306"/>
<area shape="poly" title=" " alt="" coords="1612,302,1664,350,1691,381,1715,416,1735,460,1744,498,1750,536,1763,583,1798,674,1831,749,1826,751,1793,676,1758,584,1745,537,1739,499,1730,462,1710,418,1687,384,1660,353,1608,306"/>
<area shape="poly" title=" " alt="" coords="1637,267,1711,235,1759,204,1784,192,1787,196,1762,209,1714,239,1639,271"/>
<area shape="poly" title=" " alt="" coords="1655,266,1760,248,1844,241,1927,248,1968,257,1967,262,1927,253,1844,246,1761,253,1656,272"/>
<area shape="poly" title=" " alt="" coords="1460,280,1403,280,1403,275,1460,275"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1774,480,1914,514"/>
<area shape="poly" title=" " alt="" coords="1606,302,1692,391,1762,459,1782,471,1780,475,1759,463,1689,395,1602,305"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1793,320,1895,354"/>
<area shape="poly" title=" " alt="" coords="1676,301,1778,322,1777,327,1675,306"/>
<area shape="poly" title=" " alt="" coords="1713,280,1746,280,1747,285,1713,286"/>
<area shape="poly" title=" " alt="" coords="1894,319,1959,299,1961,305,1896,324"/>
<area shape="poly" title=" " alt="" coords="1611,1243,1804,1109,1807,1113,1614,1247"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#a1b6212744c4241320adc3a2170525f20" title=" " alt="" coords="1777,1245,1911,1279"/>
<area shape="poly" title=" " alt="" coords="1659,1260,1761,1260,1761,1265,1659,1265"/>
<area shape="poly" title=" " alt="" coords="1115,320,1186,315,1264,319,1304,325,1343,336,1380,351,1414,371,1427,383,1434,396,1440,423,1444,450,1451,462,1462,474,1495,496,1532,514,1610,539,1688,551,1758,555,1757,560,1687,557,1609,544,1530,519,1493,501,1459,478,1446,465,1439,451,1434,424,1429,398,1423,386,1411,375,1377,356,1341,341,1303,331,1264,324,1186,320,1116,325"/>
<area shape="poly" title=" " alt="" coords="1116,357,1306,392,1414,415,1429,432,1438,450,1442,486,1445,522,1451,540,1462,559,1496,596,1534,628,1617,684,1701,726,1774,756,1772,761,1699,731,1615,689,1531,633,1492,599,1458,563,1446,543,1439,523,1437,486,1433,452,1425,435,1411,419,1305,397,1115,362"/>
<area shape="poly" title=" " alt="" coords="1039,310,1106,254,1147,224,1191,197,1262,161,1320,138,1381,122,1460,108,1594,83,1651,75,1704,70,1755,73,1809,84,1865,105,1928,139,1958,162,1983,191,2018,249,2014,251,1979,194,1955,166,1926,143,1863,110,1807,89,1755,78,1704,76,1651,80,1595,89,1461,113,1382,127,1322,143,1264,166,1193,202,1150,228,1109,258,1042,315"/>
<area shape="poly" title=" " alt="" coords="1115,319,1201,302,1202,308,1116,324"/>
<area shape="poly" title=" " alt="" coords="1085,367,1193,408,1233,422,1231,427,1191,413,1083,372"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a9eb2d430d517951c781b4427b658e143" title=" " alt="" coords="1202,212,1402,246"/>
<area shape="poly" title=" " alt="" coords="1065,310,1125,281,1191,254,1211,248,1212,253,1193,259,1127,286,1067,314"/>
<area shape="poly" title=" " alt="" coords="794,1105,874,1093,1043,1076,1211,1062,1487,1046,1487,1052,1211,1068,1043,1081,875,1098,795,1110"/>
<area shape="poly" title=" " alt="" coords="794,1140,875,1152,1058,1167,1218,1175,1217,1180,1058,1172,874,1157,793,1145"/>
<area shape="rect" href="../../d5/d3d/ubusd__id_8c.html#adc97bf3966f925ae5d90d1273ca650ef" title=" " alt="" coords="937,1275,1082,1308"/>
<area shape="poly" title=" " alt="" coords="719,1140,784,1200,828,1234,876,1261,923,1277,921,1282,874,1266,825,1238,780,1204,716,1144"/>
<area shape="rect" href="../../dd/d84/ubusd__acl_8c.html#a2503db2a1e93952c2e32cca2857c660d" title=" " alt="" coords="904,1217,1115,1251"/>
<area shape="poly" title=" " alt="" coords="740,1140,803,1168,876,1196,923,1210,921,1215,874,1201,801,1173,738,1145"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a3bf49ccabf18c2e50486c84abc3b0b1f" title=" " alt="" coords="1462,429,1711,463"/>
<area shape="poly" title=" " alt="" coords="724,1106,776,1059,803,1028,824,993,839,954,844,918,839,851,837,818,839,786,850,752,873,717,903,683,933,655,993,616,1053,592,1115,578,1251,560,1327,545,1411,517,1531,467,1533,472,1413,522,1329,550,1252,565,1116,583,1055,597,995,620,937,660,907,687,877,720,854,754,844,787,842,818,844,850,849,918,844,955,829,996,807,1031,780,1062,727,1110"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a6c73c051e7c38f91ea4f1a4087e93a7a" title=" " alt="" coords="916,731,1103,764"/>
<area shape="poly" title=" " alt="" coords="721,1106,771,1058,799,1026,824,993,840,962,848,935,856,908,872,877,922,818,972,773,975,776,925,822,877,880,861,910,853,937,845,964,829,996,804,1030,775,1061,724,1110"/>
<area shape="poly" title=" " alt="" coords="1624,461,1762,524,1776,529,1774,534,1760,529,1621,466"/>
<area shape="poly" title=" " alt="" coords="1676,461,1759,478,1758,483,1675,466"/>
<area shape="poly" title=" " alt="" coords="1603,427,1669,369,1712,335,1759,305,1768,301,1770,306,1762,310,1715,339,1672,373,1607,431"/>
<area shape="poly" title=" " alt="" coords="1103,748,1713,772,1747,773,1747,779,1713,777,1103,753"/>
<area shape="poly" title=" " alt="" coords="1020,729,1075,645,1142,529,1156,498,1164,472,1174,446,1190,416,1230,359,1271,313,1275,316,1234,363,1194,418,1178,449,1169,474,1161,500,1146,532,1080,648,1025,732"/>
<area shape="poly" title=" " alt="" coords="1077,728,1143,709,1498,603,1773,517,1774,522,1499,608,1145,714,1078,733"/>
</map>
</div>

</div>
</div>
<a id="ad4fc211275d5cc53c3a39146db938b40" name="ad4fc211275d5cc53c3a39146db938b40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4fc211275d5cc53c3a39146db938b40">&#9670;&#160;</a></span>sighup_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sighup_handler </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sig</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00245">245</a> of file <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html">ubusd_main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  246</span>{</div>
<div class="line"><span class="lineno">  247</span>    <a class="code hl_function" href="../../dd/d84/ubusd__acl_8c.html#aee4a5e1b0cb03672435025aa003573ba">ubusd_acl_load</a>();</div>
<div class="line"><span class="lineno">  248</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d84/ubusd__acl_8c_source.html#l00445">ubusd_acl_load()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00265">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dd3/ubusd__main_8c_ad4fc211275d5cc53c3a39146db938b40_cgraph.png" border="0" usemap="#add/dd3/ubusd__main_8c_ad4fc211275d5cc53c3a39146db938b40_cgraph" alt=""/></div>
<map name="add/dd3/ubusd__main_8c_ad4fc211275d5cc53c3a39146db938b40_cgraph" id="add/dd3/ubusd__main_8c_ad4fc211275d5cc53c3a39146db938b40_cgraph">
<area shape="rect" title=" " alt="" coords="5,618,170,652"/>
<area shape="rect" href="../../dd/d84/ubusd__acl_8c.html#aee4a5e1b0cb03672435025aa003573ba" title=" " alt="" coords="218,618,380,652"/>
<area shape="poly" title=" " alt="" coords="170,632,202,632,202,637,170,637"/>
<area shape="rect" href="../../dd/d84/ubusd__acl_8c.html#a4b15243c3f4548a3bfa98899d55a0553" title=" " alt="" coords="450,481,649,514"/>
<area shape="poly" title=" " alt="" coords="330,615,502,520,505,524,333,620"/>
<area shape="rect" href="../../dd/d84/ubusd__acl_8c.html#a64f201561c29a4fc1e771965716cd0d3" title=" " alt="" coords="428,194,671,251"/>
<area shape="poly" title=" " alt="" coords="308,616,521,263,526,265,313,619"/>
<area shape="rect" href="../../d1/df2/ubusd__event_8c.html#a61cd69c42b611b4f218395e2eb1a7cbd" title=" " alt="" coords="453,702,647,736"/>
<area shape="poly" title=" " alt="" coords="352,650,484,694,482,699,351,655"/>
<area shape="rect" href="../../d5/d9a/vlist_8c.html#a62a8ae640752531c644d53311b98d53a" title=" " alt="" coords="493,618,607,652"/>
<area shape="poly" title=" " alt="" coords="380,632,477,632,477,637,380,637"/>
<area shape="rect" href="../../dd/d1d/vlist_8h.html#ac66f6ee1f1beb49157d2e737c68713ba" title=" " alt="" coords="483,759,616,793"/>
<area shape="poly" title=" " alt="" coords="316,650,363,698,395,724,429,746,469,761,467,766,427,750,392,728,360,702,312,654"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="790,234,930,268"/>
<area shape="poly" title=" " alt="" coords="571,478,824,275,827,279,574,482"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1736,342,1878,376"/>
<area shape="poly" title=" " alt="" coords="593,512,652,534,720,552,840,572,935,579,1152,577,1385,577,1446,572,1506,556,1563,532,1617,503,1667,472,1710,440,1775,385,1779,389,1713,444,1670,476,1620,508,1566,537,1508,561,1447,577,1386,583,1153,583,934,584,839,577,719,557,651,539,591,517"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#a7f16b1915ac39b6888614f5fcc0661f8" title=" " alt="" coords="719,509,1001,542"/>
<area shape="poly" title=" " alt="" coords="650,504,704,509,704,514,649,509"/>
<area shape="rect" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4" title=" " alt="" coords="776,394,944,428"/>
<area shape="poly" title=" " alt="" coords="595,477,719,436,760,426,761,431,720,441,596,483"/>
<area shape="rect" href="../../d5/d9a/vlist_8c.html#ac913b1e12f698be7f0d79ed459a68cd7" title=" " alt="" coords="808,451,912,485"/>
<area shape="poly" title=" " alt="" coords="649,485,793,472,793,477,650,491"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1546,67,1651,101"/>
<area shape="poly" title=" " alt="" coords="930,237,1048,219,1112,213,1168,212,1263,215,1307,214,1353,207,1403,192,1460,166,1475,154,1484,140,1492,125,1508,110,1530,98,1533,103,1511,114,1496,128,1488,142,1479,157,1463,170,1405,197,1355,212,1308,219,1263,221,1167,217,1112,218,1049,224,931,242"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1064,234,1244,268"/>
<area shape="poly" title=" " alt="" coords="930,248,1049,248,1049,253,930,253"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1736,39,1878,73"/>
<area shape="poly" title=" " alt="" coords="1651,74,1720,65,1721,70,1652,80"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="1736,150,1878,184"/>
<area shape="poly" title=" " alt="" coords="1653,97,1689,110,1759,140,1757,145,1687,115,1651,102"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1926,315,2024,349"/>
<area shape="poly" title=" " alt="" coords="1878,345,1910,340,1911,345,1878,350"/>
<area shape="rect" href="../../d5/d7f/blobmsg__json_8c.html#a05a8f001d9418fdd31cf08aad8dd0cca" title=" " alt="" coords="1049,509,1259,542"/>
<area shape="poly" title=" " alt="" coords="1001,523,1033,523,1033,528,1001,528"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#aff86971e7141b6e9af18b7601066b106" title=" " alt="" coords="1097,618,1211,652"/>
<area shape="poly" title=" " alt="" coords="913,467,958,476,1002,494,1019,507,1029,522,1037,537,1051,553,1117,607,1113,611,1047,557,1033,540,1024,525,1015,511,999,498,956,481,912,473"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#a0e08d7ee7d67ff58eeea30dd8a9356d1" title=" " alt="" coords="1107,451,1201,485"/>
<area shape="poly" title=" " alt="" coords="912,465,1092,465,1092,471,912,471"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#ab9041e08938920d5ae722e2d57dc20e2" title=" " alt="" coords="1099,394,1209,428"/>
<area shape="poly" title=" " alt="" coords="912,455,1083,422,1084,427,913,461"/>
<area shape="poly" title=" " alt="" coords="672,231,775,240,774,246,671,236"/>
<area shape="poly" title=" " alt="" coords="596,249,654,281,720,308,838,339,933,352,1029,354,1152,353,1386,353,1720,355,1720,361,1385,359,1153,359,1029,359,933,357,837,344,718,313,652,286,594,254"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="1307,237,1461,270"/>
<area shape="poly" title=" " alt="" coords="620,249,669,265,720,277,870,297,988,302,1107,294,1259,277,1299,271,1300,276,1259,283,1108,299,989,307,870,303,719,283,667,271,618,254"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a02523c6489a895ee963d17b13582be7a" title=" " alt="" coords="1073,7,1235,41"/>
<area shape="poly" title=" " alt="" coords="567,192,592,157,627,116,669,77,718,47,760,31,804,19,894,6,981,3,1058,8,1057,13,981,9,895,11,805,24,762,36,721,52,672,82,630,120,596,160,571,195"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="778,119,942,153"/>
<area shape="poly" title=" " alt="" coords="626,191,719,161,762,151,763,156,720,167,628,196"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393" title=" " alt="" coords="765,62,955,96"/>
<area shape="poly" title=" " alt="" coords="582,192,643,146,680,123,718,104,749,94,751,99,720,109,682,128,646,151,586,196"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae88c2071350154e2eed8a6844e60a9da" title=" " alt="" coords="778,177,942,210"/>
<area shape="poly" title=" " alt="" coords="671,209,763,200,763,205,672,214"/>
<area shape="poly" title=" " alt="" coords="1461,253,1570,247,1629,239,1687,225,1728,209,1765,190,1768,194,1730,214,1688,231,1630,244,1570,252,1462,258"/>
<area shape="poly" title=" " alt="" coords="1462,261,1911,321,1911,326,1461,266"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="1527,182,1670,216"/>
<area shape="poly" title=" " alt="" coords="1452,233,1514,217,1516,223,1454,239"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a189526712fcc12adfb6ea6a5c8eede54" title=" " alt="" coords="1509,125,1688,158"/>
<area shape="poly" title=" " alt="" coords="1422,234,1460,211,1483,189,1493,178,1508,167,1516,163,1519,167,1511,172,1496,182,1487,192,1463,215,1424,238"/>
<area shape="poly" title=" " alt="" coords="1624,214,1773,330,1770,334,1621,218"/>
<area shape="poly" title=" " alt="" coords="1236,25,1720,49,1720,55,1235,31"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aee908e6de67c16a4d810d08f28ed1803" title=" " alt="" coords="1330,122,1438,156"/>
<area shape="poly" title=" " alt="" coords="1233,39,1260,50,1310,79,1353,110,1350,114,1307,83,1258,54,1231,44"/>
<area shape="poly" title=" " alt="" coords="1438,122,1530,99,1531,104,1440,128"/>
<area shape="poly" title=" " alt="" coords="1440,151,1522,174,1520,180,1438,156"/>
<area shape="poly" title=" " alt="" coords="1439,137,1494,137,1494,143,1439,142"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1103,122,1205,156"/>
<area shape="poly" title=" " alt="" coords="943,134,1087,135,1087,141,943,139"/>
<area shape="poly" title=" " alt="" coords="1205,136,1314,136,1314,141,1205,141"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="1057,65,1251,98"/>
<area shape="poly" title=" " alt="" coords="955,77,1041,78,1041,83,955,82"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a19a646e5c3d7ddd2cb4004d68896f12a" title=" " alt="" coords="779,675,941,709"/>
<area shape="poly" title=" " alt="" coords="647,708,764,698,764,703,647,713"/>
<area shape="rect" href="../../dc/d3c/ubus__common_8h.html#afa8a89e392860a6f7069e2b84c4806a8" title=" " alt="" coords="1056,757,1252,790"/>
<area shape="poly" title=" " alt="" coords="647,725,1041,761,1040,766,647,730"/>
<area shape="rect" href="../../dd/d84/ubusd__acl_8c.html#a3c4bac46cccd1eab057aab786a08db2e" title=" " alt="" coords="771,785,949,818"/>
<area shape="poly" title=" " alt="" coords="634,734,672,744,720,763,771,778,769,783,718,768,670,749,632,739"/>
<area shape="rect" href="../../d1/df2/ubusd__event_8c.html#a8bd3811818185692d0aba1bf4dec514b" title=" " alt="" coords="738,842,982,876"/>
<area shape="poly" title=" " alt="" coords="648,731,673,745,691,766,698,788,704,809,721,829,726,832,723,837,718,833,700,812,693,790,686,768,670,749,646,735"/>
<area shape="poly" title=" " alt="" coords="949,790,1040,781,1041,787,949,796"/>
<area shape="rect" href="../../d5/d9a/vlist_8c.html#ae3f611db174c46a1558ef07aa4df0138" title=" " alt="" coords="797,618,923,652"/>
<area shape="poly" title=" " alt="" coords="607,632,782,632,782,637,607,637"/>
<area shape="poly" title=" " alt="" coords="923,632,1081,632,1081,637,923,637"/>
</map>
</div>

</div>
</div>
<a id="a159bb0ae05f7dc767b4f708564c74cc9" name="a159bb0ae05f7dc767b4f708564c74cc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a159bb0ae05f7dc767b4f708564c74cc9">&#9670;&#160;</a></span>ubus_client_cmd_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ubus_client_cmd_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#dc/de0/structubus__client__cmd">ubus_client_cmd</a> *</td>          <td class="paramname"><span class="paramname"><em>cmd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00035">35</a> of file <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html">ubusd_main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   36</span>{</div>
<div class="line"><span class="lineno">   37</span>    <a class="code hl_function" href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5">list_del</a>(&amp;<a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>-&gt;list);</div>
<div class="line"><span class="lineno">   38</span>    <a class="code hl_function" href="../../d9/de0/ubusd_8c.html#a19a646e5c3d7ddd2cb4004d68896f12a">ubus_msg_free</a>(<a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>-&gt;msg);</div>
<div class="line"><span class="lineno">   39</span>    free(<a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>);</div>
<div class="line"><span class="lineno">   40</span>}</div>
<div class="ttc" id="ajson__script_8c_html_a12c0be34061dfc832e2b49607c448229"><div class="ttname"><a href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a></div><div class="ttdeci">static const struct json_handler cmd[]</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d4c/json__script_8c_source.html#l00207">json_script.c:207</a></div></div>
<div class="ttc" id="alist_8h_html_ab1708206f0f7e0a56550b35372203ba5"><div class="ttname"><a href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5">list_del</a></div><div class="ttdeci">static void list_del(struct list_head *entry)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d23/list_8h_source.html#l00096">list.h:96</a></div></div>
<div class="ttc" id="aubusd_8c_html_a19a646e5c3d7ddd2cb4004d68896f12a"><div class="ttname"><a href="../../d9/de0/ubusd_8c.html#a19a646e5c3d7ddd2cb4004d68896f12a">ubus_msg_free</a></div><div class="ttdeci">void ubus_msg_free(struct ubus_msg_buf *ub)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/de0/ubusd_8c_source.html#l00067">ubusd.c:67</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/d4c/json__script_8c_source.html#l00207">cmd</a>, <a class="el" href="../../da/d23/list_8h_source.html#l00096">list_del()</a>, and <a class="el" href="../../d9/de0/ubusd_8c_source.html#l00067">ubus_msg_free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00042">ubus_client_cmd_queue_process()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dd3/ubusd__main_8c_a159bb0ae05f7dc767b4f708564c74cc9_cgraph.png" border="0" usemap="#add/dd3/ubusd__main_8c_a159bb0ae05f7dc767b4f708564c74cc9_cgraph" alt=""/></div>
<map name="add/dd3/ubusd__main_8c_a159bb0ae05f7dc767b4f708564c74cc9_cgraph" id="add/dd3/ubusd__main_8c_a159bb0ae05f7dc767b4f708564c74cc9_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,226,68"/>
<area shape="rect" href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title=" " alt="" coords="312,5,397,39"/>
<area shape="poly" title=" " alt="" coords="226,35,296,27,297,32,227,41"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a19a646e5c3d7ddd2cb4004d68896f12a" title=" " alt="" coords="274,63,435,96"/>
<area shape="poly" title=" " alt="" coords="227,62,258,66,258,71,226,67"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae0988579c6b622299ee0f79accbf0779" title=" " alt="" coords="483,5,577,39"/>
<area shape="poly" title=" " alt="" coords="398,20,468,20,468,25,398,25"/>
</map>
</div>

</div>
</div>
<a id="a05ec3ebd839e77b52ac1a6ff54b7c647" name="a05ec3ebd839e77b52ac1a6ff54b7c647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05ec3ebd839e77b52ac1a6ff54b7c647">&#9670;&#160;</a></span>ubus_client_cmd_queue_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ubus_client_cmd_queue_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dbe/ubusd_8h.html#df/d3f/structubus__client">ubus_client</a> *</td>          <td class="paramname"><span class="paramname"><em>cl</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00042">42</a> of file <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html">ubusd_main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   43</span>{</div>
<div class="line"><span class="lineno">   44</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d2/dbe/ubusd_8h.html#dc/de0/structubus__client__cmd">ubus_client_cmd</a> *<a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>, *tmp;</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>    <a class="code hl_define" href="../../da/d23/list_8h.html#a698670b36c7c0ca13822698ee825ddc8">list_for_each_entry_safe</a>(<a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>, tmp, &amp;cl-&gt;<a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#a7eba2444950852b361eb5d97a1ce3dd4">cmd_queue</a>, <a class="code hl_variable" href="../../d2/dbe/ubusd_8h.html#aa16e69a1f1617a2892ea1c7c3d857e06">list</a>) {</div>
<div class="line"><span class="lineno">   47</span>        <span class="keywordtype">int</span> ret = <a class="code hl_function" href="../../d2/dbe/ubusd_8h.html#a52fc73dcc0aa2e5f27126bd5439c61ad">ubusd_cmd_lookup</a>(cl, <a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>);</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>        <span class="comment">/* Stop if the last command caused buffering again */</span></div>
<div class="line"><span class="lineno">   50</span>        <span class="keywordflow">if</span> (ret == -2)</div>
<div class="line"><span class="lineno">   51</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>        <a class="code hl_function" href="#a159bb0ae05f7dc767b4f708564c74cc9">ubus_client_cmd_free</a>(<a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>);</div>
<div class="line"><span class="lineno">   54</span>    }</div>
<div class="line"><span class="lineno">   55</span>}</div>
<div class="ttc" id="aubusd_8h_html_a52fc73dcc0aa2e5f27126bd5439c61ad"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a52fc73dcc0aa2e5f27126bd5439c61ad">ubusd_cmd_lookup</a></div><div class="ttdeci">int ubusd_cmd_lookup(struct ubus_client *cl, struct ubus_client_cmd *cmd)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d8a/ubusd__proto_8c_source.html#l00285">ubusd_proto.c:285</a></div></div>
<div class="ttc" id="aubusd_8h_html_a7eba2444950852b361eb5d97a1ce3dd4"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#a7eba2444950852b361eb5d97a1ce3dd4">ubus_client::cmd_queue</a></div><div class="ttdeci">struct list_head cmd_queue</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00062">ubusd.h:62</a></div></div>
<div class="ttc" id="aubusd_8h_html_aa16e69a1f1617a2892ea1c7c3d857e06"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#aa16e69a1f1617a2892ea1c7c3d857e06">ubus_client_cmd::list</a></div><div class="ttdeci">struct list_head list</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00045">ubusd.h:45</a></div></div>
<div class="ttc" id="aubusd_8h_html_dc/de0/structubus__client__cmd"><div class="ttname"><a href="../../d2/dbe/ubusd_8h.html#dc/de0/structubus__client__cmd">ubus_client_cmd</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbe/ubusd_8h_source.html#l00044">ubusd.h:44</a></div></div>
<div class="ttc" id="aubusd__main_8c_html_a159bb0ae05f7dc767b4f708564c74cc9"><div class="ttname"><a href="#a159bb0ae05f7dc767b4f708564c74cc9">ubus_client_cmd_free</a></div><div class="ttdeci">static void ubus_client_cmd_free(struct ubus_client_cmd *cmd)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dd3/ubusd__main_8c_source.html#l00035">ubusd_main.c:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/d4c/json__script_8c_source.html#l00207">cmd</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00062">ubus_client::cmd_queue</a>, <a class="el" href="../../d2/dbe/ubusd_8h_source.html#l00045">ubus_client_cmd::list</a>, <a class="el" href="../../da/d23/list_8h_source.html#l00146">list_for_each_entry_safe</a>, <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00035">ubus_client_cmd_free()</a>, and <a class="el" href="../../dc/d8a/ubusd__proto_8c_source.html#l00285">ubusd_cmd_lookup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00057">client_cb()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dd3/ubusd__main_8c_a05ec3ebd839e77b52ac1a6ff54b7c647_cgraph.png" border="0" usemap="#add/dd3/ubusd__main_8c_a05ec3ebd839e77b52ac1a6ff54b7c647_cgraph" alt=""/></div>
<map name="add/dd3/ubusd__main_8c_a05ec3ebd839e77b52ac1a6ff54b7c647_cgraph" id="add/dd3/ubusd__main_8c_a05ec3ebd839e77b52ac1a6ff54b7c647_cgraph">
<area shape="rect" title=" " alt="" coords="5,261,248,317"/>
<area shape="rect" href="../../dd/dd3/ubusd__main_8c.html#a159bb0ae05f7dc767b4f708564c74cc9" title=" " alt="" coords="296,221,516,255"/>
<area shape="poly" title=" " alt="" coords="247,264,294,256,295,261,248,269"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a52fc73dcc0aa2e5f27126bd5439c61ad" title=" " alt="" coords="307,300,505,334"/>
<area shape="poly" title=" " alt="" coords="248,298,291,303,291,308,248,304"/>
<area shape="rect" href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title=" " alt="" coords="641,5,726,39"/>
<area shape="poly" title=" " alt="" coords="414,220,436,183,469,137,512,88,563,48,593,34,625,25,626,31,595,39,565,52,515,92,473,140,440,186,419,222"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a19a646e5c3d7ddd2cb4004d68896f12a" title=" " alt="" coords="2035,395,2197,428"/>
<area shape="poly" title=" " alt="" coords="517,242,1022,278,1351,306,1684,340,1834,359,1984,384,2020,390,2019,395,1983,389,1834,364,1683,345,1350,311,1021,283,516,247"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae0988579c6b622299ee0f79accbf0779" title=" " alt="" coords="947,5,1042,39"/>
<area shape="poly" title=" " alt="" coords="727,20,932,20,932,25,727,25"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#adea136769c5d6cd8d779557d9fa4df75" title=" " alt="" coords="564,323,803,356"/>
<area shape="poly" title=" " alt="" coords="506,322,549,326,548,331,505,328"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="2274,485,2385,519"/>
<area shape="poly" title=" " alt="" coords="413,333,428,397,458,490,478,542,503,594,532,644,566,690,663,805,706,851,750,890,798,921,852,943,916,956,993,961,1859,961,2037,967,2087,966,2133,961,2171,951,2198,936,2224,906,2238,877,2242,847,2241,817,2235,748,2236,710,2245,668,2276,593,2308,531,2313,534,2281,595,2251,670,2242,711,2240,748,2246,816,2248,848,2243,879,2229,909,2202,940,2173,956,2134,966,2087,971,2037,973,1859,966,993,966,916,962,851,948,795,925,747,894,702,855,659,809,562,693,528,647,498,596,473,544,453,492,423,398,408,335"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ac663b82c91f957ef4dea52b243cb1f89" title=" " alt="" coords="1487,580,1657,614"/>
<area shape="poly" title=" " alt="" coords="422,333,480,406,577,512,637,568,704,621,776,668,852,705,1007,764,1074,783,1138,793,1201,793,1266,782,1335,757,1411,719,1429,701,1436,681,1443,658,1459,636,1488,618,1491,623,1463,640,1447,661,1441,683,1434,704,1415,723,1337,762,1267,787,1202,798,1138,798,1073,788,1006,769,850,710,774,672,701,625,634,572,573,516,476,410,417,336"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="2045,117,2187,151"/>
<area shape="poly" title=" " alt="" coords="450,297,568,252,723,197,878,151,943,137,993,132,1574,132,2030,132,2030,137,1574,137,993,137,943,142,879,156,725,202,570,257,452,302"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="595,63,772,96"/>
<area shape="poly" title=" " alt="" coords="468,297,493,284,514,266,527,247,534,228,536,190,539,152,547,133,562,114,580,100,583,104,566,117,552,135,544,153,541,191,539,229,532,249,518,269,496,288,470,302"/>
<area shape="poly" title=" " alt="" coords="743,319,905,278,1014,255,1137,233,1269,215,1407,203,1547,199,1684,208,1836,220,1957,234,2013,248,2071,269,2132,299,2202,343,2237,372,2268,406,2313,470,2309,473,2264,409,2233,376,2198,347,2130,304,2069,273,2012,253,1956,240,1836,226,1683,213,1547,205,1408,208,1270,220,1138,238,1015,260,906,283,745,325"/>
<area shape="rect" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d" title=" " alt="" coords="2058,452,2174,486"/>
<area shape="poly" title=" " alt="" coords="804,333,976,331,1196,333,1439,344,1684,368,1782,383,1880,404,2043,445,2042,450,1879,409,1781,389,1683,373,1439,350,1196,339,976,336,804,338"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a38b5e8a86896a69d0a32553dde84bcdd" title=" " alt="" coords="851,661,1138,695"/>
<area shape="poly" title=" " alt="" coords="701,355,766,433,853,534,966,648,962,652,849,537,761,437,697,358"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#a7081cf034550f3e5fac8fc976964c319" title=" " alt="" coords="909,489,1080,523"/>
<area shape="poly" title=" " alt="" coords="718,354,949,479,946,484,716,359"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="2051,777,2181,811"/>
<area shape="poly" title=" " alt="" coords="1025,693,1097,730,1141,748,1186,762,1304,785,1426,800,1547,809,1666,813,1878,809,2036,799,2036,805,1878,815,1666,818,1547,815,1425,806,1304,790,1185,767,1139,753,1095,735,1023,698"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="2046,720,2186,754"/>
<area shape="poly" title=" " alt="" coords="1017,522,1074,576,1140,647,1153,669,1161,688,1169,704,1187,718,1235,731,1319,739,1555,745,1819,743,2031,737,2031,742,1819,748,1555,751,1318,744,1234,736,1184,723,1165,708,1156,690,1148,671,1136,650,1070,580,1014,525"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="1495,223,1649,256"/>
<area shape="poly" title=" " alt="" coords="1013,487,1085,427,1133,393,1184,362,1260,328,1338,299,1479,258,1481,263,1339,304,1262,333,1187,367,1136,397,1088,431,1016,491"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a02523c6489a895ee963d17b13582be7a" title=" " alt="" coords="1218,435,1381,468"/>
<area shape="poly" title=" " alt="" coords="1080,488,1203,466,1204,471,1080,494"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="1490,651,1654,684"/>
<area shape="poly" title=" " alt="" coords="1022,521,1094,566,1139,590,1187,609,1260,630,1337,645,1475,661,1474,666,1336,650,1259,635,1185,614,1137,594,1091,571,1019,526"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a16c0db64a79ef15eab447db0fe22db96" title=" " alt="" coords="1202,377,1397,411"/>
<area shape="poly" title=" " alt="" coords="1029,486,1100,453,1185,420,1205,413,1207,418,1187,425,1102,458,1032,491"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a6ee526c7b55debcecad8e34e3e6108d0" title=" " alt="" coords="1491,383,1653,416"/>
<area shape="poly" title=" " alt="" coords="1080,514,1154,518,1238,516,1327,504,1370,493,1412,478,1426,470,1436,459,1445,448,1460,436,1493,420,1495,425,1462,440,1449,451,1440,463,1430,474,1414,483,1372,498,1328,509,1239,521,1154,523,1080,519"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#ad786695a5a35e0995e303bfdb0b3174f" title=" " alt="" coords="1186,543,1413,600"/>
<area shape="poly" title=" " alt="" coords="1077,521,1171,541,1170,546,1076,526"/>
<area shape="rect" href="../../dd/d84/ubusd__acl_8c.html#a3c4bac46cccd1eab057aab786a08db2e" title=" " alt="" coords="1211,675,1388,708"/>
<area shape="poly" title=" " alt="" coords="1015,521,1087,585,1135,621,1187,653,1217,667,1215,672,1184,658,1132,626,1083,589,1011,525"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="2281,157,2379,191"/>
<area shape="poly" title=" " alt="" coords="1649,230,2265,177,2265,182,1650,236"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="2065,663,2167,696"/>
<area shape="poly" title=" " alt="" coords="1655,667,2050,675,2049,681,1654,672"/>
<area shape="poly" title=" " alt="" coords="2136,660,2295,527,2298,531,2140,664"/>
<area shape="poly" title=" " alt="" coords="1397,393,1475,395,1475,400,1397,399"/>
<area shape="poly" title=" " alt="" coords="1636,379,1746,357,1814,347,1889,340,1967,338,2047,343,2126,356,2201,380,2235,398,2264,421,2310,471,2306,475,2261,425,2232,402,2199,385,2124,362,2046,349,1967,344,1889,345,1815,352,1747,362,1637,385"/>
<area shape="poly" title=" " alt="" coords="1413,547,2019,428,2020,433,1414,552"/>
<area shape="poly" title=" " alt="" coords="1414,579,1472,585,1471,590,1413,585"/>
<area shape="poly" title=" " alt="" coords="1613,577,1669,556,1731,536,1813,515,1897,499,2042,475,2043,481,1898,504,1815,521,1732,541,1670,561,1615,582"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ac99f4752b92904e7489bcd383f60cf60" title=" " alt="" coords="1754,835,1961,868"/>
<area shape="poly" title=" " alt="" coords="1638,612,1685,636,1736,680,1780,730,1816,780,1842,820,1837,823,1811,783,1776,734,1732,684,1682,640,1636,617"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae582a1a0e18dbe57e756c692f97d2a7d" title=" " alt="" coords="1766,608,1949,642"/>
<area shape="poly" title=" " alt="" coords="1658,603,1751,612,1750,617,1658,608"/>
<area shape="rect" href="../../db/dc5/ubusd__monitor_8c.html#a6b03538b7a75504cb920317621b1cd6e" title=" " alt="" coords="1731,551,1984,584"/>
<area shape="poly" title=" " alt="" coords="1658,594,1753,584,1754,589,1658,599"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0" title=" " alt="" coords="1785,1001,1930,1035"/>
<area shape="poly" title=" " alt="" coords="1652,612,1670,622,1685,636,1706,667,1716,697,1719,726,1718,754,1716,813,1721,845,1734,880,1753,912,1776,941,1825,989,1821,993,1773,945,1749,915,1729,882,1715,846,1710,813,1713,754,1714,726,1711,698,1701,670,1681,640,1667,627,1649,616"/>
<area shape="poly" title=" " alt="" coords="1936,831,2036,809,2037,814,1937,837"/>
<area shape="rect" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4" title=" " alt="" coords="2032,835,2200,868"/>
<area shape="poly" title=" " alt="" coords="1961,849,2016,849,2016,854,1961,854"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#a9fea97afc9c64c2fc775a90ac1081c44" title=" " alt="" coords="2041,892,2191,926"/>
<area shape="poly" title=" " alt="" coords="1937,866,2026,886,2025,891,1936,872"/>
<area shape="rect" href="../../d9/de0/ubusd_8c.html#ae88c2071350154e2eed8a6844e60a9da" title=" " alt="" coords="2248,681,2411,715"/>
<area shape="poly" title=" " alt="" coords="2181,889,2198,879,2236,844,2268,803,2293,763,2312,728,2317,730,2298,765,2272,806,2240,847,2202,883,2183,894"/>
<area shape="poly" title=" " alt="" coords="1881,548,1982,473,2005,454,2030,437,2040,432,2042,437,2033,442,2008,458,1985,478,1884,552"/>
<area shape="poly" title=" " alt="" coords="1984,562,2090,555,2199,540,2267,522,2268,527,2201,545,2090,560,1984,568"/>
<area shape="poly" title=" " alt="" coords="1925,548,1983,528,2030,502,2058,490,2061,494,2033,507,1985,533,1927,553"/>
<area shape="poly" title=" " alt="" coords="1969,583,1985,593,1998,607,2006,622,2011,651,2016,680,2022,693,2034,707,2036,709,2032,713,2030,711,2018,696,2011,681,2006,652,2001,624,1994,610,1982,598,1966,587"/>
<area shape="poly" title=" " alt="" coords="1971,547,2113,521,2169,508,2199,496,2229,465,2254,428,2275,389,2291,348,2313,269,2323,206,2328,207,2318,270,2296,349,2280,391,2259,431,2233,468,2201,500,2171,513,2115,527,1972,553"/>
<area shape="poly" title=" " alt="" coords="1961,583,1985,593,2001,605,2010,617,2019,629,2033,641,2054,653,2051,658,2030,646,2015,633,2006,620,1997,609,1982,598,1959,587"/>
<area shape="poly" title=" " alt="" coords="1731,574,1673,581,1672,575,1731,569"/>
<area shape="poly" title=" " alt="" coords="1939,582,1984,593,2093,618,2201,648,2272,673,2271,678,2199,653,2092,623,1983,598,1938,588"/>
<area shape="poly" title=" " alt="" coords="1867,549,2094,163,2099,166,1871,552"/>
<area shape="poly" title=" " alt="" coords="2187,145,2266,160,2265,165,2186,150"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#a1b6212744c4241320adc3a2170525f20" title=" " alt="" coords="2049,1001,2183,1035"/>
<area shape="poly" title=" " alt="" coords="1930,1016,2033,1016,2033,1021,1930,1021"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c" title=" " alt="" coords="2033,1059,2199,1092"/>
<area shape="poly" title=" " alt="" coords="1931,1032,2022,1052,2021,1057,1929,1037"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a9a668371aa63dfedae931f7ac76de45d" title=" " alt="" coords="1461,63,1683,96"/>
<area shape="poly" title=" " alt="" coords="773,77,1446,77,1446,82,773,82"/>
<area shape="poly" title=" " alt="" coords="1684,85,1984,113,2030,119,2029,124,1983,118,1684,90"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a2040eb3393cd5881814738765e4f2c66" title=" " alt="" coords="1775,12,1940,46"/>
<area shape="poly" title=" " alt="" coords="1670,59,1759,43,1760,49,1671,65"/>
<area shape="poly" title=" " alt="" coords="1941,42,2104,76,2170,92,2202,103,2215,123,2230,159,2264,263,2323,470,2318,471,2259,265,2225,161,2210,125,2198,107,2168,97,2103,81,1940,47"/>
<area shape="poly" title=" " alt="" coords="1940,20,1999,20,2066,25,2135,37,2201,58,2233,76,2262,98,2307,144,2304,147,2259,102,2230,80,2199,63,2134,42,2065,30,1999,25,1940,25"/>
<area shape="poly" title=" " alt="" coords="1935,44,1985,62,2009,79,2033,96,2057,108,2055,113,2030,100,2006,83,1982,67,1933,49"/>
</map>
</div>

</div>
</div>
<a id="a412ef69ce50879d3397862be3c891c56" name="a412ef69ce50879d3397862be3c891c56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a412ef69ce50879d3397862be3c891c56">&#9670;&#160;</a></span>usage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int usage </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>progname</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00235">235</a> of file <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html">ubusd_main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  236</span>{</div>
<div class="line"><span class="lineno">  237</span>    fprintf(stderr, <span class="stringliteral">&quot;Usage: %s [&lt;options&gt;]\n&quot;</span></div>
<div class="line"><span class="lineno">  238</span>        <span class="stringliteral">&quot;Options: \n&quot;</span></div>
<div class="line"><span class="lineno">  239</span>        <span class="stringliteral">&quot;  -A &lt;path&gt;:       Set the path to ACL files\n&quot;</span></div>
<div class="line"><span class="lineno">  240</span>        <span class="stringliteral">&quot;  -s &lt;socket&gt;:     Set the unix domain socket to listen on\n&quot;</span></div>
<div class="line"><span class="lineno">  241</span>        <span class="stringliteral">&quot;\n&quot;</span>, progname);</div>
<div class="line"><span class="lineno">  242</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  243</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="abd686ae00120ec939bbcd9aaadf8634a" name="abd686ae00120ec939bbcd9aaadf8634a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd686ae00120ec939bbcd9aaadf8634a">&#9670;&#160;</a></span>server_fd</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d56/uloop_8h.html#db/d9e/structuloop__fd">uloop_fd</a> server_fd</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .cb = <a class="code hl_function" href="#a267b473df8c4d0aa4be8a445dc0ade60">server_cb</a>,</div>
<div class="line">}</div>
<div class="ttc" id="aubusd__main_8c_html_a267b473df8c4d0aa4be8a445dc0ade60"><div class="ttname"><a href="#a267b473df8c4d0aa4be8a445dc0ade60">server_cb</a></div><div class="ttdeci">static void server_cb(struct uloop_fd *fd, unsigned int events)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dd3/ubusd__main_8c_source.html#l00222">ubusd_main.c:222</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00231">231</a> of file <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html">ubusd_main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  231</span>                                   {</div>
<div class="line"><span class="lineno">  232</span>    .cb = <a class="code hl_function" href="#a267b473df8c4d0aa4be8a445dc0ade60">server_cb</a>,</div>
<div class="line"><span class="lineno">  233</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00265">main()</a>, and <a class="el" href="../../da/dc0/uxc_8c_source.html#l00528">uxc_attach()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
