<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>zbus: /home/g41797/CLionProjects/github.com/g41797/zbus/src/libs/procd/jail/netifd.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">zbus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_87a455bccb09a92130c26a11a880c98a.html">libs</a></li><li class="navelem"><a class="el" href="../../dir_63350b749fcf74007a53c7c917c10773.html">procd</a></li><li class="navelem"><a class="el" href="../../dir_332eccd3a674db599d080e188d7046bc.html">jail</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">netifd.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;libgen.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;sys/inotify.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;pwd.h&gt;</code><br />
<code>#include &lt;linux/limits.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dc/d56/uloop_8h_source.html">libubox/uloop.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d5/d1d/libubox_2utils_8h_source.html">libubox/utils.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../db/d55/libubus_8h_source.html">libubus.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dd/dad/blobmsg_8h_source.html">libubox/blobmsg.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d5/dea/blobmsg__json_8h_source.html">libubox/blobmsg_json.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d4/d2c/uci_8h_source.html">uci.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="../../df/d26/procd_2jail_2netifd_8h_source.html">netifd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d30/procd_2jail_2log_8h_source.html">log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d88/jail_8h_source.html">jail.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for netifd.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d07/netifd_8c__incl.png" border="0" usemap="#a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2jail_2netifd_8c" alt=""/></div>
<map name="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2jail_2netifd_8c" id="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2jail_2netifd_8c">
<area shape="rect" title=" " alt="" coords="1122,5,1409,85"/>
<area shape="rect" title=" " alt="" coords="25,460,109,493"/>
<area shape="poly" title=" " alt="" coords="1122,55,903,67,647,84,406,107,307,121,231,136,191,143,151,147,79,153,50,161,28,175,13,197,8,230,8,314,12,351,23,386,51,445,46,447,18,388,7,352,3,315,3,230,8,195,24,171,48,156,78,148,151,141,190,138,230,130,306,116,405,102,647,79,903,62,1122,50"/>
<area shape="rect" title=" " alt="" coords="508,460,599,493"/>
<area shape="poly" title=" " alt="" coords="1159,88,1066,126,959,175,848,233,742,299,693,336,648,377,579,450,575,446,644,373,690,332,738,294,845,228,957,170,1064,121,1157,83"/>
<area shape="rect" title=" " alt="" coords="724,460,817,493"/>
<area shape="poly" title=" " alt="" coords="1222,87,846,414,802,452,798,448,842,410,1219,83"/>
<area shape="rect" title=" " alt="" coords="892,460,980,493"/>
<area shape="poly" title=" " alt="" coords="1238,87,960,449,955,446,1233,84"/>
<area shape="rect" title=" " alt="" coords="1692,133,1788,167"/>
<area shape="poly" title=" " alt="" coords="1410,74,1674,130,1677,131,1676,136,1673,136,1408,79"/>
<area shape="rect" title=" " alt="" coords="1812,133,1892,167"/>
<area shape="poly" title=" " alt="" coords="1409,62,1590,90,1797,130,1796,135,1590,95,1408,67"/>
<area shape="rect" title=" " alt="" coords="1916,133,2047,167"/>
<area shape="poly" title=" " alt="" coords="1409,61,1636,90,1901,130,1900,135,1636,95,1409,66"/>
<area shape="rect" title=" " alt="" coords="1702,541,1813,575"/>
<area shape="poly" title=" " alt="" coords="1409,58,1463,69,1519,84,1574,104,1625,131,1684,167,1730,202,1747,223,1759,247,1767,277,1769,312,1769,396,1763,526,1758,526,1764,396,1764,312,1761,278,1754,249,1742,226,1726,206,1681,171,1623,135,1572,109,1517,89,1462,74,1408,63"/>
<area shape="rect" title=" " alt="" coords="1550,541,1677,575"/>
<area shape="poly" title=" " alt="" coords="1410,63,1481,83,1553,113,1587,133,1619,156,1647,182,1672,213,1691,253,1699,296,1698,341,1690,386,1678,428,1663,468,1633,529,1628,527,1658,465,1673,427,1685,384,1693,341,1693,297,1686,255,1667,216,1643,186,1615,160,1584,137,1551,118,1479,88,1408,68"/>
<area shape="rect" title=" " alt="" coords="2070,133,2149,167"/>
<area shape="poly" title=" " alt="" coords="1409,51,1543,61,1704,77,1879,99,2055,130,2054,135,1878,105,1703,82,1543,67,1409,57"/>
<area shape="rect" title=" " alt="" coords="2173,133,2313,167"/>
<area shape="poly" title=" " alt="" coords="1409,54,1747,82,1950,104,2157,130,2157,135,1950,109,1746,88,1409,59"/>
<area shape="rect" href="../../dc/d56/uloop_8h.html" title=" " alt="" coords="1094,378,1258,412"/>
<area shape="poly" title=" " alt="" coords="1258,86,1186,364,1181,362,1253,85"/>
<area shape="rect" href="../../d5/d1d/libubox_2utils_8h.html" title=" " alt="" coords="1156,460,1308,493"/>
<area shape="poly" title=" " alt="" coords="1278,85,1292,152,1299,230,1299,315,1297,343,1292,365,1273,413,1254,448,1250,445,1268,411,1287,364,1292,342,1293,314,1293,230,1287,153,1273,86"/>
<area shape="rect" href="../../db/d55/libubus_8h.html" title=" " alt="" coords="610,215,718,248"/>
<area shape="poly" title=" " alt="" coords="1122,60,1014,72,903,88,805,109,766,122,737,135,719,149,704,166,680,202,676,199,700,163,716,145,735,131,764,117,803,104,902,83,1013,67,1121,55"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html" title=" " alt="" coords="185,296,378,330"/>
<area shape="poly" title=" " alt="" coords="1122,58,974,69,813,86,666,108,607,121,562,135,517,160,487,188,457,218,415,251,335,292,333,287,412,246,454,214,483,184,514,156,560,131,606,116,665,103,812,81,973,64,1121,52"/>
<area shape="rect" href="../../d5/dea/blobmsg__json_8h.html" title=" " alt="" coords="161,215,402,248"/>
<area shape="poly" title=" " alt="" coords="1122,49,983,54,817,68,641,94,554,113,469,136,427,151,387,170,319,208,316,204,384,165,425,146,467,130,552,108,640,89,817,63,982,49,1122,44"/>
<area shape="rect" href="../../d4/d2c/uci_8h.html" title=" " alt="" coords="1364,133,1431,167"/>
<area shape="poly" title=" " alt="" coords="1318,84,1367,121,1363,126,1314,88"/>
<area shape="rect" href="../../df/d26/procd_2jail_2netifd_8h.html" title=" " alt="" coords="573,133,667,167"/>
<area shape="poly" title=" " alt="" coords="1122,67,915,97,686,136,682,136,681,131,685,130,914,91,1121,62"/>
<area shape="rect" href="../../d8/d30/procd_2jail_2log_8h.html" title=" " alt="" coords="42,296,110,330"/>
<area shape="poly" title=" " alt="" coords="1122,53,968,61,782,76,582,100,383,136,260,161,209,180,151,217,118,249,94,284,89,281,114,246,148,213,207,176,258,156,382,130,581,94,782,70,968,55,1121,47"/>
<area shape="rect" href="../../d2/d88/jail_8h.html" title=" " alt="" coords="2337,133,2402,167"/>
<area shape="poly" title=" " alt="" coords="1409,44,1591,49,1818,62,2069,88,2196,107,2322,130,2321,135,2196,112,2068,93,1817,67,1590,54,1409,49"/>
<area shape="poly" title=" " alt="" coords="1259,400,1371,419,1431,435,1489,457,1545,491,1589,529,1586,533,1542,496,1487,462,1430,440,1370,424,1258,405"/>
<area shape="rect" title=" " alt="" coords="1287,541,1404,575"/>
<area shape="poly" title=" " alt="" coords="1245,410,1286,429,1305,442,1322,458,1340,491,1347,525,1341,526,1335,493,1318,461,1302,446,1284,433,1243,415"/>
<area shape="rect" title=" " alt="" coords="397,541,504,575"/>
<area shape="poly" title=" " alt="" coords="1154,414,1084,456,1040,478,993,496,930,513,864,527,734,546,615,556,520,559,520,554,615,551,733,541,863,522,928,508,991,491,1037,473,1082,451,1151,410"/>
<area shape="rect" title=" " alt="" coords="855,541,948,575"/>
<area shape="poly" title=" " alt="" coords="1167,414,1135,454,1113,476,1088,496,1035,519,963,542,961,537,1033,514,1085,491,1109,472,1131,451,1163,411"/>
<area shape="rect" title=" " alt="" coords="1382,460,1477,493"/>
<area shape="poly" title=" " alt="" coords="1228,410,1368,453,1366,458,1226,415"/>
<area shape="rect" href="../../da/d23/list_8h.html" title=" " alt="" coords="418,460,484,493"/>
<area shape="poly" title=" " alt="" coords="1094,404,791,427,628,444,500,462,499,457,627,438,790,422,1093,399"/>
<area shape="poly" title=" " alt="" coords="453,494,453,526,448,526,448,494"/>
<area shape="poly" title=" " alt="" coords="1309,484,1478,505,1687,538,1686,544,1477,511,1308,489"/>
<area shape="poly" title=" " alt="" coords="1309,491,1535,538,1534,543,1308,496"/>
<area shape="poly" title=" " alt="" coords="1256,492,1312,530,1309,534,1253,496"/>
<area shape="poly" title=" " alt="" coords="1156,489,1087,496,520,553,519,547,1086,491,1155,483"/>
<area shape="poly" title=" " alt="" coords="1161,497,963,543,962,538,1160,491"/>
<area shape="rect" title=" " alt="" coords="1429,541,1526,575"/>
<area shape="poly" title=" " alt="" coords="1282,491,1414,534,1413,539,1281,496"/>
<area shape="rect" title=" " alt="" coords="972,541,1052,575"/>
<area shape="poly" title=" " alt="" coords="1188,496,1068,540,1066,535,1187,491"/>
<area shape="rect" title=" " alt="" coords="1076,541,1263,575"/>
<area shape="poly" title=" " alt="" coords="1221,495,1194,531,1189,527,1217,492"/>
<area shape="poly" title=" " alt="" coords="719,241,820,263,934,294,1039,332,1128,369,1126,374,1037,337,933,299,818,268,718,246"/>
<area shape="poly" title=" " alt="" coords="718,234,759,241,804,252,849,270,891,294,947,338,971,360,990,383,1003,407,1009,434,1007,463,994,495,977,518,954,535,951,531,973,514,990,492,1001,462,1004,434,998,409,985,386,967,363,943,342,888,299,847,274,802,257,758,246,718,240"/>
<area shape="poly" title=" " alt="" coords="662,250,648,288,625,331,594,369,559,402,491,453,488,449,555,398,590,365,620,329,643,286,657,248"/>
<area shape="rect" href="../../d3/d51/avl_8h.html" title=" " alt="" coords="381,378,521,412"/>
<area shape="poly" title=" " alt="" coords="657,250,630,290,590,332,553,356,515,374,513,369,551,351,586,328,626,287,653,247"/>
<area shape="poly" title=" " alt="" coords="611,247,375,295,374,290,609,241"/>
<area shape="rect" href="../../d5/d79/ubusmsg_8h.html" title=" " alt="" coords="752,296,877,330"/>
<area shape="poly" title=" " alt="" coords="696,246,772,287,770,291,693,251"/>
<area shape="rect" href="../../dc/d3c/ubus__common_8h.html" title=" " alt="" coords="402,296,577,330"/>
<area shape="poly" title=" " alt="" coords="630,251,540,292,537,287,628,246"/>
<area shape="poly" title=" " alt="" coords="437,413,421,435,408,461,405,477,408,493,416,511,428,528,423,531,412,514,403,494,399,477,403,459,416,432,433,410"/>
<area shape="poly" title=" " alt="" coords="453,412,453,444,448,444,448,412"/>
<area shape="rect" title=" " alt="" coords="194,378,292,412"/>
<area shape="poly" title=" " alt="" coords="276,332,259,365,255,363,271,329"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html" title=" " alt="" coords="752,378,832,412"/>
<area shape="poly" title=" " alt="" coords="379,327,737,382,737,388,378,332"/>
<area shape="poly" title=" " alt="" coords="752,403,125,472,124,466,752,398"/>
<area shape="poly" title=" " alt="" coords="753,412,614,458,612,453,751,407"/>
<area shape="poly" title=" " alt="" coords="790,413,781,445,776,444,785,411"/>
<area shape="poly" title=" " alt="" coords="822,410,895,450,893,454,820,414"/>
<area shape="poly" title=" " alt="" coords="766,415,696,453,612,496,510,538,508,533,610,491,694,448,763,410"/>
<area shape="poly" title=" " alt="" coords="764,414,740,431,720,450,709,471,709,481,714,492,740,517,772,534,806,545,840,552,839,557,805,551,769,539,736,521,710,495,704,483,704,470,716,447,737,427,761,410"/>
<area shape="poly" title=" " alt="" coords="833,401,1141,456,1140,461,832,406"/>
<area shape="poly" title=" " alt="" coords="825,329,846,377,866,435,883,493,893,525,888,527,877,494,860,436,842,379,820,332"/>
<area shape="poly" title=" " alt="" coords="813,331,803,364,798,362,808,330"/>
<area shape="poly" title=" " alt="" coords="432,333,397,352,382,364,370,379,363,398,361,418,365,439,373,459,397,497,424,529,420,532,393,500,368,461,360,440,356,419,357,397,366,377,378,360,394,347,429,328"/>
<area shape="poly" title=" " alt="" coords="233,251,201,270,187,283,176,297,170,320,169,352,174,385,184,410,203,435,225,456,277,492,332,519,383,537,381,542,330,524,274,497,222,460,199,438,179,413,169,387,164,353,165,319,171,295,183,279,198,266,231,247"/>
<area shape="poly" title=" " alt="" coords="284,249,284,281,279,281,279,249"/>
<area shape="poly" title=" " alt="" coords="1431,148,1478,151,1534,160,1591,179,1618,194,1642,213,1660,236,1677,270,1709,358,1735,451,1753,526,1748,527,1730,452,1704,359,1672,272,1655,239,1638,217,1615,199,1589,184,1532,165,1477,156,1431,153"/>
<area shape="poly" title=" " alt="" coords="1403,167,1412,204,1426,247,1467,330,1514,409,1595,527,1590,530,1509,412,1463,333,1422,249,1407,206,1398,168"/>
<area shape="poly" title=" " alt="" coords="1393,168,1381,205,1379,226,1381,248,1392,282,1405,309,1436,352,1466,396,1480,424,1491,459,1493,494,1489,527,1483,526,1488,494,1485,460,1475,426,1462,399,1431,356,1400,312,1387,284,1376,249,1374,226,1376,204,1388,166"/>
<area shape="poly" title=" " alt="" coords="1364,157,733,225,733,220,1364,152"/>
<area shape="poly" title=" " alt="" coords="1431,132,1449,136,1455,141,1457,150,1454,159,1447,165,1444,161,1450,156,1452,150,1450,144,1446,140,1430,137"/>
<area shape="rect" title=" " alt="" coords="1548,215,1628,248"/>
<area shape="poly" title=" " alt="" coords="1432,163,1536,206,1534,211,1430,168"/>
<area shape="rect" title=" " alt="" coords="1435,215,1525,248"/>
<area shape="poly" title=" " alt="" coords="1416,165,1454,202,1451,206,1412,169"/>
<area shape="poly" title=" " alt="" coords="631,166,650,200,645,202,627,168"/>
<area shape="poly" title=" " alt="" coords="78,331,71,444,66,444,72,330"/>
</map>
</div>
</div>
<p><a href="../../db/d3d/netifd_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a369266c24eacffb87046522897a570d5" id="r_a369266c24eacffb87046522897a570d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a369266c24eacffb87046522897a570d5">_GNU_SOURCE</a>&#160;&#160;&#160;/* See feature_test_macros(7) */</td></tr>
<tr class="separator:a369266c24eacffb87046522897a570d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e59236831f66e639dcecff4978eca8" id="r_ab1e59236831f66e639dcecff4978eca8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1e59236831f66e639dcecff4978eca8">INOTIFY_SZ</a>&#160;&#160;&#160;(sizeof(struct inotify_event) + PATH_MAX + 1)</td></tr>
<tr class="separator:ab1e59236831f66e639dcecff4978eca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abd429d69805c0a0249657bd5dee82dd8" id="r_abd429d69805c0a0249657bd5dee82dd8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abd429d69805c0a0249657bd5dee82dd8">gen_jail_uci_network</a> (void)</td></tr>
<tr class="separator:abd429d69805c0a0249657bd5dee82dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a100bb2a7c1f45b834997e21760b2c375" id="r_a100bb2a7c1f45b834997e21760b2c375"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a100bb2a7c1f45b834997e21760b2c375">run_ubusd</a> (struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a> *t)</td></tr>
<tr class="separator:a100bb2a7c1f45b834997e21760b2c375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac2f976b0c50060bced04426971313a3" id="r_aac2f976b0c50060bced04426971313a3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aac2f976b0c50060bced04426971313a3">run_netifd</a> (struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a> *t)</td></tr>
<tr class="separator:aac2f976b0c50060bced04426971313a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a236bb6b2255c0b3d555d8b5226c6884a" id="r_a236bb6b2255c0b3d555d8b5226c6884a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a236bb6b2255c0b3d555d8b5226c6884a">inotify_read_handler</a> (struct <a class="el" href="../../dc/d56/uloop_8h.html#db/d9e/structuloop__fd">uloop_fd</a> *u, unsigned int <a class="el" href="../../d3/d91/uloop-epoll_8c.html#a0e992398f478de38db56a1146ea84e93">events</a>)</td></tr>
<tr class="separator:a236bb6b2255c0b3d555d8b5226c6884a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71698b19f7fdbb3ae922ac51f68e9793" id="r_a71698b19f7fdbb3ae922ac51f68e9793"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a71698b19f7fdbb3ae922ac51f68e9793">netns_updown</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d1/d96/ubus_2lua_2ubus_8c.html#a3d36b63e5e323c6a729ddcf4932944cc">ubus</a>, const char *name, bool start, int <a class="el" href="../../dd/d26/jail_8c.html#ac256367002c667bedef320ba8eff2aa0">netns_fd</a>)</td></tr>
<tr class="separator:a71698b19f7fdbb3ae922ac51f68e9793"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1d8e0a83e71bbd02b3daa8c507a9fb" id="r_acc1d8e0a83e71bbd02b3daa8c507a9fb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acc1d8e0a83e71bbd02b3daa8c507a9fb">jail_network_reload</a> (struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a> *t)</td></tr>
<tr class="separator:acc1d8e0a83e71bbd02b3daa8c507a9fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8771ddaea81ee77859c78c10f3eb0dc0" id="r_a8771ddaea81ee77859c78c10f3eb0dc0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8771ddaea81ee77859c78c10f3eb0dc0">config_watch_notify_cb</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *obj, struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *req, const char *method, struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *msg)</td></tr>
<tr class="separator:a8771ddaea81ee77859c78c10f3eb0dc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54efb4f9d0b67d049b750dfe54212cce" id="r_a54efb4f9d0b67d049b750dfe54212cce"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a54efb4f9d0b67d049b750dfe54212cce">watch_ubus_service</a> (void)</td></tr>
<tr class="separator:a54efb4f9d0b67d049b750dfe54212cce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a086fe28fa898f797f9a657e63a3a95bd" id="r_a086fe28fa898f797f9a657e63a3a95bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a086fe28fa898f797f9a657e63a3a95bd">jail_network_start</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *new_ctx, char *new_jail_name, pid_t new_ns_pid)</td></tr>
<tr class="separator:a086fe28fa898f797f9a657e63a3a95bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecf17edd05dd1516fd1785ed6cc97d7c" id="r_aecf17edd05dd1516fd1785ed6cc97d7c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aecf17edd05dd1516fd1785ed6cc97d7c">jail_delete_instance</a> (const char *instance)</td></tr>
<tr class="separator:aecf17edd05dd1516fd1785ed6cc97d7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeada94c74be21275dbafb9a8d9515e90" id="r_aeada94c74be21275dbafb9a8d9515e90"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeada94c74be21275dbafb9a8d9515e90">jail_network_stop</a> (void)</td></tr>
<tr class="separator:aeada94c74be21275dbafb9a8d9515e90"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a9b9657bb8e98d98eaa6c7185ed5f44f9" id="r_a9b9657bb8e98d98eaa6c7185ed5f44f9"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9b9657bb8e98d98eaa6c7185ed5f44f9">ubusd_path</a> [] = &quot;/sbin/ubusd&quot;</td></tr>
<tr class="separator:a9b9657bb8e98d98eaa6c7185ed5f44f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae660c2c1d418d310f64183d43ec58d5" id="r_aae660c2c1d418d310f64183d43ec58d5"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae660c2c1d418d310f64183d43ec58d5">netifd_path</a> [] = &quot;/sbin/netifd&quot;</td></tr>
<tr class="separator:aae660c2c1d418d310f64183d43ec58d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a253c8471e02dffa613862acddd2346c1" id="r_a253c8471e02dffa613862acddd2346c1"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a253c8471e02dffa613862acddd2346c1">uci_net</a> [] = &quot;network&quot;</td></tr>
<tr class="separator:a253c8471e02dffa613862acddd2346c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a082e69bee2841ec201d24fe06894f5e6" id="r_a082e69bee2841ec201d24fe06894f5e6"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a082e69bee2841ec201d24fe06894f5e6">ubus_sock_name</a> [] = &quot;ubus.sock&quot;</td></tr>
<tr class="separator:a082e69bee2841ec201d24fe06894f5e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b583a27c491ee79cde9851e9bd02e6e" id="r_a1b583a27c491ee79cde9851e9bd02e6e"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b583a27c491ee79cde9851e9bd02e6e">jail_name</a></td></tr>
<tr class="separator:a1b583a27c491ee79cde9851e9bd02e6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2751d130bdb6095087bf22c3d3f4a159" id="r_a2751d130bdb6095087bf22c3d3f4a159"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2751d130bdb6095087bf22c3d3f4a159">ubus_sock_path</a></td></tr>
<tr class="separator:a2751d130bdb6095087bf22c3d3f4a159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2c6d0302ae2ea1147a41c9d05d81e3a" id="r_af2c6d0302ae2ea1147a41c9d05d81e3a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a></td></tr>
<tr class="separator:af2c6d0302ae2ea1147a41c9d05d81e3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15b218e71f7aeebd4236246f489d9a39" id="r_a15b218e71f7aeebd4236246f489d9a39"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15b218e71f7aeebd4236246f489d9a39">uci_config_network</a> = NULL</td></tr>
<tr class="separator:a15b218e71f7aeebd4236246f489d9a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea05153e1f6883168a7c1a20f881a048" id="r_aea05153e1f6883168a7c1a20f881a048"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aea05153e1f6883168a7c1a20f881a048">inotify_buffer</a></td></tr>
<tr class="separator:aea05153e1f6883168a7c1a20f881a048"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96c9bf4047dfd7bb93def7047fe800a7" id="r_a96c9bf4047dfd7bb93def7047fe800a7"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d56/uloop_8h.html#db/d9e/structuloop__fd">uloop_fd</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96c9bf4047dfd7bb93def7047fe800a7">fd_inotify_read</a></td></tr>
<tr class="separator:a96c9bf4047dfd7bb93def7047fe800a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad089f40feda5fe2747f51364b17c5048" id="r_ad089f40feda5fe2747f51364b17c5048"><td class="memItemLeft" align="right" valign="top">static struct passwd *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad089f40feda5fe2747f51364b17c5048">ubus_pw</a></td></tr>
<tr class="separator:ad089f40feda5fe2747f51364b17c5048"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad44a100157e230119d20d1b28ca76625" id="r_ad44a100157e230119d20d1b28ca76625"><td class="memItemLeft" align="right" valign="top">static pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad44a100157e230119d20d1b28ca76625">ns_pid</a></td></tr>
<tr class="separator:ad44a100157e230119d20d1b28ca76625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c3a54c3d31af7db783f8bd6e25fb603" id="r_a3c3a54c3d31af7db783f8bd6e25fb603"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a> = NULL</td></tr>
<tr class="separator:a3c3a54c3d31af7db783f8bd6e25fb603"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7ecd9598eed63587841ef3d2e84557f" id="r_ab7ecd9598eed63587841ef3d2e84557f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab7ecd9598eed63587841ef3d2e84557f">jail_ubus_ctx</a> = NULL</td></tr>
<tr class="separator:ab7ecd9598eed63587841ef3d2e84557f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7da28ca356f84736c6e763fdbda21f73" id="r_a7da28ca356f84736c6e763fdbda21f73"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d55/libubus_8h.html#d4/d40/structubus__subscriber">ubus_subscriber</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7da28ca356f84736c6e763fdbda21f73">config_watch_subscribe</a></td></tr>
<tr class="separator:a7da28ca356f84736c6e763fdbda21f73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90439d321702f2eb777ebcd03794038b" id="r_a90439d321702f2eb777ebcd03794038b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90439d321702f2eb777ebcd03794038b">netifd_start_timeout</a> = { .cb = <a class="el" href="#aac2f976b0c50060bced04426971313a3">run_netifd</a>, }</td></tr>
<tr class="separator:a90439d321702f2eb777ebcd03794038b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d5fef8a70f518fe455801b5712888b4" id="r_a6d5fef8a70f518fe455801b5712888b4"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/dad/blobmsg_8h.html#d3/d4d/structblobmsg__policy">blobmsg_policy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6d5fef8a70f518fe455801b5712888b4">service_watch_policy</a> = { &quot;config&quot;, <a class="el" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> }</td></tr>
<tr class="separator:a6d5fef8a70f518fe455801b5712888b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfc99a198e85e644b889dfebbd711363" id="r_adfc99a198e85e644b889dfebbd711363"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adfc99a198e85e644b889dfebbd711363">jail_network_reload_timeout</a> = { .cb = <a class="el" href="#acc1d8e0a83e71bbd02b3daa8c507a9fb">jail_network_reload</a>, }</td></tr>
<tr class="separator:adfc99a198e85e644b889dfebbd711363"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaca871d36faffe71d9de4359c9857d6" id="r_aaaca871d36faffe71d9de4359c9857d6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaaca871d36faffe71d9de4359c9857d6">ubus_start_timeout</a> = { .cb = <a class="el" href="#a100bb2a7c1f45b834997e21760b2c375">run_ubusd</a>, }</td></tr>
<tr class="separator:aaaca871d36faffe71d9de4359c9857d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a369266c24eacffb87046522897a570d5" name="a369266c24eacffb87046522897a570d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a369266c24eacffb87046522897a570d5">&#9670;&#160;</a></span>_GNU_SOURCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _GNU_SOURCE&#160;&#160;&#160;/* See feature_test_macros(7) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00017">17</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

</div>
</div>
<a id="ab1e59236831f66e639dcecff4978eca8" name="ab1e59236831f66e639dcecff4978eca8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1e59236831f66e639dcecff4978eca8">&#9670;&#160;</a></span>INOTIFY_SZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INOTIFY_SZ&#160;&#160;&#160;(sizeof(struct inotify_event) + PATH_MAX + 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00044">44</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00323">inotify_read_handler()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8771ddaea81ee77859c78c10f3eb0dc0" name="a8771ddaea81ee77859c78c10f3eb0dc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8771ddaea81ee77859c78c10f3eb0dc0">&#9670;&#160;</a></span>config_watch_notify_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int config_watch_notify_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#d5/d2a/structubus__request__data">ubus_request_data</a> *</td>          <td class="paramname"><span class="paramname"><em>req</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00390">390</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  393</span>{</div>
<div class="line"><span class="lineno">  394</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *attr;</div>
<div class="line"><span class="lineno">  395</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="../../db/dc3/ucode_8c.html#a4c9939399e6841bf7499e98ed9635461">config</a>;</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>    <span class="keywordflow">if</span> (strcmp(method, <span class="stringliteral">&quot;config.change&quot;</span>))</div>
<div class="line"><span class="lineno">  398</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>    <a class="code hl_function" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed">blobmsg_parse</a>(&amp;<a class="code hl_variable" href="#a6d5fef8a70f518fe455801b5712888b4">service_watch_policy</a>, 1, &amp;attr, <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857">blob_data</a>(msg), <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32">blob_len</a>(msg));</div>
<div class="line"><span class="lineno">  401</span>    <span class="keywordflow">if</span> (!attr)</div>
<div class="line"><span class="lineno">  402</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>    <a class="code hl_variable" href="../../db/dc3/ucode_8c.html#a4c9939399e6841bf7499e98ed9635461">config</a> = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603">blobmsg_get_string</a>(attr);</div>
<div class="line"><span class="lineno">  405</span>    <span class="keywordflow">if</span> (strcmp(<a class="code hl_variable" href="../../db/dc3/ucode_8c.html#a4c9939399e6841bf7499e98ed9635461">config</a>, <span class="stringliteral">&quot;network&quot;</span>))</div>
<div class="line"><span class="lineno">  406</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>    <a class="code hl_function" href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07">uloop_timeout_add</a>(&amp;<a class="code hl_variable" href="#adfc99a198e85e644b889dfebbd711363">jail_network_reload_timeout</a>);</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  411</span>}</div>
<div class="ttc" id="ablob_8h_html_a66e0b636bd2bbafbf8701a1e91bbf857"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857">blob_data</a></div><div class="ttdeci">static void * blob_data(const struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00075">blob.h:75</a></div></div>
<div class="ttc" id="ablob_8h_html_a9921d2b89577d3344abbb66f24773e32"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32">blob_len</a></div><div class="ttdeci">static size_t blob_len(const struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00100">blob.h:100</a></div></div>
<div class="ttc" id="ablob_8h_html_dc/dd9/structblob__attr"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a></div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00052">blob.h:52</a></div></div>
<div class="ttc" id="ablobmsg_8c_html_afb56b36905412b6618a529c171e833ed"><div class="ttname"><a href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed">blobmsg_parse</a></div><div class="ttdeci">int blobmsg_parse(const struct blobmsg_policy *policy, int policy_len, struct blob_attr **tb, void *data, unsigned int len)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d30/blobmsg_8c_source.html#l00166">blobmsg.c:166</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a6c1cc8e52e96bf9698f6b0f65ad48603"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603">blobmsg_get_string</a></div><div class="ttdeci">static char * blobmsg_get_string(struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00348">blobmsg.h:348</a></div></div>
<div class="ttc" id="anetifd_8c_html_a6d5fef8a70f518fe455801b5712888b4"><div class="ttname"><a href="#a6d5fef8a70f518fe455801b5712888b4">service_watch_policy</a></div><div class="ttdeci">static const struct blobmsg_policy service_watch_policy</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00387">netifd.c:387</a></div></div>
<div class="ttc" id="anetifd_8c_html_adfc99a198e85e644b889dfebbd711363"><div class="ttname"><a href="#adfc99a198e85e644b889dfebbd711363">jail_network_reload_timeout</a></div><div class="ttdeci">static struct uloop_timeout jail_network_reload_timeout</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00388">netifd.c:388</a></div></div>
<div class="ttc" id="aucode_8c_html_a4c9939399e6841bf7499e98ed9635461"><div class="ttname"><a href="../../db/dc3/ucode_8c.html#a4c9939399e6841bf7499e98ed9635461">config</a></div><div class="ttdeci">static uc_parse_config_t config</div><div class="ttdef"><b>Definition</b> <a href="../../db/dc3/ucode_8c_source.html#l00077">ucode.c:77</a></div></div>
<div class="ttc" id="auloop_8c_html_ae60859ac8015e8f1381e56f5eaae0a07"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07">uloop_timeout_add</a></div><div class="ttdeci">int uloop_timeout_add(struct uloop_timeout *timeout)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00298">uloop.c:298</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d3c/blob_8h_source.html#l00075">blob_data()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00100">blob_len()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00348">blobmsg_get_string()</a>, <a class="el" href="../../d1/d30/blobmsg_8c_source.html#l00166">blobmsg_parse()</a>, <a class="el" href="../../db/dc3/ucode_8c_source.html#l00077">config</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00388">jail_network_reload_timeout</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00387">service_watch_policy</a>, and <a class="el" href="../../d1/d08/uloop_8c_source.html#l00298">uloop_timeout_add()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00413">watch_ubus_service()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d3d/netifd_8c_a8771ddaea81ee77859c78c10f3eb0dc0_cgraph.png" border="0" usemap="#adb/d3d/netifd_8c_a8771ddaea81ee77859c78c10f3eb0dc0_cgraph" alt=""/></div>
<map name="adb/d3d/netifd_8c_a8771ddaea81ee77859c78c10f3eb0dc0_cgraph" id="adb/d3d/netifd_8c_a8771ddaea81ee77859c78c10f3eb0dc0_cgraph">
<area shape="rect" title=" " alt="" coords="5,250,240,284"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1343,145,1454,178"/>
<area shape="poly" title=" " alt="" coords="135,248,195,178,238,138,286,104,383,53,464,22,550,7,659,3,944,3,1005,7,1065,17,1125,33,1181,52,1282,95,1357,134,1354,139,1280,100,1179,57,1123,38,1064,22,1004,12,944,8,659,8,550,12,466,27,385,57,289,109,241,142,199,182,139,251"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1130,258,1229,292"/>
<area shape="poly" title=" " alt="" coords="240,265,1114,272,1114,277,240,270"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603" title=" " alt="" coords="288,119,491,153"/>
<area shape="poly" title=" " alt="" coords="158,247,338,158,340,163,160,252"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed" title=" " alt="" coords="308,405,471,438"/>
<area shape="poly" title=" " alt="" coords="155,282,347,394,344,399,152,286"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07" title=" " alt="" coords="291,637,488,670"/>
<area shape="poly" title=" " alt="" coords="138,282,370,622,365,625,133,285"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="1104,199,1255,233"/>
<area shape="poly" title=" " alt="" coords="491,122,607,115,750,114,904,124,981,135,1056,151,1101,167,1141,188,1139,193,1099,172,1055,156,980,140,903,129,750,119,608,120,491,128"/>
<area shape="poly" title=" " alt="" coords="1249,196,1327,176,1328,181,1250,201"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a673de80167cf18faad1b4a21670d0cf3" title=" " alt="" coords="1308,419,1489,453"/>
<area shape="poly" title=" " alt="" coords="1242,231,1257,244,1272,265,1279,286,1281,327,1283,367,1290,387,1305,406,1306,408,1303,411,1301,410,1285,389,1278,368,1275,328,1274,287,1267,267,1253,247,1238,235"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ac239a83ed3c7f835e2b49f785953c934" title=" " alt="" coords="1313,362,1483,396"/>
<area shape="poly" title=" " alt="" coords="1234,231,1256,243,1291,268,1323,296,1374,348,1371,352,1319,300,1288,272,1254,248,1231,236"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a7613e130753e766f5d381c06b1f7b86f" title=" " alt="" coords="1303,531,1493,565"/>
<area shape="poly" title=" " alt="" coords="1243,231,1257,244,1276,272,1285,299,1288,326,1287,352,1286,405,1292,433,1305,464,1330,495,1359,520,1355,524,1326,499,1301,467,1286,435,1281,406,1282,351,1283,326,1280,300,1271,274,1253,247,1239,235"/>
<area shape="poly" title=" " alt="" coords="408,402,473,349,572,277,631,239,695,205,762,174,830,151,897,136,966,127,1035,123,1103,123,1229,132,1328,145,1327,151,1228,137,1103,128,1035,128,966,132,898,141,831,156,763,179,697,209,634,244,575,281,476,353,412,406"/>
<area shape="poly" title=" " alt="" coords="430,436,482,457,540,476,682,512,795,531,850,534,910,534,1055,520,1130,508,1204,491,1330,455,1331,461,1205,496,1131,513,1056,525,910,539,850,540,795,536,681,517,538,481,480,462,428,441"/>
<area shape="poly" title=" " alt="" coords="407,437,462,488,499,515,540,535,639,563,742,582,847,592,950,594,1048,591,1140,585,1291,565,1292,571,1140,590,1049,597,950,600,846,597,742,587,638,569,538,540,496,519,458,493,404,440"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac79cacbc6a47f754832dc10bafa3b761" title=" " alt="" coords="899,477,987,510"/>
<area shape="poly" title=" " alt="" coords="471,429,884,483,884,488,470,434"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5a5283071ac5677652515d9a8460e655" title=" " alt="" coords="539,362,782,396"/>
<area shape="poly" title=" " alt="" coords="470,406,534,396,535,401,471,411"/>
<area shape="poly" title=" " alt="" coords="668,360,690,320,725,269,772,219,799,197,829,180,866,167,905,160,945,158,984,160,1059,173,1121,191,1120,196,1058,178,984,165,945,163,906,165,868,172,831,185,802,202,775,223,729,273,695,323,673,363"/>
<area shape="poly" title=" " alt="" coords="695,394,768,433,831,463,885,479,883,484,829,468,766,438,693,399"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6b6c429265d86411d05951d2fae7289a" title=" " alt="" coords="856,305,1030,338"/>
<area shape="poly" title=" " alt="" coords="747,359,841,339,842,344,748,364"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="872,362,1014,396"/>
<area shape="poly" title=" " alt="" coords="783,376,856,376,856,381,783,381"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a131936c081164c18e6241d79f3b276d1" title=" " alt="" coords="830,419,1056,453"/>
<area shape="poly" title=" " alt="" coords="748,393,842,413,841,418,747,399"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a065ed993444c3173838a480ba4aac052" title=" " alt="" coords="849,195,1037,229"/>
<area shape="poly" title=" " alt="" coords="690,359,898,235,901,239,692,364"/>
<area shape="poly" title=" " alt="" coords="1013,363,1054,348,1079,330,1102,310,1124,297,1127,301,1105,314,1082,334,1057,353,1015,368"/>
<area shape="poly" title=" " alt="" coords="1023,416,1055,406,1157,358,1212,328,1253,302,1320,244,1371,188,1375,192,1323,248,1257,306,1215,333,1159,363,1057,410,1024,421"/>
<area shape="poly" title=" " alt="" coords="1037,416,1054,406,1072,384,1078,361,1085,336,1102,310,1117,298,1120,302,1106,314,1090,338,1084,362,1076,386,1057,410,1040,421"/>
<area shape="poly" title=" " alt="" coords="1056,433,1292,433,1292,439,1056,439"/>
<area shape="poly" title=" " alt="" coords="1056,419,1297,389,1298,394,1057,424"/>
<area shape="poly" title=" " alt="" coords="1016,451,1312,524,1311,530,1014,456"/>
<area shape="poly" title=" " alt="" coords="1037,193,1103,184,1327,163,1327,169,1104,189,1038,199"/>
<area shape="poly" title=" " alt="" coords="1010,227,1116,255,1114,260,1009,232"/>
<area shape="poly" title=" " alt="" coords="1038,211,1088,212,1088,217,1038,216"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="596,637,725,670"/>
<area shape="poly" title=" " alt="" coords="488,651,580,651,580,656,488,656"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a76f33118cba0a358482528fad8c0f4cd" title=" " alt="" coords="622,694,700,728"/>
<area shape="poly" title=" " alt="" coords="473,668,607,697,606,702,472,673"/>
<area shape="rect" href="../../da/d23/list_8h.html#a9d61a1a731a0cf44336e2ee9e45f712d" title=" " alt="" coords="892,637,994,670"/>
<area shape="poly" title=" " alt="" coords="726,651,877,651,877,656,726,656"/>
</map>
</div>

</div>
</div>
<a id="abd429d69805c0a0249657bd5dee82dd8" name="abd429d69805c0a0249657bd5dee82dd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd429d69805c0a0249657bd5dee82dd8">&#9670;&#160;</a></span>gen_jail_uci_network()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int gen_jail_uci_network </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00064">64</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   65</span>{</div>
<div class="line"><span class="lineno">   66</span>    <span class="keyword">struct </span>uci_context *<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a> = uci_alloc_context();</div>
<div class="line"><span class="lineno">   67</span>    <span class="keyword">struct </span>uci_package *pkg = NULL;</div>
<div class="line"><span class="lineno">   68</span>    <span class="keyword">struct </span>uci_element *e, *t;</div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordtype">bool</span> has_loopback = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><span class="lineno">   71</span>    FILE *ucinetf;</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>    <span class="comment">/* if no network configuration is active just return */</span></div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#a15b218e71f7aeebd4236246f489d9a39">uci_config_network</a>)</div>
<div class="line"><span class="lineno">   75</span>        <span class="keywordflow">goto</span> uci_out;</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>    <span class="comment">/* open output uci network config file */</span></div>
<div class="line"><span class="lineno">   78</span>    ucinetf = fopen(<a class="code hl_variable" href="#a15b218e71f7aeebd4236246f489d9a39">uci_config_network</a>, <span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line"><span class="lineno">   79</span>    <span class="keywordflow">if</span> (!ucinetf) {</div>
<div class="line"><span class="lineno">   80</span>        ret = errno;</div>
<div class="line"><span class="lineno">   81</span>        <span class="keywordflow">goto</span> uci_out;</div>
<div class="line"><span class="lineno">   82</span>    }</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>    <span class="comment">/* load network uci package */</span></div>
<div class="line"><span class="lineno">   85</span>    <span class="keywordflow">if</span> (uci_load(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, <a class="code hl_variable" href="#a253c8471e02dffa613862acddd2346c1">uci_net</a>, &amp;pkg) != UCI_OK) {</div>
<div class="line"><span class="lineno">   86</span>        <span class="keywordtype">char</span> *<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>;</div>
<div class="line"><span class="lineno">   87</span>        uci_get_errorstr(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, &amp;<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>, <a class="code hl_variable" href="#a253c8471e02dffa613862acddd2346c1">uci_net</a>);</div>
<div class="line"><span class="lineno">   88</span>        fprintf(stderr, <span class="stringliteral">&quot;unable to load configuration (%s)\n&quot;</span>, <a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>);</div>
<div class="line"><span class="lineno">   89</span>        free(<a class="code hl_define" href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a>);</div>
<div class="line"><span class="lineno">   90</span>        ret = EIO;</div>
<div class="line"><span class="lineno">   91</span>        <span class="keywordflow">goto</span> ucinetf_out;</div>
<div class="line"><span class="lineno">   92</span>    }</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>    <span class="comment">/* remove all sections which don&#39;t match jail */</span></div>
<div class="line"><span class="lineno">   95</span>    uci_foreach_element_safe(&amp;pkg-&gt;sections, t, e) {</div>
<div class="line"><span class="lineno">   96</span>        <span class="keyword">struct </span>uci_section *s = uci_to_section(e);</div>
<div class="line"><span class="lineno">   97</span>        <span class="keyword">struct </span>uci_option *o = uci_lookup_option(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, s, <span class="stringliteral">&quot;jail&quot;</span>);</div>
<div class="line"><span class="lineno">   98</span>        <span class="keyword">struct </span>uci_ptr ptr = { .p = pkg, .s = s };</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>        <span class="comment">/* keep match, but remove &#39;jail&#39; option and rename &#39;jail_ifname&#39; */</span></div>
<div class="line"><span class="lineno">  101</span>        <span class="keywordflow">if</span> (o &amp;&amp; o-&gt;type == UCI_TYPE_STRING &amp;&amp; !strcmp(o-&gt;v.string, <a class="code hl_variable" href="#a1b583a27c491ee79cde9851e9bd02e6e">jail_name</a>)) {</div>
<div class="line"><span class="lineno">  102</span>            ptr.o = o;</div>
<div class="line"><span class="lineno">  103</span>            <span class="keyword">struct </span>uci_option *jio = uci_lookup_option(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, s, <span class="stringliteral">&quot;jail_device&quot;</span>);</div>
<div class="line"><span class="lineno">  104</span>            <span class="keywordflow">if</span> (!jio)</div>
<div class="line"><span class="lineno">  105</span>                jio = uci_lookup_option(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, s, <span class="stringliteral">&quot;jail_ifname&quot;</span>);</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>            <span class="keywordflow">if</span> (jio) {</div>
<div class="line"><span class="lineno">  108</span>                <span class="keyword">struct </span>uci_ptr ren_ptr = { .p = pkg, .s = s, .o = jio, .value = <span class="stringliteral">&quot;device&quot;</span> };</div>
<div class="line"><span class="lineno">  109</span>                <span class="keyword">struct </span>uci_option *host_device = uci_lookup_option(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, s, <span class="stringliteral">&quot;device&quot;</span>);</div>
<div class="line"><span class="lineno">  110</span>                <span class="keyword">struct </span>uci_option *legacy_ifname = uci_lookup_option(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, s, <span class="stringliteral">&quot;ifname&quot;</span>);</div>
<div class="line"><span class="lineno">  111</span>                <span class="keywordflow">if</span> (host_device &amp;&amp; legacy_ifname) {</div>
<div class="line"><span class="lineno">  112</span>                    <span class="keyword">struct </span>uci_ptr delif_ptr = { .p = pkg, .s = s, .o = legacy_ifname };</div>
<div class="line"><span class="lineno">  113</span>                    uci_delete(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, &amp;delif_ptr);</div>
<div class="line"><span class="lineno">  114</span>                }</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>                <span class="keyword">struct </span>uci_ptr renif_ptr = { .p = pkg, .s = s, .o = host_device?:legacy_ifname, .value = <span class="stringliteral">&quot;host_device&quot;</span> };</div>
<div class="line"><span class="lineno">  117</span>                uci_rename(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, &amp;renif_ptr);</div>
<div class="line"><span class="lineno">  118</span>                uci_rename(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, &amp;ren_ptr);</div>
<div class="line"><span class="lineno">  119</span>            }</div>
<div class="line"><span class="lineno">  120</span>        }</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>        uci_delete(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, &amp;ptr);</div>
<div class="line"><span class="lineno">  123</span>    }</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>    <span class="comment">/* check if device &#39;lo&#39; is defined by any remaining interfaces */</span></div>
<div class="line"><span class="lineno">  126</span>    uci_foreach_element(&amp;pkg-&gt;sections, e) {</div>
<div class="line"><span class="lineno">  127</span>        <span class="keyword">struct </span>uci_section *s = uci_to_section(e);</div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordflow">if</span> (strcmp(s-&gt;type, <span class="stringliteral">&quot;interface&quot;</span>))</div>
<div class="line"><span class="lineno">  129</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *devname = uci_lookup_option_string(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, s, <span class="stringliteral">&quot;device&quot;</span>);</div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">if</span> (devname &amp;&amp; !strcmp(devname, <span class="stringliteral">&quot;lo&quot;</span>)) {</div>
<div class="line"><span class="lineno">  133</span>            has_loopback = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  134</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  135</span>        }</div>
<div class="line"><span class="lineno">  136</span>    }</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>    <span class="comment">/* create loopback interface section if not defined */</span></div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">if</span> (!has_loopback) {</div>
<div class="line"><span class="lineno">  140</span>        <span class="keyword">struct </span>uci_ptr ptr = { .p = pkg, .section = <span class="stringliteral">&quot;loopback&quot;</span>, .value = <span class="stringliteral">&quot;interface&quot;</span> };</div>
<div class="line"><span class="lineno">  141</span>        uci_set(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, &amp;ptr);</div>
<div class="line"><span class="lineno">  142</span>        uci_reorder_section(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, ptr.s, 0);</div>
<div class="line"><span class="lineno">  143</span>        <span class="keyword">struct </span>uci_ptr ptr1 = { .p = pkg, .s = ptr.s, .option = <span class="stringliteral">&quot;device&quot;</span>, .value = <span class="stringliteral">&quot;lo&quot;</span> };</div>
<div class="line"><span class="lineno">  144</span>        <span class="keyword">struct </span>uci_ptr ptr2 = { .p = pkg, .s = ptr.s, .option = <span class="stringliteral">&quot;proto&quot;</span>, .value = <span class="stringliteral">&quot;static&quot;</span> };</div>
<div class="line"><span class="lineno">  145</span>        <span class="keyword">struct </span>uci_ptr ptr3 = { .p = pkg, .s = ptr.s, .option = <span class="stringliteral">&quot;ipaddr&quot;</span>, .value = <span class="stringliteral">&quot;127.0.0.1&quot;</span> };</div>
<div class="line"><span class="lineno">  146</span>        <span class="keyword">struct </span>uci_ptr ptr4 = { .p = pkg, .s = ptr.s, .option = <span class="stringliteral">&quot;netmask&quot;</span>, .value = <span class="stringliteral">&quot;255.0.0.0&quot;</span> };</div>
<div class="line"><span class="lineno">  147</span>        uci_set(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, &amp;ptr1);</div>
<div class="line"><span class="lineno">  148</span>        uci_set(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, &amp;ptr2);</div>
<div class="line"><span class="lineno">  149</span>        uci_set(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, &amp;ptr3);</div>
<div class="line"><span class="lineno">  150</span>        uci_set(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, &amp;ptr4);</div>
<div class="line"><span class="lineno">  151</span>    }</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>    ret = uci_export(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>, ucinetf, pkg, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>ucinetf_out:</div>
<div class="line"><span class="lineno">  156</span>    fclose(ucinetf);</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>uci_out:</div>
<div class="line"><span class="lineno">  159</span>    uci_free_context(<a class="code hl_variable" href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a>);</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  162</span>}</div>
<div class="ttc" id="anetifd_2config_8c_html_a8ffd95f30e24e578afb4b8a99239e033"><div class="ttname"><a href="../../d5/d65/netifd_2config_8c.html#a8ffd95f30e24e578afb4b8a99239e033">uci_ctx</a></div><div class="ttdeci">static struct uci_context * uci_ctx</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d65/netifd_2config_8c_source.html#l00034">config.c:34</a></div></div>
<div class="ttc" id="anetifd_8c_html_a15b218e71f7aeebd4236246f489d9a39"><div class="ttname"><a href="#a15b218e71f7aeebd4236246f489d9a39">uci_config_network</a></div><div class="ttdeci">static char * uci_config_network</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00051">netifd.c:51</a></div></div>
<div class="ttc" id="anetifd_8c_html_a1b583a27c491ee79cde9851e9bd02e6e"><div class="ttname"><a href="#a1b583a27c491ee79cde9851e9bd02e6e">jail_name</a></div><div class="ttdeci">static char * jail_name</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00051">netifd.c:51</a></div></div>
<div class="ttc" id="anetifd_8c_html_a253c8471e02dffa613862acddd2346c1"><div class="ttname"><a href="#a253c8471e02dffa613862acddd2346c1">uci_net</a></div><div class="ttdeci">static const char uci_net[]</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00048">netifd.c:48</a></div></div>
<div class="ttc" id="audevtrigger_8c_html_abdc0ddb6c825c951cdc8e45b53459445"><div class="ttname"><a href="../../d2/d62/udevtrigger_8c.html#abdc0ddb6c825c951cdc8e45b53459445">err</a></div><div class="ttdeci">#define err(format, arg...)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d62/udevtrigger_8c_source.html#l00058">udevtrigger.c:58</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d62/udevtrigger_8c_source.html#l00058">err</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">jail_name</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">uci_config_network</a>, <a class="el" href="../../d5/d65/netifd_2config_8c_source.html#l00034">uci_ctx</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00048">uci_net</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00371">jail_network_reload()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00194">run_netifd()</a>.</p>

</div>
</div>
<a id="a236bb6b2255c0b3d555d8b5226c6884a" name="a236bb6b2255c0b3d555d8b5226c6884a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a236bb6b2255c0b3d555d8b5226c6884a">&#9670;&#160;</a></span>inotify_read_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void inotify_read_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d56/uloop_8h.html#db/d9e/structuloop__fd">uloop_fd</a> *</td>          <td class="paramname"><span class="paramname"><em>u</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>events</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00323">323</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  324</span>{</div>
<div class="line"><span class="lineno">  325</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="../../d1/d5c/rcS_8c.html#a49473a90e2fe9252f856e10246252554">rc</a>;</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordtype">char</span> *p;</div>
<div class="line"><span class="lineno">  327</span>    <span class="keyword">struct </span>inotify_event *in;</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>    <span class="comment">/* read inotify events */</span></div>
<div class="line"><span class="lineno">  330</span>    <span class="keywordflow">while</span> ((<a class="code hl_function" href="../../d1/d5c/rcS_8c.html#a49473a90e2fe9252f856e10246252554">rc</a> = read(u-&gt;<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>, <a class="code hl_variable" href="#aea05153e1f6883168a7c1a20f881a048">inotify_buffer</a>, <a class="code hl_define" href="#ab1e59236831f66e639dcecff4978eca8">INOTIFY_SZ</a>)) == -1 &amp;&amp; errno == EINTR);</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d1/d5c/rcS_8c.html#a49473a90e2fe9252f856e10246252554">rc</a> &lt;= 0)</div>
<div class="line"><span class="lineno">  333</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>    <span class="comment">/* process events from buffer */</span></div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordflow">for</span> (p = <a class="code hl_variable" href="#aea05153e1f6883168a7c1a20f881a048">inotify_buffer</a>;</div>
<div class="line"><span class="lineno">  337</span>        <a class="code hl_function" href="../../d1/d5c/rcS_8c.html#a49473a90e2fe9252f856e10246252554">rc</a> - (p - <a class="code hl_variable" href="#aea05153e1f6883168a7c1a20f881a048">inotify_buffer</a>) &gt;= (int)<span class="keyword">sizeof</span>(<span class="keyword">struct </span>inotify_event);</div>
<div class="line"><span class="lineno">  338</span>        p += <span class="keyword">sizeof</span>(<span class="keyword">struct </span>inotify_event) + in-&gt;len) {</div>
<div class="line"><span class="lineno">  339</span>        in = (<span class="keyword">struct </span>inotify_event*)p;</div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>        <span class="keywordflow">if</span> (in-&gt;len &lt; 4)</div>
<div class="line"><span class="lineno">  342</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>        if (!strncmp(<a class="code hl_variable" href="#a082e69bee2841ec201d24fe06894f5e6">ubus_sock_name</a>, in-&gt;name, in-&gt;len))</div>
<div class="line"><span class="lineno">  345</span>            <a class="code hl_function" href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07">uloop_timeout_add</a>(&amp;<a class="code hl_variable" href="#a90439d321702f2eb777ebcd03794038b">netifd_start_timeout</a>);</div>
<div class="line"><span class="lineno">  346</span>        }</div>
<div class="line"><span class="lineno">  347</span>}</div>
<div class="ttc" id="anetifd_8c_html_a082e69bee2841ec201d24fe06894f5e6"><div class="ttname"><a href="#a082e69bee2841ec201d24fe06894f5e6">ubus_sock_name</a></div><div class="ttdeci">static const char ubus_sock_name[]</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00049">netifd.c:49</a></div></div>
<div class="ttc" id="anetifd_8c_html_a90439d321702f2eb777ebcd03794038b"><div class="ttname"><a href="#a90439d321702f2eb777ebcd03794038b">netifd_start_timeout</a></div><div class="ttdeci">static struct uloop_timeout netifd_start_timeout</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00321">netifd.c:321</a></div></div>
<div class="ttc" id="anetifd_8c_html_ab1e59236831f66e639dcecff4978eca8"><div class="ttname"><a href="#ab1e59236831f66e639dcecff4978eca8">INOTIFY_SZ</a></div><div class="ttdeci">#define INOTIFY_SZ</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00044">netifd.c:44</a></div></div>
<div class="ttc" id="anetifd_8c_html_aea05153e1f6883168a7c1a20f881a048"><div class="ttname"><a href="#aea05153e1f6883168a7c1a20f881a048">inotify_buffer</a></div><div class="ttdeci">static char * inotify_buffer</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00053">netifd.c:53</a></div></div>
<div class="ttc" id="arcS_8c_html_a49473a90e2fe9252f856e10246252554"><div class="ttname"><a href="../../d1/d5c/rcS_8c.html#a49473a90e2fe9252f856e10246252554">rc</a></div><div class="ttdeci">int rc(const char *file, char *param)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d5c/rcS_8c_source.html#l00191">rcS.c:191</a></div></div>
<div class="ttc" id="auloop_8h_html_ad8badf8512adcf9a8819ed088bde09cc"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">uloop_fd::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00065">uloop.h:65</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d56/uloop_8h_source.html#l00065">uloop_fd::fd</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00053">inotify_buffer</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00044">INOTIFY_SZ</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00321">netifd_start_timeout</a>, <a class="el" href="../../d1/d5c/rcS_8c_source.html#l00191">rc()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00049">ubus_sock_name</a>, and <a class="el" href="../../d1/d08/uloop_8c_source.html#l00298">uloop_timeout_add()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d3d/netifd_8c_a236bb6b2255c0b3d555d8b5226c6884a_cgraph.png" border="0" usemap="#adb/d3d/netifd_8c_a236bb6b2255c0b3d555d8b5226c6884a_cgraph" alt=""/></div>
<map name="adb/d3d/netifd_8c_a236bb6b2255c0b3d555d8b5226c6884a_cgraph" id="adb/d3d/netifd_8c_a236bb6b2255c0b3d555d8b5226c6884a_cgraph">
<area shape="rect" title=" " alt="" coords="5,99,214,133"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a49473a90e2fe9252f856e10246252554" title=" " alt="" coords="341,127,379,161"/>
<area shape="poly" title=" " alt="" coords="214,125,325,138,325,143,214,130"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07" title=" " alt="" coords="262,70,458,104"/>
<area shape="poly" title=" " alt="" coords="214,101,246,97,247,103,214,106"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a1b150f4e4c92035b2ecebc171a115a19" title=" " alt="" coords="522,181,569,214"/>
<area shape="poly" title=" " alt="" coords="380,147,507,184,506,189,379,152"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a4c5bab9853709f1162d12f25c229f0c4" title=" " alt="" coords="632,223,739,257"/>
<area shape="poly" title=" " alt="" coords="570,202,618,217,617,222,568,207"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a672a8284d977249a5ab7d705a279a951" title=" " alt="" coords="843,151,1021,185"/>
<area shape="poly" title=" " alt="" coords="738,222,856,187,858,192,740,227"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a865202e3ab41c735986da542520d8845" title=" " alt="" coords="870,237,994,270"/>
<area shape="poly" title=" " alt="" coords="739,240,854,246,854,252,739,246"/>
<area shape="rect" href="../../d7/d79/runqueue_8c.html#a74181562cea723bc217da9981b45f745" title=" " alt="" coords="1420,851,1623,885"/>
<area shape="poly" title=" " alt="" coords="697,256,746,354,786,425,836,504,896,586,964,666,1041,738,1083,771,1126,799,1194,830,1266,851,1338,862,1405,868,1404,873,1337,868,1265,856,1192,835,1124,804,1080,775,1038,743,960,669,892,589,832,507,781,428,741,357,692,259"/>
<area shape="rect" href="../../d7/d79/runqueue_8c.html#a1e5de26d985d2a203eb033605b3178fd" title=" " alt="" coords="787,294,1077,328"/>
<area shape="poly" title=" " alt="" coords="724,255,788,280,813,287,812,292,786,285,722,260"/>
<area shape="rect" href="../../d7/d79/runqueue_8c.html#aeb87a8b32fdaa855c1c010fd7a62c43f" title=" " alt="" coords="803,69,1061,102"/>
<area shape="poly" title=" " alt="" coords="698,221,734,179,759,156,785,136,817,119,850,105,852,110,819,124,788,141,762,161,738,183,702,224"/>
<area shape="rect" href="../../d6/d26/ustream_8c.html#a55eb7ea0d6ed61f253f5689798ccf5c3" title=" " alt="" coords="1172,151,1314,185"/>
<area shape="poly" title=" " alt="" coords="1021,165,1156,165,1156,171,1021,171"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a6231184d2f54ac1bc945ecb73c517d91" title=" " alt="" coords="1411,151,1632,185"/>
<area shape="poly" title=" " alt="" coords="1314,165,1395,165,1395,171,1314,171"/>
<area shape="rect" href="../../d6/d26/ustream_8c.html#a133847346c9a2d708d19c8a056f728bc" title=" " alt="" coords="1413,94,1630,128"/>
<area shape="poly" title=" " alt="" coords="1314,151,1421,129,1422,134,1315,156"/>
<area shape="rect" href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title=" " alt="" coords="1751,98,1837,132"/>
<area shape="poly" title=" " alt="" coords="1611,148,1735,123,1736,129,1612,153"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a597a939a58a2721ff9aa32efa74da1d9" title=" " alt="" coords="1197,237,1289,270"/>
<area shape="poly" title=" " alt="" coords="994,251,1181,251,1181,256,994,256"/>
<area shape="rect" href="../../d7/d79/runqueue_8c.html#aca110aed5b77b2136e19645bee31e26a" title=" " alt="" coords="1125,755,1360,789"/>
<area shape="poly" title=" " alt="" coords="995,248,1039,256,1061,265,1079,279,1103,309,1116,338,1120,366,1120,395,1116,457,1119,491,1128,529,1150,589,1177,648,1226,741,1221,743,1172,650,1146,591,1122,530,1113,492,1111,457,1115,395,1115,367,1110,339,1098,312,1075,283,1058,270,1038,261,994,253"/>
<area shape="rect" href="../../db/d70/ustream-fd_8c.html#ab157e7dbc4962e8c574302cac07d2f4a" title=" " alt="" coords="1161,483,1324,517"/>
<area shape="poly" title=" " alt="" coords="995,253,1037,261,1078,279,1106,299,1131,322,1174,373,1207,425,1230,468,1225,471,1202,428,1169,376,1127,325,1102,303,1076,284,1036,266,994,258"/>
<area shape="rect" href="../../d6/d26/ustream_8c.html#a6e2924135643035597d360c6dcb0a294" title=" " alt="" coords="1426,266,1617,300"/>
<area shape="poly" title=" " alt="" coords="1289,255,1411,268,1411,274,1289,261"/>
<area shape="rect" href="../../d6/d26/ustream_8c.html#af8718ea51e10ce9d433e4346110f0653" title=" " alt="" coords="1408,209,1635,242"/>
<area shape="poly" title=" " alt="" coords="1289,246,1392,236,1393,241,1289,251"/>
<area shape="rect" href="../../d7/d79/runqueue_8c.html#af3cef6ac8787b78b1ea6297b463b41f8" title=" " alt="" coords="1417,742,1626,776"/>
<area shape="poly" title=" " alt="" coords="1361,764,1401,762,1402,767,1361,769"/>
<area shape="poly" title=" " alt="" coords="1291,787,1409,829,1451,844,1450,849,1407,835,1289,792"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#af511d1bcbdfcfaba211d4ae1b0930dbb" title=" " alt="" coords="1696,766,1892,800"/>
<area shape="poly" title=" " alt="" coords="1361,782,1408,785,1521,788,1635,785,1680,784,1680,790,1635,791,1521,793,1408,791,1360,787"/>
<area shape="rect" href="../../d7/d79/runqueue_8c.html#a05bfb95a21ff4ecbb0c3d9568e183987" title=" " alt="" coords="1688,851,1900,885"/>
<area shape="poly" title=" " alt="" coords="1624,865,1672,865,1672,871,1624,871"/>
<area shape="rect" href="../../d7/d79/runqueue_8c.html#a8316e9def7e50a43d5bcc76bdfd00b8a" title=" " alt="" coords="1953,851,2210,885"/>
<area shape="poly" title=" " alt="" coords="1901,865,1938,865,1938,871,1901,871"/>
<area shape="rect" href="../../d7/d79/runqueue_8c.html#a36f77390c98a4638649674fa78d82efa" title=" " alt="" coords="1975,909,2188,942"/>
<area shape="poly" title=" " alt="" coords="1882,883,1979,902,1978,908,1881,888"/>
<area shape="rect" href="../../dd/d25/safe__list_8c.html#a201dac7f1d35f8fd85576e863a82352b" title=" " alt="" coords="2012,794,2152,828"/>
<area shape="poly" title=" " alt="" coords="1881,848,1996,825,1997,830,1882,853"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="2258,739,2388,773"/>
<area shape="poly" title=" " alt="" coords="2151,792,2242,771,2243,777,2153,797"/>
<area shape="rect" href="../../da/d23/list_8h.html#a9d61a1a731a0cf44336e2ee9e45f712d" title=" " alt="" coords="2436,739,2537,773"/>
<area shape="poly" title=" " alt="" coords="2388,753,2420,753,2420,759,2388,759"/>
<area shape="poly" title=" " alt="" coords="1892,775,2243,757,2243,763,1892,780"/>
<area shape="rect" href="../../db/d70/ustream-fd_8c.html#a49c9339ef140d0df2e16b187760e9ad6" title=" " alt="" coords="1436,323,1607,357"/>
<area shape="poly" title=" " alt="" coords="1259,481,1320,424,1362,392,1407,366,1421,360,1423,364,1410,370,1365,397,1324,428,1262,485"/>
<area shape="rect" href="../../db/d70/ustream-fd_8c.html#a3f629385f1e131dcb62d6aad6ec03de7" title=" " alt="" coords="1438,381,1605,414"/>
<area shape="poly" title=" " alt="" coords="1277,480,1337,452,1407,424,1431,416,1433,421,1409,429,1340,457,1280,485"/>
<area shape="rect" href="../../db/d70/ustream-fd_8c.html#a64ffdd9b78d6b923a98f1f82067fc6ae" title=" " alt="" coords="1415,438,1628,495"/>
<area shape="poly" title=" " alt="" coords="1325,488,1400,479,1400,484,1325,493"/>
<area shape="rect" href="../../db/d70/ustream-fd_8c.html#a16f1933feaa2425d7811875086609290" title=" " alt="" coords="1683,515,1905,549"/>
<area shape="poly" title=" " alt="" coords="1325,502,1667,522,1667,527,1325,507"/>
<area shape="rect" href="../../db/d70/ustream-fd_8c.html#a1a4319f10cc2c3a3f20af3fdc27e2d77" title=" " alt="" coords="1431,570,1612,604"/>
<area shape="poly" title=" " alt="" coords="1300,515,1451,562,1450,567,1298,520"/>
<area shape="rect" href="../../d6/d26/ustream_8c.html#a4fd8792e264b0d96920fc7bc741a530d" title=" " alt="" coords="1412,627,1631,661"/>
<area shape="poly" title=" " alt="" coords="1265,515,1327,564,1367,591,1409,614,1423,619,1421,624,1407,618,1364,595,1324,568,1262,519"/>
<area shape="rect" href="../../db/d70/ustream-fd_8c.html#a7ce37220303d8df1bf648645a88bd3e9" title=" " alt="" coords="1427,685,1616,718"/>
<area shape="poly" title=" " alt="" coords="1257,516,1281,549,1316,591,1360,635,1410,671,1418,676,1416,680,1407,676,1356,639,1312,595,1277,552,1253,519"/>
<area shape="poly" title=" " alt="" coords="1629,490,1706,508,1705,514,1628,495"/>
<area shape="poly" title=" " alt="" coords="1608,567,1691,550,1692,555,1609,572"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a49ba044023de765e2d9d14db25d1845b" title=" " alt="" coords="1134,55,1352,89"/>
<area shape="poly" title=" " alt="" coords="1061,77,1118,75,1118,80,1061,82"/>
<area shape="poly" title=" " alt="" coords="1352,67,1487,68,1635,79,1736,97,1735,103,1634,84,1487,74,1352,72"/>
<area shape="poly" title=" " alt="" coords="402,67,457,47,527,26,605,9,684,3,1795,3,1860,9,1920,28,1975,57,2025,95,2070,141,2111,193,2148,250,2181,309,2235,432,2275,550,2302,651,2318,723,2313,724,2297,652,2270,551,2230,434,2176,312,2143,252,2107,196,2066,145,2021,99,1972,62,1918,33,1859,14,1795,8,684,8,605,15,528,31,458,52,404,72"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a76f33118cba0a358482528fad8c0f4cd" title=" " alt="" coords="506,70,584,104"/>
<area shape="poly" title=" " alt="" coords="458,84,490,84,490,89,458,89"/>
</map>
</div>

</div>
</div>
<a id="aecf17edd05dd1516fd1785ed6cc97d7c" name="aecf17edd05dd1516fd1785ed6cc97d7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecf17edd05dd1516fd1785ed6cc97d7c">&#9670;&#160;</a></span>jail_delete_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int jail_delete_instance </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>instance</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00511">511</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  512</span>{</div>
<div class="line"><span class="lineno">  513</span>    <span class="keyword">static</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#d3/dcb/structblob__buf">blob_buf</a> req;</div>
<div class="line"><span class="lineno">  514</span>    uint32_t <a class="code hl_variable" href="../../dd/d8f/udebug-proto_8h.html#abaabdc509cdaba7df9f56c6c76f3ae19">id</a>;</div>
<div class="line"><span class="lineno">  515</span> </div>
<div class="line"><span class="lineno">  516</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54">ubus_lookup_id</a>(<a class="code hl_variable" href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a>, <span class="stringliteral">&quot;container&quot;</span>, &amp;<span class="keywordtype">id</span>))</div>
<div class="line"><span class="lineno">  517</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>    <a class="code hl_function" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a>(&amp;req, 0);</div>
<div class="line"><span class="lineno">  520</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;name&quot;</span>, <a class="code hl_variable" href="#a1b583a27c491ee79cde9851e9bd02e6e">jail_name</a>);</div>
<div class="line"><span class="lineno">  521</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;instance&quot;</span>, instance);</div>
<div class="line"><span class="lineno">  522</span> </div>
<div class="line"><span class="lineno">  523</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../db/d55/libubus_8h.html#ad79f9793c3835ea8691fe377025c7de7">ubus_invoke</a>(<a class="code hl_variable" href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a>, <span class="keywordtype">id</span>, <span class="stringliteral">&quot;delete&quot;</span>, req.head, NULL, NULL, 3000);</div>
<div class="line"><span class="lineno">  524</span>}</div>
<div class="ttc" id="ablob_8c_html_af8ca2237342df92c699fbb2ddb5f390b"><div class="ttname"><a href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a></div><div class="ttdeci">int blob_buf_init(struct blob_buf *buf, int id)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/da0/blob_8c_source.html#l00091">blob.c:91</a></div></div>
<div class="ttc" id="ablob_8h_html_d3/dcb/structblob__buf"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#d3/dcb/structblob__buf">blob_buf</a></div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00064">blob.h:64</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a4bba0979961750f86b8dc9915b2fa4d6"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a></div><div class="ttdeci">static int blobmsg_add_string(struct blob_buf *buf, const char *name, const char *string)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00235">blobmsg.h:235</a></div></div>
<div class="ttc" id="alibubus_8c_html_a8567c5497fc066b17da409d9b0512c54"><div class="ttname"><a href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54">ubus_lookup_id</a></div><div class="ttdeci">int ubus_lookup_id(struct ubus_context *ctx, const char *path, uint32_t *id)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/db9/libubus_8c_source.html#l00192">libubus.c:192</a></div></div>
<div class="ttc" id="alibubus_8h_html_ad79f9793c3835ea8691fe377025c7de7"><div class="ttname"><a href="../../db/d55/libubus_8h.html#ad79f9793c3835ea8691fe377025c7de7">ubus_invoke</a></div><div class="ttdeci">static int ubus_invoke(struct ubus_context *ctx, uint32_t obj, const char *method, struct blob_attr *msg, ubus_data_handler_t cb, void *priv, int timeout)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00354">libubus.h:354</a></div></div>
<div class="ttc" id="anetifd_8c_html_a3c3a54c3d31af7db783f8bd6e25fb603"><div class="ttname"><a href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a></div><div class="ttdeci">static struct ubus_context * host_ubus_ctx</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00058">netifd.c:58</a></div></div>
<div class="ttc" id="audebug-proto_8h_html_abaabdc509cdaba7df9f56c6c76f3ae19"><div class="ttname"><a href="../../dd/d8f/udebug-proto_8h.html#abaabdc509cdaba7df9f56c6c76f3ae19">id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d8f/udebug-proto_8h_source.html#l00002">udebug-proto.h:2</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/da0/blob_8c_source.html#l00091">blob_buf_init()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00235">blobmsg_add_string()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00065">blob_buf::head</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00058">host_ubus_ctx</a>, <a class="el" href="../../dd/d8f/udebug-proto_8h_source.html#l00002">id</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">jail_name</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00354">ubus_invoke()</a>, and <a class="el" href="../../d4/db9/libubus_8c_source.html#l00192">ubus_lookup_id()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00526">jail_network_stop()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d3d/netifd_8c_aecf17edd05dd1516fd1785ed6cc97d7c_cgraph.png" border="0" usemap="#adb/d3d/netifd_8c_aecf17edd05dd1516fd1785ed6cc97d7c_cgraph" alt=""/></div>
<map name="adb/d3d/netifd_8c_aecf17edd05dd1516fd1785ed6cc97d7c_cgraph" id="adb/d3d/netifd_8c_aecf17edd05dd1516fd1785ed6cc97d7c_cgraph">
<area shape="rect" title=" " alt="" coords="5,529,206,563"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1078,725,1218,759"/>
<area shape="poly" title=" " alt="" coords="200,561,1063,724,1062,729,199,566"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="254,444,462,478"/>
<area shape="poly" title=" " alt="" coords="147,526,253,486,274,480,275,485,255,491,148,531"/>
<area shape="rect" href="../../db/d55/libubus_8h.html#ad79f9793c3835ea8691fe377025c7de7" title=" " alt="" coords="290,501,426,535"/>
<area shape="poly" title=" " alt="" coords="206,532,274,525,275,530,207,538"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54" title=" " alt="" coords="784,556,948,590"/>
<area shape="poly" title=" " alt="" coords="206,547,769,567,769,572,206,552"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1823,667,1928,700"/>
<area shape="poly" title=" " alt="" coords="1218,754,1316,769,1436,778,1489,776,1556,769,1625,756,1694,739,1812,703,1813,708,1696,745,1626,762,1557,774,1489,781,1436,783,1316,774,1217,759"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1346,835,1526,868"/>
<area shape="poly" title=" " alt="" coords="1186,757,1317,813,1359,827,1357,832,1315,818,1184,762"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="2179,708,2322,742"/>
<area shape="poly" title=" " alt="" coords="1928,698,1976,710,2073,721,2164,724,2164,729,2073,726,1976,715,1927,703"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1976,667,2131,700"/>
<area shape="poly" title=" " alt="" coords="1928,681,1961,681,1961,686,1928,686"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="2179,637,2322,671"/>
<area shape="poly" title=" " alt="" coords="1925,663,1976,651,2073,644,2164,645,2164,650,2073,649,1976,657,1926,668"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1986,557,2122,591"/>
<area shape="poly" title=" " alt="" coords="1896,664,1932,636,1975,608,1997,596,1999,600,1977,612,1935,641,1899,668"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="2004,776,2103,810"/>
<area shape="poly" title=" " alt="" coords="1899,699,1935,726,1977,754,1999,766,1997,771,1975,759,1932,730,1896,703"/>
<area shape="poly" title=" " alt="" coords="2132,697,2165,704,2164,709,2131,702"/>
<area shape="poly" title=" " alt="" coords="2131,669,2164,664,2165,669,2132,674"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="2179,503,2322,536"/>
<area shape="poly" title=" " alt="" coords="2116,554,2172,538,2173,543,2118,559"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="2370,557,2511,591"/>
<area shape="poly" title=" " alt="" coords="2122,571,2354,571,2354,577,2122,577"/>
<area shape="poly" title=" " alt="" coords="2312,534,2365,550,2364,555,2311,539"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="510,419,704,452"/>
<area shape="poly" title=" " alt="" coords="462,447,494,444,495,449,463,453"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aed178aa087a351c74f7f6cd34e56ba0c" title=" " alt="" coords="1074,85,1222,119"/>
<area shape="poly" title=" " alt="" coords="635,416,1104,125,1107,130,638,420"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1634,28,1745,62"/>
<area shape="poly" title=" " alt="" coords="1173,82,1235,46,1275,28,1315,15,1396,4,1478,5,1555,13,1619,25,1618,30,1554,18,1478,10,1397,10,1317,21,1276,33,1238,51,1176,87"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aee908e6de67c16a4d810d08f28ed1803" title=" " alt="" coords="1635,448,1744,482"/>
<area shape="poly" title=" " alt="" coords="1223,105,1311,114,1409,129,1498,149,1533,162,1558,176,1587,203,1612,235,1632,270,1649,306,1673,376,1686,432,1681,433,1668,377,1644,308,1628,272,1607,238,1583,207,1555,180,1530,166,1496,154,1408,134,1310,120,1222,110"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="1361,31,1512,64"/>
<area shape="poly" title=" " alt="" coords="1222,85,1345,62,1346,67,1223,91"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ac239a83ed3c7f835e2b49f785953c934" title=" " alt="" coords="1604,85,1775,119"/>
<area shape="poly" title=" " alt="" coords="1222,99,1589,99,1589,105,1222,105"/>
<area shape="poly" title=" " alt="" coords="1707,480,1852,653,1848,657,1703,484"/>
<area shape="poly" title=" " alt="" coords="1744,465,1917,477,2132,498,2164,502,2164,508,2131,503,1916,483,1744,470"/>
<area shape="poly" title=" " alt="" coords="1512,44,1618,43,1618,48,1512,49"/>
<area shape="poly" title=" " alt="" coords="1513,61,1594,79,1593,84,1512,66"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a572cdb5570d677242d1bc90d2d592852" title=" " alt="" coords="525,500,689,534"/>
<area shape="poly" title=" " alt="" coords="427,515,509,515,509,520,427,520"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a49473a90e2fe9252f856e10246252554" title=" " alt="" coords="847,499,885,532"/>
<area shape="poly" title=" " alt="" coords="690,514,831,513,831,518,690,519"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="1028,375,1268,408"/>
<area shape="poly" title=" " alt="" coords="683,497,1056,410,1057,415,684,502"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a50302440f98786d5bcc4770a627bf8dc" title=" " alt="" coords="752,613,980,647"/>
<area shape="poly" title=" " alt="" coords="634,532,688,566,753,600,769,605,767,610,751,604,685,571,631,536"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a6a067ed16631bbe3826be535287879e4" title=" " alt="" coords="1357,305,1516,339"/>
<area shape="poly" title=" " alt="" coords="1221,371,1348,340,1349,346,1222,376"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aca15427cb882afec28ce476b9e8e8b34" title=" " alt="" coords="1316,363,1556,420"/>
<area shape="poly" title=" " alt="" coords="1269,389,1300,389,1300,394,1269,394"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a5497c370318a5cc03dd662523915ea92" title=" " alt="" coords="1357,444,1516,478"/>
<area shape="poly" title=" " alt="" coords="1222,406,1349,437,1348,442,1221,411"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8af6cb580774621aef719d6923cb5072" title=" " alt="" coords="1332,191,1541,224"/>
<area shape="poly" title=" " alt="" coords="1160,372,1222,304,1266,266,1315,233,1325,228,1328,233,1317,238,1269,270,1225,308,1164,376"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ab53faf25fad8c6edbcd804eabeb14c6a" title=" " alt="" coords="1342,248,1531,282"/>
<area shape="poly" title=" " alt="" coords="1171,372,1234,331,1315,290,1332,284,1334,289,1317,295,1237,336,1174,376"/>
<area shape="poly" title=" " alt="" coords="897,645,956,679,1029,712,1064,723,1062,728,1027,717,954,683,894,650"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a7da0a155290c1fd4d3b5911ced43d5a2" title=" " alt="" coords="1328,559,1544,592"/>
<area shape="poly" title=" " alt="" coords="980,624,1118,616,1268,602,1331,593,1332,598,1268,607,1118,621,980,629"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="1066,501,1230,535"/>
<area shape="poly" title=" " alt="" coords="957,610,978,600,993,587,1001,573,1010,558,1026,544,1050,532,1052,537,1029,548,1014,561,1006,575,997,590,981,604,959,615"/>
<area shape="poly" title=" " alt="" coords="1545,565,2164,523,2164,528,1545,571"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1386,501,1487,535"/>
<area shape="poly" title=" " alt="" coords="1231,515,1370,515,1370,521,1231,521"/>
<area shape="poly" title=" " alt="" coords="1486,516,1523,508,1540,500,1554,488,1574,463,1587,437,1594,412,1597,386,1592,335,1580,284,1568,232,1562,179,1564,153,1571,126,1583,98,1602,71,1618,58,1622,62,1606,74,1588,101,1576,127,1569,154,1567,179,1573,231,1585,283,1598,334,1602,386,1599,413,1592,439,1578,465,1558,492,1543,505,1525,513,1488,522"/>
<area shape="poly" title=" " alt="" coords="1486,505,1619,477,1620,482,1488,510"/>
<area shape="poly" title=" " alt="" coords="949,581,981,599,994,613,1001,628,1006,657,1011,686,1018,699,1029,712,1046,723,1064,731,1062,735,1043,728,1026,716,1013,702,1006,687,1001,658,996,629,990,616,978,603,947,585"/>
<area shape="poly" title=" " alt="" coords="947,557,978,542,994,530,1003,517,1026,487,1110,416,1113,420,1030,491,1007,520,998,534,981,547,949,562"/>
<area shape="poly" title=" " alt="" coords="948,554,1050,534,1051,539,949,559"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#ad9a92a327d8621e1eee7014bac19bc2b" title=" " alt="" coords="1051,668,1245,702"/>
<area shape="poly" title=" " alt="" coords="947,588,981,598,1047,627,1105,658,1103,662,1045,632,979,603,946,593"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="1049,559,1247,592"/>
<area shape="poly" title=" " alt="" coords="948,571,1033,572,1033,577,948,576"/>
<area shape="poly" title=" " alt="" coords="1211,665,1283,650,1370,639,1464,638,1511,643,1557,653,1610,674,1651,702,1685,734,1715,766,1745,796,1778,821,1820,838,1874,845,2055,845,2106,838,2179,818,2257,789,2291,771,2320,752,2355,718,2384,678,2424,603,2429,606,2389,681,2359,721,2323,756,2294,776,2259,794,2181,823,2107,843,2055,850,1874,850,1819,844,1776,826,1741,800,1711,770,1681,737,1648,706,1608,679,1556,658,1510,648,1464,643,1370,644,1284,655,1212,670"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a1e6079c1ffa0e8f05ca64a51d7332919" title=" " alt="" coords="1364,668,1509,702"/>
<area shape="poly" title=" " alt="" coords="1245,682,1348,682,1348,687,1245,687"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="1348,725,1525,759"/>
<area shape="poly" title=" " alt="" coords="1237,700,1334,719,1333,724,1236,705"/>
<area shape="poly" title=" " alt="" coords="1247,573,1313,573,1313,578,1247,578"/>
</map>
</div>

</div>
</div>
<a id="acc1d8e0a83e71bbd02b3daa8c507a9fb" name="acc1d8e0a83e71bbd02b3daa8c507a9fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc1d8e0a83e71bbd02b3daa8c507a9fb">&#9670;&#160;</a></span>jail_network_reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void jail_network_reload </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00371">371</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  372</span>{</div>
<div class="line"><span class="lineno">  373</span>    uint32_t <a class="code hl_variable" href="../../dd/d8f/udebug-proto_8h.html#abaabdc509cdaba7df9f56c6c76f3ae19">id</a>;</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#ab7ecd9598eed63587841ef3d2e84557f">jail_ubus_ctx</a>)</div>
<div class="line"><span class="lineno">  376</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#abd429d69805c0a0249657bd5dee82dd8">gen_jail_uci_network</a>())</div>
<div class="line"><span class="lineno">  379</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  380</span> </div>
<div class="line"><span class="lineno">  381</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54">ubus_lookup_id</a>(<a class="code hl_variable" href="#ab7ecd9598eed63587841ef3d2e84557f">jail_ubus_ctx</a>, <span class="stringliteral">&quot;network&quot;</span>, &amp;<span class="keywordtype">id</span>))</div>
<div class="line"><span class="lineno">  382</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>    <a class="code hl_function" href="../../db/d55/libubus_8h.html#ad79f9793c3835ea8691fe377025c7de7">ubus_invoke</a>(<a class="code hl_variable" href="#ab7ecd9598eed63587841ef3d2e84557f">jail_ubus_ctx</a>, <span class="keywordtype">id</span>, <span class="stringliteral">&quot;reload&quot;</span>, NULL, NULL, NULL, 3000);</div>
<div class="line"><span class="lineno">  385</span>}</div>
<div class="ttc" id="anetifd_8c_html_ab7ecd9598eed63587841ef3d2e84557f"><div class="ttname"><a href="#ab7ecd9598eed63587841ef3d2e84557f">jail_ubus_ctx</a></div><div class="ttdeci">static struct ubus_context * jail_ubus_ctx</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00059">netifd.c:59</a></div></div>
<div class="ttc" id="anetifd_8c_html_abd429d69805c0a0249657bd5dee82dd8"><div class="ttname"><a href="#abd429d69805c0a0249657bd5dee82dd8">gen_jail_uci_network</a></div><div class="ttdeci">static int gen_jail_uci_network(void)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00064">netifd.c:64</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d3d/netifd_8c_source.html#l00064">gen_jail_uci_network()</a>, <a class="el" href="../../dd/d8f/udebug-proto_8h_source.html#l00002">id</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00059">jail_ubus_ctx</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00354">ubus_invoke()</a>, and <a class="el" href="../../d4/db9/libubus_8c_source.html#l00192">ubus_lookup_id()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d3d/netifd_8c_acc1d8e0a83e71bbd02b3daa8c507a9fb_cgraph.png" border="0" usemap="#adb/d3d/netifd_8c_acc1d8e0a83e71bbd02b3daa8c507a9fb_cgraph" alt=""/></div>
<map name="adb/d3d/netifd_8c_acc1d8e0a83e71bbd02b3daa8c507a9fb_cgraph" id="adb/d3d/netifd_8c_acc1d8e0a83e71bbd02b3daa8c507a9fb_cgraph">
<area shape="rect" title=" " alt="" coords="5,153,203,187"/>
<area shape="rect" href="../../db/d3d/netifd_8c.html#abd429d69805c0a0249657bd5dee82dd8" title=" " alt="" coords="251,96,462,130"/>
<area shape="poly" title=" " alt="" coords="181,150,264,131,265,136,182,155"/>
<area shape="rect" href="../../db/d55/libubus_8h.html#ad79f9793c3835ea8691fe377025c7de7" title=" " alt="" coords="288,153,425,187"/>
<area shape="poly" title=" " alt="" coords="203,168,273,168,273,173,203,173"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54" title=" " alt="" coords="511,209,674,243"/>
<area shape="poly" title=" " alt="" coords="183,185,251,197,378,211,495,219,495,224,378,216,250,202,182,190"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a572cdb5570d677242d1bc90d2d592852" title=" " alt="" coords="510,139,674,172"/>
<area shape="poly" title=" " alt="" coords="425,163,494,159,495,164,425,169"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a49473a90e2fe9252f856e10246252554" title=" " alt="" coords="823,9,862,43"/>
<area shape="poly" title=" " alt="" coords="613,136,660,99,721,62,766,44,807,31,809,37,767,49,724,67,664,104,616,140"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="722,373,963,407"/>
<area shape="poly" title=" " alt="" coords="640,171,676,195,693,216,702,236,710,257,724,279,766,324,809,362,805,366,763,328,720,282,706,259,697,238,689,219,673,199,637,175"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a50302440f98786d5bcc4770a627bf8dc" title=" " alt="" coords="729,125,956,159"/>
<area shape="poly" title=" " alt="" coords="675,148,713,146,713,152,675,154"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a1b150f4e4c92035b2ecebc171a115a19" title=" " alt="" coords="1107,5,1155,39"/>
<area shape="poly" title=" " alt="" coords="862,23,1092,20,1092,25,862,29"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a6a067ed16631bbe3826be535287879e4" title=" " alt="" coords="1051,545,1211,579"/>
<area shape="poly" title=" " alt="" coords="860,405,922,468,965,503,1012,532,1038,542,1036,547,1009,537,962,507,919,472,857,409"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aca15427cb882afec28ce476b9e8e8b34" title=" " alt="" coords="1011,293,1251,349"/>
<area shape="poly" title=" " alt="" coords="915,370,995,351,996,356,917,375"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a5497c370318a5cc03dd662523915ea92" title=" " alt="" coords="1051,488,1211,522"/>
<area shape="poly" title=" " alt="" coords="873,405,935,440,1012,474,1037,483,1035,488,1010,479,933,445,870,410"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8af6cb580774621aef719d6923cb5072" title=" " alt="" coords="1026,373,1236,407"/>
<area shape="poly" title=" " alt="" coords="963,388,1011,388,1011,393,963,393"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ab53faf25fad8c6edbcd804eabeb14c6a" title=" " alt="" coords="1036,431,1226,464"/>
<area shape="poly" title=" " alt="" coords="931,405,1028,424,1027,430,930,410"/>
<area shape="rect" href="../../da/d23/list_8h.html#a875b53c95596d9e8df15ac54f6d24ae6" title=" " alt="" coords="1348,304,1440,338"/>
<area shape="poly" title=" " alt="" coords="1252,318,1332,318,1332,324,1252,324"/>
<area shape="rect" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d" title=" " alt="" coords="1336,368,1452,402"/>
<area shape="poly" title=" " alt="" coords="1250,347,1321,365,1320,370,1249,352"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#aa0791c7960dffbb35e38a4f32001c331" title=" " alt="" coords="1299,488,1488,522"/>
<area shape="poly" title=" " alt="" coords="1211,502,1284,502,1284,508,1211,508"/>
<area shape="poly" title=" " alt="" coords="1236,385,1320,384,1320,389,1236,391"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a7da0a155290c1fd4d3b5911ced43d5a2" title=" " alt="" coords="1023,235,1239,268"/>
<area shape="poly" title=" " alt="" coords="876,157,937,189,1012,221,1031,227,1029,232,1010,226,935,194,873,162"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1061,63,1201,96"/>
<area shape="poly" title=" " alt="" coords="923,122,1045,95,1046,101,924,127"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="1049,177,1213,211"/>
<area shape="poly" title=" " alt="" coords="940,157,1034,174,1033,179,939,162"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a0e8112f19ea399af22d957f19cf6cfc7" title=" " alt="" coords="1052,120,1210,154"/>
<area shape="poly" title=" " alt="" coords="957,137,1037,136,1037,141,957,143"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1696,179,1801,212"/>
<area shape="poly" title=" " alt="" coords="1200,62,1262,53,1334,46,1412,44,1489,52,1572,70,1607,84,1649,107,1689,135,1722,165,1719,169,1686,139,1646,111,1605,89,1571,75,1488,57,1412,50,1335,51,1263,58,1201,68"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1304,67,1484,100"/>
<area shape="poly" title=" " alt="" coords="1201,78,1288,79,1288,85,1201,83"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="2052,165,2195,199"/>
<area shape="poly" title=" " alt="" coords="1801,191,2037,183,2037,188,1802,196"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1849,207,2004,240"/>
<area shape="poly" title=" " alt="" coords="1802,201,1834,206,1833,212,1801,206"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="2052,248,2195,282"/>
<area shape="poly" title=" " alt="" coords="1774,211,1808,232,1850,250,1897,261,1946,267,2037,269,2037,274,1945,272,1896,266,1848,255,1806,237,1771,215"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1859,395,1995,428"/>
<area shape="poly" title=" " alt="" coords="1766,211,1904,381,1900,384,1762,214"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="1877,97,1976,131"/>
<area shape="poly" title=" " alt="" coords="1786,176,1873,136,1875,140,1788,180"/>
<area shape="poly" title=" " alt="" coords="2004,205,2037,198,2038,203,2005,210"/>
<area shape="poly" title=" " alt="" coords="2005,237,2038,244,2037,249,2004,242"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="2053,460,2194,494"/>
<area shape="poly" title=" " alt="" coords="1980,426,2057,452,2055,457,1979,431"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1343,177,1444,211"/>
<area shape="poly" title=" " alt="" coords="1213,192,1327,192,1327,197,1213,197"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1536,121,1648,155"/>
<area shape="poly" title=" " alt="" coords="1444,177,1521,155,1522,161,1446,182"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aee908e6de67c16a4d810d08f28ed1803" title=" " alt="" coords="1538,179,1646,212"/>
<area shape="poly" title=" " alt="" coords="1445,192,1522,192,1522,198,1445,197"/>
<area shape="poly" title=" " alt="" coords="1647,193,1680,193,1680,198,1647,198"/>
<area shape="poly" title=" " alt="" coords="1210,151,1328,177,1327,183,1209,157"/>
<area shape="poly" title=" " alt="" coords="1210,134,1521,135,1521,141,1210,140"/>
<area shape="poly" title=" " alt="" coords="621,241,804,362,801,367,618,246"/>
<area shape="poly" title=" " alt="" coords="636,206,673,183,687,164,694,146,703,127,721,111,760,91,802,77,845,67,888,61,972,59,1046,63,1045,69,972,64,889,67,846,73,803,82,762,96,724,115,707,130,699,148,692,167,676,187,639,211"/>
<area shape="poly" title=" " alt="" coords="674,219,1033,197,1033,203,674,224"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#ad9a92a327d8621e1eee7014bac19bc2b" title=" " alt="" coords="745,629,940,663"/>
<area shape="poly" title=" " alt="" coords="606,242,826,615,821,618,601,245"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="743,235,942,268"/>
<area shape="poly" title=" " alt="" coords="675,232,728,237,727,243,674,237"/>
<area shape="poly" title=" " alt="" coords="940,651,1148,665,1392,672,1750,672,1803,666,1855,653,1905,632,1952,607,2034,552,2092,502,2096,506,2037,556,1955,612,1907,637,1857,658,1804,672,1750,677,1392,677,1147,670,940,657"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a1e6079c1ffa0e8f05ca64a51d7332919" title=" " alt="" coords="1058,712,1204,746"/>
<area shape="poly" title=" " alt="" coords="905,661,1056,705,1054,710,903,666"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="1042,603,1220,636"/>
<area shape="poly" title=" " alt="" coords="940,635,1027,626,1027,632,940,640"/>
<area shape="poly" title=" " alt="" coords="942,249,1007,249,1007,254,942,254"/>
</map>
</div>

</div>
</div>
<a id="a086fe28fa898f797f9a657e63a3a95bd" name="a086fe28fa898f797f9a657e63a3a95bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a086fe28fa898f797f9a657e63a3a95bd">&#9670;&#160;</a></span>jail_network_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int jail_network_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>new_ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>new_jail_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t</td>          <td class="paramname"><span class="paramname"><em>new_ns_pid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">434</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  435</span>{</div>
<div class="line"><span class="lineno">  436</span>    <a class="code hl_variable" href="#ad089f40feda5fe2747f51364b17c5048">ubus_pw</a> = getpwnam(<span class="stringliteral">&quot;ubus&quot;</span>);</div>
<div class="line"><span class="lineno">  437</span>    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><span class="lineno">  438</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/d26/jail_8c.html#ac256367002c667bedef320ba8eff2aa0">netns_fd</a>;</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>    <a class="code hl_variable" href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a> = new_ctx;</div>
<div class="line"><span class="lineno">  441</span>    <a class="code hl_variable" href="#ad44a100157e230119d20d1b28ca76625">ns_pid</a> = new_ns_pid;</div>
<div class="line"><span class="lineno">  442</span>    <a class="code hl_variable" href="#a1b583a27c491ee79cde9851e9bd02e6e">jail_name</a> = new_jail_name;</div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>    <span class="keywordflow">if</span> (asprintf(&amp;<a class="code hl_variable" href="#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>, <span class="stringliteral">&quot;/var/containers/ubus-%s&quot;</span>, <a class="code hl_variable" href="#a1b583a27c491ee79cde9851e9bd02e6e">jail_name</a>) == -1) {</div>
<div class="line"><span class="lineno">  445</span>        ret = ENOMEM;</div>
<div class="line"><span class="lineno">  446</span>        <span class="keywordflow">goto</span> errout_dir;</div>
<div class="line"><span class="lineno">  447</span>    }</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>    <span class="keywordflow">if</span> (asprintf(&amp;<a class="code hl_variable" href="#a2751d130bdb6095087bf22c3d3f4a159">ubus_sock_path</a>, <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code hl_variable" href="#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>, <a class="code hl_variable" href="#a082e69bee2841ec201d24fe06894f5e6">ubus_sock_name</a>) == -1) {</div>
<div class="line"><span class="lineno">  450</span>        ret = ENOMEM;</div>
<div class="line"><span class="lineno">  451</span>        <span class="keywordflow">goto</span> errout_path;</div>
<div class="line"><span class="lineno">  452</span>    }</div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>    <a class="code hl_function" href="../../d0/d2b/libubox_2utils_8c.html#a9fb089901b41392a5ac197f3e18cc3f7">mkdir_p</a>(<a class="code hl_variable" href="#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>, 0755);</div>
<div class="line"><span class="lineno">  455</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#ad089f40feda5fe2747f51364b17c5048">ubus_pw</a>) {</div>
<div class="line"><span class="lineno">  456</span>        ret = chown(<a class="code hl_variable" href="#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>, <a class="code hl_variable" href="#ad089f40feda5fe2747f51364b17c5048">ubus_pw</a>-&gt;pw_uid, <a class="code hl_variable" href="#ad089f40feda5fe2747f51364b17c5048">ubus_pw</a>-&gt;pw_gid);</div>
<div class="line"><span class="lineno">  457</span>        <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><span class="lineno">  458</span>            ret = errno;</div>
<div class="line"><span class="lineno">  459</span>            <span class="keywordflow">goto</span> errout;</div>
<div class="line"><span class="lineno">  460</span>        }</div>
<div class="line"><span class="lineno">  461</span>    }</div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>    <a class="code hl_variable" href="#a96c9bf4047dfd7bb93def7047fe800a7">fd_inotify_read</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a> = inotify_init1(IN_NONBLOCK | IN_CLOEXEC);</div>
<div class="line"><span class="lineno">  464</span>    <a class="code hl_variable" href="#a96c9bf4047dfd7bb93def7047fe800a7">fd_inotify_read</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ae413fa6bfe9ee31b5764d402d9795fdc">cb</a> = <a class="code hl_function" href="#a236bb6b2255c0b3d555d8b5226c6884a">inotify_read_handler</a>;</div>
<div class="line"><span class="lineno">  465</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a96c9bf4047dfd7bb93def7047fe800a7">fd_inotify_read</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a> == -1) {</div>
<div class="line"><span class="lineno">  466</span>        <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;failed to initialize inotify handler\n&quot;</span>);</div>
<div class="line"><span class="lineno">  467</span>        ret = EIO;</div>
<div class="line"><span class="lineno">  468</span>        <span class="keywordflow">goto</span> errout;</div>
<div class="line"><span class="lineno">  469</span>    }</div>
<div class="line"><span class="lineno">  470</span>    <a class="code hl_function" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0">uloop_fd_add</a>(&amp;<a class="code hl_variable" href="#a96c9bf4047dfd7bb93def7047fe800a7">fd_inotify_read</a>, <a class="code hl_define" href="../../dc/d56/uloop_8h.html#ac20cd5fed660ef784791db47283d9ebf">ULOOP_READ</a>);</div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>    <a class="code hl_variable" href="#aea05153e1f6883168a7c1a20f881a048">inotify_buffer</a> = calloc(1, <a class="code hl_define" href="#ab1e59236831f66e639dcecff4978eca8">INOTIFY_SZ</a>);</div>
<div class="line"><span class="lineno">  473</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#aea05153e1f6883168a7c1a20f881a048">inotify_buffer</a>) {</div>
<div class="line"><span class="lineno">  474</span>        ret = ENOMEM;</div>
<div class="line"><span class="lineno">  475</span>        <span class="keywordflow">goto</span> errout_inotify;</div>
<div class="line"><span class="lineno">  476</span>    }</div>
<div class="line"><span class="lineno">  477</span> </div>
<div class="line"><span class="lineno">  478</span>    <span class="keywordflow">if</span> (inotify_add_watch(<a class="code hl_variable" href="#a96c9bf4047dfd7bb93def7047fe800a7">fd_inotify_read</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>, <a class="code hl_variable" href="#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>, IN_CREATE) == -1) {</div>
<div class="line"><span class="lineno">  479</span>        <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;failed to add inotify watch on %s\n&quot;</span>, <a class="code hl_variable" href="#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>);</div>
<div class="line"><span class="lineno">  480</span>        free(<a class="code hl_variable" href="#aea05153e1f6883168a7c1a20f881a048">inotify_buffer</a>);</div>
<div class="line"><span class="lineno">  481</span>        ret = EIO;</div>
<div class="line"><span class="lineno">  482</span>        <span class="keywordflow">goto</span> errout_inotify;</div>
<div class="line"><span class="lineno">  483</span>    }</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>    <a class="code hl_function" href="#a54efb4f9d0b67d049b750dfe54212cce">watch_ubus_service</a>();</div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>    <a class="code hl_variable" href="../../dd/d26/jail_8c.html#ac256367002c667bedef320ba8eff2aa0">netns_fd</a> = <a class="code hl_function" href="../../dd/d26/jail_8c.html#ae3f4a6a40d174160d8d1fcd78515e4ea">ns_open_pid</a>(<span class="stringliteral">&quot;net&quot;</span>, <a class="code hl_variable" href="#ad44a100157e230119d20d1b28ca76625">ns_pid</a>);</div>
<div class="line"><span class="lineno">  488</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dd/d26/jail_8c.html#ac256367002c667bedef320ba8eff2aa0">netns_fd</a> &lt; 0) {</div>
<div class="line"><span class="lineno">  489</span>        ret = ESRCH;</div>
<div class="line"><span class="lineno">  490</span>        <span class="keywordflow">goto</span> errout_inotify;</div>
<div class="line"><span class="lineno">  491</span>    }</div>
<div class="line"><span class="lineno">  492</span> </div>
<div class="line"><span class="lineno">  493</span>    <a class="code hl_function" href="#a71698b19f7fdbb3ae922ac51f68e9793">netns_updown</a>(<a class="code hl_variable" href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a>, <a class="code hl_variable" href="#a1b583a27c491ee79cde9851e9bd02e6e">jail_name</a>, <span class="keyword">true</span>, <a class="code hl_variable" href="../../dd/d26/jail_8c.html#ac256367002c667bedef320ba8eff2aa0">netns_fd</a>);</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>    close(<a class="code hl_variable" href="../../dd/d26/jail_8c.html#ac256367002c667bedef320ba8eff2aa0">netns_fd</a>);</div>
<div class="line"><span class="lineno">  496</span>    <a class="code hl_function" href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07">uloop_timeout_add</a>(&amp;<a class="code hl_variable" href="#aaaca871d36faffe71d9de4359c9857d6">ubus_start_timeout</a>);</div>
<div class="line"><span class="lineno">  497</span>    <a class="code hl_function" href="../../dc/d56/uloop_8h.html#aba97081464ac3304fef640bcfc7d3077">uloop_run</a>();</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>errout_inotify:</div>
<div class="line"><span class="lineno">  502</span>    close(<a class="code hl_variable" href="#a96c9bf4047dfd7bb93def7047fe800a7">fd_inotify_read</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>);</div>
<div class="line"><span class="lineno">  503</span>errout:</div>
<div class="line"><span class="lineno">  504</span>    free(<a class="code hl_variable" href="#a2751d130bdb6095087bf22c3d3f4a159">ubus_sock_path</a>);</div>
<div class="line"><span class="lineno">  505</span>errout_path:</div>
<div class="line"><span class="lineno">  506</span>    free(<a class="code hl_variable" href="#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>);</div>
<div class="line"><span class="lineno">  507</span>errout_dir:</div>
<div class="line"><span class="lineno">  508</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  509</span>}</div>
<div class="ttc" id="ajail_8c_html_ac256367002c667bedef320ba8eff2aa0"><div class="ttname"><a href="../../dd/d26/jail_8c.html#ac256367002c667bedef320ba8eff2aa0">netns_fd</a></div><div class="ttdeci">static int netns_fd</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d26/jail_8c_source.html#l02571">jail.c:2571</a></div></div>
<div class="ttc" id="ajail_8c_html_ae3f4a6a40d174160d8d1fcd78515e4ea"><div class="ttname"><a href="../../dd/d26/jail_8c.html#ae3f4a6a40d174160d8d1fcd78515e4ea">ns_open_pid</a></div><div class="ttdeci">int ns_open_pid(const char *nstype, const pid_t target_ns)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d26/jail_8c_source.html#l01329">jail.c:1329</a></div></div>
<div class="ttc" id="alibubox_2utils_8c_html_a9fb089901b41392a5ac197f3e18cc3f7"><div class="ttname"><a href="../../d0/d2b/libubox_2utils_8c.html#a9fb089901b41392a5ac197f3e18cc3f7">mkdir_p</a></div><div class="ttdeci">int mkdir_p(char *dir, mode_t mask)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d2b/libubox_2utils_8c_source.html#l00161">utils.c:161</a></div></div>
<div class="ttc" id="anetifd_8c_html_a236bb6b2255c0b3d555d8b5226c6884a"><div class="ttname"><a href="#a236bb6b2255c0b3d555d8b5226c6884a">inotify_read_handler</a></div><div class="ttdeci">static void inotify_read_handler(struct uloop_fd *u, unsigned int events)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00323">netifd.c:323</a></div></div>
<div class="ttc" id="anetifd_8c_html_a2751d130bdb6095087bf22c3d3f4a159"><div class="ttname"><a href="#a2751d130bdb6095087bf22c3d3f4a159">ubus_sock_path</a></div><div class="ttdeci">static char * ubus_sock_path</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00051">netifd.c:51</a></div></div>
<div class="ttc" id="anetifd_8c_html_a54efb4f9d0b67d049b750dfe54212cce"><div class="ttname"><a href="#a54efb4f9d0b67d049b750dfe54212cce">watch_ubus_service</a></div><div class="ttdeci">static void watch_ubus_service(void)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00413">netifd.c:413</a></div></div>
<div class="ttc" id="anetifd_8c_html_a71698b19f7fdbb3ae922ac51f68e9793"><div class="ttname"><a href="#a71698b19f7fdbb3ae922ac51f68e9793">netns_updown</a></div><div class="ttdeci">static void netns_updown(struct ubus_context *ubus, const char *name, bool start, int netns_fd)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00349">netifd.c:349</a></div></div>
<div class="ttc" id="anetifd_8c_html_a96c9bf4047dfd7bb93def7047fe800a7"><div class="ttname"><a href="#a96c9bf4047dfd7bb93def7047fe800a7">fd_inotify_read</a></div><div class="ttdeci">static struct uloop_fd fd_inotify_read</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00054">netifd.c:54</a></div></div>
<div class="ttc" id="anetifd_8c_html_aaaca871d36faffe71d9de4359c9857d6"><div class="ttname"><a href="#aaaca871d36faffe71d9de4359c9857d6">ubus_start_timeout</a></div><div class="ttdeci">static struct uloop_timeout ubus_start_timeout</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00432">netifd.c:432</a></div></div>
<div class="ttc" id="anetifd_8c_html_ad089f40feda5fe2747f51364b17c5048"><div class="ttname"><a href="#ad089f40feda5fe2747f51364b17c5048">ubus_pw</a></div><div class="ttdeci">static struct passwd * ubus_pw</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00055">netifd.c:55</a></div></div>
<div class="ttc" id="anetifd_8c_html_ad44a100157e230119d20d1b28ca76625"><div class="ttname"><a href="#ad44a100157e230119d20d1b28ca76625">ns_pid</a></div><div class="ttdeci">static pid_t ns_pid</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00056">netifd.c:56</a></div></div>
<div class="ttc" id="anetifd_8c_html_af2c6d0302ae2ea1147a41c9d05d81e3a"><div class="ttname"><a href="#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a></div><div class="ttdeci">static char * ubus_sock_dir</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00051">netifd.c:51</a></div></div>
<div class="ttc" id="aprocd_2jail_2log_8h_html_a15378cd15bafb3a79061424b452497aa"><div class="ttname"><a href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a></div><div class="ttdeci">#define ERROR(fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">log.h:27</a></div></div>
<div class="ttc" id="auloop_8c_html_a570d5b4ff73cb373a6ca0ac54a9726a0"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0">uloop_fd_add</a></div><div class="ttdeci">int uloop_fd_add(struct uloop_fd *sock, unsigned int flags)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00235">uloop.c:235</a></div></div>
<div class="ttc" id="auloop_8h_html_aba97081464ac3304fef640bcfc7d3077"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#aba97081464ac3304fef640bcfc7d3077">uloop_run</a></div><div class="ttdeci">static int uloop_run(void)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00147">uloop.h:147</a></div></div>
<div class="ttc" id="auloop_8h_html_ac20cd5fed660ef784791db47283d9ebf"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#ac20cd5fed660ef784791db47283d9ebf">ULOOP_READ</a></div><div class="ttdeci">#define ULOOP_READ</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00047">uloop.h:47</a></div></div>
<div class="ttc" id="auloop_8h_html_ae413fa6bfe9ee31b5764d402d9795fdc"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#ae413fa6bfe9ee31b5764d402d9795fdc">uloop_fd::cb</a></div><div class="ttdeci">uloop_fd_handler cb</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00064">uloop.h:64</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d56/uloop_8h_source.html#l00064">uloop_fd::cb</a>, <a class="el" href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">ERROR</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00065">uloop_fd::fd</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00054">fd_inotify_read</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00058">host_ubus_ctx</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00053">inotify_buffer</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00323">inotify_read_handler()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00044">INOTIFY_SZ</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">jail_name</a>, <a class="el" href="../../d0/d2b/libubox_2utils_8c_source.html#l00161">mkdir_p()</a>, <a class="el" href="../../dd/d26/jail_8c_source.html#l02571">netns_fd</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00349">netns_updown()</a>, <a class="el" href="../../dd/d26/jail_8c_source.html#l01329">ns_open_pid()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00056">ns_pid</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00055">ubus_pw</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">ubus_sock_dir</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00049">ubus_sock_name</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">ubus_sock_path</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00432">ubus_start_timeout</a>, <a class="el" href="../../d1/d08/uloop_8c_source.html#l00235">uloop_fd_add()</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00047">ULOOP_READ</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00147">uloop_run()</a>, <a class="el" href="../../d1/d08/uloop_8c_source.html#l00298">uloop_timeout_add()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00413">watch_ubus_service()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d26/jail_8c_source.html#l02923">post_main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d3d/netifd_8c_a086fe28fa898f797f9a657e63a3a95bd_cgraph.png" border="0" usemap="#adb/d3d/netifd_8c_a086fe28fa898f797f9a657e63a3a95bd_cgraph" alt=""/></div>
<map name="adb/d3d/netifd_8c_a086fe28fa898f797f9a657e63a3a95bd_cgraph" id="adb/d3d/netifd_8c_a086fe28fa898f797f9a657e63a3a95bd_cgraph">
<area shape="rect" title=" " alt="" coords="5,587,189,620"/>
<area shape="rect" href="../../db/d3d/netifd_8c.html#a236bb6b2255c0b3d555d8b5226c6884a" title=" " alt="" coords="514,448,722,482"/>
<area shape="poly" title=" " alt="" coords="113,584,165,539,199,517,236,498,301,478,370,466,437,459,498,457,498,463,437,465,370,471,303,484,238,503,201,521,168,544,117,588"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07" title=" " alt="" coords="816,619,1012,652"/>
<area shape="poly" title=" " alt="" coords="128,584,178,561,236,542,348,526,494,515,569,514,639,518,700,527,747,542,764,557,772,574,780,590,795,605,803,610,800,615,792,610,776,593,768,576,760,560,744,547,698,532,638,523,569,520,495,520,349,531,237,547,179,566,130,589"/>
<area shape="rect" href="../../d0/d2b/libubox_2utils_8c.html#a9fb089901b41392a5ac197f3e18cc3f7" title=" " alt="" coords="292,696,388,730"/>
<area shape="poly" title=" " alt="" coords="137,618,287,687,285,691,135,623"/>
<area shape="rect" href="../../db/d3d/netifd_8c.html#a71698b19f7fdbb3ae922ac51f68e9793" title=" " alt="" coords="262,175,418,208"/>
<area shape="poly" title=" " alt="" coords="106,585,319,220,323,223,111,588"/>
<area shape="rect" href="../../dd/d26/jail_8c.html#ae3f4a6a40d174160d8d1fcd78515e4ea" title=" " alt="" coords="272,753,408,787"/>
<area shape="poly" title=" " alt="" coords="113,619,163,679,198,712,238,740,258,750,256,754,235,744,195,716,159,682,109,623"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0" title=" " alt="" coords="268,811,412,844"/>
<area shape="poly" title=" " alt="" coords="108,620,126,657,154,705,192,755,238,797,255,807,252,811,235,802,188,759,150,708,121,659,103,622"/>
<area shape="rect" href="../../dc/d56/uloop_8h.html#aba97081464ac3304fef640bcfc7d3077" title=" " alt="" coords="283,615,397,648"/>
<area shape="poly" title=" " alt="" coords="189,611,268,621,267,626,189,617"/>
<area shape="rect" href="../../db/d3d/netifd_8c.html#a54efb4f9d0b67d049b750dfe54212cce" title=" " alt="" coords="237,557,443,591"/>
<area shape="poly" title=" " alt="" coords="189,590,221,586,221,591,189,595"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a49473a90e2fe9252f856e10246252554" title=" " alt="" coords="895,447,933,480"/>
<area shape="poly" title=" " alt="" coords="723,462,879,461,879,466,723,467"/>
<area shape="poly" title=" " alt="" coords="716,480,747,499,759,512,766,526,772,554,777,581,784,593,795,605,803,611,800,616,792,610,779,596,772,583,766,555,761,528,755,515,744,503,713,485"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a1b150f4e4c92035b2ecebc171a115a19" title=" " alt="" coords="1141,447,1189,480"/>
<area shape="poly" title=" " alt="" coords="934,461,1125,461,1125,466,934,466"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="1100,619,1230,652"/>
<area shape="poly" title=" " alt="" coords="1013,633,1084,633,1084,638,1013,638"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a76f33118cba0a358482528fad8c0f4cd" title=" " alt="" coords="1126,689,1204,723"/>
<area shape="poly" title=" " alt="" coords="977,650,1112,689,1110,694,976,656"/>
<area shape="poly" title=" " alt="" coords="296,697,292,687,298,677,314,671,340,669,367,672,383,678,381,683,366,677,340,675,315,677,301,681,297,687,301,694"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59" title=" " alt="" coords="545,5,691,39"/>
<area shape="poly" title=" " alt="" coords="352,172,407,111,446,77,490,48,529,33,531,38,492,53,449,81,411,115,356,176"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1095,229,1235,263"/>
<area shape="poly" title=" " alt="" coords="419,187,692,189,863,197,1035,214,1083,223,1082,228,1034,219,863,203,691,194,419,192"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="514,120,722,154"/>
<area shape="poly" title=" " alt="" coords="418,174,514,155,515,160,419,179"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2" title=" " alt="" coords="529,63,707,96"/>
<area shape="poly" title=" " alt="" coords="365,172,421,138,490,105,513,97,515,102,492,110,424,143,368,176"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a572cdb5570d677242d1bc90d2d592852" title=" " alt="" coords="536,257,700,291"/>
<area shape="poly" title=" " alt="" coords="400,206,545,250,544,255,399,211"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54" title=" " alt="" coords="537,391,700,424"/>
<area shape="poly" title=" " alt="" coords="365,207,584,379,581,383,362,211"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1333,201,1438,235"/>
<area shape="poly" title=" " alt="" coords="1235,235,1316,224,1317,229,1235,240"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1295,259,1475,292"/>
<area shape="poly" title=" " alt="" coords="1235,253,1280,259,1279,264,1235,258"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="817,92,1011,126"/>
<area shape="poly" title=" " alt="" coords="723,124,801,117,802,122,723,130"/>
<area shape="poly" title=" " alt="" coords="708,86,802,95,801,100,708,91"/>
<area shape="poly" title=" " alt="" coords="648,289,883,441,880,446,645,294"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="794,287,1034,320"/>
<area shape="poly" title=" " alt="" coords="701,280,779,287,778,293,701,285"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a50302440f98786d5bcc4770a627bf8dc" title=" " alt="" coords="800,229,1028,263"/>
<area shape="poly" title=" " alt="" coords="701,264,784,256,785,261,701,269"/>
<area shape="poly" title=" " alt="" coords="1028,244,1080,244,1080,249,1028,249"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="1083,337,1247,371"/>
<area shape="poly" title=" " alt="" coords="1005,261,1036,272,1086,297,1130,326,1127,330,1083,302,1034,277,1003,266"/>
<area shape="poly" title=" " alt="" coords="700,391,1034,330,1086,303,1130,271,1133,275,1089,307,1036,335,701,396"/>
<area shape="poly" title=" " alt="" coords="660,388,792,337,836,323,838,328,794,342,662,393"/>
<area shape="poly" title=" " alt="" coords="700,401,855,392,1034,374,1067,370,1068,375,1035,379,856,397,701,407"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#ad9a92a327d8621e1eee7014bac19bc2b" title=" " alt="" coords="817,504,1011,538"/>
<area shape="poly" title=" " alt="" coords="701,415,747,433,763,448,772,463,780,477,795,491,804,496,802,500,792,495,776,481,767,465,759,451,744,438,699,420"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="815,561,1013,595"/>
<area shape="poly" title=" " alt="" coords="701,411,725,420,747,433,760,448,767,463,772,492,777,521,783,535,795,548,803,554,800,558,792,552,779,538,771,523,767,493,762,464,756,451,744,438,723,425,699,416"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#a1b6212744c4241320adc3a2170525f20" title=" " alt="" coords="551,799,685,832"/>
<area shape="poly" title=" " alt="" coords="412,822,535,816,536,822,413,827"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c" title=" " alt="" coords="535,856,701,890"/>
<area shape="poly" title=" " alt="" coords="413,837,520,854,519,859,412,842"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#ae98d2f54596aacb1f0f176d0e565e2e2" title=" " alt="" coords="822,884,1006,918"/>
<area shape="poly" title=" " alt="" coords="702,878,807,888,806,893,702,883"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#abe443fe3f794c14f0aaa0c5f18a27ddd" title=" " alt="" coords="804,827,1024,860"/>
<area shape="poly" title=" " alt="" coords="702,862,789,853,789,859,702,867"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a14d4e1fa83f245cd59f0c68f48c90d75" title=" " alt="" coords="522,729,715,763"/>
<area shape="poly" title=" " alt="" coords="397,638,422,646,445,657,460,672,469,688,477,702,493,716,508,724,506,729,489,720,473,706,465,690,456,676,441,662,420,651,396,643"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a18ed130af55f89035ca041f340a091f9" title=" " alt="" coords="793,715,1035,748"/>
<area shape="poly" title=" " alt="" coords="715,739,778,736,778,741,716,744"/>
<area shape="poly" title=" " alt="" coords="1035,717,1110,709,1110,714,1035,722"/>
<area shape="poly" title=" " alt="" coords="352,555,408,495,446,461,490,433,521,421,523,425,492,438,450,466,411,499,356,559"/>
<area shape="rect" href="../../db/d3d/netifd_8c.html#a8771ddaea81ee77859c78c10f3eb0dc0" title=" " alt="" coords="501,557,735,591"/>
<area shape="poly" title=" " alt="" coords="443,572,485,572,485,577,443,577"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#ae1a94ef8a134c406bd155adbf1013df9" title=" " alt="" coords="491,615,745,648"/>
<area shape="poly" title=" " alt="" coords="426,589,519,608,518,614,424,594"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#a1406fcd78c0f0c52dbb0fb6ae0b16f89" title=" " alt="" coords="535,672,701,706"/>
<area shape="poly" title=" " alt="" coords="424,589,445,600,460,615,469,630,477,645,492,659,521,672,519,677,490,663,473,648,465,633,456,618,441,604,421,594"/>
<area shape="poly" title=" " alt="" coords="704,589,815,612,814,618,703,594"/>
</map>
</div>

</div>
</div>
<a id="aeada94c74be21275dbafb9a8d9515e90" name="aeada94c74be21275dbafb9a8d9515e90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeada94c74be21275dbafb9a8d9515e90">&#9670;&#160;</a></span>jail_network_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int jail_network_stop </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00526">526</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  527</span>{</div>
<div class="line"><span class="lineno">  528</span>    <span class="keywordtype">int</span> host_netns = open(<span class="stringliteral">&quot;/proc/self/ns/net&quot;</span>, O_RDONLY);</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>    <span class="keywordflow">if</span> (host_netns &lt; 0)</div>
<div class="line"><span class="lineno">  531</span>        <span class="keywordflow">return</span> errno;</div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span>    <a class="code hl_function" href="#a71698b19f7fdbb3ae922ac51f68e9793">netns_updown</a>(<a class="code hl_variable" href="#ab7ecd9598eed63587841ef3d2e84557f">jail_ubus_ctx</a>, NULL, <span class="keyword">false</span>, host_netns);</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>    close(host_netns);</div>
<div class="line"><span class="lineno">  536</span>    <a class="code hl_function" href="../../d4/db9/libubus_8c.html#a71987f233caf53482181b6eb504d46f2">ubus_free</a>(<a class="code hl_variable" href="#ab7ecd9598eed63587841ef3d2e84557f">jail_ubus_ctx</a>);</div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>    <a class="code hl_function" href="#aecf17edd05dd1516fd1785ed6cc97d7c">jail_delete_instance</a>(<span class="stringliteral">&quot;netifd&quot;</span>);</div>
<div class="line"><span class="lineno">  539</span>    <a class="code hl_function" href="#aecf17edd05dd1516fd1785ed6cc97d7c">jail_delete_instance</a>(<span class="stringliteral">&quot;ubus&quot;</span>);</div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a15b218e71f7aeebd4236246f489d9a39">uci_config_network</a>) {</div>
<div class="line"><span class="lineno">  542</span>        unlink(<a class="code hl_variable" href="#a15b218e71f7aeebd4236246f489d9a39">uci_config_network</a>);</div>
<div class="line"><span class="lineno">  543</span>        rmdir(dirname(<a class="code hl_variable" href="#a15b218e71f7aeebd4236246f489d9a39">uci_config_network</a>));</div>
<div class="line"><span class="lineno">  544</span>        free(<a class="code hl_variable" href="#a15b218e71f7aeebd4236246f489d9a39">uci_config_network</a>);</div>
<div class="line"><span class="lineno">  545</span>    }</div>
<div class="line"><span class="lineno">  546</span> </div>
<div class="line"><span class="lineno">  547</span>    free(<a class="code hl_variable" href="#a2751d130bdb6095087bf22c3d3f4a159">ubus_sock_path</a>);</div>
<div class="line"><span class="lineno">  548</span>    rmdir(<a class="code hl_variable" href="#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>);</div>
<div class="line"><span class="lineno">  549</span>    free(<a class="code hl_variable" href="#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>);</div>
<div class="line"><span class="lineno">  550</span> </div>
<div class="line"><span class="lineno">  551</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  552</span>}</div>
<div class="ttc" id="alibubus_8c_html_a71987f233caf53482181b6eb504d46f2"><div class="ttname"><a href="../../d4/db9/libubus_8c.html#a71987f233caf53482181b6eb504d46f2">ubus_free</a></div><div class="ttdeci">void ubus_free(struct ubus_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/db9/libubus_8c_source.html#l00378">libubus.c:378</a></div></div>
<div class="ttc" id="anetifd_8c_html_aecf17edd05dd1516fd1785ed6cc97d7c"><div class="ttname"><a href="#aecf17edd05dd1516fd1785ed6cc97d7c">jail_delete_instance</a></div><div class="ttdeci">static int jail_delete_instance(const char *instance)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00511">netifd.c:511</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d3d/netifd_8c_source.html#l00511">jail_delete_instance()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00059">jail_ubus_ctx</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00349">netns_updown()</a>, <a class="el" href="../../d4/db9/libubus_8c_source.html#l00378">ubus_free()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">ubus_sock_dir</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">ubus_sock_path</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">uci_config_network</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d26/jail_8c_source.html#l03161">poststop()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d3d/netifd_8c_aeada94c74be21275dbafb9a8d9515e90_cgraph.png" border="0" usemap="#adb/d3d/netifd_8c_aeada94c74be21275dbafb9a8d9515e90_cgraph" alt=""/></div>
<map name="adb/d3d/netifd_8c_aeada94c74be21275dbafb9a8d9515e90_cgraph" id="adb/d3d/netifd_8c_aeada94c74be21275dbafb9a8d9515e90_cgraph">
<area shape="rect" title=" " alt="" coords="5,559,186,592"/>
<area shape="rect" href="../../db/d3d/netifd_8c.html#aecf17edd05dd1516fd1785ed6cc97d7c" title=" " alt="" coords="234,479,434,512"/>
<area shape="poly" title=" " alt="" coords="147,556,266,515,267,520,149,561"/>
<area shape="rect" href="../../db/d3d/netifd_8c.html#a71698b19f7fdbb3ae922ac51f68e9793" title=" " alt="" coords="488,559,644,592"/>
<area shape="poly" title=" " alt="" coords="186,573,472,573,472,578,186,578"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a71987f233caf53482181b6eb504d46f2" title=" " alt="" coords="278,643,390,676"/>
<area shape="poly" title=" " alt="" coords="147,590,270,634,269,640,145,595"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1305,469,1444,503"/>
<area shape="poly" title=" " alt="" coords="435,492,1289,484,1289,490,435,497"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="703,641,912,675"/>
<area shape="poly" title=" " alt="" coords="354,511,409,558,445,582,483,602,533,620,586,634,688,650,687,655,585,639,532,626,481,607,442,587,405,562,351,515"/>
<area shape="rect" href="../../db/d55/libubus_8h.html#ad79f9793c3835ea8691fe377025c7de7" title=" " alt="" coords="498,424,634,458"/>
<area shape="poly" title=" " alt="" coords="408,475,482,458,483,463,409,481"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54" title=" " alt="" coords="726,260,889,294"/>
<area shape="poly" title=" " alt="" coords="361,476,481,409,621,346,744,297,746,302,623,351,483,414,364,481"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1580,464,1685,498"/>
<area shape="poly" title=" " alt="" coords="1444,482,1564,480,1564,485,1444,487"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1542,521,1723,555"/>
<area shape="poly" title=" " alt="" coords="1445,498,1531,515,1530,520,1444,503"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1974,368,2116,402"/>
<area shape="poly" title=" " alt="" coords="1657,461,1717,422,1770,394,1818,383,1867,377,1959,375,1959,380,1867,382,1819,388,1772,399,1719,427,1660,466"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1771,409,1926,443"/>
<area shape="poly" title=" " alt="" coords="1685,465,1764,445,1765,450,1686,470"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="1974,439,2116,472"/>
<area shape="poly" title=" " alt="" coords="1686,475,1958,458,1959,463,1686,480"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1780,519,1917,552"/>
<area shape="poly" title=" " alt="" coords="1686,491,1766,512,1764,517,1685,497"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="1799,576,1898,610"/>
<area shape="poly" title=" " alt="" coords="1687,490,1724,507,1740,521,1749,535,1758,549,1772,563,1786,571,1783,575,1769,567,1754,552,1745,538,1736,524,1721,511,1685,494"/>
<area shape="poly" title=" " alt="" coords="1926,407,1959,400,1960,405,1927,412"/>
<area shape="poly" title=" " alt="" coords="1927,435,1959,440,1958,445,1926,440"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="989,612,1183,646"/>
<area shape="poly" title=" " alt="" coords="912,645,973,638,973,643,913,650"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aed178aa087a351c74f7f6cd34e56ba0c" title=" " alt="" coords="1300,612,1448,646"/>
<area shape="poly" title=" " alt="" coords="1183,626,1284,626,1284,632,1183,632"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a572cdb5570d677242d1bc90d2d592852" title=" " alt="" coords="725,424,890,458"/>
<area shape="poly" title=" " alt="" coords="634,438,710,438,710,444,634,444"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a49473a90e2fe9252f856e10246252554" title=" " alt="" coords="1067,424,1105,458"/>
<area shape="poly" title=" " alt="" coords="890,438,1051,438,1051,444,890,444"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="966,205,1206,239"/>
<area shape="poly" title=" " alt="" coords="825,421,886,366,964,300,1043,245,1046,250,967,304,889,370,829,425"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a50302440f98786d5bcc4770a627bf8dc" title=" " alt="" coords="972,315,1200,348"/>
<area shape="poly" title=" " alt="" coords="852,421,1026,352,1028,357,853,426"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a6a067ed16631bbe3826be535287879e4" title=" " alt="" coords="1295,235,1454,268"/>
<area shape="poly" title=" " alt="" coords="1207,232,1279,239,1279,245,1206,237"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aca15427cb882afec28ce476b9e8e8b34" title=" " alt="" coords="1254,293,1494,349"/>
<area shape="poly" title=" " alt="" coords="1152,237,1207,256,1255,278,1270,284,1269,289,1253,283,1205,261,1150,242"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a5497c370318a5cc03dd662523915ea92" title=" " alt="" coords="1295,63,1454,96"/>
<area shape="poly" title=" " alt="" coords="1187,202,1204,192,1221,172,1227,150,1234,127,1252,105,1279,91,1281,95,1256,110,1239,130,1233,152,1226,174,1208,196,1190,207"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8af6cb580774621aef719d6923cb5072" title=" " alt="" coords="1270,120,1479,154"/>
<area shape="poly" title=" " alt="" coords="1174,202,1205,192,1229,177,1253,162,1270,156,1272,161,1255,167,1231,182,1207,197,1176,207"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ab53faf25fad8c6edbcd804eabeb14c6a" title=" " alt="" coords="1280,177,1469,211"/>
<area shape="poly" title=" " alt="" coords="1206,208,1264,202,1264,207,1207,213"/>
<area shape="poly" title=" " alt="" coords="1167,346,1207,365,1223,378,1233,391,1242,404,1256,417,1289,440,1323,460,1321,464,1286,445,1252,422,1238,407,1229,394,1219,382,1205,370,1165,351"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="1292,373,1456,407"/>
<area shape="poly" title=" " alt="" coords="1173,346,1277,368,1276,373,1172,352"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1582,373,1683,407"/>
<area shape="poly" title=" " alt="" coords="1457,388,1566,388,1566,393,1457,393"/>
<area shape="poly" title=" " alt="" coords="837,292,895,326,967,358,1032,377,1086,385,1140,392,1207,409,1270,433,1327,460,1325,464,1268,438,1205,414,1139,397,1085,390,1031,382,965,363,893,330,834,296"/>
<area shape="poly" title=" " alt="" coords="889,258,981,240,982,245,890,263"/>
<area shape="poly" title=" " alt="" coords="889,261,960,256,1042,258,1127,271,1168,283,1207,300,1224,314,1233,329,1241,345,1256,359,1279,370,1276,375,1252,363,1237,348,1228,332,1220,317,1205,304,1166,288,1126,276,1042,263,960,261,890,267"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#ad9a92a327d8621e1eee7014bac19bc2b" title=" " alt="" coords="989,48,1183,82"/>
<area shape="poly" title=" " alt="" coords="824,258,884,200,964,133,1037,87,1040,92,967,138,887,204,828,261"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="987,148,1185,182"/>
<area shape="poly" title=" " alt="" coords="835,257,893,223,965,190,983,184,985,189,967,195,896,228,837,262"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a1e6079c1ffa0e8f05ca64a51d7332919" title=" " alt="" coords="1302,5,1447,39"/>
<area shape="poly" title=" " alt="" coords="1183,48,1285,33,1286,38,1184,53"/>
<area shape="poly" title=" " alt="" coords="644,567,894,546,1206,512,1289,499,1290,504,1206,517,895,551,645,573"/>
<area shape="poly" title=" " alt="" coords="605,590,698,628,719,634,717,639,696,633,603,595"/>
<area shape="poly" title=" " alt="" coords="596,556,761,463,763,468,599,560"/>
<area shape="poly" title=" " alt="" coords="579,557,695,410,780,304,785,308,699,413,583,560"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59" title=" " alt="" coords="734,699,881,732"/>
<area shape="poly" title=" " alt="" coords="584,591,632,638,664,664,699,685,721,695,719,700,696,690,661,668,629,642,580,595"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2" title=" " alt="" coords="718,584,897,618"/>
<area shape="poly" title=" " alt="" coords="644,581,703,587,702,593,644,586"/>
<area shape="poly" title=" " alt="" coords="897,607,973,615,973,620,897,612"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a7390a5f2c227d5ba53e2bd65afda1cfc" title=" " alt="" coords="482,727,649,760"/>
<area shape="poly" title=" " alt="" coords="384,674,504,719,502,724,382,679"/>
<area shape="poly" title=" " alt="" coords="650,731,718,723,719,728,650,736"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c" title=" " alt="" coords="724,813,891,847"/>
<area shape="poly" title=" " alt="" coords="602,758,698,800,718,806,716,811,696,805,600,763"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a6231184d2f54ac1bc945ecb73c517d91" title=" " alt="" coords="697,756,918,790"/>
<area shape="poly" title=" " alt="" coords="650,751,682,755,681,760,650,756"/>
</map>
</div>

</div>
</div>
<a id="a71698b19f7fdbb3ae922ac51f68e9793" name="a71698b19f7fdbb3ae922ac51f68e9793"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71698b19f7fdbb3ae922ac51f68e9793">&#9670;&#160;</a></span>netns_updown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void netns_updown </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ubus</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>start</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>netns_fd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00349">349</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  350</span>{</div>
<div class="line"><span class="lineno">  351</span>    <span class="keyword">static</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#d3/dcb/structblob__buf">blob_buf</a> req;</div>
<div class="line"><span class="lineno">  352</span>    uint32_t <a class="code hl_variable" href="../../dd/d8f/udebug-proto_8h.html#abaabdc509cdaba7df9f56c6c76f3ae19">id</a>;</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d1/d96/ubus_2lua_2ubus_8c.html#a3d36b63e5e323c6a729ddcf4932944cc">ubus</a>)</div>
<div class="line"><span class="lineno">  355</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>    <a class="code hl_function" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a>(&amp;req, 0);</div>
<div class="line"><span class="lineno">  358</span>    <span class="keywordflow">if</span> (name)</div>
<div class="line"><span class="lineno">  359</span>        <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;jail&quot;</span>, name);</div>
<div class="line"><span class="lineno">  360</span> </div>
<div class="line"><span class="lineno">  361</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2">blobmsg_add_u8</a>(&amp;req, <span class="stringliteral">&quot;start&quot;</span>, start);</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54">ubus_lookup_id</a>(<a class="code hl_variable" href="../../d1/d96/ubus_2lua_2ubus_8c.html#a3d36b63e5e323c6a729ddcf4932944cc">ubus</a>, <span class="stringliteral">&quot;network&quot;</span>, &amp;<span class="keywordtype">id</span>) ||</div>
<div class="line"><span class="lineno">  364</span>        <a class="code hl_function" href="../../d2/de5/libubus-req_8c.html#a572cdb5570d677242d1bc90d2d592852">ubus_invoke_fd</a>(<a class="code hl_variable" href="../../d1/d96/ubus_2lua_2ubus_8c.html#a3d36b63e5e323c6a729ddcf4932944cc">ubus</a>, <span class="keywordtype">id</span>, <span class="stringliteral">&quot;netns_updown&quot;</span>, req.head, NULL, NULL, 3000, <a class="code hl_variable" href="../../dd/d26/jail_8c.html#ac256367002c667bedef320ba8eff2aa0">netns_fd</a>)) {</div>
<div class="line"><span class="lineno">  365</span>        <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#ab56f6599fb46785e4265a3033ba91aa6">INFO</a>(<span class="stringliteral">&quot;ubus request failed\n&quot;</span>);</div>
<div class="line"><span class="lineno">  366</span>    }</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>    <a class="code hl_function" href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59">blob_buf_free</a>(&amp;req);</div>
<div class="line"><span class="lineno">  369</span>}</div>
<div class="ttc" id="ablob_8c_html_a58d1b624b96aa768608f45d390cc0d59"><div class="ttname"><a href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59">blob_buf_free</a></div><div class="ttdeci">void blob_buf_free(struct blob_buf *buf)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/da0/blob_8c_source.html#l00104">blob.c:104</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a381e9943751280e58fbbdf5f59f3bec2"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2">blobmsg_add_u8</a></div><div class="ttdeci">static int blobmsg_add_u8(struct blob_buf *buf, const char *name, uint8_t val)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00208">blobmsg.h:208</a></div></div>
<div class="ttc" id="alibubus-req_8c_html_a572cdb5570d677242d1bc90d2d592852"><div class="ttname"><a href="../../d2/de5/libubus-req_8c.html#a572cdb5570d677242d1bc90d2d592852">ubus_invoke_fd</a></div><div class="ttdeci">int ubus_invoke_fd(struct ubus_context *ctx, uint32_t obj, const char *method, struct blob_attr *msg, ubus_data_handler_t cb, void *priv, int timeout, int fd)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/de5/libubus-req_8c_source.html#l00236">libubus-req.c:236</a></div></div>
<div class="ttc" id="aprocd_2jail_2log_8h_html_ab56f6599fb46785e4265a3033ba91aa6"><div class="ttname"><a href="../../d8/d30/procd_2jail_2log_8h.html#ab56f6599fb46785e4265a3033ba91aa6">INFO</a></div><div class="ttdeci">#define INFO(fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d30/procd_2jail_2log_8h_source.html#l00020">log.h:20</a></div></div>
<div class="ttc" id="aubus_2lua_2ubus_8c_html_a3d36b63e5e323c6a729ddcf4932944cc"><div class="ttname"><a href="../../d1/d96/ubus_2lua_2ubus_8c.html#a3d36b63e5e323c6a729ddcf4932944cc">ubus</a></div><div class="ttdeci">static const luaL_Reg ubus[]</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d96/ubus_2lua_2ubus_8c_source.html#l00948">ubus.c:948</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/da0/blob_8c_source.html#l00104">blob_buf_free()</a>, <a class="el" href="../../d4/da0/blob_8c_source.html#l00091">blob_buf_init()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00235">blobmsg_add_string()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00208">blobmsg_add_u8()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00065">blob_buf::head</a>, <a class="el" href="../../dd/d8f/udebug-proto_8h_source.html#l00002">id</a>, <a class="el" href="../../d8/d30/procd_2jail_2log_8h_source.html#l00020">INFO</a>, <a class="el" href="../../dd/d26/jail_8c_source.html#l02571">netns_fd</a>, <a class="el" href="../../d1/d96/ubus_2lua_2ubus_8c_source.html#l00948">ubus</a>, <a class="el" href="../../d2/de5/libubus-req_8c_source.html#l00236">ubus_invoke_fd()</a>, and <a class="el" href="../../d4/db9/libubus_8c_source.html#l00192">ubus_lookup_id()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00526">jail_network_stop()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d3d/netifd_8c_a71698b19f7fdbb3ae922ac51f68e9793_cgraph.png" border="0" usemap="#adb/d3d/netifd_8c_a71698b19f7fdbb3ae922ac51f68e9793_cgraph" alt=""/></div>
<map name="adb/d3d/netifd_8c_a71698b19f7fdbb3ae922ac51f68e9793_cgraph" id="adb/d3d/netifd_8c_a71698b19f7fdbb3ae922ac51f68e9793_cgraph">
<area shape="rect" title=" " alt="" coords="5,385,162,419"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59" title=" " alt="" coords="241,235,387,268"/>
<area shape="poly" title=" " alt="" coords="97,383,144,335,175,309,208,285,234,272,237,277,211,290,178,313,147,339,101,387"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="792,175,931,208"/>
<area shape="poly" title=" " alt="" coords="139,382,209,361,474,286,741,217,776,208,777,213,742,222,475,291,210,366,140,387"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="210,491,418,524"/>
<area shape="poly" title=" " alt="" coords="113,417,158,444,211,470,241,483,240,488,209,475,156,448,110,422"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2" title=" " alt="" coords="225,561,403,595"/>
<area shape="poly" title=" " alt="" coords="99,418,144,474,176,506,211,535,244,553,241,557,208,539,172,510,141,478,95,421"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a572cdb5570d677242d1bc90d2d592852" title=" " alt="" coords="232,427,396,460"/>
<area shape="poly" title=" " alt="" coords="162,414,217,423,216,429,161,419"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54" title=" " alt="" coords="498,344,661,378"/>
<area shape="poly" title=" " alt="" coords="162,393,482,366,483,372,162,398"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1097,33,1203,67"/>
<area shape="poly" title=" " alt="" coords="881,172,944,124,985,98,1029,76,1081,59,1083,64,1031,81,988,103,947,129,885,176"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1060,91,1240,124"/>
<area shape="poly" title=" " alt="" coords="910,171,1029,133,1055,126,1056,131,1030,138,912,177"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1521,5,1664,39"/>
<area shape="poly" title=" " alt="" coords="1203,36,1318,18,1396,16,1473,18,1506,18,1506,24,1473,23,1396,21,1318,23,1203,41"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1318,33,1473,67"/>
<area shape="poly" title=" " alt="" coords="1203,48,1302,48,1302,53,1203,53"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="1521,88,1664,122"/>
<area shape="poly" title=" " alt="" coords="1203,58,1318,77,1506,96,1505,101,1318,82,1202,63"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1328,143,1464,176"/>
<area shape="poly" title=" " alt="" coords="1204,54,1238,62,1271,76,1287,87,1297,98,1306,110,1320,121,1339,133,1337,138,1316,126,1302,113,1293,102,1283,91,1269,81,1236,67,1202,59"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="1346,200,1445,234"/>
<area shape="poly" title=" " alt="" coords="1203,49,1239,58,1272,76,1284,90,1292,104,1297,132,1302,160,1309,173,1320,187,1333,197,1330,201,1316,191,1304,176,1297,162,1292,133,1287,106,1280,93,1268,80,1237,63,1202,55"/>
<area shape="poly" title=" " alt="" coords="1473,36,1506,32,1507,37,1474,42"/>
<area shape="poly" title=" " alt="" coords="1460,65,1515,81,1514,86,1458,70"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="1521,201,1664,235"/>
<area shape="poly" title=" " alt="" coords="1456,174,1520,194,1518,199,1454,179"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1712,201,1853,235"/>
<area shape="poly" title=" " alt="" coords="1464,162,1559,171,1664,186,1704,195,1703,200,1663,191,1559,176,1464,167"/>
<area shape="poly" title=" " alt="" coords="1664,216,1696,216,1696,221,1664,221"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="483,568,677,602"/>
<area shape="poly" title=" " alt="" coords="366,522,467,554,491,561,490,566,465,559,365,528"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aed178aa087a351c74f7f6cd34e56ba0c" title=" " alt="" coords="787,705,936,739"/>
<area shape="poly" title=" " alt="" coords="618,600,812,696,810,700,615,605"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1340,427,1451,460"/>
<area shape="poly" title=" " alt="" coords="894,737,967,771,1014,788,1065,802,1118,811,1171,811,1222,801,1269,777,1302,747,1329,711,1350,670,1366,627,1385,542,1391,476,1396,476,1390,543,1371,628,1355,672,1334,713,1306,751,1271,782,1224,806,1172,816,1118,816,1064,808,1012,793,965,776,892,742"/>
<area shape="poly" title=" " alt="" coords="404,578,467,579,467,585,403,583"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a49473a90e2fe9252f856e10246252554" title=" " alt="" coords="560,511,599,544"/>
<area shape="poly" title=" " alt="" coords="371,458,547,515,545,520,369,463"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="741,524,982,558"/>
<area shape="poly" title=" " alt="" coords="397,450,536,469,694,496,784,517,783,522,693,501,535,474,396,455"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a50302440f98786d5bcc4770a627bf8dc" title=" " alt="" coords="466,401,693,435"/>
<area shape="poly" title=" " alt="" coords="396,433,450,428,450,433,397,438"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a1b150f4e4c92035b2ecebc171a115a19" title=" " alt="" coords="838,581,885,615"/>
<area shape="poly" title=" " alt="" coords="600,529,694,553,742,568,823,587,822,593,741,573,693,558,599,534"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a6a067ed16631bbe3826be535287879e4" title=" " alt="" coords="1070,733,1230,767"/>
<area shape="poly" title=" " alt="" coords="969,556,984,567,999,586,1006,606,1008,645,1010,684,1017,702,1031,720,1057,736,1054,741,1028,724,1012,705,1005,685,1003,646,1001,607,994,589,980,571,966,560"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aca15427cb882afec28ce476b9e8e8b34" title=" " alt="" coords="1030,481,1270,537"/>
<area shape="poly" title=" " alt="" coords="982,525,1014,521,1014,527,983,530"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a5497c370318a5cc03dd662523915ea92" title=" " alt="" coords="1070,561,1230,595"/>
<area shape="poly" title=" " alt="" coords="983,554,1055,563,1054,569,982,559"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8af6cb580774621aef719d6923cb5072" title=" " alt="" coords="1045,619,1255,652"/>
<area shape="poly" title=" " alt="" coords="956,556,983,566,998,576,1008,586,1017,596,1031,605,1043,610,1041,615,1028,610,1014,600,1004,590,994,580,980,571,954,561"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ab53faf25fad8c6edbcd804eabeb14c6a" title=" " alt="" coords="1055,676,1245,710"/>
<area shape="poly" title=" " alt="" coords="966,556,983,567,995,579,1002,591,1008,616,1014,641,1021,652,1031,663,1043,670,1040,675,1028,667,1016,655,1009,642,1003,617,997,593,991,582,980,571,963,561"/>
<area shape="poly" title=" " alt="" coords="678,399,691,388,707,368,714,348,715,305,715,261,723,239,739,218,757,205,776,197,778,202,759,210,743,221,728,242,720,262,720,305,719,348,712,371,695,392,681,403"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a7da0a155290c1fd4d3b5911ced43d5a2" title=" " alt="" coords="1042,315,1258,348"/>
<area shape="poly" title=" " alt="" coords="694,424,760,425,833,420,908,410,981,390,995,383,1004,375,1014,366,1028,357,1043,351,1045,356,1031,362,1017,370,1008,379,998,388,983,395,909,415,834,426,760,430,694,430"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="779,347,944,380"/>
<area shape="poly" title=" " alt="" coords="670,398,764,380,765,385,671,403"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a0e8112f19ea399af22d957f19cf6cfc7" title=" " alt="" coords="783,456,940,490"/>
<area shape="poly" title=" " alt="" coords="671,433,768,452,767,457,670,438"/>
<area shape="poly" title=" " alt="" coords="1218,311,1508,237,1509,242,1220,317"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1099,372,1201,406"/>
<area shape="poly" title=" " alt="" coords="945,368,1084,380,1083,386,944,373"/>
<area shape="poly" title=" " alt="" coords="1202,397,1325,425,1324,430,1200,403"/>
<area shape="poly" title=" " alt="" coords="941,466,1324,445,1324,450,941,471"/>
<area shape="poly" title=" " alt="" coords="921,453,1084,405,1085,410,923,458"/>
<area shape="poly" title=" " alt="" coords="660,342,692,323,703,310,709,298,714,271,720,244,727,230,740,217,757,206,776,198,778,203,759,211,743,222,732,234,725,246,719,272,714,299,707,313,695,327,663,346"/>
<area shape="poly" title=" " alt="" coords="663,369,695,387,708,401,715,415,720,445,725,473,732,487,743,500,764,515,761,519,740,504,727,490,720,475,715,445,710,417,703,404,692,391,660,373"/>
<area shape="poly" title=" " alt="" coords="662,359,764,360,764,365,662,364"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#ad9a92a327d8621e1eee7014bac19bc2b" title=" " alt="" coords="764,232,959,266"/>
<area shape="poly" title=" " alt="" coords="652,341,692,323,706,311,715,299,724,286,740,275,750,270,752,274,743,279,728,290,719,302,710,315,695,327,654,346"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="762,289,961,323"/>
<area shape="poly" title=" " alt="" coords="661,342,756,324,757,329,662,348"/>
<area shape="poly" title=" " alt="" coords="959,248,1030,249,1208,254,1348,261,1486,261,1663,245,1708,237,1709,242,1664,250,1486,266,1347,266,1208,260,1030,254,959,253"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a1e6079c1ffa0e8f05ca64a51d7332919" title=" " alt="" coords="1077,205,1223,239"/>
<area shape="poly" title=" " alt="" coords="959,237,1061,228,1062,233,959,242"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="1061,148,1239,182"/>
<area shape="poly" title=" " alt="" coords="949,229,981,218,1004,205,1029,190,1046,184,1048,189,1031,195,1007,209,983,223,951,234"/>
<area shape="poly" title=" " alt="" coords="961,312,1027,318,1026,323,961,318"/>
</map>
</div>

</div>
</div>
<a id="aac2f976b0c50060bced04426971313a3" name="aac2f976b0c50060bced04426971313a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac2f976b0c50060bced04426971313a3">&#9670;&#160;</a></span>run_netifd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void run_netifd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00194">194</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  195</span>{</div>
<div class="line"><span class="lineno">  196</span>    <span class="keyword">static</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#d3/dcb/structblob__buf">blob_buf</a> req;</div>
<div class="line"><span class="lineno">  197</span>    <span class="keywordtype">void</span> *ins, *in, *<a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>, *<a class="code hl_struct" href="../../d9/dda/instance_8h.html#d6/d57/structjail">jail</a>, *setns, *setnso, *namespaces, *<a class="code hl_struct" href="../../d2/d5a/fs_8c.html#d3/df8/structmount">mount</a>, *pathenv;</div>
<div class="line"><span class="lineno">  198</span>    <span class="keywordtype">char</span> *resolvconf_dir, *resolvconf, *ucimount, *ubusmount;</div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordtype">char</span> uci_dir[] = <span class="stringliteral">&quot;/var/containers/ujail-uci-XXXXXX&quot;</span>;</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    uint32_t <a class="code hl_variable" href="../../dd/d8f/udebug-proto_8h.html#abaabdc509cdaba7df9f56c6c76f3ae19">id</a>;</div>
<div class="line"><span class="lineno">  202</span>    <span class="keywordtype">bool</span> running = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>    <a class="code hl_function" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c">uloop_fd_delete</a>(&amp;<a class="code hl_variable" href="#a96c9bf4047dfd7bb93def7047fe800a7">fd_inotify_read</a>);</div>
<div class="line"><span class="lineno">  205</span>    close(<a class="code hl_variable" href="#a96c9bf4047dfd7bb93def7047fe800a7">fd_inotify_read</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>);</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>    <a class="code hl_variable" href="#ab7ecd9598eed63587841ef3d2e84557f">jail_ubus_ctx</a> = <a class="code hl_function" href="../../d4/db9/libubus_8c.html#a332dc7ace8193793cad0d83b33acbc07">ubus_connect</a>(<a class="code hl_variable" href="#a2751d130bdb6095087bf22c3d3f4a159">ubus_sock_path</a>);</div>
<div class="line"><span class="lineno">  208</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#ab7ecd9598eed63587841ef3d2e84557f">jail_ubus_ctx</a>)</div>
<div class="line"><span class="lineno">  209</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordflow">if</span> (asprintf(&amp;resolvconf_dir, <span class="stringliteral">&quot;/tmp/resolv.conf-%s.d&quot;</span>, <a class="code hl_variable" href="#a1b583a27c491ee79cde9851e9bd02e6e">jail_name</a>) == -1)</div>
<div class="line"><span class="lineno">  212</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordflow">if</span> (asprintf(&amp;resolvconf, <span class="stringliteral">&quot;%s/resolv.conf.auto&quot;</span>, resolvconf_dir) == -1)</div>
<div class="line"><span class="lineno">  215</span>        <span class="keywordflow">goto</span> netifd_out_resolvconf_dir;</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>    <span class="keywordflow">if</span> (!mkdtemp(uci_dir))</div>
<div class="line"><span class="lineno">  218</span>        <span class="keywordflow">goto</span> netifd_out_resolvconf;</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>    <span class="keywordflow">if</span> (asprintf(&amp;<a class="code hl_variable" href="#a15b218e71f7aeebd4236246f489d9a39">uci_config_network</a>, <span class="stringliteral">&quot;%s/network&quot;</span>, uci_dir) == -1)</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">goto</span> netifd_out_ucidir;</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>    <span class="keywordflow">if</span> (asprintf(&amp;ucimount, <span class="stringliteral">&quot;%s:/etc/config&quot;</span>, uci_dir) == -1)</div>
<div class="line"><span class="lineno">  224</span>        <span class="keywordflow">goto</span> netifd_out_ucinetconf;</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>    <span class="keywordflow">if</span> (asprintf(&amp;ubusmount, <span class="stringliteral">&quot;%s:/var/run/ubus&quot;</span>, <a class="code hl_variable" href="#af2c6d0302ae2ea1147a41c9d05d81e3a">ubus_sock_dir</a>) == -1)</div>
<div class="line"><span class="lineno">  227</span>        <span class="keywordflow">goto</span> netifd_out_ucimount;</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#abd429d69805c0a0249657bd5dee82dd8">gen_jail_uci_network</a>())</div>
<div class="line"><span class="lineno">  230</span>        <span class="keywordflow">goto</span> netifd_out_ubusmount;</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>    <a class="code hl_function" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a>(&amp;req, 0);</div>
<div class="line"><span class="lineno">  233</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;name&quot;</span>, <a class="code hl_variable" href="#a1b583a27c491ee79cde9851e9bd02e6e">jail_name</a>);</div>
<div class="line"><span class="lineno">  234</span>    ins = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;req, <span class="stringliteral">&quot;instances&quot;</span>);</div>
<div class="line"><span class="lineno">  235</span>    in = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;req, <span class="stringliteral">&quot;netifd&quot;</span>);</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    <a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a> = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214">blobmsg_open_array</a>(&amp;req, <span class="stringliteral">&quot;command&quot;</span>);</div>
<div class="line"><span class="lineno">  238</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;&quot;</span>, <a class="code hl_variable" href="#aae660c2c1d418d310f64183d43ec58d5">netifd_path</a>);</div>
<div class="line"><span class="lineno">  239</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;-r&quot;</span>);</div>
<div class="line"><span class="lineno">  240</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;&quot;</span>, resolvconf);</div>
<div class="line"><span class="lineno">  241</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32">blobmsg_close_array</a>(&amp;req, <a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>);</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>    pathenv = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;req, <span class="stringliteral">&quot;env&quot;</span>);</div>
<div class="line"><span class="lineno">  244</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;PATH&quot;</span>, <span class="stringliteral">&quot;/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>);</div>
<div class="line"><span class="lineno">  245</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a>(&amp;req, pathenv);</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>    <a class="code hl_struct" href="../../d9/dda/instance_8h.html#d6/d57/structjail">jail</a> = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;req, <span class="stringliteral">&quot;jail&quot;</span>);</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>    setns = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214">blobmsg_open_array</a>(&amp;req, <span class="stringliteral">&quot;setns&quot;</span>);</div>
<div class="line"><span class="lineno">  250</span>    setnso = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;req, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  251</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393">blobmsg_add_u32</a>(&amp;req, <span class="stringliteral">&quot;pid&quot;</span>, <a class="code hl_variable" href="#ad44a100157e230119d20d1b28ca76625">ns_pid</a>);</div>
<div class="line"><span class="lineno">  252</span>    namespaces = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214">blobmsg_open_array</a>(&amp;req, <span class="stringliteral">&quot;namespaces&quot;</span>);</div>
<div class="line"><span class="lineno">  253</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;net&quot;</span>);</div>
<div class="line"><span class="lineno">  254</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;ipc&quot;</span>);</div>
<div class="line"><span class="lineno">  255</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;uts&quot;</span>);</div>
<div class="line"><span class="lineno">  256</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32">blobmsg_close_array</a>(&amp;req, namespaces);</div>
<div class="line"><span class="lineno">  257</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a>(&amp;req, setnso);</div>
<div class="line"><span class="lineno">  258</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32">blobmsg_close_array</a>(&amp;req, setns);</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>    <a class="code hl_struct" href="../../d2/d5a/fs_8c.html#d3/df8/structmount">mount</a> = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;req, <span class="stringliteral">&quot;mount&quot;</span>);</div>
<div class="line"><span class="lineno">  261</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, ubusmount, <span class="stringliteral">&quot;1&quot;</span>);</div>
<div class="line"><span class="lineno">  262</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, resolvconf_dir, <span class="stringliteral">&quot;1&quot;</span>);</div>
<div class="line"><span class="lineno">  263</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, ucimount, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  264</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/bin/cat&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  265</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/bin/ipcalc.sh&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  266</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/bin/kill&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  267</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/bin/ubus&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  268</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/etc/hotplug.d&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  269</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/lib/functions&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  270</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/lib/functions.sh&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  271</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/lib/netifd&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  272</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/lib/network&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  273</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/usr/bin/awk&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  274</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/usr/bin/killall&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  275</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/usr/bin/logger&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  276</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/usr/bin/jshn&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  277</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/usr/share/libubox/jshn.sh&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  278</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/sbin/hotplug-call&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  279</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;/sbin/udhcpc&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><span class="lineno">  280</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a>(&amp;req, <a class="code hl_struct" href="../../d2/d5a/fs_8c.html#d3/df8/structmount">mount</a>);</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2">blobmsg_add_u8</a>(&amp;req, <span class="stringliteral">&quot;log&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  283</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2">blobmsg_add_u8</a>(&amp;req, <span class="stringliteral">&quot;procfs&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  284</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2">blobmsg_add_u8</a>(&amp;req, <span class="stringliteral">&quot;sysfs&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  285</span> </div>
<div class="line"><span class="lineno">  286</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2">blobmsg_add_u8</a>(&amp;req, <span class="stringliteral">&quot;requirejail&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a>(&amp;req, <a class="code hl_struct" href="../../d9/dda/instance_8h.html#d6/d57/structjail">jail</a>);</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2">blobmsg_add_u8</a>(&amp;req, <span class="stringliteral">&quot;stdout&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  291</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2">blobmsg_add_u8</a>(&amp;req, <span class="stringliteral">&quot;stderr&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a>(&amp;req, in);</div>
<div class="line"><span class="lineno">  294</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a>(&amp;req, ins);</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54">ubus_lookup_id</a>(<a class="code hl_variable" href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a>, <span class="stringliteral">&quot;container&quot;</span>, &amp;<span class="keywordtype">id</span>))</div>
<div class="line"><span class="lineno">  297</span>        running = !<a class="code hl_function" href="../../db/d55/libubus_8h.html#ad79f9793c3835ea8691fe377025c7de7">ubus_invoke</a>(<a class="code hl_variable" href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a>, <span class="keywordtype">id</span>, <span class="stringliteral">&quot;add&quot;</span>, req.head, NULL, NULL, 3000);</div>
<div class="line"><span class="lineno">  298</span> </div>
<div class="line"><span class="lineno">  299</span>    <span class="keywordflow">if</span> (!running)</div>
<div class="line"><span class="lineno">  300</span>        <a class="code hl_function" href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59">blob_buf_free</a>(&amp;req);</div>
<div class="line"><span class="lineno">  301</span>netifd_out_ubusmount:</div>
<div class="line"><span class="lineno">  302</span>    free(ubusmount);</div>
<div class="line"><span class="lineno">  303</span>netifd_out_ucimount:</div>
<div class="line"><span class="lineno">  304</span>    free(ucimount);</div>
<div class="line"><span class="lineno">  305</span>netifd_out_ucinetconf:</div>
<div class="line"><span class="lineno">  306</span>    <span class="keywordflow">if</span> (!running) {</div>
<div class="line"><span class="lineno">  307</span>        unlink(<a class="code hl_variable" href="#a15b218e71f7aeebd4236246f489d9a39">uci_config_network</a>);</div>
<div class="line"><span class="lineno">  308</span>        free(<a class="code hl_variable" href="#a15b218e71f7aeebd4236246f489d9a39">uci_config_network</a>);</div>
<div class="line"><span class="lineno">  309</span>    }</div>
<div class="line"><span class="lineno">  310</span>netifd_out_ucidir:</div>
<div class="line"><span class="lineno">  311</span>    <span class="keywordflow">if</span> (!running)</div>
<div class="line"><span class="lineno">  312</span>        rmdir(uci_dir);</div>
<div class="line"><span class="lineno">  313</span>netifd_out_resolvconf:</div>
<div class="line"><span class="lineno">  314</span>    free(resolvconf);</div>
<div class="line"><span class="lineno">  315</span>netifd_out_resolvconf_dir:</div>
<div class="line"><span class="lineno">  316</span>    free(resolvconf_dir);</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>    <a class="code hl_function" href="../../dc/d56/uloop_8h.html#a5881608c3589830842d1db287f1f896e">uloop_end</a>();</div>
<div class="line"><span class="lineno">  319</span>}</div>
<div class="ttc" id="ablobmsg_8h_html_a2de3b7599bec41a8c9919f780bd28f1a"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a></div><div class="ttdeci">static void * blobmsg_open_table(struct blob_buf *buf, const char *name)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00256">blobmsg.h:256</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a3252218dfc4cb4c8b54772196e8c2a14"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a></div><div class="ttdeci">static void blobmsg_close_table(struct blob_buf *buf, void *cookie)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00268">blobmsg.h:268</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a56794b194617d9a858dbc783dd2a0c32"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32">blobmsg_close_array</a></div><div class="ttdeci">static void blobmsg_close_array(struct blob_buf *buf, void *cookie)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00262">blobmsg.h:262</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_a938ceeed1d840f9df7946262f1835214"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214">blobmsg_open_array</a></div><div class="ttdeci">static void * blobmsg_open_array(struct blob_buf *buf, const char *name)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00250">blobmsg.h:250</a></div></div>
<div class="ttc" id="ablobmsg_8h_html_afcf08162affe766f0f1c9dd641c7b393"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393">blobmsg_add_u32</a></div><div class="ttdeci">static int blobmsg_add_u32(struct blob_buf *buf, const char *name, uint32_t val)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00221">blobmsg.h:221</a></div></div>
<div class="ttc" id="afs_8c_html_d3/df8/structmount"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#d3/df8/structmount">mount</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/d5a/fs_8c_source.html#l00044">fs.c:44</a></div></div>
<div class="ttc" id="ainstance_8h_html_d6/d57/structjail"><div class="ttname"><a href="../../d9/dda/instance_8h.html#d6/d57/structjail">jail</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/dda/instance_8h_source.html#l00026">instance.h:26</a></div></div>
<div class="ttc" id="ajson__script_8c_html_a12c0be34061dfc832e2b49607c448229"><div class="ttname"><a href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a></div><div class="ttdeci">static const struct json_handler cmd[]</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d4c/json__script_8c_source.html#l00207">json_script.c:207</a></div></div>
<div class="ttc" id="alibubus_8c_html_a332dc7ace8193793cad0d83b33acbc07"><div class="ttname"><a href="../../d4/db9/libubus_8c.html#a332dc7ace8193793cad0d83b33acbc07">ubus_connect</a></div><div class="ttdeci">struct ubus_context * ubus_connect(const char *path)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/db9/libubus_8c_source.html#l00351">libubus.c:351</a></div></div>
<div class="ttc" id="anetifd_8c_html_aae660c2c1d418d310f64183d43ec58d5"><div class="ttname"><a href="#aae660c2c1d418d310f64183d43ec58d5">netifd_path</a></div><div class="ttdeci">static const char netifd_path[]</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00047">netifd.c:47</a></div></div>
<div class="ttc" id="auloop_8c_html_a73e0613a3dcdc677611d2fd6efdcca9c"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c">uloop_fd_delete</a></div><div class="ttdeci">int uloop_fd_delete(struct uloop_fd *fd)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00265">uloop.c:265</a></div></div>
<div class="ttc" id="auloop_8h_html_a5881608c3589830842d1db287f1f896e"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#a5881608c3589830842d1db287f1f896e">uloop_end</a></div><div class="ttdeci">static void uloop_end(void)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00140">uloop.h:140</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/da0/blob_8c_source.html#l00104">blob_buf_free()</a>, <a class="el" href="../../d4/da0/blob_8c_source.html#l00091">blob_buf_init()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00235">blobmsg_add_string()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00221">blobmsg_add_u32()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00208">blobmsg_add_u8()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00262">blobmsg_close_array()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00268">blobmsg_close_table()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00250">blobmsg_open_array()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00256">blobmsg_open_table()</a>, <a class="el" href="../../d4/d4c/json__script_8c_source.html#l00207">cmd</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00065">uloop_fd::fd</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00054">fd_inotify_read</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00064">gen_jail_uci_network()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00065">blob_buf::head</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00058">host_ubus_ctx</a>, <a class="el" href="../../dd/d8f/udebug-proto_8h_source.html#l00002">id</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">jail_name</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00059">jail_ubus_ctx</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00047">netifd_path</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00056">ns_pid</a>, <a class="el" href="../../d4/db9/libubus_8c_source.html#l00351">ubus_connect()</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00354">ubus_invoke()</a>, <a class="el" href="../../d4/db9/libubus_8c_source.html#l00192">ubus_lookup_id()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">ubus_sock_dir</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">ubus_sock_path</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">uci_config_network</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00140">uloop_end()</a>, and <a class="el" href="../../d1/d08/uloop_8c_source.html#l00265">uloop_fd_delete()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d3d/netifd_8c_aac2f976b0c50060bced04426971313a3_cgraph.png" border="0" usemap="#adb/d3d/netifd_8c_aac2f976b0c50060bced04426971313a3_cgraph" alt=""/></div>
<map name="adb/d3d/netifd_8c_aac2f976b0c50060bced04426971313a3_cgraph" id="adb/d3d/netifd_8c_aac2f976b0c50060bced04426971313a3_cgraph">
<area shape="rect" title=" " alt="" coords="5,534,122,568"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59" title=" " alt="" coords="204,138,350,172"/>
<area shape="poly" title=" " alt="" coords="62,533,65,470,78,378,92,328,110,278,135,231,168,189,188,174,191,178,172,193,140,234,115,280,97,329,84,379,70,470,67,534"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="477,193,616,226"/>
<area shape="poly" title=" " alt="" coords="62,533,65,474,78,391,91,347,110,304,135,265,168,233,190,221,220,213,295,203,381,200,461,202,461,207,381,206,296,208,221,218,192,226,171,237,139,269,115,307,96,349,83,393,70,475,67,534"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="173,477,381,510"/>
<area shape="poly" title=" " alt="" coords="121,532,169,519,193,512,195,518,170,524,123,537"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393" title=" " alt="" coords="182,534,372,568"/>
<area shape="poly" title=" " alt="" coords="122,548,166,548,166,554,122,554"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a381e9943751280e58fbbdf5f59f3bec2" title=" " alt="" coords="188,591,366,625"/>
<area shape="poly" title=" " alt="" coords="123,564,170,578,195,584,193,589,169,583,121,570"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32" title=" " alt="" coords="170,305,384,338"/>
<area shape="poly" title=" " alt="" coords="66,533,77,495,97,445,127,392,146,368,168,348,172,344,175,349,171,352,150,372,131,395,102,447,82,496,71,535"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="171,247,383,281"/>
<area shape="poly" title=" " alt="" coords="64,533,72,485,89,420,103,385,120,350,142,318,168,290,171,288,175,292,171,294,146,321,125,353,108,387,94,421,77,486,69,534"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214" title=" " alt="" coords="170,706,384,740"/>
<area shape="poly" title=" " alt="" coords="75,567,111,629,138,664,171,693,177,696,174,701,168,697,134,667,106,632,70,569"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="171,649,383,682"/>
<area shape="poly" title=" " alt="" coords="83,566,121,601,171,635,182,640,180,645,168,640,118,606,79,570"/>
<area shape="rect" href="../../db/d3d/netifd_8c.html#abd429d69805c0a0249657bd5dee82dd8" title=" " alt="" coords="171,763,383,797"/>
<area shape="poly" title=" " alt="" coords="71,567,82,605,102,655,131,707,150,730,171,750,175,753,172,757,168,754,146,734,127,710,97,657,77,607,66,569"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a332dc7ace8193793cad0d83b33acbc07" title=" " alt="" coords="202,821,352,854"/>
<area shape="poly" title=" " alt="" coords="69,568,77,615,94,680,108,715,125,749,146,780,171,808,189,819,186,824,168,812,142,784,120,752,103,717,89,682,72,617,64,569"/>
<area shape="rect" href="../../db/d55/libubus_8h.html#ad79f9793c3835ea8691fe377025c7de7" title=" " alt="" coords="209,419,345,453"/>
<area shape="poly" title=" " alt="" coords="79,532,118,496,168,462,193,451,195,456,171,467,121,500,83,536"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54" title=" " alt="" coords="195,362,359,396"/>
<area shape="poly" title=" " alt="" coords="70,532,106,470,134,435,168,405,180,398,182,402,171,409,138,438,111,473,75,535"/>
<area shape="rect" href="../../dc/d56/uloop_8h.html#a5881608c3589830842d1db287f1f896e" title=" " alt="" coords="219,878,335,912"/>
<area shape="poly" title=" " alt="" coords="68,568,72,625,87,705,100,749,118,791,142,831,171,865,187,876,205,884,202,889,184,881,168,869,137,834,114,794,95,750,82,707,67,626,62,568"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c" title=" " alt="" coords="194,935,360,969"/>
<area shape="poly" title=" " alt="" coords="67,568,68,634,80,730,93,782,112,833,138,881,172,922,182,931,178,935,168,926,133,884,107,835,88,783,75,731,63,635,61,568"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="776,111,881,145"/>
<area shape="poly" title=" " alt="" coords="607,190,760,145,761,150,608,195"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="738,193,919,226"/>
<area shape="poly" title=" " alt="" coords="616,207,723,207,723,212,616,212"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1200,61,1342,94"/>
<area shape="poly" title=" " alt="" coords="846,109,909,60,951,35,996,16,1039,6,1074,3,1109,7,1153,16,1195,31,1232,50,1230,55,1193,36,1151,21,1108,12,1074,8,1040,11,997,21,953,40,912,64,850,113"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="997,146,1152,180"/>
<area shape="poly" title=" " alt="" coords="882,133,982,147,981,152,881,138"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="1200,201,1342,234"/>
<area shape="poly" title=" " alt="" coords="867,143,927,168,997,190,1094,206,1184,213,1184,218,1093,211,996,195,925,173,865,148"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1006,31,1143,65"/>
<area shape="poly" title=" " alt="" coords="881,109,1004,68,1006,73,882,114"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="1025,89,1124,122"/>
<area shape="poly" title=" " alt="" coords="881,121,1009,109,1009,114,882,126"/>
<area shape="poly" title=" " alt="" coords="1124,143,1151,132,1222,99,1224,104,1153,137,1126,148"/>
<area shape="poly" title=" " alt="" coords="1138,178,1194,193,1193,199,1137,183"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="449,590,643,624"/>
<area shape="poly" title=" " alt="" coords="365,509,386,519,401,534,410,549,419,563,434,577,441,581,438,586,430,581,414,567,406,552,397,537,382,524,362,513"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aed178aa087a351c74f7f6cd34e56ba0c" title=" " alt="" coords="754,605,903,638"/>
<area shape="poly" title=" " alt="" coords="644,609,739,614,739,620,644,615"/>
<area shape="poly" title=" " alt="" coords="362,566,447,584,446,589,361,571"/>
<area shape="poly" title=" " alt="" coords="367,605,433,605,433,610,367,610"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="469,251,623,285"/>
<area shape="poly" title=" " alt="" coords="365,301,453,284,454,289,366,307"/>
<area shape="poly" title=" " alt="" coords="624,260,1185,221,1185,226,624,266"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="779,306,878,340"/>
<area shape="poly" title=" " alt="" coords="624,281,765,308,764,313,623,286"/>
<area shape="poly" title=" " alt="" coords="384,263,453,264,453,270,384,268"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aaac450f6a679be8a392d17c3ed8700b4" title=" " alt="" coords="432,649,660,682"/>
<area shape="poly" title=" " alt="" coords="359,703,448,684,450,689,360,708"/>
<area shape="poly" title=" " alt="" coords="658,645,738,633,739,638,659,651"/>
<area shape="poly" title=" " alt="" coords="383,663,416,663,416,668,383,668"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a7af2a1ce52064d2c84b5bc1d97244acd" title=" " alt="" coords="453,821,639,854"/>
<area shape="poly" title=" " alt="" coords="352,835,437,835,437,840,352,840"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a572cdb5570d677242d1bc90d2d592852" title=" " alt="" coords="464,533,628,566"/>
<area shape="poly" title=" " alt="" coords="346,445,385,462,401,477,410,492,419,506,434,519,450,528,448,533,430,524,414,509,406,494,397,480,383,466,344,450"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="708,519,949,553"/>
<area shape="poly" title=" " alt="" coords="629,543,693,540,693,545,629,548"/>
<area shape="poly" title=" " alt="" coords="358,364,382,349,394,336,400,323,405,294,410,265,418,251,430,237,460,219,463,224,434,241,422,254,415,267,411,295,406,324,398,339,386,353,360,368"/>
<area shape="poly" title=" " alt="" coords="350,359,432,346,497,336,549,326,600,327,629,333,661,346,688,360,713,378,755,421,789,466,814,504,809,507,785,469,751,424,709,382,685,365,659,351,627,338,599,332,550,332,498,341,432,351,351,364"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="464,361,628,394"/>
<area shape="poly" title=" " alt="" coords="359,376,448,375,448,381,359,381"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#ad9a92a327d8621e1eee7014bac19bc2b" title=" " alt="" coords="449,418,643,452"/>
<area shape="poly" title=" " alt="" coords="359,393,447,412,446,417,358,398"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="447,475,645,509"/>
<area shape="poly" title=" " alt="" coords="360,392,386,405,401,419,410,434,419,449,434,462,441,466,438,471,430,466,414,452,406,437,397,423,382,409,358,397"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#ae98d2f54596aacb1f0f176d0e565e2e2" title=" " alt="" coords="454,906,638,940"/>
<area shape="poly" title=" " alt="" coords="360,941,438,932,439,937,361,946"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#abe443fe3f794c14f0aaa0c5f18a27ddd" title=" " alt="" coords="437,963,656,997"/>
<area shape="poly" title=" " alt="" coords="361,958,421,965,421,970,360,964"/>
</map>
</div>

</div>
</div>
<a id="a100bb2a7c1f45b834997e21760b2c375" name="a100bb2a7c1f45b834997e21760b2c375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a100bb2a7c1f45b834997e21760b2c375">&#9670;&#160;</a></span>run_ubusd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void run_ubusd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00164">164</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  165</span>{</div>
<div class="line"><span class="lineno">  166</span>    <span class="keyword">static</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#d3/dcb/structblob__buf">blob_buf</a> req;</div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordtype">void</span> *ins, *in, *<a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>;</div>
<div class="line"><span class="lineno">  168</span>    uint32_t <a class="code hl_variable" href="../../dd/d8f/udebug-proto_8h.html#abaabdc509cdaba7df9f56c6c76f3ae19">id</a>;</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>    <a class="code hl_function" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a>(&amp;req, 0);</div>
<div class="line"><span class="lineno">  171</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;name&quot;</span>, <a class="code hl_variable" href="#a1b583a27c491ee79cde9851e9bd02e6e">jail_name</a>);</div>
<div class="line"><span class="lineno">  172</span>    ins = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;req, <span class="stringliteral">&quot;instances&quot;</span>);</div>
<div class="line"><span class="lineno">  173</span>    in = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a">blobmsg_open_table</a>(&amp;req, <span class="stringliteral">&quot;ubus&quot;</span>);</div>
<div class="line"><span class="lineno">  174</span>    <a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a> = <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214">blobmsg_open_array</a>(&amp;req, <span class="stringliteral">&quot;command&quot;</span>);</div>
<div class="line"><span class="lineno">  175</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;&quot;</span>, <a class="code hl_variable" href="#a9b9657bb8e98d98eaa6c7185ed5f44f9">ubusd_path</a>);</div>
<div class="line"><span class="lineno">  176</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;-s&quot;</span>);</div>
<div class="line"><span class="lineno">  177</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;&quot;</span>, <a class="code hl_variable" href="#a2751d130bdb6095087bf22c3d3f4a159">ubus_sock_path</a>);</div>
<div class="line"><span class="lineno">  178</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32">blobmsg_close_array</a>(&amp;req, <a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>);</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#ad089f40feda5fe2747f51364b17c5048">ubus_pw</a>) {</div>
<div class="line"><span class="lineno">  181</span>        <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;user&quot;</span>, <span class="stringliteral">&quot;ubus&quot;</span>);</div>
<div class="line"><span class="lineno">  182</span>        <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6">blobmsg_add_string</a>(&amp;req, <span class="stringliteral">&quot;group&quot;</span>, <span class="stringliteral">&quot;ubus&quot;</span>);</div>
<div class="line"><span class="lineno">  183</span>    }</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a>(&amp;req, in);</div>
<div class="line"><span class="lineno">  186</span>    <a class="code hl_function" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14">blobmsg_close_table</a>(&amp;req, ins);</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54">ubus_lookup_id</a>(<a class="code hl_variable" href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a>, <span class="stringliteral">&quot;container&quot;</span>, &amp;<span class="keywordtype">id</span>))</div>
<div class="line"><span class="lineno">  189</span>        <a class="code hl_function" href="../../db/d55/libubus_8h.html#ad79f9793c3835ea8691fe377025c7de7">ubus_invoke</a>(<a class="code hl_variable" href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a>, <span class="keywordtype">id</span>, <span class="stringliteral">&quot;add&quot;</span>, req.head, NULL, NULL, 3000);</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>    <a class="code hl_function" href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59">blob_buf_free</a>(&amp;req);</div>
<div class="line"><span class="lineno">  192</span>}</div>
<div class="ttc" id="anetifd_8c_html_a9b9657bb8e98d98eaa6c7185ed5f44f9"><div class="ttname"><a href="#a9b9657bb8e98d98eaa6c7185ed5f44f9">ubusd_path</a></div><div class="ttdeci">static const char ubusd_path[]</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00046">netifd.c:46</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/da0/blob_8c_source.html#l00104">blob_buf_free()</a>, <a class="el" href="../../d4/da0/blob_8c_source.html#l00091">blob_buf_init()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00235">blobmsg_add_string()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00262">blobmsg_close_array()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00268">blobmsg_close_table()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00250">blobmsg_open_array()</a>, <a class="el" href="../../dd/dad/blobmsg_8h_source.html#l00256">blobmsg_open_table()</a>, <a class="el" href="../../d4/d4c/json__script_8c_source.html#l00207">cmd</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00065">blob_buf::head</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00058">host_ubus_ctx</a>, <a class="el" href="../../dd/d8f/udebug-proto_8h_source.html#l00002">id</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">jail_name</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00354">ubus_invoke()</a>, <a class="el" href="../../d4/db9/libubus_8c_source.html#l00192">ubus_lookup_id()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00055">ubus_pw</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">ubus_sock_path</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00046">ubusd_path</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d3d/netifd_8c_a100bb2a7c1f45b834997e21760b2c375_cgraph.png" border="0" usemap="#adb/d3d/netifd_8c_a100bb2a7c1f45b834997e21760b2c375_cgraph" alt=""/></div>
<map name="adb/d3d/netifd_8c_a100bb2a7c1f45b834997e21760b2c375_cgraph" id="adb/d3d/netifd_8c_a100bb2a7c1f45b834997e21760b2c375_cgraph">
<area shape="rect" title=" " alt="" coords="5,295,126,328"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59" title=" " alt="" coords="208,65,354,99"/>
<area shape="poly" title=" " alt="" coords="68,294,80,255,100,205,131,153,150,129,172,108,192,96,195,100,175,112,154,132,135,156,105,207,85,257,73,295"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1051,541,1191,575"/>
<area shape="poly" title=" " alt="" coords="84,327,123,363,148,381,175,396,233,418,286,434,384,452,473,456,558,452,643,446,735,445,836,453,953,478,1020,503,1078,531,1076,536,1018,508,952,483,836,459,735,450,644,452,558,457,473,461,384,457,285,439,231,423,173,401,145,386,119,367,80,331"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="177,123,385,156"/>
<area shape="poly" title=" " alt="" coords="72,293,109,230,138,195,172,165,179,161,182,166,175,170,142,199,114,233,77,296"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32" title=" " alt="" coords="174,295,388,328"/>
<area shape="poly" title=" " alt="" coords="126,309,158,309,158,314,126,314"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="175,352,387,386"/>
<area shape="poly" title=" " alt="" coords="127,325,174,338,200,345,198,350,173,343,125,330"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214" title=" " alt="" coords="174,180,388,214"/>
<area shape="poly" title=" " alt="" coords="82,292,121,257,172,223,184,217,186,222,175,227,124,261,85,296"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="175,237,387,271"/>
<area shape="poly" title=" " alt="" coords="125,293,173,280,198,273,200,278,174,285,127,298"/>
<area shape="rect" href="../../db/d55/libubus_8h.html#ad79f9793c3835ea8691fe377025c7de7" title=" " alt="" coords="213,521,349,555"/>
<area shape="poly" title=" " alt="" coords="77,328,115,395,143,435,176,472,202,494,230,511,227,516,199,498,172,476,139,439,110,398,73,330"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54" title=" " alt="" coords="469,672,632,706"/>
<area shape="poly" title=" " alt="" coords="72,328,81,376,99,439,130,507,151,538,175,566,206,590,239,611,312,643,386,665,453,678,452,683,384,670,310,648,237,616,203,594,172,569,146,541,125,510,94,441,75,377,66,329"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1327,476,1432,510"/>
<area shape="poly" title=" " alt="" coords="1190,538,1311,507,1312,512,1191,543"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1289,541,1469,575"/>
<area shape="poly" title=" " alt="" coords="1191,556,1273,556,1273,561,1191,561"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1721,491,1863,524"/>
<area shape="poly" title=" " alt="" coords="1433,498,1517,506,1595,508,1673,506,1705,506,1705,511,1673,511,1595,513,1517,511,1432,503"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1517,463,1673,496"/>
<area shape="poly" title=" " alt="" coords="1432,487,1501,483,1502,488,1432,492"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="1721,408,1863,442"/>
<area shape="poly" title=" " alt="" coords="1427,473,1517,448,1614,433,1705,425,1705,431,1615,438,1518,453,1428,478"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="1527,303,1663,336"/>
<area shape="poly" title=" " alt="" coords="1400,474,1559,344,1563,348,1403,478"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="1545,572,1645,606"/>
<area shape="poly" title=" " alt="" coords="1427,508,1470,526,1519,550,1544,562,1541,567,1516,555,1468,531,1424,513"/>
<area shape="poly" title=" " alt="" coords="1673,488,1706,493,1705,498,1673,493"/>
<area shape="poly" title=" " alt="" coords="1658,459,1713,444,1715,449,1659,465"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="1721,248,1863,282"/>
<area shape="poly" title=" " alt="" coords="1658,299,1713,284,1715,289,1659,305"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="453,59,647,92"/>
<area shape="poly" title=" " alt="" coords="354,119,461,94,462,99,356,125"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aed178aa087a351c74f7f6cd34e56ba0c" title=" " alt="" coords="758,5,907,39"/>
<area shape="poly" title=" " alt="" coords="643,55,743,36,744,42,644,61"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ac239a83ed3c7f835e2b49f785953c934" title=" " alt="" coords="1036,33,1206,67"/>
<area shape="poly" title=" " alt="" coords="907,27,1021,38,1020,43,907,32"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="473,307,627,340"/>
<area shape="poly" title=" " alt="" coords="388,314,458,317,457,322,388,319"/>
<area shape="poly" title=" " alt="" coords="628,327,1705,415,1705,420,627,332"/>
<area shape="poly" title=" " alt="" coords="627,317,1705,266,1705,272,628,323"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="783,384,882,418"/>
<area shape="poly" title=" " alt="" coords="615,338,769,381,768,386,614,344"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a189526712fcc12adfb6ea6a5c8eede54" title=" " alt="" coords="743,224,922,258"/>
<area shape="poly" title=" " alt="" coords="610,304,757,260,759,265,611,309"/>
<area shape="poly" title=" " alt="" coords="384,349,457,336,458,342,385,354"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#aaac450f6a679be8a392d17c3ed8700b4" title=" " alt="" coords="436,169,664,203"/>
<area shape="poly" title=" " alt="" coords="388,190,420,189,421,194,388,195"/>
<area shape="poly" title=" " alt="" coords="665,184,1120,184,1381,184,1474,189,1566,203,1651,222,1722,241,1720,246,1650,227,1565,209,1473,194,1380,189,1120,189,665,189"/>
<area shape="poly" title=" " alt="" coords="576,167,663,103,685,78,695,67,711,56,742,41,745,46,714,60,699,71,689,82,666,107,579,171"/>
<area shape="poly" title=" " alt="" coords="576,167,636,132,711,100,791,79,873,65,1020,50,1020,56,873,70,792,84,713,105,639,136,579,171"/>
<area shape="poly" title=" " alt="" coords="641,201,729,218,727,223,640,206"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="761,115,904,148"/>
<area shape="poly" title=" " alt="" coords="640,166,745,146,746,151,641,171"/>
<area shape="poly" title=" " alt="" coords="350,234,465,205,466,210,351,239"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a572cdb5570d677242d1bc90d2d592852" title=" " alt="" coords="468,589,632,623"/>
<area shape="poly" title=" " alt="" coords="350,553,467,582,465,588,349,558"/>
<area shape="rect" href="../../d1/d5c/rcS_8c.html#a49473a90e2fe9252f856e10246252554" title=" " alt="" coords="813,493,852,527"/>
<area shape="poly" title=" " alt="" coords="595,586,711,544,798,517,799,522,713,549,597,591"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="712,712,953,746"/>
<area shape="poly" title=" " alt="" coords="592,621,779,703,776,708,590,626"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a50302440f98786d5bcc4770a627bf8dc" title=" " alt="" coords="719,603,946,636"/>
<area shape="poly" title=" " alt="" coords="633,607,703,611,703,616,633,613"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a6a067ed16631bbe3826be535287879e4" title=" " alt="" coords="1041,696,1201,730"/>
<area shape="poly" title=" " alt="" coords="953,719,1026,715,1026,721,953,725"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aca15427cb882afec28ce476b9e8e8b34" title=" " alt="" coords="1001,754,1241,811"/>
<area shape="poly" title=" " alt="" coords="928,744,986,754,985,760,927,749"/>
<area shape="poly" title=" " alt="" coords="915,599,1036,573,1037,579,916,605"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="1039,623,1203,656"/>
<area shape="poly" title=" " alt="" coords="947,625,1023,630,1023,635,947,630"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1329,623,1430,656"/>
<area shape="poly" title=" " alt="" coords="1203,637,1313,637,1313,642,1203,642"/>
<area shape="poly" title=" " alt="" coords="596,669,629,653,663,633,676,621,685,609,695,598,711,588,752,572,794,561,881,547,964,544,1036,546,1036,552,964,549,881,553,795,566,753,577,714,593,699,602,689,613,680,625,666,638,632,658,598,674"/>
<area shape="poly" title=" " alt="" coords="633,698,697,707,696,712,632,703"/>
<area shape="poly" title=" " alt="" coords="632,679,1023,645,1023,651,633,684"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#ad9a92a327d8621e1eee7014bac19bc2b" title=" " alt="" coords="735,769,930,803"/>
<area shape="poly" title=" " alt="" coords="588,704,646,730,713,756,735,762,734,767,711,761,644,735,585,709"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="733,827,932,860"/>
<area shape="poly" title=" " alt="" coords="570,704,630,758,670,788,714,813,726,818,723,823,711,818,667,792,627,762,566,708"/>
</map>
</div>

</div>
</div>
<a id="a54efb4f9d0b67d049b750dfe54212cce" name="a54efb4f9d0b67d049b750dfe54212cce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54efb4f9d0b67d049b750dfe54212cce">&#9670;&#160;</a></span>watch_ubus_service()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void watch_ubus_service </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00413">413</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  414</span>{</div>
<div class="line"><span class="lineno">  415</span>    uint32_t <a class="code hl_variable" href="../../dd/d8f/udebug-proto_8h.html#abaabdc509cdaba7df9f56c6c76f3ae19">id</a>;</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>    <a class="code hl_variable" href="#a7da28ca356f84736c6e763fdbda21f73">config_watch_subscribe</a>.<a class="code hl_variable" href="../../db/d55/libubus_8h.html#ae6572c5fc98b471ac41be53223f8d3b3">cb</a> = <a class="code hl_function" href="#a8771ddaea81ee77859c78c10f3eb0dc0">config_watch_notify_cb</a>;</div>
<div class="line"><span class="lineno">  418</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/d0c/libubus-sub_8c.html#ae1a94ef8a134c406bd155adbf1013df9">ubus_register_subscriber</a>(<a class="code hl_variable" href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a>, &amp;<a class="code hl_variable" href="#a7da28ca356f84736c6e763fdbda21f73">config_watch_subscribe</a>)) {</div>
<div class="line"><span class="lineno">  419</span>        <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;failed to register ubus subscriber\n&quot;</span>);</div>
<div class="line"><span class="lineno">  420</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  421</span>    }</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54">ubus_lookup_id</a>(<a class="code hl_variable" href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a>, <span class="stringliteral">&quot;service&quot;</span>, &amp;<span class="keywordtype">id</span>))</div>
<div class="line"><span class="lineno">  424</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d7/d0c/libubus-sub_8c.html#a1406fcd78c0f0c52dbb0fb6ae0b16f89">ubus_subscribe</a>(<a class="code hl_variable" href="#a3c3a54c3d31af7db783f8bd6e25fb603">host_ubus_ctx</a>, &amp;<a class="code hl_variable" href="#a7da28ca356f84736c6e763fdbda21f73">config_watch_subscribe</a>, <span class="keywordtype">id</span>))</div>
<div class="line"><span class="lineno">  427</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span>    <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;failed to subscribe %d\n&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  430</span>}</div>
<div class="ttc" id="alibubus-sub_8c_html_a1406fcd78c0f0c52dbb0fb6ae0b16f89"><div class="ttname"><a href="../../d7/d0c/libubus-sub_8c.html#a1406fcd78c0f0c52dbb0fb6ae0b16f89">ubus_subscribe</a></div><div class="ttdeci">int ubus_subscribe(struct ubus_context *ctx, struct ubus_subscriber *obj, uint32_t id)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d0c/libubus-sub_8c_source.html#l00118">libubus-sub.c:118</a></div></div>
<div class="ttc" id="alibubus-sub_8c_html_ae1a94ef8a134c406bd155adbf1013df9"><div class="ttname"><a href="../../d7/d0c/libubus-sub_8c.html#ae1a94ef8a134c406bd155adbf1013df9">ubus_register_subscriber</a></div><div class="ttdeci">int ubus_register_subscriber(struct ubus_context *ctx, struct ubus_subscriber *s)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d0c/libubus-sub_8c_source.html#l00077">libubus-sub.c:77</a></div></div>
<div class="ttc" id="alibubus_8h_html_ae6572c5fc98b471ac41be53223f8d3b3"><div class="ttname"><a href="../../db/d55/libubus_8h.html#ae6572c5fc98b471ac41be53223f8d3b3">ubus_subscriber::cb</a></div><div class="ttdeci">ubus_handler_t cb</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00146">libubus.h:146</a></div></div>
<div class="ttc" id="anetifd_8c_html_a7da28ca356f84736c6e763fdbda21f73"><div class="ttname"><a href="#a7da28ca356f84736c6e763fdbda21f73">config_watch_subscribe</a></div><div class="ttdeci">static struct ubus_subscriber config_watch_subscribe</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00061">netifd.c:61</a></div></div>
<div class="ttc" id="anetifd_8c_html_a8771ddaea81ee77859c78c10f3eb0dc0"><div class="ttname"><a href="#a8771ddaea81ee77859c78c10f3eb0dc0">config_watch_notify_cb</a></div><div class="ttdeci">static int config_watch_notify_cb(struct ubus_context *ctx, struct ubus_object *obj, struct ubus_request_data *req, const char *method, struct blob_attr *msg)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00390">netifd.c:390</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d55/libubus_8h_source.html#l00146">ubus_subscriber::cb</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00390">config_watch_notify_cb()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00061">config_watch_subscribe</a>, <a class="el" href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">ERROR</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00058">host_ubus_ctx</a>, <a class="el" href="../../dd/d8f/udebug-proto_8h_source.html#l00002">id</a>, <a class="el" href="../../d4/db9/libubus_8c_source.html#l00192">ubus_lookup_id()</a>, <a class="el" href="../../d7/d0c/libubus-sub_8c_source.html#l00077">ubus_register_subscriber()</a>, and <a class="el" href="../../d7/d0c/libubus-sub_8c_source.html#l00118">ubus_subscribe()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d3d/netifd_8c_a54efb4f9d0b67d049b750dfe54212cce_cgraph.png" border="0" usemap="#adb/d3d/netifd_8c_a54efb4f9d0b67d049b750dfe54212cce_cgraph" alt=""/></div>
<map name="adb/d3d/netifd_8c_a54efb4f9d0b67d049b750dfe54212cce_cgraph" id="adb/d3d/netifd_8c_a54efb4f9d0b67d049b750dfe54212cce_cgraph">
<area shape="rect" title=" " alt="" coords="5,589,212,623"/>
<area shape="rect" href="../../db/d3d/netifd_8c.html#a8771ddaea81ee77859c78c10f3eb0dc0" title=" " alt="" coords="562,339,796,372"/>
<area shape="poly" title=" " alt="" coords="146,586,259,534,622,376,624,381,261,539,148,591"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a8567c5497fc066b17da409d9b0512c54" title=" " alt="" coords="1151,549,1314,583"/>
<area shape="poly" title=" " alt="" coords="212,600,1135,567,1135,572,212,605"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#ae1a94ef8a134c406bd155adbf1013df9" title=" " alt="" coords="260,665,514,699"/>
<area shape="poly" title=" " alt="" coords="174,621,308,658,307,663,172,626"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#a1406fcd78c0f0c52dbb0fb6ae0b16f89" title=" " alt="" coords="865,789,1032,823"/>
<area shape="poly" title=" " alt="" coords="133,621,200,671,303,737,363,771,427,801,494,827,563,846,627,857,679,860,730,855,796,846,841,837,884,826,885,831,842,843,797,851,731,861,679,865,627,863,561,851,493,832,425,806,361,775,300,742,197,676,130,626"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1989,328,2100,362"/>
<area shape="poly" title=" " alt="" coords="703,336,786,282,845,248,912,214,987,182,1066,156,1148,138,1231,132,1533,132,1653,130,1748,134,1792,142,1838,156,1887,178,1942,209,1971,232,1995,259,2030,313,2026,316,1991,262,1967,236,1939,214,1884,183,1836,161,1791,147,1747,139,1653,135,1534,137,1231,137,1149,143,1068,161,989,187,915,219,847,253,789,287,706,340"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="899,368,998,402"/>
<area shape="poly" title=" " alt="" coords="797,366,884,375,883,381,796,371"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603" title=" " alt="" coords="847,425,1050,459"/>
<area shape="poly" title=" " alt="" coords="727,370,845,412,866,418,865,423,844,417,725,375"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed" title=" " alt="" coords="867,311,1030,344"/>
<area shape="poly" title=" " alt="" coords="796,341,852,335,852,340,797,346"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07" title=" " alt="" coords="850,63,1047,96"/>
<area shape="poly" title=" " alt="" coords="685,337,706,293,740,233,786,169,813,139,843,113,863,101,865,106,846,118,817,143,790,172,745,235,711,295,690,339"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#ab788ffb2ae75d047fa39be6e79571d20" title=" " alt="" coords="1457,331,1608,364"/>
<area shape="poly" title=" " alt="" coords="1050,423,1440,360,1441,365,1051,428"/>
<area shape="poly" title=" " alt="" coords="1608,344,1973,343,1973,348,1608,350"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a673de80167cf18faad1b4a21670d0cf3" title=" " alt="" coords="1730,247,1911,280"/>
<area shape="poly" title=" " alt="" coords="1607,328,1652,317,1756,283,1758,289,1653,322,1609,334"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a7613e130753e766f5d381c06b1f7b86f" title=" " alt="" coords="1725,383,1916,416"/>
<area shape="poly" title=" " alt="" coords="1609,358,1711,377,1710,382,1608,364"/>
<area shape="poly" title=" " alt="" coords="974,308,1030,276,1065,261,1100,249,1178,237,1292,229,1571,224,1825,227,1941,232,1969,248,1992,269,2028,313,2023,316,1989,272,1966,252,1940,237,1825,232,1571,229,1292,234,1178,242,1101,254,1066,266,1033,281,977,313"/>
<area shape="poly" title=" " alt="" coords="1001,308,1100,282,1267,261,1435,251,1589,251,1714,254,1714,260,1589,256,1436,257,1268,266,1101,287,1002,313"/>
<area shape="poly" title=" " alt="" coords="1016,342,1053,353,1077,361,1101,368,1266,389,1432,399,1585,402,1710,401,1710,406,1585,408,1432,404,1266,394,1100,373,1076,366,1052,358,1014,348"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac79cacbc6a47f754832dc10bafa3b761" title=" " alt="" coords="1489,273,1576,307"/>
<area shape="poly" title=" " alt="" coords="1030,315,1100,309,1306,296,1473,289,1473,295,1306,302,1101,314,1030,321"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5a5283071ac5677652515d9a8460e655" title=" " alt="" coords="1111,324,1354,358"/>
<area shape="poly" title=" " alt="" coords="1030,329,1096,332,1095,337,1030,334"/>
<area shape="poly" title=" " alt="" coords="1355,341,1441,343,1441,348,1354,346"/>
<area shape="poly" title=" " alt="" coords="1335,321,1473,297,1474,303,1336,326"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="1168,5,1297,39"/>
<area shape="poly" title=" " alt="" coords="1035,59,1152,36,1153,41,1036,65"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a76f33118cba0a358482528fad8c0f4cd" title=" " alt="" coords="1193,63,1272,96"/>
<area shape="poly" title=" " alt="" coords="1047,77,1178,77,1178,82,1047,82"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1463,721,1602,755"/>
<area shape="poly" title=" " alt="" coords="1315,569,1342,577,1366,592,1379,606,1386,621,1391,652,1395,681,1402,695,1414,708,1430,719,1449,727,1446,732,1427,724,1410,712,1397,698,1390,683,1385,652,1381,623,1374,609,1362,596,1340,582,1314,574"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="1450,549,1614,583"/>
<area shape="poly" title=" " alt="" coords="1314,564,1434,564,1434,569,1314,569"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="1412,607,1652,640"/>
<area shape="poly" title=" " alt="" coords="1315,579,1426,601,1425,606,1314,584"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#ad9a92a327d8621e1eee7014bac19bc2b" title=" " alt="" coords="1435,492,1629,526"/>
<area shape="poly" title=" " alt="" coords="1314,548,1425,526,1426,532,1315,553"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="1433,664,1631,698"/>
<area shape="poly" title=" " alt="" coords="1315,572,1341,580,1365,592,1382,607,1390,622,1399,637,1414,651,1421,655,1418,660,1410,655,1394,640,1386,625,1378,610,1363,596,1339,585,1314,577"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1768,803,1873,836"/>
<area shape="poly" title=" " alt="" coords="1585,753,1701,789,1753,802,1752,807,1700,794,1584,758"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1730,745,1911,779"/>
<area shape="poly" title=" " alt="" coords="1603,741,1715,751,1714,756,1602,747"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1770,492,1871,526"/>
<area shape="poly" title=" " alt="" coords="1614,547,1754,519,1755,524,1616,552"/>
<area shape="poly" title=" " alt="" coords="1871,498,1906,488,1939,471,1966,449,1989,424,2024,374,2028,377,1993,427,1969,453,1942,475,1908,492,1872,503"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a6a067ed16631bbe3826be535287879e4" title=" " alt="" coords="1741,549,1900,583"/>
<area shape="poly" title=" " alt="" coords="1620,603,1725,582,1726,588,1621,609"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aca15427cb882afec28ce476b9e8e8b34" title=" " alt="" coords="1700,665,1941,721"/>
<area shape="poly" title=" " alt="" coords="1609,638,1653,649,1689,658,1688,663,1652,654,1608,644"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a5497c370318a5cc03dd662523915ea92" title=" " alt="" coords="1741,607,1900,640"/>
<area shape="poly" title=" " alt="" coords="1653,621,1725,621,1725,626,1653,626"/>
<area shape="rect" href="../../da/d23/list_8h.html#a875b53c95596d9e8df15ac54f6d24ae6" title=" " alt="" coords="1998,767,2091,800"/>
<area shape="poly" title=" " alt="" coords="1913,719,1942,730,1999,757,1996,762,1940,735,1911,724"/>
<area shape="poly" title=" " alt="" coords="402,698,427,731,464,773,510,814,563,846,617,867,665,879,708,885,749,885,837,877,947,872,1534,872,1649,875,1740,880,1784,879,1829,874,1880,863,1940,846,1977,829,2009,808,2012,813,1979,834,1942,851,1882,869,1830,879,1784,884,1740,885,1649,881,1533,877,947,877,837,883,749,890,707,890,664,885,616,872,561,851,507,819,460,777,423,735,397,701"/>
<area shape="rect" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4" title=" " alt="" coords="595,745,763,779"/>
<area shape="poly" title=" " alt="" coords="452,697,601,738,599,743,451,702"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a91976fc505121a3ddd2c4456e730401c" title=" " alt="" coords="1144,664,1321,698"/>
<area shape="poly" title=" " alt="" coords="514,679,1129,678,1129,684,514,685"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#a22cfc3ee94ff15a20d9e7629603cd484" title=" " alt="" coords="569,438,790,495"/>
<area shape="poly" title=" " alt="" coords="410,663,626,502,629,506,413,667"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#a1181bbaadf8f66ea4f2cd4bab3285695" title=" " alt="" coords="564,803,794,836"/>
<area shape="poly" title=" " alt="" coords="412,697,478,743,519,768,563,789,579,795,577,800,561,794,517,772,475,748,409,702"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a13ccf4210afc63ffc04d88e8a5c2a92d" title=" " alt="" coords="1164,607,1301,640"/>
<area shape="poly" title=" " alt="" coords="514,664,562,660,886,637,1148,624,1148,629,887,642,562,665,515,669"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#ad13afe4ee46089b4c6a2cc46b314503e" title=" " alt="" coords="844,694,1053,751"/>
<area shape="poly" title=" " alt="" coords="515,689,829,711,829,716,514,694"/>
<area shape="poly" title=" " alt="" coords="1321,695,1448,719,1447,725,1320,700"/>
<area shape="poly" title=" " alt="" coords="1320,668,1363,651,1378,637,1386,622,1394,607,1410,592,1434,580,1437,585,1414,596,1399,610,1390,625,1382,640,1365,655,1322,673"/>
<area shape="poly" title=" " alt="" coords="1320,661,1425,641,1426,646,1321,667"/>
<area shape="poly" title=" " alt="" coords="1321,678,1418,678,1418,684,1321,684"/>
<area shape="poly" title=" " alt="" coords="790,468,844,469,1053,469,1249,470,1502,472,1631,470,1752,462,1857,448,1902,438,1940,426,1982,402,2017,371,2020,375,1985,406,1942,431,1903,444,1858,453,1752,467,1631,475,1502,478,1249,475,1053,474,844,474,790,473"/>
<area shape="poly" title=" " alt="" coords="766,435,844,410,884,399,885,404,845,415,767,440"/>
<area shape="poly" title=" " alt="" coords="790,454,831,450,831,455,790,459"/>
<area shape="poly" title=" " alt="" coords="720,435,843,353,857,347,859,352,846,358,723,439"/>
<area shape="poly" title=" " alt="" coords="692,494,712,549,744,620,789,695,816,729,846,760,876,780,873,785,843,764,812,733,785,698,740,623,707,551,687,496"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#a3d6a3c1e8e0504384f6da855f8f61069" title=" " alt="" coords="1101,721,1364,755"/>
<area shape="poly" title=" " alt="" coords="1021,786,1143,757,1145,762,1023,791"/>
<area shape="poly" title=" " alt="" coords="1364,736,1447,736,1447,741,1364,741"/>
<area shape="poly" title=" " alt="" coords="1341,718,1363,708,1378,694,1386,680,1394,664,1410,649,1418,645,1421,649,1414,654,1399,667,1390,682,1382,698,1365,712,1344,723"/>
<area shape="poly" title=" " alt="" coords="1324,718,1425,699,1426,704,1325,723"/>
<area shape="poly" title=" " alt="" coords="795,811,850,808,850,814,795,816"/>
<area shape="poly" title=" " alt="" coords="1302,627,1335,635,1365,649,1382,664,1390,679,1399,694,1413,708,1449,724,1447,728,1411,712,1394,698,1386,682,1378,667,1363,654,1333,640,1301,632"/>
<area shape="poly" title=" " alt="" coords="1301,608,1434,582,1435,587,1302,613"/>
<area shape="poly" title=" " alt="" coords="1301,621,1396,621,1396,626,1301,626"/>
<area shape="poly" title=" " alt="" coords="1302,634,1426,658,1425,663,1301,639"/>
<area shape="poly" title=" " alt="" coords="1031,748,1101,765,1174,773,1232,775,1364,765,1447,753,1448,758,1364,770,1232,780,1174,779,1100,770,1030,754"/>
<area shape="poly" title=" " alt="" coords="1053,704,1128,693,1129,698,1054,710"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a7da28ca356f84736c6e763fdbda21f73" name="a7da28ca356f84736c6e763fdbda21f73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7da28ca356f84736c6e763fdbda21f73">&#9670;&#160;</a></span>config_watch_subscribe</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/d55/libubus_8h.html#d4/d40/structubus__subscriber">ubus_subscriber</a> config_watch_subscribe</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00061">61</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00413">watch_ubus_service()</a>.</p>

</div>
</div>
<a id="a96c9bf4047dfd7bb93def7047fe800a7" name="a96c9bf4047dfd7bb93def7047fe800a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96c9bf4047dfd7bb93def7047fe800a7">&#9670;&#160;</a></span>fd_inotify_read</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d56/uloop_8h.html#db/d9e/structuloop__fd">uloop_fd</a> fd_inotify_read</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00054">54</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00194">run_netifd()</a>.</p>

</div>
</div>
<a id="a3c3a54c3d31af7db783f8bd6e25fb603" name="a3c3a54c3d31af7db783f8bd6e25fb603"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c3a54c3d31af7db783f8bd6e25fb603">&#9670;&#160;</a></span>host_ubus_ctx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a>* host_ubus_ctx = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00058">58</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00511">jail_delete_instance()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00194">run_netifd()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00164">run_ubusd()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00413">watch_ubus_service()</a>.</p>

</div>
</div>
<a id="aea05153e1f6883168a7c1a20f881a048" name="aea05153e1f6883168a7c1a20f881a048"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea05153e1f6883168a7c1a20f881a048">&#9670;&#160;</a></span>inotify_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* inotify_buffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00053">53</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00323">inotify_read_handler()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>.</p>

</div>
</div>
<a id="a1b583a27c491ee79cde9851e9bd02e6e" name="a1b583a27c491ee79cde9851e9bd02e6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b583a27c491ee79cde9851e9bd02e6e">&#9670;&#160;</a></span>jail_name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* jail_name</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">51</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00064">gen_jail_uci_network()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00511">jail_delete_instance()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>, <a class="el" href="../../da/dc0/uxc_8c_source.html#l00370">list_cb()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00194">run_netifd()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00164">run_ubusd()</a>, and <a class="el" href="../../da/dc0/uxc_8c_source.html#l00616">uxc_state()</a>.</p>

</div>
</div>
<a id="adfc99a198e85e644b889dfebbd711363" name="adfc99a198e85e644b889dfebbd711363"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfc99a198e85e644b889dfebbd711363">&#9670;&#160;</a></span>jail_network_reload_timeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a> jail_network_reload_timeout = { .cb = <a class="el" href="#acc1d8e0a83e71bbd02b3daa8c507a9fb">jail_network_reload</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00388">388</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  388</span>{ .cb = <a class="code hl_function" href="#acc1d8e0a83e71bbd02b3daa8c507a9fb">jail_network_reload</a>, };</div>
<div class="ttc" id="anetifd_8c_html_acc1d8e0a83e71bbd02b3daa8c507a9fb"><div class="ttname"><a href="#acc1d8e0a83e71bbd02b3daa8c507a9fb">jail_network_reload</a></div><div class="ttdeci">static void jail_network_reload(struct uloop_timeout *t)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00371">netifd.c:371</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00390">config_watch_notify_cb()</a>.</p>

</div>
</div>
<a id="ab7ecd9598eed63587841ef3d2e84557f" name="ab7ecd9598eed63587841ef3d2e84557f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7ecd9598eed63587841ef3d2e84557f">&#9670;&#160;</a></span>jail_ubus_ctx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a>* jail_ubus_ctx = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00059">59</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00371">jail_network_reload()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00526">jail_network_stop()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00194">run_netifd()</a>.</p>

</div>
</div>
<a id="aae660c2c1d418d310f64183d43ec58d5" name="aae660c2c1d418d310f64183d43ec58d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae660c2c1d418d310f64183d43ec58d5">&#9670;&#160;</a></span>netifd_path</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char netifd_path[] = &quot;/sbin/netifd&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00047">47</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00194">run_netifd()</a>.</p>

</div>
</div>
<a id="a90439d321702f2eb777ebcd03794038b" name="a90439d321702f2eb777ebcd03794038b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90439d321702f2eb777ebcd03794038b">&#9670;&#160;</a></span>netifd_start_timeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a> netifd_start_timeout = { .cb = <a class="el" href="#aac2f976b0c50060bced04426971313a3">run_netifd</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00321">321</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  321</span>{ .cb = <a class="code hl_function" href="#aac2f976b0c50060bced04426971313a3">run_netifd</a>, };</div>
<div class="ttc" id="anetifd_8c_html_aac2f976b0c50060bced04426971313a3"><div class="ttname"><a href="#aac2f976b0c50060bced04426971313a3">run_netifd</a></div><div class="ttdeci">static void run_netifd(struct uloop_timeout *t)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00194">netifd.c:194</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00323">inotify_read_handler()</a>.</p>

</div>
</div>
<a id="ad44a100157e230119d20d1b28ca76625" name="ad44a100157e230119d20d1b28ca76625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad44a100157e230119d20d1b28ca76625">&#9670;&#160;</a></span>ns_pid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pid_t ns_pid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00056">56</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00194">run_netifd()</a>.</p>

</div>
</div>
<a id="a6d5fef8a70f518fe455801b5712888b4" name="a6d5fef8a70f518fe455801b5712888b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d5fef8a70f518fe455801b5712888b4">&#9670;&#160;</a></span>service_watch_policy</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/dad/blobmsg_8h.html#d3/d4d/structblobmsg__policy">blobmsg_policy</a> service_watch_policy = { &quot;config&quot;, <a class="el" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00387">387</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  387</span>{ <span class="stringliteral">&quot;config&quot;</span>, <a class="code hl_enumvalue" href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a> };</div>
<div class="ttc" id="ablobmsg_8h_html_a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53"><div class="ttname"><a href="../../dd/dad/blobmsg_8h.html#a9e3efca3093410d90ef04154aefde2c9a5947f0c748890838391aca89bc66ec53">BLOBMSG_TYPE_STRING</a></div><div class="ttdeci">@ BLOBMSG_TYPE_STRING</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dad/blobmsg_8h_source.html#l00029">blobmsg.h:29</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00390">config_watch_notify_cb()</a>.</p>

</div>
</div>
<a id="ad089f40feda5fe2747f51364b17c5048" name="ad089f40feda5fe2747f51364b17c5048"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad089f40feda5fe2747f51364b17c5048">&#9670;&#160;</a></span>ubus_pw</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct passwd* ubus_pw</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00055">55</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00164">run_ubusd()</a>.</p>

</div>
</div>
<a id="af2c6d0302ae2ea1147a41c9d05d81e3a" name="af2c6d0302ae2ea1147a41c9d05d81e3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2c6d0302ae2ea1147a41c9d05d81e3a">&#9670;&#160;</a></span>ubus_sock_dir</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char * ubus_sock_dir</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">51</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00526">jail_network_stop()</a>, <a class="el" href="../../dd/dd3/ubusd__main_8c_source.html#l00250">mkdir_sockdir()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00194">run_netifd()</a>.</p>

</div>
</div>
<a id="a082e69bee2841ec201d24fe06894f5e6" name="a082e69bee2841ec201d24fe06894f5e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a082e69bee2841ec201d24fe06894f5e6">&#9670;&#160;</a></span>ubus_sock_name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char ubus_sock_name[] = &quot;ubus.sock&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00049">49</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00323">inotify_read_handler()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>.</p>

</div>
</div>
<a id="a2751d130bdb6095087bf22c3d3f4a159" name="a2751d130bdb6095087bf22c3d3f4a159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2751d130bdb6095087bf22c3d3f4a159">&#9670;&#160;</a></span>ubus_sock_path</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char * ubus_sock_path</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">51</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00526">jail_network_stop()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00194">run_netifd()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00164">run_ubusd()</a>.</p>

</div>
</div>
<a id="aaaca871d36faffe71d9de4359c9857d6" name="aaaca871d36faffe71d9de4359c9857d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaca871d36faffe71d9de4359c9857d6">&#9670;&#160;</a></span>ubus_start_timeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a> ubus_start_timeout = { .cb = <a class="el" href="#a100bb2a7c1f45b834997e21760b2c375">run_ubusd</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00432">432</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  432</span>{ .cb = <a class="code hl_function" href="#a100bb2a7c1f45b834997e21760b2c375">run_ubusd</a>, };</div>
<div class="ttc" id="anetifd_8c_html_a100bb2a7c1f45b834997e21760b2c375"><div class="ttname"><a href="#a100bb2a7c1f45b834997e21760b2c375">run_ubusd</a></div><div class="ttdeci">static void run_ubusd(struct uloop_timeout *t)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d3d/netifd_8c_source.html#l00164">netifd.c:164</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00434">jail_network_start()</a>.</p>

</div>
</div>
<a id="a9b9657bb8e98d98eaa6c7185ed5f44f9" name="a9b9657bb8e98d98eaa6c7185ed5f44f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b9657bb8e98d98eaa6c7185ed5f44f9">&#9670;&#160;</a></span>ubusd_path</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char ubusd_path[] = &quot;/sbin/ubusd&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00046">46</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00164">run_ubusd()</a>.</p>

</div>
</div>
<a id="a15b218e71f7aeebd4236246f489d9a39" name="a15b218e71f7aeebd4236246f489d9a39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15b218e71f7aeebd4236246f489d9a39">&#9670;&#160;</a></span>uci_config_network</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char * uci_config_network = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00051">51</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00064">gen_jail_uci_network()</a>, <a class="el" href="../../db/d3d/netifd_8c_source.html#l00526">jail_network_stop()</a>, and <a class="el" href="../../db/d3d/netifd_8c_source.html#l00194">run_netifd()</a>.</p>

</div>
</div>
<a id="a253c8471e02dffa613862acddd2346c1" name="a253c8471e02dffa613862acddd2346c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a253c8471e02dffa613862acddd2346c1">&#9670;&#160;</a></span>uci_net</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char uci_net[] = &quot;network&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d3d/netifd_8c_source.html#l00048">48</a> of file <a class="el" href="../../db/d3d/netifd_8c_source.html">netifd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d3d/netifd_8c_source.html#l00064">gen_jail_uci_network()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
