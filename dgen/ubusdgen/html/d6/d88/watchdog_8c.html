<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>zbus: /home/g41797/CLionProjects/github.com/g41797/zbus/src/libs/procd/watchdog.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">zbus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_87a455bccb09a92130c26a11a880c98a.html">libs</a></li><li class="navelem"><a class="el" href="../../dir_63350b749fcf74007a53c7c917c10773.html">procd</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">watchdog.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/watchdog.h&gt;</code><br />
<code>#include &lt;sys/ioctl.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dc/d56/uloop_8h_source.html">libubox/uloop.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="../../dc/dab/procd_8h_source.html">procd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/da3/watchdog_8h_source.html">watchdog.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for watchdog.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/ddc/watchdog_8c__incl.png" border="0" usemap="#a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2watchdog_8c" alt=""/></div>
<map name="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2watchdog_8c" id="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2watchdog_8c">
<area shape="rect" title=" " alt="" coords="383,5,669,85"/>
<area shape="rect" title=" " alt="" coords="5,133,186,167"/>
<area shape="poly" title=" " alt="" coords="383,83,179,132,178,126,382,78"/>
<area shape="rect" title=" " alt="" coords="210,133,325,167"/>
<area shape="poly" title=" " alt="" coords="428,88,323,129,321,124,426,83"/>
<area shape="rect" title=" " alt="" coords="993,541,1121,575"/>
<area shape="poly" title=" " alt="" coords="556,84,581,132,597,187,604,238,602,329,603,370,611,411,631,451,667,491,690,506,723,516,807,527,899,533,978,539,977,544,898,538,806,533,722,521,688,510,663,495,627,454,606,412,598,371,597,329,598,238,592,188,576,134,551,87"/>
<area shape="rect" title=" " alt="" coords="229,541,341,575"/>
<area shape="poly" title=" " alt="" coords="462,88,427,115,396,148,373,187,367,208,365,230,365,396,359,435,346,471,328,504,310,530,306,527,324,501,341,469,354,433,360,396,360,230,362,207,369,185,392,145,424,111,458,83"/>
<area shape="rect" title=" " alt="" coords="486,133,566,167"/>
<area shape="poly" title=" " alt="" coords="529,86,529,118,524,118,524,86"/>
<area shape="rect" title=" " alt="" coords="364,541,462,575"/>
<area shape="poly" title=" " alt="" coords="486,87,462,116,439,151,422,189,415,230,416,396,416,526,410,526,410,396,410,230,417,188,434,148,457,113,482,84"/>
<area shape="rect" href="../../dc/d56/uloop_8h.html" title=" " alt="" coords="1608,460,1772,493"/>
<area shape="poly" title=" " alt="" coords="670,54,899,75,1167,108,1298,129,1417,153,1517,181,1591,212,1637,244,1664,279,1680,322,1691,378,1695,444,1689,444,1686,378,1675,324,1660,282,1633,248,1589,217,1516,186,1416,158,1297,134,1166,113,898,80,669,59"/>
<area shape="rect" href="../../dc/dab/procd_8h.html" title=" " alt="" coords="1049,133,1140,167"/>
<area shape="poly" title=" " alt="" coords="670,70,1034,135,1033,140,669,75"/>
<area shape="rect" href="../../d9/da3/watchdog_8h.html" title=" " alt="" coords="1980,215,2110,248"/>
<area shape="poly" title=" " alt="" coords="670,48,991,58,1382,75,1732,99,1857,114,1931,130,1959,145,1984,163,2024,201,2020,205,1980,167,1956,149,1929,136,1856,119,1732,105,1382,80,991,63,669,53"/>
<area shape="poly" title=" " alt="" coords="1608,491,1137,550,1136,544,1607,486"/>
<area shape="rect" title=" " alt="" coords="852,541,969,575"/>
<area shape="poly" title=" " alt="" coords="1608,490,1545,496,1389,508,1266,515,1142,524,985,544,984,538,1142,519,1265,510,1388,503,1545,491,1607,484"/>
<area shape="rect" title=" " alt="" coords="1570,623,1677,657"/>
<area shape="poly" title=" " alt="" coords="1680,495,1651,542,1639,576,1631,608,1626,607,1634,574,1646,540,1675,492"/>
<area shape="rect" title=" " alt="" coords="1288,541,1380,575"/>
<area shape="poly" title=" " alt="" coords="1618,497,1396,546,1395,541,1617,491"/>
<area shape="rect" title=" " alt="" coords="1660,541,1755,575"/>
<area shape="poly" title=" " alt="" coords="1696,493,1703,525,1698,526,1691,494"/>
<area shape="rect" href="../../da/d23/list_8h.html" title=" " alt="" coords="1797,541,1863,575"/>
<area shape="poly" title=" " alt="" coords="1720,491,1790,531,1787,536,1717,496"/>
<area shape="poly" title=" " alt="" coords="1797,575,1681,619,1679,614,1796,570"/>
<area shape="rect" title=" " alt="" coords="1850,623,1946,657"/>
<area shape="poly" title=" " alt="" coords="1846,574,1876,609,1872,613,1842,577"/>
<area shape="poly" title=" " alt="" coords="1140,150,1238,156,1358,167,1472,185,1518,198,1552,212,1581,235,1607,263,1628,294,1646,326,1672,391,1687,443,1681,445,1667,392,1641,329,1624,296,1603,266,1578,239,1549,217,1516,203,1471,191,1358,172,1237,161,1140,156"/>
<area shape="rect" href="../../d5/d1d/libubox_2utils_8h.html" title=" " alt="" coords="450,460,602,493"/>
<area shape="poly" title=" " alt="" coords="1049,162,965,182,918,198,873,217,776,274,686,339,610,401,555,451,552,447,606,397,683,334,773,269,870,212,916,193,963,177,1047,157"/>
<area shape="rect" href="../../db/d55/libubus_8h.html" title=" " alt="" coords="1431,215,1539,248"/>
<area shape="poly" title=" " alt="" coords="1141,158,1417,214,1416,219,1140,163"/>
<area shape="rect" title=" " alt="" coords="1448,460,1532,493"/>
<area shape="poly" title=" " alt="" coords="1140,150,1239,154,1360,165,1474,183,1519,196,1552,212,1605,256,1626,279,1642,303,1652,328,1655,355,1650,383,1635,413,1618,433,1596,448,1549,468,1547,463,1593,444,1614,429,1631,410,1645,382,1650,355,1647,330,1638,305,1622,282,1601,259,1549,217,1517,201,1472,188,1359,170,1238,160,1140,155"/>
<area shape="rect" href="../../de/dd2/udebug_8h.html" title=" " alt="" coords="1208,378,1319,412"/>
<area shape="poly" title=" " alt="" coords="1116,165,1175,219,1207,255,1235,295,1251,329,1260,362,1255,364,1246,331,1231,298,1203,258,1171,223,1113,169"/>
<area shape="rect" title=" " alt="" coords="821,378,919,412"/>
<area shape="poly" title=" " alt="" coords="1049,164,996,181,938,208,909,225,882,246,859,270,841,297,836,314,837,331,851,364,847,366,832,332,830,313,836,295,855,267,879,242,906,221,935,203,994,176,1047,159"/>
<area shape="rect" href="../../d9/d1e/procd_2log_8h.html" title=" " alt="" coords="977,215,1044,248"/>
<area shape="poly" title=" " alt="" coords="1079,169,1040,206,1036,202,1075,165"/>
<area shape="poly" title=" " alt="" coords="603,488,621,491,798,513,978,538,978,544,798,519,620,496,602,493"/>
<area shape="poly" title=" " alt="" coords="478,496,349,539,348,534,476,491"/>
<area shape="poly" title=" " alt="" coords="505,496,450,534,447,530,502,492"/>
<area shape="poly" title=" " alt="" coords="603,491,837,539,836,544,602,496"/>
<area shape="poly" title=" " alt="" coords="603,491,709,514,790,539,805,548,816,557,826,565,840,572,902,588,983,601,1184,619,1391,630,1554,635,1554,640,1390,635,1183,625,983,606,900,593,839,578,823,570,812,561,802,552,788,544,707,520,602,496"/>
<area shape="poly" title=" " alt="" coords="603,484,665,491,1273,549,1272,554,665,496,603,489"/>
<area shape="rect" title=" " alt="" coords="486,541,566,575"/>
<area shape="poly" title=" " alt="" coords="529,494,529,526,524,526,524,494"/>
<area shape="rect" title=" " alt="" coords="590,541,777,575"/>
<area shape="poly" title=" " alt="" coords="559,491,639,532,637,536,557,496"/>
<area shape="poly" title=" " alt="" coords="1506,247,1566,302,1635,376,1659,411,1678,445,1673,447,1654,414,1631,380,1563,305,1502,251"/>
<area shape="poly" title=" " alt="" coords="1480,250,1351,528,1346,526,1475,248"/>
<area shape="poly" title=" " alt="" coords="1531,246,1598,276,1679,321,1719,349,1757,381,1792,418,1821,458,1832,492,1835,525,1830,526,1827,493,1816,461,1788,421,1754,385,1716,353,1676,325,1596,281,1529,251"/>
<area shape="rect" href="../../d3/d51/avl_8h.html" title=" " alt="" coords="1899,460,2039,493"/>
<area shape="poly" title=" " alt="" coords="1518,247,1925,450,1923,455,1516,251"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html" title=" " alt="" coords="1028,296,1222,330"/>
<area shape="poly" title=" " alt="" coords="1431,247,1214,295,1213,290,1430,242"/>
<area shape="rect" href="../../d5/d79/ubusmsg_8h.html" title=" " alt="" coords="1297,296,1422,330"/>
<area shape="poly" title=" " alt="" coords="1461,251,1399,290,1396,286,1458,247"/>
<area shape="rect" href="../../dc/d3c/ubus__common_8h.html" title=" " alt="" coords="1447,378,1621,412"/>
<area shape="poly" title=" " alt="" coords="1492,248,1527,362,1522,364,1487,250"/>
<area shape="poly" title=" " alt="" coords="1960,496,1926,537,1903,559,1877,577,1831,599,1783,615,1693,634,1692,629,1782,610,1829,594,1874,573,1900,555,1922,533,1956,492"/>
<area shape="poly" title=" " alt="" coords="1942,496,1873,536,1870,531,1939,492"/>
<area shape="poly" title=" " alt="" coords="1965,495,1931,576,1915,610,1911,608,1926,574,1960,493"/>
<area shape="rect" title=" " alt="" coords="677,460,775,493"/>
<area shape="poly" title=" " alt="" coords="1098,333,1024,372,933,414,860,440,791,461,790,456,858,435,930,409,1022,367,1095,328"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html" title=" " alt="" coords="1085,378,1165,412"/>
<area shape="poly" title=" " alt="" coords="1128,330,1128,363,1122,363,1122,330"/>
<area shape="poly" title=" " alt="" coords="1085,405,940,431,873,447,851,455,840,461,834,477,840,492,862,507,894,518,977,529,1066,533,1133,539,1276,572,1555,624,1554,630,1275,578,1132,544,1065,538,977,534,893,523,859,512,836,495,828,477,836,458,849,450,872,442,938,426,1084,400"/>
<area shape="poly" title=" " alt="" coords="1147,410,1303,530,1300,534,1144,414"/>
<area shape="poly" title=" " alt="" coords="1085,404,618,466,617,460,1084,399"/>
<area shape="rect" title=" " alt="" coords="850,460,941,493"/>
<area shape="poly" title=" " alt="" coords="1086,412,957,457,955,452,1084,407"/>
<area shape="rect" title=" " alt="" coords="965,460,1058,493"/>
<area shape="poly" title=" " alt="" coords="1103,414,1048,453,1045,448,1100,410"/>
<area shape="poly" title=" " alt="" coords="1166,402,1434,460,1433,465,1164,407"/>
<area shape="rect" title=" " alt="" coords="1083,460,1170,493"/>
<area shape="poly" title=" " alt="" coords="1128,412,1128,444,1123,444,1122,412"/>
<area shape="poly" title=" " alt="" coords="1360,331,1340,526,1335,526,1355,330"/>
<area shape="poly" title=" " alt="" coords="1313,333,1180,378,1178,373,1311,328"/>
<area shape="poly" title=" " alt="" coords="1543,411,1615,608,1610,610,1538,413"/>
<area shape="poly" title=" " alt="" coords="1255,414,1226,453,1184,495,1149,518,1114,537,1111,532,1147,514,1180,491,1222,450,1251,410"/>
<area shape="poly" title=" " alt="" coords="1320,404,1593,455,1592,460,1319,409"/>
<area shape="poly" title=" " alt="" coords="1273,411,1323,526,1319,528,1268,413"/>
<area shape="poly" title=" " alt="" coords="1319,399,1594,428,1723,444,1786,457,1801,472,1813,489,1827,525,1822,527,1808,492,1797,475,1784,462,1722,449,1593,433,1319,404"/>
<area shape="poly" title=" " alt="" coords="1319,400,1884,463,1883,468,1319,405"/>
<area shape="poly" title=" " alt="" coords="1209,409,1177,414,791,469,791,464,1176,409,1208,404"/>
<area shape="rect" href="../../df/df3/ulog_8h.html" title=" " alt="" coords="851,296,1004,330"/>
<area shape="poly" title=" " alt="" coords="995,251,957,287,953,283,992,247"/>
<area shape="poly" title=" " alt="" coords="997,328,1194,374,1193,380,995,333"/>
<area shape="poly" title=" " alt="" coords="918,332,893,367,889,364,914,329"/>
<area shape="poly" title=" " alt="" coords="2053,248,2069,311,2077,352,2079,393,2079,478,2076,494,2068,508,2036,535,1990,558,1933,579,1807,611,1693,631,1692,626,1806,605,1931,573,1988,553,2033,530,2063,505,2071,492,2074,478,2074,394,2071,352,2064,312,2048,249"/>
</map>
</div>
</div>
<p><a href="../../d6/d88/watchdog_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aea40d6da8d9150ee004565e0fa2dc4cc" id="r_aea40d6da8d9150ee004565e0fa2dc4cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aea40d6da8d9150ee004565e0fa2dc4cc">WDT_PATH</a>&#160;&#160;&#160;&quot;/dev/watchdog&quot;</td></tr>
<tr class="separator:aea40d6da8d9150ee004565e0fa2dc4cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a40e298539d4f4fb3c5ab3317d4c449ff" id="r_a40e298539d4f4fb3c5ab3317d4c449ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a40e298539d4f4fb3c5ab3317d4c449ff">watchdog_ping</a> (void)</td></tr>
<tr class="separator:a40e298539d4f4fb3c5ab3317d4c449ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a3159d3f3390614400f8f403c5aac73" id="r_a5a3159d3f3390614400f8f403c5aac73"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5a3159d3f3390614400f8f403c5aac73">watchdog_timeout_cb</a> (struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a> *t)</td></tr>
<tr class="separator:a5a3159d3f3390614400f8f403c5aac73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31664dcba8ff01b57b09be53bc297d58" id="r_a31664dcba8ff01b57b09be53bc297d58"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31664dcba8ff01b57b09be53bc297d58">watchdog_open</a> (bool cloexec)</td></tr>
<tr class="separator:a31664dcba8ff01b57b09be53bc297d58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b72bc58af8576da573b81ac0cc51103" id="r_a5b72bc58af8576da573b81ac0cc51103"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b72bc58af8576da573b81ac0cc51103">watchdog_close</a> (bool with_release)</td></tr>
<tr class="separator:a5b72bc58af8576da573b81ac0cc51103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35f4cbd80d58c214a0f47b8022fa4ca1" id="r_a35f4cbd80d58c214a0f47b8022fa4ca1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a35f4cbd80d58c214a0f47b8022fa4ca1">watchdog_set_drv_timeout</a> (void)</td></tr>
<tr class="separator:a35f4cbd80d58c214a0f47b8022fa4ca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05316067521d0e4efd9b8d3a3a322591" id="r_a05316067521d0e4efd9b8d3a3a322591"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a05316067521d0e4efd9b8d3a3a322591">watchdog_print_status</a> (void)</td></tr>
<tr class="separator:a05316067521d0e4efd9b8d3a3a322591"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17cc5d8e2a9be6590ae9944c3abf3555" id="r_a17cc5d8e2a9be6590ae9944c3abf3555"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a17cc5d8e2a9be6590ae9944c3abf3555">watchdog_set_magicclose</a> (bool val)</td></tr>
<tr class="separator:a17cc5d8e2a9be6590ae9944c3abf3555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23ac65088fc496c0c827cfa697b62e83" id="r_a23ac65088fc496c0c827cfa697b62e83"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23ac65088fc496c0c827cfa697b62e83">watchdog_get_magicclose</a> (void)</td></tr>
<tr class="separator:a23ac65088fc496c0c827cfa697b62e83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a441b97e6f07ed2aefef37cd2309adafc" id="r_a441b97e6f07ed2aefef37cd2309adafc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a441b97e6f07ed2aefef37cd2309adafc">watchdog_set_stopped</a> (bool val)</td></tr>
<tr class="separator:a441b97e6f07ed2aefef37cd2309adafc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad28218c9cb9943272f216b52ed33f680" id="r_ad28218c9cb9943272f216b52ed33f680"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad28218c9cb9943272f216b52ed33f680">watchdog_get_stopped</a> (void)</td></tr>
<tr class="separator:ad28218c9cb9943272f216b52ed33f680"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cb0f6cbef0cbe8203eb22795acc9446" id="r_a9cb0f6cbef0cbe8203eb22795acc9446"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9cb0f6cbef0cbe8203eb22795acc9446">watchdog_timeout</a> (int <a class="el" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr class="separator:a9cb0f6cbef0cbe8203eb22795acc9446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5a3542e62faac548615860ffa297d1b" id="r_aa5a3542e62faac548615860ffa297d1b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa5a3542e62faac548615860ffa297d1b">watchdog_frequency</a> (int frequency)</td></tr>
<tr class="separator:aa5a3542e62faac548615860ffa297d1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae02caa227c18af4c5c42fee4b8d94ba9" id="r_ae02caa227c18af4c5c42fee4b8d94ba9"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae02caa227c18af4c5c42fee4b8d94ba9">watchdog_fd</a> (void)</td></tr>
<tr class="separator:ae02caa227c18af4c5c42fee4b8d94ba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a874a52d6ac45041d9e76bd1925d88c24" id="r_a874a52d6ac45041d9e76bd1925d88c24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a874a52d6ac45041d9e76bd1925d88c24">watchdog_init</a> (int <a class="el" href="../../d8/dc0/init_8h.html#a90282b93d8528c3fc4e5b188bc5fbc1c">preinit</a>)</td></tr>
<tr class="separator:a874a52d6ac45041d9e76bd1925d88c24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaed3ec52f2a4e3003e8733a933945fe7" id="r_aaed3ec52f2a4e3003e8733a933945fe7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaed3ec52f2a4e3003e8733a933945fe7">watchdog_set_cloexec</a> (bool val)</td></tr>
<tr class="separator:aaed3ec52f2a4e3003e8733a933945fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a358c7fd61724df432e2df56fa42a88ce" id="r_a358c7fd61724df432e2df56fa42a88ce"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a></td></tr>
<tr class="separator:a358c7fd61724df432e2df56fa42a88ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c6f4a796c52e7bdc033599d489d57dd" id="r_a6c6f4a796c52e7bdc033599d489d57dd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> = -1</td></tr>
<tr class="separator:a6c6f4a796c52e7bdc033599d489d57dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83bf8a09effd2597c21fd87a9bae383f" id="r_a83bf8a09effd2597c21fd87a9bae383f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83bf8a09effd2597c21fd87a9bae383f">wdt_drv_timeout</a> = 30</td></tr>
<tr class="separator:a83bf8a09effd2597c21fd87a9bae383f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fb7beb7b455796d8aa9a27d7282500e" id="r_a2fb7beb7b455796d8aa9a27d7282500e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2fb7beb7b455796d8aa9a27d7282500e">wdt_frequency</a> = 5</td></tr>
<tr class="separator:a2fb7beb7b455796d8aa9a27d7282500e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab046fa6a191130ad6ac6ced195af1fed" id="r_ab046fa6a191130ad6ac6ced195af1fed"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab046fa6a191130ad6ac6ced195af1fed">wdt_magicclose</a> = false</td></tr>
<tr class="separator:ab046fa6a191130ad6ac6ced195af1fed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aea40d6da8d9150ee004565e0fa2dc4cc" name="aea40d6da8d9150ee004565e0fa2dc4cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea40d6da8d9150ee004565e0fa2dc4cc">&#9670;&#160;</a></span>WDT_PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WDT_PATH&#160;&#160;&#160;&quot;/dev/watchdog&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00029">29</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00050">watchdog_open()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5b72bc58af8576da573b81ac0cc51103" name="a5b72bc58af8576da573b81ac0cc51103"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b72bc58af8576da573b81ac0cc51103">&#9670;&#160;</a></span>watchdog_close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void watchdog_close </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>with_release</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00074">74</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   75</span>{</div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &lt; 0)</div>
<div class="line"><span class="lineno">   77</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>    <span class="keywordflow">if</span> (with_release) {</div>
<div class="line"><span class="lineno">   80</span>        <span class="keywordflow">if</span> (write(<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>, <span class="stringliteral">&quot;V&quot;</span>, 1) &lt; 0)</div>
<div class="line"><span class="lineno">   81</span>            <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;WDT failed to write release: %m\n&quot;</span>);</div>
<div class="line"><span class="lineno">   82</span>    }</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>    <span class="keywordflow">if</span> (close(<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>) == -1)</div>
<div class="line"><span class="lineno">   85</span>        <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;WDT failed to close watchdog: %m\n&quot;</span>);</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>    <a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> = -1;</div>
<div class="line"><span class="lineno">   88</span>}</div>
<div class="ttc" id="aprocd_2jail_2log_8h_html_a15378cd15bafb3a79061424b452497aa"><div class="ttname"><a href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a></div><div class="ttdeci">#define ERROR(fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">log.h:27</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a6c6f4a796c52e7bdc033599d489d57dd"><div class="ttname"><a href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a></div><div class="ttdeci">static int wdt_fd</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00032">watchdog.c:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">ERROR</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">wdt_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00137">watchdog_set_stopped()</a>.</p>

</div>
</div>
<a id="ae02caa227c18af4c5c42fee4b8d94ba9" name="ae02caa227c18af4c5c42fee4b8d94ba9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae02caa227c18af4c5c42fee4b8d94ba9">&#9670;&#160;</a></span>watchdog_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * watchdog_fd </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00179">179</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  180</span>{</div>
<div class="line"><span class="lineno">  181</span>    <span class="keyword">static</span> <span class="keywordtype">char</span> fd_buf[12];</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &lt; 0)</div>
<div class="line"><span class="lineno">  184</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>    snprintf(fd_buf, <span class="keyword">sizeof</span>(fd_buf), <span class="stringliteral">&quot;%d&quot;</span>, <a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>);</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    <span class="keywordflow">return</span> fd_buf;</div>
<div class="line"><span class="lineno">  189</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">wdt_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de5/preinit_8c_source.html#l00091">spawn_procd()</a>, <a class="el" href="../../db/d65/sysupgrade_8c_source.html#l00028">sysupgrade_exec_upgraded()</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>

</div>
</div>
<a id="aa5a3542e62faac548615860ffa297d1b" name="aa5a3542e62faac548615860ffa297d1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5a3542e62faac548615860ffa297d1b">&#9670;&#160;</a></span>watchdog_frequency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int watchdog_frequency </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>frequency</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00169">169</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  170</span>{</div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordflow">if</span> (frequency) {</div>
<div class="line"><span class="lineno">  172</span>        <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(4, <span class="stringliteral">&quot;Set watchdog frequency: %ds\n&quot;</span>, frequency);</div>
<div class="line"><span class="lineno">  173</span>        <a class="code hl_variable" href="#a2fb7beb7b455796d8aa9a27d7282500e">wdt_frequency</a> = frequency;</div>
<div class="line"><span class="lineno">  174</span>    }</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="#a2fb7beb7b455796d8aa9a27d7282500e">wdt_frequency</a>;</div>
<div class="line"><span class="lineno">  177</span>}</div>
<div class="ttc" id="asystem-dummy_8c_html_ad72dbcf6d0153db1b8d8a58001feed83"><div class="ttname"><a href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a></div><div class="ttdeci">#define DEBUG</div><div class="ttdef"><b>Definition</b> <a href="../../da/d12/system-dummy_8c_source.html#l00021">system-dummy.c:21</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a2fb7beb7b455796d8aa9a27d7282500e"><div class="ttname"><a href="#a2fb7beb7b455796d8aa9a27d7282500e">wdt_frequency</a></div><div class="ttdeci">static int wdt_frequency</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00034">watchdog.c:34</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d12/system-dummy_8c_source.html#l00021">DEBUG</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00034">wdt_frequency</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>

</div>
</div>
<a id="a23ac65088fc496c0c827cfa697b62e83" name="a23ac65088fc496c0c827cfa697b62e83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23ac65088fc496c0c827cfa697b62e83">&#9670;&#160;</a></span>watchdog_get_magicclose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool watchdog_get_magicclose </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00132">132</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  133</span>{</div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="#ab046fa6a191130ad6ac6ced195af1fed">wdt_magicclose</a>;</div>
<div class="line"><span class="lineno">  135</span>}</div>
<div class="ttc" id="awatchdog_8c_html_ab046fa6a191130ad6ac6ced195af1fed"><div class="ttname"><a href="#ab046fa6a191130ad6ac6ced195af1fed">wdt_magicclose</a></div><div class="ttdeci">static bool wdt_magicclose</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00035">watchdog.c:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00035">wdt_magicclose</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>

</div>
</div>
<a id="ad28218c9cb9943272f216b52ed33f680" name="ad28218c9cb9943272f216b52ed33f680"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad28218c9cb9943272f216b52ed33f680">&#9670;&#160;</a></span>watchdog_get_stopped()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool watchdog_get_stopped </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00151">151</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  152</span>{</div>
<div class="line"><span class="lineno">  153</span>    <span class="keywordflow">return</span> !<a class="code hl_variable" href="#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a25cac63ea734b75581163f3980dbadda">pending</a>;</div>
<div class="line"><span class="lineno">  154</span>}</div>
<div class="ttc" id="auloop_8h_html_a25cac63ea734b75581163f3980dbadda"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#a25cac63ea734b75581163f3980dbadda">uloop_timeout::pending</a></div><div class="ttdeci">bool pending</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00075">uloop.h:75</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a358c7fd61724df432e2df56fa42a88ce"><div class="ttname"><a href="#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a></div><div class="ttdeci">static struct uloop_timeout wdt_timeout</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00031">watchdog.c:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d56/uloop_8h_source.html#l00075">uloop_timeout::pending</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00031">wdt_timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>

</div>
</div>
<a id="a874a52d6ac45041d9e76bd1925d88c24" name="a874a52d6ac45041d9e76bd1925d88c24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a874a52d6ac45041d9e76bd1925d88c24">&#9670;&#160;</a></span>watchdog_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_init </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>preinit</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00191">191</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  192</span>{</div>
<div class="line"><span class="lineno">  193</span>    <a class="code hl_variable" href="#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a7b331d0a02bb53b37ae38716956c97bd">cb</a> = <a class="code hl_function" href="#a5a3159d3f3390614400f8f403c5aac73">watchdog_timeout_cb</a>;</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#a31664dcba8ff01b57b09be53bc297d58">watchdog_open</a>(!<a class="code hl_function" href="../../d8/dc0/init_8h.html#a90282b93d8528c3fc4e5b188bc5fbc1c">preinit</a>) &lt; 0)</div>
<div class="line"><span class="lineno">  196</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- watchdog -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  199</span>    <a class="code hl_function" href="#a35f4cbd80d58c214a0f47b8022fa4ca1">watchdog_set_drv_timeout</a>();</div>
<div class="line"><span class="lineno">  200</span>    <a class="code hl_function" href="#a5a3159d3f3390614400f8f403c5aac73">watchdog_timeout_cb</a>(&amp;<a class="code hl_variable" href="#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a>);</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>    <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(4, <span class="stringliteral">&quot;Opened watchdog with timeout %ds\n&quot;</span>, <a class="code hl_function" href="#a9cb0f6cbef0cbe8203eb22795acc9446">watchdog_timeout</a>(0));</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>    <a class="code hl_function" href="#a05316067521d0e4efd9b8d3a3a322591">watchdog_print_status</a>();</div>
<div class="line"><span class="lineno">  205</span>}</div>
<div class="ttc" id="ainit_8h_html_a90282b93d8528c3fc4e5b188bc5fbc1c"><div class="ttname"><a href="../../d8/dc0/init_8h.html#a90282b93d8528c3fc4e5b188bc5fbc1c">preinit</a></div><div class="ttdeci">void preinit(void)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/de5/preinit_8c_source.html#l00124">preinit.c:124</a></div></div>
<div class="ttc" id="aprocd_2log_8h_html_a159ca84d25a5487d8e81e4438725df19"><div class="ttname"><a href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a></div><div class="ttdeci">#define LOG</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d1e/procd_2log_8h_source.html#l00032">log.h:32</a></div></div>
<div class="ttc" id="auloop_8h_html_a7b331d0a02bb53b37ae38716956c97bd"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#a7b331d0a02bb53b37ae38716956c97bd">uloop_timeout::cb</a></div><div class="ttdeci">uloop_timeout_handler cb</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00077">uloop.h:77</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a05316067521d0e4efd9b8d3a3a322591"><div class="ttname"><a href="#a05316067521d0e4efd9b8d3a3a322591">watchdog_print_status</a></div><div class="ttdeci">static void watchdog_print_status(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00098">watchdog.c:98</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a31664dcba8ff01b57b09be53bc297d58"><div class="ttname"><a href="#a31664dcba8ff01b57b09be53bc297d58">watchdog_open</a></div><div class="ttdeci">static int watchdog_open(bool cloexec)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00050">watchdog.c:50</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a35f4cbd80d58c214a0f47b8022fa4ca1"><div class="ttname"><a href="#a35f4cbd80d58c214a0f47b8022fa4ca1">watchdog_set_drv_timeout</a></div><div class="ttdeci">static int watchdog_set_drv_timeout(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00090">watchdog.c:90</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a5a3159d3f3390614400f8f403c5aac73"><div class="ttname"><a href="#a5a3159d3f3390614400f8f403c5aac73">watchdog_timeout_cb</a></div><div class="ttdeci">static void watchdog_timeout_cb(struct uloop_timeout *t)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00044">watchdog.c:44</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a9cb0f6cbef0cbe8203eb22795acc9446"><div class="ttname"><a href="#a9cb0f6cbef0cbe8203eb22795acc9446">watchdog_timeout</a></div><div class="ttdeci">int watchdog_timeout(int timeout)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00156">watchdog.c:156</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d56/uloop_8h_source.html#l00077">uloop_timeout::cb</a>, <a class="el" href="../../da/d12/system-dummy_8c_source.html#l00021">DEBUG</a>, <a class="el" href="../../d9/d1e/procd_2log_8h_source.html#l00032">LOG</a>, <a class="el" href="../../dd/de5/preinit_8c_source.html#l00124">preinit()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00050">watchdog_open()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00098">watchdog_print_status()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00090">watchdog_set_drv_timeout()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00156">watchdog_timeout()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00044">watchdog_timeout_cb()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00031">wdt_timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d60/init_8c_source.html#l00121">main()</a>, and <a class="el" href="../../d0/dc9/state_8c_source.html#l00126">state_enter()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d88/watchdog_8c_a874a52d6ac45041d9e76bd1925d88c24_cgraph.png" border="0" usemap="#ad6/d88/watchdog_8c_a874a52d6ac45041d9e76bd1925d88c24_cgraph" alt=""/></div>
<map name="ad6/d88/watchdog_8c_a874a52d6ac45041d9e76bd1925d88c24_cgraph" id="ad6/d88/watchdog_8c_a874a52d6ac45041d9e76bd1925d88c24_cgraph">
<area shape="rect" title=" " alt="" coords="5,594,155,628"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a90282b93d8528c3fc4e5b188bc5fbc1c" title=" " alt="" coords="278,452,358,485"/>
<area shape="poly" title=" " alt="" coords="93,592,137,543,168,517,201,494,231,482,262,473,263,479,233,487,204,499,171,521,141,547,97,596"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58" title=" " alt="" coords="235,509,401,543"/>
<area shape="poly" title=" " alt="" coords="112,591,202,551,221,545,223,550,204,556,115,596"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a05316067521d0e4efd9b8d3a3a322591" title=" " alt="" coords="203,566,433,600"/>
<area shape="poly" title=" " alt="" coords="155,600,187,596,187,601,155,605"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1" title=" " alt="" coords="481,621,749,655"/>
<area shape="poly" title=" " alt="" coords="155,612,466,628,466,633,155,618"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a9cb0f6cbef0cbe8203eb22795acc9446" title=" " alt="" coords="222,676,414,709"/>
<area shape="poly" title=" " alt="" coords="127,626,204,654,246,668,244,673,202,659,125,631"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a5a3159d3f3390614400f8f403c5aac73" title=" " alt="" coords="207,733,429,767"/>
<area shape="poly" title=" " alt="" coords="97,627,142,674,171,699,204,720,214,725,212,729,201,724,168,703,138,678,94,631"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a3c2b1b2951eae690991001026ac7c4d4" title=" " alt="" coords="538,396,692,429"/>
<area shape="poly" title=" " alt="" coords="358,459,522,427,523,433,359,464"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a9539d3f84ee0e5d5db04710740c805f2" title=" " alt="" coords="544,453,686,487"/>
<area shape="poly" title=" " alt="" coords="358,466,528,467,528,472,358,471"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#af511d1bcbdfcfaba211d4ae1b0930dbb" title=" " alt="" coords="809,562,1006,596"/>
<area shape="poly" title=" " alt="" coords="359,473,481,497,799,556,798,562,481,502,358,479"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a4f3b5900c57e91bcc59c5c7e9f47fca6" title=" " alt="" coords="837,396,978,429"/>
<area shape="poly" title=" " alt="" coords="686,453,821,427,822,432,688,459"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a94bbc0d07683d7ebd935579b8c873834" title=" " alt="" coords="811,453,1004,487"/>
<area shape="poly" title=" " alt="" coords="687,467,796,467,796,473,687,473"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#ae02caa227c18af4c5c42fee4b8d94ba9" title=" " alt="" coords="1605,512,1745,545"/>
<area shape="poly" title=" " alt="" coords="687,481,798,497,1022,513,1244,523,1590,527,1590,532,1244,528,1021,519,797,502,686,486"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a971a97328aa4e052756235e6690602f7" title=" " alt="" coords="1066,254,1196,288"/>
<area shape="poly" title=" " alt="" coords="998,450,1016,440,1050,409,1078,372,1100,334,1115,301,1120,303,1104,337,1082,375,1054,412,1019,444,1000,455"/>
<area shape="rect" href="../../db/d65/sysupgrade_8c.html#a2f25b3ed2b57dbfdd9171d17a0e527c6" title=" " alt="" coords="1249,453,1529,487"/>
<area shape="poly" title=" " alt="" coords="1005,467,1234,467,1234,473,1005,473"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1816,225,1927,259"/>
<area shape="poly" title=" " alt="" coords="1132,254,1141,209,1161,150,1175,119,1193,90,1216,64,1243,42,1282,22,1324,10,1367,4,1410,4,1454,9,1498,19,1584,50,1664,91,1736,135,1796,178,1841,213,1837,217,1793,182,1733,139,1662,95,1582,55,1497,24,1453,14,1410,9,1367,9,1325,15,1284,27,1245,47,1219,67,1198,93,1180,122,1166,152,1146,210,1137,255"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1340,57,1438,91"/>
<area shape="poly" title=" " alt="" coords="1136,253,1150,220,1172,178,1203,135,1243,100,1282,82,1324,73,1325,78,1284,87,1245,104,1207,139,1177,181,1155,222,1141,255"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#adfbec0b532211a1442310392496a45f2" title=" " alt="" coords="1295,114,1483,148"/>
<area shape="poly" title=" " alt="" coords="1142,252,1183,204,1211,178,1243,157,1279,143,1281,147,1245,162,1214,183,1186,208,1146,256"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603" title=" " alt="" coords="1288,172,1491,205"/>
<area shape="poly" title=" " alt="" coords="1169,251,1243,222,1294,207,1295,212,1245,227,1171,256"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#afb56b36905412b6618a529c171e833ed" title=" " alt="" coords="1594,225,1756,259"/>
<area shape="poly" title=" " alt="" coords="1196,265,1578,244,1578,250,1197,271"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#a637cdad6e9e1e5b837c0072ae9b4a1ce" title=" " alt="" coords="1306,281,1472,315"/>
<area shape="poly" title=" " alt="" coords="1196,275,1291,285,1290,290,1196,281"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a9c77c01c21439286a9fdebb814d5b523" title=" " alt="" coords="1298,338,1481,372"/>
<area shape="poly" title=" " alt="" coords="1162,286,1201,306,1245,325,1283,336,1282,341,1243,330,1199,311,1160,291"/>
<area shape="poly" title=" " alt="" coords="1141,288,1155,321,1177,363,1207,405,1246,440,1251,443,1248,448,1242,444,1203,408,1172,365,1150,323,1136,290"/>
<area shape="rect" href="../../d8/d1d/procd_2system_8c.html#a91a439107e9ff41b6c2b9082b73f1972" title=" " alt="" coords="1244,396,1534,429"/>
<area shape="poly" title=" " alt="" coords="1146,287,1186,336,1214,361,1245,382,1255,387,1253,392,1243,387,1211,365,1182,339,1142,290"/>
<area shape="poly" title=" " alt="" coords="1757,239,1800,239,1800,245,1757,245"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a38fb5688af8a7f3e9eae5c653ed2bb50" title=" " alt="" coords="1582,282,1768,316"/>
<area shape="poly" title=" " alt="" coords="1517,450,1533,440,1545,427,1552,414,1556,385,1561,355,1568,340,1580,325,1583,323,1587,327,1584,329,1573,343,1566,357,1562,386,1557,415,1549,430,1536,444,1520,455"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a856562b4d96007d3ce1a052998451a0f" title=" " alt="" coords="1582,340,1768,373"/>
<area shape="poly" title=" " alt="" coords="1511,450,1533,440,1548,427,1556,413,1565,397,1581,383,1588,378,1590,383,1584,387,1569,401,1561,415,1552,430,1536,444,1514,455"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#af2c32f6db6f49388da60dda520d86c4d" title=" " alt="" coords="1588,397,1762,431"/>
<area shape="poly" title=" " alt="" coords="1480,450,1534,439,1573,432,1574,437,1535,445,1481,455"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a6ee526c7b55debcecad8e34e3e6108d0" title=" " alt="" coords="1594,454,1756,488"/>
<area shape="poly" title=" " alt="" coords="1530,468,1578,468,1578,474,1530,473"/>
<area shape="poly" title=" " alt="" coords="1475,485,1591,509,1590,514,1474,490"/>
<area shape="poly" title=" " alt="" coords="1750,452,1766,441,1801,403,1828,357,1847,312,1860,273,1865,275,1852,314,1833,360,1805,406,1769,445,1753,456"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="1066,592,1196,625"/>
<area shape="poly" title=" " alt="" coords="1007,590,1051,595,1050,601,1006,595"/>
<area shape="rect" href="../../da/d23/list_8h.html#a9d61a1a731a0cf44336e2ee9e45f712d" title=" " alt="" coords="1339,592,1440,625"/>
<area shape="poly" title=" " alt="" coords="1196,606,1323,606,1323,611,1196,611"/>
<area shape="poly" title=" " alt="" coords="413,673,504,656,505,661,414,678"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#aeae1856255dccd537fd19cdda1cba346" title=" " alt="" coords="521,678,710,712"/>
<area shape="poly" title=" " alt="" coords="413,730,505,713,506,718,414,735"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a40e298539d4f4fb3c5ab3317d4c449ff" title=" " alt="" coords="535,736,696,769"/>
<area shape="poly" title=" " alt="" coords="429,748,519,749,519,754,429,754"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a941864296983cb342a79afe55055f8d3" title=" " alt="" coords="831,621,984,655"/>
<area shape="poly" title=" " alt="" coords="704,675,815,653,816,658,705,680"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07" title=" " alt="" coords="809,678,1006,712"/>
<area shape="poly" title=" " alt="" coords="710,693,794,693,794,698,710,698"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a6231184d2f54ac1bc945ecb73c517d91" title=" " alt="" coords="797,736,1018,769"/>
<area shape="poly" title=" " alt="" coords="705,710,803,730,802,735,704,715"/>
<area shape="poly" title=" " alt="" coords="985,675,1017,665,1087,631,1089,636,1019,670,986,680"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a76f33118cba0a358482528fad8c0f4cd" title=" " alt="" coords="1092,678,1170,712"/>
<area shape="poly" title=" " alt="" coords="1006,693,1076,693,1076,698,1006,698"/>
<area shape="rect" href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title=" " alt="" coords="1088,736,1174,769"/>
<area shape="poly" title=" " alt="" coords="1018,750,1073,750,1073,755,1018,755"/>
</map>
</div>

</div>
</div>
<a id="a31664dcba8ff01b57b09be53bc297d58" name="a31664dcba8ff01b57b09be53bc297d58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31664dcba8ff01b57b09be53bc297d58">&#9670;&#160;</a></span>watchdog_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int watchdog_open </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>cloexec</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00050">50</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   51</span>{</div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordtype">char</span> *env = getenv(<span class="stringliteral">&quot;WDTFD&quot;</span>);</div>
<div class="line"><span class="lineno">   53</span> </div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &gt;= 0)</div>
<div class="line"><span class="lineno">   55</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>;</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span>    <span class="keywordflow">if</span> (env) {</div>
<div class="line"><span class="lineno">   58</span>        <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(2, <span class="stringliteral">&quot;Watchdog handover: fd=%s\n&quot;</span>, env);</div>
<div class="line"><span class="lineno">   59</span>        <a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> = atoi(env);</div>
<div class="line"><span class="lineno">   60</span>        unsetenv(<span class="stringliteral">&quot;WDTFD&quot;</span>);</div>
<div class="line"><span class="lineno">   61</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   62</span>        <a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> = open(<a class="code hl_define" href="#aea40d6da8d9150ee004565e0fa2dc4cc">WDT_PATH</a>, O_WRONLY);</div>
<div class="line"><span class="lineno">   63</span>    }</div>
<div class="line"><span class="lineno">   64</span> </div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &lt; 0)</div>
<div class="line"><span class="lineno">   66</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>;</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>    <span class="keywordflow">if</span> (cloexec)</div>
<div class="line"><span class="lineno">   69</span>        fcntl(<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>, F_SETFD, fcntl(<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>, F_GETFD) | FD_CLOEXEC);</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>;</div>
<div class="line"><span class="lineno">   72</span>}</div>
<div class="ttc" id="awatchdog_8c_html_aea40d6da8d9150ee004565e0fa2dc4cc"><div class="ttname"><a href="#aea40d6da8d9150ee004565e0fa2dc4cc">WDT_PATH</a></div><div class="ttdeci">#define WDT_PATH</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00029">watchdog.c:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d12/system-dummy_8c_source.html#l00021">DEBUG</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">wdt_fd</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00029">WDT_PATH</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00191">watchdog_init()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00137">watchdog_set_stopped()</a>.</p>

</div>
</div>
<a id="a40e298539d4f4fb3c5ab3317d4c449ff" name="a40e298539d4f4fb3c5ab3317d4c449ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40e298539d4f4fb3c5ab3317d4c449ff">&#9670;&#160;</a></span>watchdog_ping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_ping </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00037">37</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   38</span>{</div>
<div class="line"><span class="lineno">   39</span>    <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(4, <span class="stringliteral">&quot;Ping\n&quot;</span>);</div>
<div class="line"><span class="lineno">   40</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &gt;= 0 &amp;&amp; write(<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>, <span class="stringliteral">&quot;X&quot;</span>, 1) &lt; 0)</div>
<div class="line"><span class="lineno">   41</span>        <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;WDT failed to write: %m\n&quot;</span>);</div>
<div class="line"><span class="lineno">   42</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d12/system-dummy_8c_source.html#l00021">DEBUG</a>, <a class="el" href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">ERROR</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">wdt_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d60/init_8c_source.html#l00121">main()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00044">watchdog_timeout_cb()</a>.</p>

</div>
</div>
<a id="a05316067521d0e4efd9b8d3a3a322591" name="a05316067521d0e4efd9b8d3a3a322591"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05316067521d0e4efd9b8d3a3a322591">&#9670;&#160;</a></span>watchdog_print_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void watchdog_print_status </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00098">98</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   99</span>{</div>
<div class="line"><span class="lineno">  100</span>    <span class="keyword">struct </span>watchdog_info wdt_info;</div>
<div class="line"><span class="lineno">  101</span>    <span class="keywordtype">int</span> bootstatus;</div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &lt; 0)</div>
<div class="line"><span class="lineno">  104</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>    <span class="keywordflow">if</span> (ioctl(<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>, WDIOC_GETSUPPORT, &amp;wdt_info)) {</div>
<div class="line"><span class="lineno">  107</span>        <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(2, <span class="stringliteral">&quot;Watchdog GETSUPPORT failed\n&quot;</span>);</div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  109</span>    }</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>    <span class="keywordflow">if</span> (!(wdt_info.options &amp; WDIOF_CARDRESET)) {</div>
<div class="line"><span class="lineno">  112</span>        <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(2, <span class="stringliteral">&quot;Watchdog does not have CARDRESET support\n&quot;</span>);</div>
<div class="line"><span class="lineno">  113</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  114</span>    }</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>    <span class="keywordflow">if</span> (ioctl(<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>, WDIOC_GETBOOTSTATUS, &amp;bootstatus)) {</div>
<div class="line"><span class="lineno">  117</span>        <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(2, <span class="stringliteral">&quot;Watchdog GETBOOTSTATUS failed\n&quot;</span>);</div>
<div class="line"><span class="lineno">  118</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  119</span>    }</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>    <span class="keywordflow">if</span> (bootstatus &amp; WDIOF_CARDRESET)</div>
<div class="line"><span class="lineno">  122</span>        <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;Watchdog has previously reset the system\n&quot;</span>);</div>
<div class="line"><span class="lineno">  123</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  124</span>        <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(2, <span class="stringliteral">&quot;Watchdog did not previously reset the system\n&quot;</span>);</div>
<div class="line"><span class="lineno">  125</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d12/system-dummy_8c_source.html#l00021">DEBUG</a>, <a class="el" href="../../d9/d1e/procd_2log_8h_source.html#l00032">LOG</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">wdt_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00191">watchdog_init()</a>.</p>

</div>
</div>
<a id="aaed3ec52f2a4e3003e8733a933945fe7" name="aaed3ec52f2a4e3003e8733a933945fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaed3ec52f2a4e3003e8733a933945fe7">&#9670;&#160;</a></span>watchdog_set_cloexec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_set_cloexec </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>val</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00208">208</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  209</span>{</div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &lt; 0)</div>
<div class="line"><span class="lineno">  211</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>    <span class="keywordtype">int</span> flags = fcntl(<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>, F_GETFD);</div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordflow">if</span> (val)</div>
<div class="line"><span class="lineno">  215</span>        flags |= FD_CLOEXEC;</div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  217</span>        flags &amp;= ~FD_CLOEXEC;</div>
<div class="line"><span class="lineno">  218</span>    fcntl(<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>, F_SETFD,  flags);</div>
<div class="line"><span class="lineno">  219</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">wdt_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d65/sysupgrade_8c_source.html#l00028">sysupgrade_exec_upgraded()</a>.</p>

</div>
</div>
<a id="a35f4cbd80d58c214a0f47b8022fa4ca1" name="a35f4cbd80d58c214a0f47b8022fa4ca1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35f4cbd80d58c214a0f47b8022fa4ca1">&#9670;&#160;</a></span>watchdog_set_drv_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int watchdog_set_drv_timeout </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00090">90</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   91</span>{</div>
<div class="line"><span class="lineno">   92</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &lt; 0)</div>
<div class="line"><span class="lineno">   93</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordflow">return</span> ioctl(<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a>, WDIOC_SETTIMEOUT, &amp;<a class="code hl_variable" href="#a83bf8a09effd2597c21fd87a9bae383f">wdt_drv_timeout</a>);</div>
<div class="line"><span class="lineno">   96</span>}</div>
<div class="ttc" id="awatchdog_8c_html_a83bf8a09effd2597c21fd87a9bae383f"><div class="ttname"><a href="#a83bf8a09effd2597c21fd87a9bae383f">wdt_drv_timeout</a></div><div class="ttdeci">static int wdt_drv_timeout</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00033">watchdog.c:33</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00033">wdt_drv_timeout</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">wdt_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00191">watchdog_init()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00137">watchdog_set_stopped()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00156">watchdog_timeout()</a>.</p>

</div>
</div>
<a id="a17cc5d8e2a9be6590ae9944c3abf3555" name="a17cc5d8e2a9be6590ae9944c3abf3555"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17cc5d8e2a9be6590ae9944c3abf3555">&#9670;&#160;</a></span>watchdog_set_magicclose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_set_magicclose </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>val</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00127">127</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  128</span>{</div>
<div class="line"><span class="lineno">  129</span>    <a class="code hl_variable" href="#ab046fa6a191130ad6ac6ced195af1fed">wdt_magicclose</a> = val;</div>
<div class="line"><span class="lineno">  130</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00035">wdt_magicclose</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>

</div>
</div>
<a id="a441b97e6f07ed2aefef37cd2309adafc" name="a441b97e6f07ed2aefef37cd2309adafc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a441b97e6f07ed2aefef37cd2309adafc">&#9670;&#160;</a></span>watchdog_set_stopped()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_set_stopped </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>val</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00137">137</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  138</span>{</div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">if</span> (val) {</div>
<div class="line"><span class="lineno">  140</span>        <a class="code hl_function" href="../../d1/d08/uloop_8c.html#a6231184d2f54ac1bc945ecb73c517d91">uloop_timeout_cancel</a>(&amp;<a class="code hl_variable" href="#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a>);</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>        <a class="code hl_function" href="#a5b72bc58af8576da573b81ac0cc51103">watchdog_close</a>(<a class="code hl_variable" href="#ab046fa6a191130ad6ac6ced195af1fed">wdt_magicclose</a>);</div>
<div class="line"><span class="lineno">  143</span>    }</div>
<div class="line"><span class="lineno">  144</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  145</span>        <a class="code hl_function" href="#a31664dcba8ff01b57b09be53bc297d58">watchdog_open</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  146</span>        <a class="code hl_function" href="#a35f4cbd80d58c214a0f47b8022fa4ca1">watchdog_set_drv_timeout</a>();</div>
<div class="line"><span class="lineno">  147</span>        <a class="code hl_function" href="#a5a3159d3f3390614400f8f403c5aac73">watchdog_timeout_cb</a>(&amp;<a class="code hl_variable" href="#a358c7fd61724df432e2df56fa42a88ce">wdt_timeout</a>);</div>
<div class="line"><span class="lineno">  148</span>    }</div>
<div class="line"><span class="lineno">  149</span>}</div>
<div class="ttc" id="auloop_8c_html_a6231184d2f54ac1bc945ecb73c517d91"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#a6231184d2f54ac1bc945ecb73c517d91">uloop_timeout_cancel</a></div><div class="ttdeci">int uloop_timeout_cancel(struct uloop_timeout *timeout)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00348">uloop.c:348</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a5b72bc58af8576da573b81ac0cc51103"><div class="ttname"><a href="#a5b72bc58af8576da573b81ac0cc51103">watchdog_close</a></div><div class="ttdeci">static void watchdog_close(bool with_release)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00074">watchdog.c:74</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d08/uloop_8c_source.html#l00348">uloop_timeout_cancel()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00074">watchdog_close()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00050">watchdog_open()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00090">watchdog_set_drv_timeout()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00044">watchdog_timeout_cb()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00035">wdt_magicclose</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00031">wdt_timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d88/watchdog_8c_a441b97e6f07ed2aefef37cd2309adafc_cgraph.png" border="0" usemap="#ad6/d88/watchdog_8c_a441b97e6f07ed2aefef37cd2309adafc_cgraph" alt=""/></div>
<map name="ad6/d88/watchdog_8c_a441b97e6f07ed2aefef37cd2309adafc_cgraph" id="ad6/d88/watchdog_8c_a441b97e6f07ed2aefef37cd2309adafc_cgraph">
<area shape="rect" title=" " alt="" coords="5,109,238,143"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a6231184d2f54ac1bc945ecb73c517d91" title=" " alt="" coords="839,17,1060,51"/>
<area shape="poly" title=" " alt="" coords="145,106,206,69,245,51,285,37,355,22,428,12,573,3,709,6,824,15,823,20,708,11,573,9,428,17,356,27,286,42,247,55,209,74,148,111"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a5b72bc58af8576da573b81ac0cc51103" title=" " alt="" coords="336,52,504,86"/>
<area shape="poly" title=" " alt="" coords="212,106,320,85,321,90,213,111"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58" title=" " alt="" coords="337,109,503,143"/>
<area shape="poly" title=" " alt="" coords="238,123,321,123,321,129,238,129"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1" title=" " alt="" coords="286,167,554,200"/>
<area shape="poly" title=" " alt="" coords="213,141,314,161,313,166,212,146"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a5a3159d3f3390614400f8f403c5aac73" title=" " alt="" coords="309,224,531,258"/>
<area shape="poly" title=" " alt="" coords="151,141,212,176,287,210,306,217,304,222,285,215,209,181,148,146"/>
<area shape="rect" href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title=" " alt="" coords="1130,17,1215,51"/>
<area shape="poly" title=" " alt="" coords="1060,31,1114,31,1114,37,1060,37"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae0988579c6b622299ee0f79accbf0779" title=" " alt="" coords="1289,17,1383,51"/>
<area shape="poly" title=" " alt="" coords="1215,31,1273,31,1273,37,1215,37"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#aeae1856255dccd537fd19cdda1cba346" title=" " alt="" coords="602,117,791,151"/>
<area shape="poly" title=" " alt="" coords="520,221,553,210,608,185,656,157,659,162,610,190,555,215,521,226"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a40e298539d4f4fb3c5ab3317d4c449ff" title=" " alt="" coords="616,224,777,258"/>
<area shape="poly" title=" " alt="" coords="531,238,600,238,600,243,531,243"/>
<area shape="poly" title=" " alt="" coords="738,114,838,73,886,54,888,59,840,78,740,119"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a941864296983cb342a79afe55055f8d3" title=" " alt="" coords="873,88,1026,122"/>
<area shape="poly" title=" " alt="" coords="792,120,858,113,859,118,792,126"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07" title=" " alt="" coords="851,145,1048,179"/>
<area shape="poly" title=" " alt="" coords="792,142,836,147,835,152,792,147"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="1108,101,1237,135"/>
<area shape="poly" title=" " alt="" coords="1037,142,1092,131,1093,136,1038,147"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a76f33118cba0a358482528fad8c0f4cd" title=" " alt="" coords="1133,159,1212,192"/>
<area shape="poly" title=" " alt="" coords="1048,165,1118,170,1117,175,1048,171"/>
<area shape="rect" href="../../da/d23/list_8h.html#a9d61a1a731a0cf44336e2ee9e45f712d" title=" " alt="" coords="1285,101,1386,135"/>
<area shape="poly" title=" " alt="" coords="1238,115,1269,115,1269,121,1238,121"/>
</map>
</div>

</div>
</div>
<a id="a9cb0f6cbef0cbe8203eb22795acc9446" name="a9cb0f6cbef0cbe8203eb22795acc9446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cb0f6cbef0cbe8203eb22795acc9446">&#9670;&#160;</a></span>watchdog_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int watchdog_timeout </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00156">156</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  157</span>{</div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>) {</div>
<div class="line"><span class="lineno">  159</span>        <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(4, <span class="stringliteral">&quot;Set watchdog timeout: %ds\n&quot;</span>, <a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>);</div>
<div class="line"><span class="lineno">  160</span>        <a class="code hl_variable" href="#a83bf8a09effd2597c21fd87a9bae383f">wdt_drv_timeout</a> = <a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a6c6f4a796c52e7bdc033599d489d57dd">wdt_fd</a> &gt;= 0)</div>
<div class="line"><span class="lineno">  163</span>            <a class="code hl_function" href="#a35f4cbd80d58c214a0f47b8022fa4ca1">watchdog_set_drv_timeout</a>();</div>
<div class="line"><span class="lineno">  164</span>    }</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="#a83bf8a09effd2597c21fd87a9bae383f">wdt_drv_timeout</a>;</div>
<div class="line"><span class="lineno">  167</span>}</div>
<div class="ttc" id="aprocd_2ubus_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition</b> <a href="../../de/d89/procd_2ubus_8c_source.html#l00025">ubus.c:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d12/system-dummy_8c_source.html#l00021">DEBUG</a>, <a class="el" href="../../de/d89/procd_2ubus_8c_source.html#l00025">timeout</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00090">watchdog_set_drv_timeout()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00033">wdt_drv_timeout</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">wdt_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00191">watchdog_init()</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00463">watchdog_set()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d88/watchdog_8c_a9cb0f6cbef0cbe8203eb22795acc9446_cgraph.png" border="0" usemap="#ad6/d88/watchdog_8c_a9cb0f6cbef0cbe8203eb22795acc9446_cgraph" alt=""/></div>
<map name="ad6/d88/watchdog_8c_a9cb0f6cbef0cbe8203eb22795acc9446_cgraph" id="ad6/d88/watchdog_8c_a9cb0f6cbef0cbe8203eb22795acc9446_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,197,39"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1" title=" " alt="" coords="245,5,513,39"/>
<area shape="poly" title=" " alt="" coords="197,20,229,20,229,25,197,25"/>
</map>
</div>

</div>
</div>
<a id="a5a3159d3f3390614400f8f403c5aac73" name="a5a3159d3f3390614400f8f403c5aac73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a3159d3f3390614400f8f403c5aac73">&#9670;&#160;</a></span>watchdog_timeout_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void watchdog_timeout_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00044">44</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   45</span>{</div>
<div class="line"><span class="lineno">   46</span>    <a class="code hl_function" href="#a40e298539d4f4fb3c5ab3317d4c449ff">watchdog_ping</a>();</div>
<div class="line"><span class="lineno">   47</span>    <a class="code hl_function" href="../../d1/d08/uloop_8c.html#aeae1856255dccd537fd19cdda1cba346">uloop_timeout_set</a>(t, <a class="code hl_variable" href="#a2fb7beb7b455796d8aa9a27d7282500e">wdt_frequency</a> * 1000);</div>
<div class="line"><span class="lineno">   48</span>}</div>
<div class="ttc" id="auloop_8c_html_aeae1856255dccd537fd19cdda1cba346"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#aeae1856255dccd537fd19cdda1cba346">uloop_timeout_set</a></div><div class="ttdeci">int uloop_timeout_set(struct uloop_timeout *timeout, int msecs)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00328">uloop.c:328</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a40e298539d4f4fb3c5ab3317d4c449ff"><div class="ttname"><a href="#a40e298539d4f4fb3c5ab3317d4c449ff">watchdog_ping</a></div><div class="ttdeci">void watchdog_ping(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00037">watchdog.c:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d08/uloop_8c_source.html#l00328">uloop_timeout_set()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00037">watchdog_ping()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00034">wdt_frequency</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00191">watchdog_init()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00137">watchdog_set_stopped()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d88/watchdog_8c_a5a3159d3f3390614400f8f403c5aac73_cgraph.png" border="0" usemap="#ad6/d88/watchdog_8c_a5a3159d3f3390614400f8f403c5aac73_cgraph" alt=""/></div>
<map name="ad6/d88/watchdog_8c_a5a3159d3f3390614400f8f403c5aac73_cgraph" id="ad6/d88/watchdog_8c_a5a3159d3f3390614400f8f403c5aac73_cgraph">
<area shape="rect" title=" " alt="" coords="5,92,228,126"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#aeae1856255dccd537fd19cdda1cba346" title=" " alt="" coords="276,63,465,96"/>
<area shape="poly" title=" " alt="" coords="228,93,260,90,260,95,228,99"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a40e298539d4f4fb3c5ab3317d4c449ff" title=" " alt="" coords="290,120,451,154"/>
<area shape="poly" title=" " alt="" coords="228,118,275,124,274,129,228,124"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a941864296983cb342a79afe55055f8d3" title=" " alt="" coords="547,5,699,39"/>
<area shape="poly" title=" " alt="" coords="447,59,531,40,533,45,448,65"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae60859ac8015e8f1381e56f5eaae0a07" title=" " alt="" coords="525,63,721,96"/>
<area shape="poly" title=" " alt="" coords="466,77,509,77,509,82,466,82"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a6231184d2f54ac1bc945ecb73c517d91" title=" " alt="" coords="513,120,733,154"/>
<area shape="poly" title=" " alt="" coords="448,94,531,113,530,119,447,100"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="781,5,911,39"/>
<area shape="poly" title=" " alt="" coords="692,60,733,49,766,40,767,45,734,54,693,65"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a76f33118cba0a358482528fad8c0f4cd" title=" " alt="" coords="807,63,885,96"/>
<area shape="poly" title=" " alt="" coords="722,77,791,77,791,82,722,82"/>
<area shape="rect" href="../../da/d23/list_8h.html#a9d61a1a731a0cf44336e2ee9e45f712d" title=" " alt="" coords="959,5,1060,39"/>
<area shape="poly" title=" " alt="" coords="911,20,943,20,943,25,911,25"/>
<area shape="rect" href="../../da/d23/list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title=" " alt="" coords="803,120,889,154"/>
<area shape="poly" title=" " alt="" coords="734,134,788,134,788,140,734,140"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae0988579c6b622299ee0f79accbf0779" title=" " alt="" coords="962,120,1057,154"/>
<area shape="poly" title=" " alt="" coords="889,134,947,134,947,140,889,140"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a83bf8a09effd2597c21fd87a9bae383f" name="a83bf8a09effd2597c21fd87a9bae383f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83bf8a09effd2597c21fd87a9bae383f">&#9670;&#160;</a></span>wdt_drv_timeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int wdt_drv_timeout = 30</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00033">33</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00090">watchdog_set_drv_timeout()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00156">watchdog_timeout()</a>.</p>

</div>
</div>
<a id="a6c6f4a796c52e7bdc033599d489d57dd" name="a6c6f4a796c52e7bdc033599d489d57dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c6f4a796c52e7bdc033599d489d57dd">&#9670;&#160;</a></span>wdt_fd</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int wdt_fd = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00032">32</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de5/preinit_8c_source.html#l00091">spawn_procd()</a>, <a class="el" href="../../db/d65/sysupgrade_8c_source.html#l00028">sysupgrade_exec_upgraded()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00074">watchdog_close()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00179">watchdog_fd()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00050">watchdog_open()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00037">watchdog_ping()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00098">watchdog_print_status()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00208">watchdog_set_cloexec()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00090">watchdog_set_drv_timeout()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00156">watchdog_timeout()</a>.</p>

</div>
</div>
<a id="a2fb7beb7b455796d8aa9a27d7282500e" name="a2fb7beb7b455796d8aa9a27d7282500e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fb7beb7b455796d8aa9a27d7282500e">&#9670;&#160;</a></span>wdt_frequency</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int wdt_frequency = 5</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00034">34</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00169">watchdog_frequency()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00044">watchdog_timeout_cb()</a>.</p>

</div>
</div>
<a id="ab046fa6a191130ad6ac6ced195af1fed" name="ab046fa6a191130ad6ac6ced195af1fed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab046fa6a191130ad6ac6ced195af1fed">&#9670;&#160;</a></span>wdt_magicclose</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool wdt_magicclose = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00035">35</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00132">watchdog_get_magicclose()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00127">watchdog_set_magicclose()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00137">watchdog_set_stopped()</a>.</p>

</div>
</div>
<a id="a358c7fd61724df432e2df56fa42a88ce" name="a358c7fd61724df432e2df56fa42a88ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a358c7fd61724df432e2df56fa42a88ce">&#9670;&#160;</a></span>wdt_timeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d56/uloop_8h.html#d8/d2b/structuloop__timeout">uloop_timeout</a> wdt_timeout</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00031">31</a> of file <a class="el" href="../../d6/d88/watchdog_8c_source.html">watchdog.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00151">watchdog_get_stopped()</a>, <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00191">watchdog_init()</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00137">watchdog_set_stopped()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
