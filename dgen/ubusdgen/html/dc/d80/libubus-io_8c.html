<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>zbus: /home/g41797/CLionProjects/github.com/g41797/zbus/src/libs/ubus/libubus-io.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">zbus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_87a455bccb09a92130c26a11a880c98a.html">libs</a></li><li class="navelem"><a class="el" href="../../dir_1e974a0feb376015fdf1a5b531ce0d1a.html">ubus</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">libubus-io.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/uio.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;poll.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d1/dd5/usock_8h_source.html">libubox/usock.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d8/d3c/blob_8h_source.html">libubox/blob.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dd/dad/blobmsg_8h_source.html">libubox/blobmsg.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="../../db/d55/libubus_8h_source.html">libubus.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d26/libubus-internal_8h_source.html">libubus-internal.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for libubus-io.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d20/libubus-io_8c__incl.png" border="0" usemap="#a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2ubus_2libubus-io_8c" alt=""/></div>
<map name="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2ubus_2libubus-io_8c" id="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2ubus_2libubus-io_8c">
<area shape="rect" title=" " alt="" coords="380,5,666,85"/>
<area shape="rect" title=" " alt="" coords="293,460,420,493"/>
<area shape="poly" title=" " alt="" coords="429,88,399,109,373,135,358,158,351,179,349,230,349,314,356,444,351,444,343,315,343,230,346,178,353,156,369,131,395,105,426,83"/>
<area shape="rect" title=" " alt="" coords="44,133,149,167"/>
<area shape="poly" title=" " alt="" coords="380,83,165,135,163,130,379,78"/>
<area shape="rect" title=" " alt="" coords="173,133,308,167"/>
<area shape="poly" title=" " alt="" coords="416,88,300,130,299,125,414,83"/>
<area shape="rect" title=" " alt="" coords="56,460,153,493"/>
<area shape="poly" title=" " alt="" coords="380,57,280,68,178,83,91,105,58,119,34,135,17,156,10,177,10,230,10,314,16,353,33,389,55,421,78,447,74,450,51,424,28,392,11,355,5,315,5,230,5,176,12,153,31,131,55,115,89,100,177,78,279,62,380,52"/>
<area shape="rect" title=" " alt="" coords="383,133,463,167"/>
<area shape="poly" title=" " alt="" coords="487,88,451,124,447,120,483,84"/>
<area shape="rect" title=" " alt="" coords="487,133,559,167"/>
<area shape="poly" title=" " alt="" coords="526,86,526,118,521,118,521,86"/>
<area shape="rect" href="../../d1/dd5/usock_8h.html" title=" " alt="" coords="584,133,751,167"/>
<area shape="poly" title=" " alt="" coords="580,83,634,122,631,126,577,88"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html" title=" " alt="" coords="825,296,979,330"/>
<area shape="poly" title=" " alt="" coords="668,78,730,101,790,131,841,165,860,185,879,213,893,247,901,280,896,281,888,249,874,216,856,188,838,169,787,135,728,106,666,83"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html" title=" " alt="" coords="671,215,864,248"/>
<area shape="poly" title=" " alt="" coords="668,66,721,91,745,109,765,131,774,147,778,165,777,199,772,199,772,166,769,149,761,135,742,113,719,96,665,71"/>
<area shape="rect" href="../../db/d55/libubus_8h.html" title=" " alt="" coords="1048,133,1156,167"/>
<area shape="poly" title=" " alt="" coords="667,69,1033,134,1032,139,667,74"/>
<area shape="rect" href="../../dc/d26/libubus-internal_8h.html" title=" " alt="" coords="1179,133,1363,167"/>
<area shape="poly" title=" " alt="" coords="667,63,1164,130,1163,135,666,68"/>
<area shape="rect" title=" " alt="" coords="1335,460,1442,493"/>
<area shape="poly" title=" " alt="" coords="952,328,1326,452,1324,457,950,333"/>
<area shape="rect" title=" " alt="" coords="383,378,474,412"/>
<area shape="poly" title=" " alt="" coords="825,331,814,333,653,354,581,364,489,380,488,375,580,358,652,349,813,327,824,326"/>
<area shape="rect" title=" " alt="" coords="1056,460,1148,493"/>
<area shape="poly" title=" " alt="" coords="923,328,1072,448,1068,452,920,333"/>
<area shape="rect" title=" " alt="" coords="498,378,591,412"/>
<area shape="poly" title=" " alt="" coords="827,333,610,381,607,381,606,376,609,375,826,328"/>
<area shape="rect" title=" " alt="" coords="768,378,852,412"/>
<area shape="poly" title=" " alt="" coords="885,333,842,370,838,366,882,328"/>
<area shape="rect" title=" " alt="" coords="876,378,963,412"/>
<area shape="poly" title=" " alt="" coords="908,330,915,362,910,363,903,331"/>
<area shape="rect" href="../../d5/d1d/libubox_2utils_8h.html" title=" " alt="" coords="665,378,744,412"/>
<area shape="poly" title=" " alt="" coords="863,333,759,375,757,370,861,328"/>
<area shape="poly" title=" " alt="" coords="666,410,648,414,436,462,435,456,647,409,664,405"/>
<area shape="poly" title=" " alt="" coords="666,405,604,414,169,470,168,465,603,409,665,400"/>
<area shape="poly" title=" " alt="" coords="745,407,756,409,869,426,1025,442,1320,467,1319,473,1024,447,868,431,755,414,744,412"/>
<area shape="poly" title=" " alt="" coords="745,406,756,409,834,425,896,435,958,443,1037,457,1041,458,1040,463,1036,462,957,448,895,440,833,431,755,414,744,411"/>
<area shape="rect" title=" " alt="" coords="656,460,767,493"/>
<area shape="poly" title=" " alt="" coords="709,412,711,444,706,444,703,412"/>
<area shape="rect" title=" " alt="" coords="907,460,1025,493"/>
<area shape="poly" title=" " alt="" coords="745,406,756,409,898,452,897,457,754,414,744,411"/>
<area shape="rect" title=" " alt="" coords="791,460,871,493"/>
<area shape="poly" title=" " alt="" coords="732,410,794,449,792,454,729,414"/>
<area shape="rect" title=" " alt="" coords="444,460,632,493"/>
<area shape="poly" title=" " alt="" coords="672,415,586,455,584,450,670,410"/>
<area shape="poly" title=" " alt="" coords="796,247,863,286,860,291,793,251"/>
<area shape="rect" title=" " alt="" coords="703,296,802,330"/>
<area shape="poly" title=" " alt="" coords="767,249,761,281,756,280,762,248"/>
<area shape="poly" title=" " alt="" coords="1105,167,1105,444,1099,444,1099,167"/>
<area shape="poly" title=" " alt="" coords="1048,167,851,213,849,208,1047,161"/>
<area shape="rect" href="../../d3/d51/avl_8h.html" title=" " alt="" coords="1510,296,1651,330"/>
<area shape="poly" title=" " alt="" coords="1157,162,1168,164,1253,175,1320,177,1387,185,1424,195,1467,212,1494,227,1518,245,1559,283,1555,287,1515,250,1491,232,1465,217,1423,200,1386,190,1320,182,1252,180,1167,169,1155,167"/>
<area shape="rect" href="../../da/d23/list_8h.html" title=" " alt="" coords="1561,378,1627,412"/>
<area shape="poly" title=" " alt="" coords="1156,162,1168,164,1264,177,1341,181,1416,188,1511,212,1600,237,1634,257,1650,273,1666,295,1671,316,1664,336,1650,354,1633,370,1630,366,1646,351,1660,333,1665,316,1661,297,1646,276,1631,261,1598,242,1509,217,1415,194,1340,186,1264,182,1167,169,1155,167"/>
<area shape="rect" href="../../dc/d56/uloop_8h.html" title=" " alt="" coords="1190,296,1355,330"/>
<area shape="poly" title=" " alt="" coords="1121,165,1246,284,1243,287,1117,169"/>
<area shape="rect" href="../../d5/d79/ubusmsg_8h.html" title=" " alt="" coords="939,215,1065,248"/>
<area shape="poly" title=" " alt="" coords="1083,169,1036,207,1032,203,1080,165"/>
<area shape="rect" href="../../dc/d3c/ubus__common_8h.html" title=" " alt="" coords="1280,215,1454,248"/>
<area shape="poly" title=" " alt="" coords="1156,165,1299,207,1298,212,1155,170"/>
<area shape="poly" title=" " alt="" coords="1570,332,1537,371,1493,414,1434,454,1431,449,1490,410,1533,367,1566,329"/>
<area shape="rect" title=" " alt="" coords="1580,460,1677,493"/>
<area shape="poly" title=" " alt="" coords="1604,328,1625,350,1642,377,1647,412,1642,445,1636,444,1641,412,1637,379,1621,353,1600,332"/>
<area shape="poly" title=" " alt="" coords="1586,330,1591,362,1586,363,1581,331"/>
<area shape="poly" title=" " alt="" coords="1561,412,1446,456,1444,451,1559,407"/>
<area shape="poly" title=" " alt="" coords="1603,411,1618,444,1613,446,1598,413"/>
<area shape="poly" title=" " alt="" coords="1190,321,904,340,758,358,699,368,655,380,640,388,630,396,604,414,531,437,436,460,435,455,530,432,602,409,627,392,637,383,653,376,698,363,758,352,904,335,1190,315"/>
<area shape="poly" title=" " alt="" coords="1283,329,1304,367,1332,410,1363,447,1359,450,1328,413,1299,370,1278,332"/>
<area shape="poly" title=" " alt="" coords="1258,332,1173,414,1133,451,1129,447,1169,410,1254,329"/>
<area shape="poly" title=" " alt="" coords="1243,333,1011,454,1009,450,1241,328"/>
<area shape="poly" title=" " alt="" coords="1339,328,1546,379,1545,384,1337,333"/>
<area shape="rect" title=" " alt="" coords="1341,378,1436,412"/>
<area shape="poly" title=" " alt="" coords="1298,328,1354,367,1351,371,1295,333"/>
<area shape="poly" title=" " alt="" coords="983,251,936,289,932,284,980,247"/>
<area shape="poly" title=" " alt="" coords="1011,248,1092,445,1087,447,1006,250"/>
<area shape="poly" title=" " alt="" coords="1382,247,1418,302,1436,339,1450,377,1453,395,1450,413,1438,433,1423,451,1419,447,1434,430,1445,411,1448,395,1445,379,1431,341,1413,305,1377,250"/>
</map>
</div>
</div>
<p><a href="../../dc/d80/libubus-io_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a369266c24eacffb87046522897a570d5" id="r_a369266c24eacffb87046522897a570d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a369266c24eacffb87046522897a570d5">_GNU_SOURCE</a></td></tr>
<tr class="separator:a369266c24eacffb87046522897a570d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84eb6242a3904db804faf42d8821d894" id="r_a84eb6242a3904db804faf42d8821d894"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a84eb6242a3904db804faf42d8821d894">STATIC_IOV</a>(_var)</td></tr>
<tr class="separator:a84eb6242a3904db804faf42d8821d894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c9490be1ed97014bc0c4cc06dc6ca65" id="r_a4c9490be1ed97014bc0c4cc06dc6ca65"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c9490be1ed97014bc0c4cc06dc6ca65">UBUS_MSGBUF_REDUCTION_INTERVAL</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a4c9490be1ed97014bc0c4cc06dc6ca65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a744f40f02d6005e23b279535c046aaf5" id="r_a744f40f02d6005e23b279535c046aaf5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d1d/libubox_2utils_8h.html#a40f0fecd341aae3690f0dded986e423a">__hidden</a> struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a744f40f02d6005e23b279535c046aaf5">ubus_parse_msg</a> (struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *msg, size_t len)</td></tr>
<tr class="separator:a744f40f02d6005e23b279535c046aaf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1aaffb83e802ad470cb77be9f56977c" id="r_ad1aaffb83e802ad470cb77be9f56977c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1aaffb83e802ad470cb77be9f56977c">wait_data</a> (int fd, bool write)</td></tr>
<tr class="separator:ad1aaffb83e802ad470cb77be9f56977c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a256a75cd053ed5d3443060e0a19a3f" id="r_a9a256a75cd053ed5d3443060e0a19a3f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9a256a75cd053ed5d3443060e0a19a3f">writev_retry</a> (int fd, struct iovec *iov, int iov_len, int sock_fd)</td></tr>
<tr class="separator:a9a256a75cd053ed5d3443060e0a19a3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e8e6d098f2808fa135bfefa3c0e81f8" id="r_a3e8e6d098f2808fa135bfefa3c0e81f8"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d5/d1d/libubox_2utils_8h.html#a40f0fecd341aae3690f0dded986e423a">__hidden</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e8e6d098f2808fa135bfefa3c0e81f8">ubus_send_msg</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, uint32_t seq, struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *msg, int <a class="el" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>, uint32_t peer, int fd)</td></tr>
<tr class="separator:a3e8e6d098f2808fa135bfefa3c0e81f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e4704bb3543c30c9de44cd3f2616404" id="r_a1e4704bb3543c30c9de44cd3f2616404"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e4704bb3543c30c9de44cd3f2616404">recv_retry</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, struct iovec *iov, bool wait, int *recv_fd)</td></tr>
<tr class="separator:a1e4704bb3543c30c9de44cd3f2616404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af89184a6a1d46c84beb995555a5f8422" id="r_af89184a6a1d46c84beb995555a5f8422"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af89184a6a1d46c84beb995555a5f8422">ubus_validate_hdr</a> (struct <a class="el" href="../../d5/d79/ubusmsg_8h.html#d2/d15/structubus__msghdr">ubus_msghdr</a> *hdr)</td></tr>
<tr class="separator:af89184a6a1d46c84beb995555a5f8422"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a286d2863156bf7bb882339c5c74bc595" id="r_a286d2863156bf7bb882339c5c74bc595"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a286d2863156bf7bb882339c5c74bc595">alloc_msg_buf</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, int len)</td></tr>
<tr class="separator:a286d2863156bf7bb882339c5c74bc595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a141d1ad87ea36959b73e035bd3b3b265" id="r_a141d1ad87ea36959b73e035bd3b3b265"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a141d1ad87ea36959b73e035bd3b3b265">get_next_msg</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, int *recv_fd)</td></tr>
<tr class="separator:a141d1ad87ea36959b73e035bd3b3b265"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0791c7960dffbb35e38a4f32001c331" id="r_aa0791c7960dffbb35e38a4f32001c331"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../d5/d1d/libubox_2utils_8h.html#a40f0fecd341aae3690f0dded986e423a">__hidden</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa0791c7960dffbb35e38a4f32001c331">ubus_handle_data</a> (struct <a class="el" href="../../dc/d56/uloop_8h.html#db/d9e/structuloop__fd">uloop_fd</a> *u, unsigned int <a class="el" href="../../d3/d91/uloop-epoll_8c.html#a0e992398f478de38db56a1146ea84e93">events</a>)</td></tr>
<tr class="separator:aa0791c7960dffbb35e38a4f32001c331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5497c370318a5cc03dd662523915ea92" id="r_a5497c370318a5cc03dd662523915ea92"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../d5/d1d/libubox_2utils_8h.html#a40f0fecd341aae3690f0dded986e423a">__hidden</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5497c370318a5cc03dd662523915ea92">ubus_poll_data</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, int <a class="el" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr class="separator:a5497c370318a5cc03dd662523915ea92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1181bbaadf8f66ea4f2cd4bab3285695" id="r_a1181bbaadf8f66ea4f2cd4bab3285695"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1181bbaadf8f66ea4f2cd4bab3285695">ubus_auto_sub_lookup</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, struct <a class="el" href="../../db/d55/libubus_8h.html#d6/d4f/structubus__object__data">ubus_object_data</a> *obj, void *priv)</td></tr>
<tr class="separator:a1181bbaadf8f66ea4f2cd4bab3285695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53a20e63db75053c8fbe21656412b3da" id="r_a53a20e63db75053c8fbe21656412b3da"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a53a20e63db75053c8fbe21656412b3da">ubus_refresh_auto_subscribe</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>)</td></tr>
<tr class="separator:a53a20e63db75053c8fbe21656412b3da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7949dbca229a78115adadb49a5d9837d" id="r_a7949dbca229a78115adadb49a5d9837d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7949dbca229a78115adadb49a5d9837d">ubus_refresh_state</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>)</td></tr>
<tr class="separator:a7949dbca229a78115adadb49a5d9837d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d684a5b03a2819e0ea9780975a44e1" id="r_ac9d684a5b03a2819e0ea9780975a44e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac9d684a5b03a2819e0ea9780975a44e1">ubus_reconnect</a> (struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="el" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, const char *<a class="el" href="../../df/d0e/ubusd__obj_8c.html#a9ece2e576492090c46d5e3b435cef7d4">path</a>)</td></tr>
<tr class="separator:ac9d684a5b03a2819e0ea9780975a44e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1e504d18c2a5be244acca4d57941e6ab" id="r_a1e504d18c2a5be244acca4d57941e6ab"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d8/d3c/blob_8h.html#d0/dc3/structblob__attr__info">blob_attr_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e504d18c2a5be244acca4d57941e6ab">ubus_policy</a> [<a class="el" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eaf7242b947db1e5d0a412f7845cc1faf4">UBUS_ATTR_MAX</a>]</td></tr>
<tr class="separator:a1e504d18c2a5be244acca4d57941e6ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2db28f5297374cef03aaa958a92494d7" id="r_a2db28f5297374cef03aaa958a92494d7"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2db28f5297374cef03aaa958a92494d7">attrbuf</a> [<a class="el" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eaf7242b947db1e5d0a412f7845cc1faf4">UBUS_ATTR_MAX</a>]</td></tr>
<tr class="separator:a2db28f5297374cef03aaa958a92494d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a369266c24eacffb87046522897a570d5" name="a369266c24eacffb87046522897a570d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a369266c24eacffb87046522897a570d5">&#9670;&#160;</a></span>_GNU_SOURCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _GNU_SOURCE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00014">14</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>

</div>
</div>
<a id="a84eb6242a3904db804faf42d8821d894" name="a84eb6242a3904db804faf42d8821d894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84eb6242a3904db804faf42d8821d894">&#9670;&#160;</a></span>STATIC_IOV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATIC_IOV</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>_var</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{ .iov_base = (<span class="keywordtype">char</span> *) &amp;(_var), .iov_len = <span class="keyword">sizeof</span>(_var) }</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00030">30</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00271">get_next_msg()</a>, and <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00126">ubus_send_msg()</a>.</p>

</div>
</div>
<a id="a4c9490be1ed97014bc0c4cc06dc6ca65" name="a4c9490be1ed97014bc0c4cc06dc6ca65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c9490be1ed97014bc0c4cc06dc6ca65">&#9670;&#160;</a></span>UBUS_MSGBUF_REDUCTION_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UBUS_MSGBUF_REDUCTION_INTERVAL&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00032">32</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00240">alloc_msg_buf()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a286d2863156bf7bb882339c5c74bc595" name="a286d2863156bf7bb882339c5c74bc595"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a286d2863156bf7bb882339c5c74bc595">&#9670;&#160;</a></span>alloc_msg_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool alloc_msg_buf </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00240">240</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  241</span>{</div>
<div class="line"><span class="lineno">  242</span>    <span class="keywordtype">void</span> *ptr;</div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordtype">int</span> buf_len = <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a0929b0dc7ad152b465afb227d25927ad">msgbuf_data_len</a>;</div>
<div class="line"><span class="lineno">  244</span>    <span class="keywordtype">int</span> rem;</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a502aa3e336810f5bc200234fa3bd6df2">msgbuf</a>.<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a53ca7e8a59532975751780cd2130a082">data</a>)</div>
<div class="line"><span class="lineno">  247</span>        buf_len = 0;</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>    rem = (len % <a class="code hl_define" href="../../d5/d79/ubusmsg_8h.html#a1914d318077b14c96e1f4ea6c0dfd60f">UBUS_MSG_CHUNK_SIZE</a>);</div>
<div class="line"><span class="lineno">  250</span>    <span class="keywordflow">if</span> (rem &gt; 0)</div>
<div class="line"><span class="lineno">  251</span>        len += <a class="code hl_define" href="../../d5/d79/ubusmsg_8h.html#a1914d318077b14c96e1f4ea6c0dfd60f">UBUS_MSG_CHUNK_SIZE</a> - rem;</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>    <span class="keywordflow">if</span> (len &lt; buf_len &amp;&amp;</div>
<div class="line"><span class="lineno">  254</span>        ++<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a4b54d7f163fb73ebefe6cf04cbb5110b">msgbuf_reduction_counter</a> &gt; <a class="code hl_define" href="#a4c9490be1ed97014bc0c4cc06dc6ca65">UBUS_MSGBUF_REDUCTION_INTERVAL</a>) {</div>
<div class="line"><span class="lineno">  255</span>        <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a4b54d7f163fb73ebefe6cf04cbb5110b">msgbuf_reduction_counter</a> = 0;</div>
<div class="line"><span class="lineno">  256</span>        buf_len = 0;</div>
<div class="line"><span class="lineno">  257</span>    }</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>    <span class="keywordflow">if</span> (len &lt;= buf_len)</div>
<div class="line"><span class="lineno">  260</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>    ptr = realloc(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a502aa3e336810f5bc200234fa3bd6df2">msgbuf</a>.<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a53ca7e8a59532975751780cd2130a082">data</a>, len);</div>
<div class="line"><span class="lineno">  263</span>    <span class="keywordflow">if</span> (!ptr)</div>
<div class="line"><span class="lineno">  264</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a502aa3e336810f5bc200234fa3bd6df2">msgbuf</a>.<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a53ca7e8a59532975751780cd2130a082">data</a> = ptr;</div>
<div class="line"><span class="lineno">  267</span>    <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a0929b0dc7ad152b465afb227d25927ad">msgbuf_data_len</a> = len;</div>
<div class="line"><span class="lineno">  268</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  269</span>}</div>
<div class="ttc" id="ahotplug-dispatch_8c_html_a7c00b3b8999b2056f226d3cc35a83845"><div class="ttname"><a href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a></div><div class="ttdeci">struct ubus_context * ctx</div><div class="ttdef"><b>Definition</b> <a href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">hotplug-dispatch.c:42</a></div></div>
<div class="ttc" id="alibubus-io_8c_html_a4c9490be1ed97014bc0c4cc06dc6ca65"><div class="ttname"><a href="#a4c9490be1ed97014bc0c4cc06dc6ca65">UBUS_MSGBUF_REDUCTION_INTERVAL</a></div><div class="ttdeci">#define UBUS_MSGBUF_REDUCTION_INTERVAL</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00032">libubus-io.c:32</a></div></div>
<div class="ttc" id="alibubus_8h_html_a0929b0dc7ad152b465afb227d25927ad"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a0929b0dc7ad152b465afb227d25927ad">ubus_context::msgbuf_data_len</a></div><div class="ttdeci">uint32_t msgbuf_data_len</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00174">libubus.h:174</a></div></div>
<div class="ttc" id="alibubus_8h_html_a4b54d7f163fb73ebefe6cf04cbb5110b"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a4b54d7f163fb73ebefe6cf04cbb5110b">ubus_context::msgbuf_reduction_counter</a></div><div class="ttdeci">int msgbuf_reduction_counter</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00175">libubus.h:175</a></div></div>
<div class="ttc" id="alibubus_8h_html_a502aa3e336810f5bc200234fa3bd6df2"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a502aa3e336810f5bc200234fa3bd6df2">ubus_context::msgbuf</a></div><div class="ttdeci">struct ubus_msghdr_buf msgbuf</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00173">libubus.h:173</a></div></div>
<div class="ttc" id="alibubus_8h_html_a53ca7e8a59532975751780cd2130a082"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a53ca7e8a59532975751780cd2130a082">ubus_msghdr_buf::data</a></div><div class="ttdeci">struct blob_attr * data</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00043">libubus.h:43</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a1914d318077b14c96e1f4ea6c0dfd60f"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a1914d318077b14c96e1f4ea6c0dfd60f">UBUS_MSG_CHUNK_SIZE</a></div><div class="ttdeci">#define UBUS_MSG_CHUNK_SIZE</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00022">ubusmsg.h:22</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00043">ubus_msghdr_buf::data</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00173">ubus_context::msgbuf</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00174">ubus_context::msgbuf_data_len</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00175">ubus_context::msgbuf_reduction_counter</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00022">UBUS_MSG_CHUNK_SIZE</a>, and <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00032">UBUS_MSGBUF_REDUCTION_INTERVAL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00271">get_next_msg()</a>.</p>

</div>
</div>
<a id="a141d1ad87ea36959b73e035bd3b3b265" name="a141d1ad87ea36959b73e035bd3b3b265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a141d1ad87ea36959b73e035bd3b3b265">&#9670;&#160;</a></span>get_next_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool get_next_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>recv_fd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00271">271</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  272</span>{</div>
<div class="line"><span class="lineno">  273</span>    <span class="keyword">struct </span>{</div>
<div class="line"><span class="lineno">  274</span>        <span class="keyword">struct </span><a class="code hl_struct" href="../../d5/d79/ubusmsg_8h.html#d2/d15/structubus__msghdr">ubus_msghdr</a> hdr;</div>
<div class="line"><span class="lineno">  275</span>        <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> <a class="code hl_variable" href="../../d8/d3c/blob_8h.html#aae7cde5b300aec19a4125e96fe2a35da">data</a>;</div>
<div class="line"><span class="lineno">  276</span>    } hdrbuf;</div>
<div class="line"><span class="lineno">  277</span>    <span class="keyword">struct </span>iovec iov = <a class="code hl_define" href="#a84eb6242a3904db804faf42d8821d894">STATIC_IOV</a>(hdrbuf);</div>
<div class="line"><span class="lineno">  278</span>    <span class="keywordtype">int</span> len;</div>
<div class="line"><span class="lineno">  279</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a>;</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>    <span class="comment">/* receive header + start attribute */</span></div>
<div class="line"><span class="lineno">  282</span>    <a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a> = <a class="code hl_function" href="#a1e4704bb3543c30c9de44cd3f2616404">recv_retry</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, &amp;iov, <span class="keyword">false</span>, recv_fd);</div>
<div class="line"><span class="lineno">  283</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a> &lt;= 0) {</div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a> &lt; 0)</div>
<div class="line"><span class="lineno">  285</span>            <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a0a2e642791b9398c2a113e8e95897a40">eof</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  288</span>    }</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>    hdrbuf.hdr.seq = <a class="code hl_define" href="../../d5/d1d/libubox_2utils_8h.html#a48f33ad7b3de0010e5c802ced48f8a7b">be16_to_cpu</a>(hdrbuf.hdr.seq);</div>
<div class="line"><span class="lineno">  291</span>    hdrbuf.hdr.peer = <a class="code hl_define" href="../../d5/d1d/libubox_2utils_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(hdrbuf.hdr.peer);</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#af89184a6a1d46c84beb995555a5f8422">ubus_validate_hdr</a>(&amp;hdrbuf.hdr))</div>
<div class="line"><span class="lineno">  294</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>    len = <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01">blob_raw_len</a>(&amp;hdrbuf.data);</div>
<div class="line"><span class="lineno">  297</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a286d2863156bf7bb882339c5c74bc595">alloc_msg_buf</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, len))</div>
<div class="line"><span class="lineno">  298</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>    memcpy(&amp;<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a502aa3e336810f5bc200234fa3bd6df2">msgbuf</a>.<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a13981d9956290426d38ec0ea85ed1d60">hdr</a>, &amp;hdrbuf.hdr, <span class="keyword">sizeof</span>(hdrbuf.hdr));</div>
<div class="line"><span class="lineno">  301</span>    memcpy(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a502aa3e336810f5bc200234fa3bd6df2">msgbuf</a>.<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a53ca7e8a59532975751780cd2130a082">data</a>, &amp;hdrbuf.<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#aae7cde5b300aec19a4125e96fe2a35da">data</a>, <span class="keyword">sizeof</span>(hdrbuf.data));</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>    iov.iov_base = (<span class="keywordtype">char</span> *)<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a502aa3e336810f5bc200234fa3bd6df2">msgbuf</a>.<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a53ca7e8a59532975751780cd2130a082">data</a> + <span class="keyword">sizeof</span>(hdrbuf.data);</div>
<div class="line"><span class="lineno">  304</span>    iov.iov_len = <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32">blob_len</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a502aa3e336810f5bc200234fa3bd6df2">msgbuf</a>.<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a53ca7e8a59532975751780cd2130a082">data</a>);</div>
<div class="line"><span class="lineno">  305</span>    <span class="keywordflow">if</span> (iov.iov_len &gt; 0 &amp;&amp;</div>
<div class="line"><span class="lineno">  306</span>        <a class="code hl_function" href="#a1e4704bb3543c30c9de44cd3f2616404">recv_retry</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, &amp;iov, <span class="keyword">true</span>, NULL) &lt;= 0)</div>
<div class="line"><span class="lineno">  307</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  310</span>}</div>
<div class="ttc" id="ablob_8h_html_a2c4753820a7472bba7b999fbba79df01"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01">blob_raw_len</a></div><div class="ttdeci">static size_t blob_raw_len(const struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00109">blob.h:109</a></div></div>
<div class="ttc" id="ablob_8h_html_a9921d2b89577d3344abbb66f24773e32"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32">blob_len</a></div><div class="ttdeci">static size_t blob_len(const struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00100">blob.h:100</a></div></div>
<div class="ttc" id="ablob_8h_html_aae7cde5b300aec19a4125e96fe2a35da"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#aae7cde5b300aec19a4125e96fe2a35da">blob_attr::data</a></div><div class="ttdeci">char data[]</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00054">blob.h:54</a></div></div>
<div class="ttc" id="ablob_8h_html_dc/dd9/structblob__attr"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a></div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00052">blob.h:52</a></div></div>
<div class="ttc" id="alibubox_2utils_8h_html_a48f33ad7b3de0010e5c802ced48f8a7b"><div class="ttname"><a href="../../d5/d1d/libubox_2utils_8h.html#a48f33ad7b3de0010e5c802ced48f8a7b">be16_to_cpu</a></div><div class="ttdeci">#define be16_to_cpu(x)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d1d/libubox_2utils_8h_source.html#l00168">utils.h:168</a></div></div>
<div class="ttc" id="alibubox_2utils_8h_html_a650ecb20996a13e0c0bc530ba83fe5dc"><div class="ttname"><a href="../../d5/d1d/libubox_2utils_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a></div><div class="ttdeci">#define be32_to_cpu(x)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d1d/libubox_2utils_8h_source.html#l00167">utils.h:167</a></div></div>
<div class="ttc" id="alibubus-io_8c_html_a1e4704bb3543c30c9de44cd3f2616404"><div class="ttname"><a href="#a1e4704bb3543c30c9de44cd3f2616404">recv_retry</a></div><div class="ttdeci">static int recv_retry(struct ubus_context *ctx, struct iovec *iov, bool wait, int *recv_fd)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00158">libubus-io.c:158</a></div></div>
<div class="ttc" id="alibubus-io_8c_html_a286d2863156bf7bb882339c5c74bc595"><div class="ttname"><a href="#a286d2863156bf7bb882339c5c74bc595">alloc_msg_buf</a></div><div class="ttdeci">static bool alloc_msg_buf(struct ubus_context *ctx, int len)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00240">libubus-io.c:240</a></div></div>
<div class="ttc" id="alibubus-io_8c_html_a84eb6242a3904db804faf42d8821d894"><div class="ttname"><a href="#a84eb6242a3904db804faf42d8821d894">STATIC_IOV</a></div><div class="ttdeci">#define STATIC_IOV(_var)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00030">libubus-io.c:30</a></div></div>
<div class="ttc" id="alibubus-io_8c_html_af89184a6a1d46c84beb995555a5f8422"><div class="ttname"><a href="#af89184a6a1d46c84beb995555a5f8422">ubus_validate_hdr</a></div><div class="ttdeci">bool ubus_validate_hdr(struct ubus_msghdr *hdr)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00224">libubus-io.c:224</a></div></div>
<div class="ttc" id="alibubus_8h_html_a13981d9956290426d38ec0ea85ed1d60"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a13981d9956290426d38ec0ea85ed1d60">ubus_msghdr_buf::hdr</a></div><div class="ttdeci">struct ubus_msghdr hdr</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00042">libubus.h:42</a></div></div>
<div class="ttc" id="alibubus_8h_html_a95c5a7ee3be99fed1bc9e25b53a282fd"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">ubus_context::sock</a></div><div class="ttdeci">struct uloop_fd sock</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00162">libubus.h:162</a></div></div>
<div class="ttc" id="arcS_8c_html_abf8f2f9d123823e95527a9d26ff031c8"><div class="ttname"><a href="../../d1/d5c/rcS_8c.html#abf8f2f9d123823e95527a9d26ff031c8">r</a></div><div class="ttdeci">static struct runqueue q r</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d5c/rcS_8c_source.html#l00036">rcS.c:36</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_d2/d15/structubus__msghdr"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#d2/d15/structubus__msghdr">ubus_msghdr</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00029">ubusmsg.h:29</a></div></div>
<div class="ttc" id="auloop_8h_html_a0a2e642791b9398c2a113e8e95897a40"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#a0a2e642791b9398c2a113e8e95897a40">uloop_fd::eof</a></div><div class="ttdeci">bool eof</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00066">uloop.h:66</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00240">alloc_msg_buf()</a>, <a class="el" href="../../d5/d1d/libubox_2utils_8h_source.html#l00168">be16_to_cpu</a>, <a class="el" href="../../d5/d1d/libubox_2utils_8h_source.html#l00167">be32_to_cpu</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00100">blob_len()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00109">blob_raw_len()</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00054">blob_attr::data</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00043">ubus_msghdr_buf::data</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00066">uloop_fd::eof</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00042">ubus_msghdr_buf::hdr</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00173">ubus_context::msgbuf</a>, <a class="el" href="../../d1/d5c/rcS_8c_source.html#l00036">r</a>, <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00158">recv_retry()</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00162">ubus_context::sock</a>, <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00030">STATIC_IOV</a>, and <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00224">ubus_validate_hdr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00312">ubus_handle_data()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d80/libubus-io_8c_a141d1ad87ea36959b73e035bd3b3b265_cgraph.png" border="0" usemap="#adc/d80/libubus-io_8c_a141d1ad87ea36959b73e035bd3b3b265_cgraph" alt=""/></div>
<map name="adc/d80/libubus-io_8c_a141d1ad87ea36959b73e035bd3b3b265_cgraph" id="adc/d80/libubus-io_8c_a141d1ad87ea36959b73e035bd3b3b265_cgraph">
<area shape="rect" title=" " alt="" coords="5,111,156,144"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a286d2863156bf7bb882339c5c74bc595" title=" " alt="" coords="223,5,375,39"/>
<area shape="poly" title=" " alt="" coords="108,108,202,56,233,43,235,48,205,61,111,112"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="822,140,920,174"/>
<area shape="poly" title=" " alt="" coords="156,114,204,109,375,106,544,115,693,129,806,144,806,150,693,135,543,120,374,111,204,114,156,119"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="632,167,774,200"/>
<area shape="poly" title=" " alt="" coords="156,124,351,128,468,136,585,150,631,160,630,165,584,155,467,142,350,134,156,129"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a1e4704bb3543c30c9de44cd3f2616404" title=" " alt="" coords="242,165,356,199"/>
<area shape="poly" title=" " alt="" coords="151,142,227,162,226,167,150,148"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#af89184a6a1d46c84beb995555a5f8422" title=" " alt="" coords="204,223,394,256"/>
<area shape="poly" title=" " alt="" coords="104,143,149,176,205,209,217,214,215,219,202,214,146,181,101,147"/>
<area shape="poly" title=" " alt="" coords="773,170,806,164,806,170,774,175"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#ad1aaffb83e802ad470cb77be9f56977c" title=" " alt="" coords="459,165,568,199"/>
<area shape="poly" title=" " alt="" coords="356,180,443,180,443,185,356,185"/>
<area shape="poly" title=" " alt="" coords="394,231,486,222,584,209,620,202,621,207,585,214,487,227,394,236"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="442,275,584,308"/>
<area shape="poly" title=" " alt="" coords="372,254,428,268,426,273,371,260"/>
<area shape="poly" title=" " alt="" coords="548,272,583,253,661,207,663,211,586,258,551,276"/>
</map>
</div>

</div>
</div>
<a id="a1e4704bb3543c30c9de44cd3f2616404" name="a1e4704bb3543c30c9de44cd3f2616404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e4704bb3543c30c9de44cd3f2616404">&#9670;&#160;</a></span>recv_retry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int recv_retry </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct iovec *</td>          <td class="paramname"><span class="paramname"><em>iov</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>wait</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>recv_fd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00158">158</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  159</span>{</div>
<div class="line"><span class="lineno">  160</span>    uint8_t fd_buf[CMSG_SPACE(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>))] = { 0 };</div>
<div class="line"><span class="lineno">  161</span>    <span class="keyword">struct </span>msghdr msghdr = { 0 };</div>
<div class="line"><span class="lineno">  162</span>    <span class="keyword">struct </span>cmsghdr *cmsg;</div>
<div class="line"><span class="lineno">  163</span>    <span class="keywordtype">int</span> total = 0;</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordtype">int</span> bytes;</div>
<div class="line"><span class="lineno">  165</span>    <span class="keywordtype">int</span> *pfd;</div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordtype">int</span> fd;</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>    fd = <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>;</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>    msghdr.msg_iov = iov,</div>
<div class="line"><span class="lineno">  171</span>    msghdr.msg_iovlen = 1,</div>
<div class="line"><span class="lineno">  172</span>    msghdr.msg_control = fd_buf;</div>
<div class="line"><span class="lineno">  173</span>    msghdr.msg_controllen = <span class="keyword">sizeof</span>(fd_buf);</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>    cmsg = CMSG_FIRSTHDR(&amp;msghdr);</div>
<div class="line"><span class="lineno">  176</span>    cmsg-&gt;cmsg_type = SCM_RIGHTS;</div>
<div class="line"><span class="lineno">  177</span>    cmsg-&gt;cmsg_level = SOL_SOCKET;</div>
<div class="line"><span class="lineno">  178</span>    cmsg-&gt;cmsg_len = CMSG_LEN(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>    pfd = (<span class="keywordtype">int</span> *) CMSG_DATA(cmsg);</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordflow">while</span> (iov-&gt;iov_len &gt; 0) {</div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">if</span> (recv_fd) {</div>
<div class="line"><span class="lineno">  184</span>            msghdr.msg_control = fd_buf;</div>
<div class="line"><span class="lineno">  185</span>            msghdr.msg_controllen = cmsg-&gt;cmsg_len;</div>
<div class="line"><span class="lineno">  186</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  187</span>            msghdr.msg_control = NULL;</div>
<div class="line"><span class="lineno">  188</span>            msghdr.msg_controllen = 0;</div>
<div class="line"><span class="lineno">  189</span>        }</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>        *pfd = -1;</div>
<div class="line"><span class="lineno">  192</span>        bytes = recvmsg(fd, &amp;msghdr, 0);</div>
<div class="line"><span class="lineno">  193</span>        <span class="keywordflow">if</span> (!bytes)</div>
<div class="line"><span class="lineno">  194</span>            <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>        <span class="keywordflow">if</span> (bytes &lt; 0) {</div>
<div class="line"><span class="lineno">  197</span>            bytes = 0;</div>
<div class="line"><span class="lineno">  198</span>            <span class="keywordflow">if</span> (errno == EINTR)</div>
<div class="line"><span class="lineno">  199</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>            <span class="keywordflow">if</span> (errno != EAGAIN)</div>
<div class="line"><span class="lineno">  202</span>                <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  203</span>        }</div>
<div class="line"><span class="lineno">  204</span>        <span class="keywordflow">if</span> (!wait &amp;&amp; !bytes)</div>
<div class="line"><span class="lineno">  205</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">if</span> (recv_fd)</div>
<div class="line"><span class="lineno">  208</span>            *recv_fd = *pfd;</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>        recv_fd = NULL;</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>        wait = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  213</span>        iov-&gt;iov_len -= bytes;</div>
<div class="line"><span class="lineno">  214</span>        iov-&gt;iov_base += bytes;</div>
<div class="line"><span class="lineno">  215</span>        total += bytes;</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>        <span class="keywordflow">if</span> (iov-&gt;iov_len &gt; 0)</div>
<div class="line"><span class="lineno">  218</span>            <a class="code hl_function" href="#ad1aaffb83e802ad470cb77be9f56977c">wait_data</a>(fd, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  219</span>    }</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>    <span class="keywordflow">return</span> total;</div>
<div class="line"><span class="lineno">  222</span>}</div>
<div class="ttc" id="alibubus-io_8c_html_ad1aaffb83e802ad470cb77be9f56977c"><div class="ttname"><a href="#ad1aaffb83e802ad470cb77be9f56977c">wait_data</a></div><div class="ttdeci">static void wait_data(int fd, bool write)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00052">libubus-io.c:52</a></div></div>
<div class="ttc" id="auloop_8h_html_ad8badf8512adcf9a8819ed088bde09cc"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">uloop_fd::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00065">uloop.h:65</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00065">uloop_fd::fd</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00162">ubus_context::sock</a>, and <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00052">wait_data()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00271">get_next_msg()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d80/libubus-io_8c_a1e4704bb3543c30c9de44cd3f2616404_cgraph.png" border="0" usemap="#adc/d80/libubus-io_8c_a1e4704bb3543c30c9de44cd3f2616404_cgraph" alt=""/></div>
<map name="adc/d80/libubus-io_8c_a1e4704bb3543c30c9de44cd3f2616404_cgraph" id="adc/d80/libubus-io_8c_a1e4704bb3543c30c9de44cd3f2616404_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,119,39"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#ad1aaffb83e802ad470cb77be9f56977c" title=" " alt="" coords="167,5,276,39"/>
<area shape="poly" title=" " alt="" coords="119,20,151,20,151,25,119,25"/>
</map>
</div>

</div>
</div>
<a id="a1181bbaadf8f66ea4f2cd4bab3285695" name="a1181bbaadf8f66ea4f2cd4bab3285695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1181bbaadf8f66ea4f2cd4bab3285695">&#9670;&#160;</a></span>ubus_auto_sub_lookup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ubus_auto_sub_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#d6/d4f/structubus__object__data">ubus_object_data</a> *</td>          <td class="paramname"><span class="paramname"><em>obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>priv</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00348">348</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  350</span>{</div>
<div class="line"><span class="lineno">  351</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../db/d55/libubus_8h.html#d4/d40/structubus__subscriber">ubus_subscriber</a> *s;</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>    <a class="code hl_define" href="../../da/d23/list_8h.html#a6b4019bb70de70adc3caddbe3a024c27">list_for_each_entry</a>(s, &amp;<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a78123b6bc97fcc5dd57e3714cfceffaf">auto_subscribers</a>, <a class="code hl_variable" href="../../db/d55/libubus_8h.html#ab8049fa40f46d1dd1b80c122add4ebfc">list</a>)</div>
<div class="line"><span class="lineno">  354</span>        <span class="keywordflow">if</span> (s-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a968b307e0c660ef309971351bc77889f">new_obj_cb</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, s, <a class="code hl_variable" href="../../db/d55/libubus_8h.html#a1916a2a9d6bbb250dcd117095698582f">obj</a>-&gt;<a class="code hl_variable" href="../../d9/d00/ubusd__obj_8h.html#a7b2a101c792bf23acc2280754c1be68d">path</a>))</div>
<div class="line"><span class="lineno">  355</span>            <a class="code hl_function" href="../../d7/d0c/libubus-sub_8c.html#a1406fcd78c0f0c52dbb0fb6ae0b16f89">ubus_subscribe</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, s, <a class="code hl_variable" href="../../db/d55/libubus_8h.html#a1916a2a9d6bbb250dcd117095698582f">obj</a>-&gt;<a class="code hl_variable" href="../../d9/d00/ubusd__obj_8h.html#a3b03583230cbb14cdff15f30d09629d2">id</a>);</div>
<div class="line"><span class="lineno">  356</span>}</div>
<div class="ttc" id="alibubus-sub_8c_html_a1406fcd78c0f0c52dbb0fb6ae0b16f89"><div class="ttname"><a href="../../d7/d0c/libubus-sub_8c.html#a1406fcd78c0f0c52dbb0fb6ae0b16f89">ubus_subscribe</a></div><div class="ttdeci">int ubus_subscribe(struct ubus_context *ctx, struct ubus_subscriber *obj, uint32_t id)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d0c/libubus-sub_8c_source.html#l00118">libubus-sub.c:118</a></div></div>
<div class="ttc" id="alibubus_8h_html_a1916a2a9d6bbb250dcd117095698582f"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a1916a2a9d6bbb250dcd117095698582f">ubus_subscriber::obj</a></div><div class="ttdeci">struct ubus_object obj</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00144">libubus.h:144</a></div></div>
<div class="ttc" id="alibubus_8h_html_a78123b6bc97fcc5dd57e3714cfceffaf"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a78123b6bc97fcc5dd57e3714cfceffaf">ubus_context::auto_subscribers</a></div><div class="ttdeci">struct list_head auto_subscribers</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00177">libubus.h:177</a></div></div>
<div class="ttc" id="alibubus_8h_html_a968b307e0c660ef309971351bc77889f"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a968b307e0c660ef309971351bc77889f">ubus_subscriber::new_obj_cb</a></div><div class="ttdeci">ubus_new_object_handler_t new_obj_cb</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00148">libubus.h:148</a></div></div>
<div class="ttc" id="alibubus_8h_html_ab8049fa40f46d1dd1b80c122add4ebfc"><div class="ttname"><a href="../../db/d55/libubus_8h.html#ab8049fa40f46d1dd1b80c122add4ebfc">ubus_subscriber::list</a></div><div class="ttdeci">struct list_head list</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00143">libubus.h:143</a></div></div>
<div class="ttc" id="alibubus_8h_html_d4/d40/structubus__subscriber"><div class="ttname"><a href="../../db/d55/libubus_8h.html#d4/d40/structubus__subscriber">ubus_subscriber</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00142">libubus.h:142</a></div></div>
<div class="ttc" id="alist_8h_html_a6b4019bb70de70adc3caddbe3a024c27"><div class="ttname"><a href="../../da/d23/list_8h.html#a6b4019bb70de70adc3caddbe3a024c27">list_for_each_entry</a></div><div class="ttdeci">#define list_for_each_entry(p, h, field)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d23/list_8h_source.html#l00132">list.h:132</a></div></div>
<div class="ttc" id="aubusd__obj_8h_html_a3b03583230cbb14cdff15f30d09629d2"><div class="ttname"><a href="../../d9/d00/ubusd__obj_8h.html#a3b03583230cbb14cdff15f30d09629d2">ubus_object::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00130">libubus.h:130</a></div></div>
<div class="ttc" id="aubusd__obj_8h_html_a7b2a101c792bf23acc2280754c1be68d"><div class="ttname"><a href="../../d9/d00/ubusd__obj_8h.html#a7b2a101c792bf23acc2280754c1be68d">ubus_object::path</a></div><div class="ttdeci">const char * path</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00132">libubus.h:132</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d55/libubus_8h_source.html#l00177">ubus_context::auto_subscribers</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00130">ubus_object::id</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00143">ubus_subscriber::list</a>, <a class="el" href="../../da/d23/list_8h_source.html#l00132">list_for_each_entry</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00148">ubus_subscriber::new_obj_cb</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00144">ubus_subscriber::obj</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00132">ubus_object::path</a>, and <a class="el" href="../../d7/d0c/libubus-sub_8c_source.html#l00118">ubus_subscribe()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00359">ubus_refresh_auto_subscribe()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d80/libubus-io_8c_a1181bbaadf8f66ea4f2cd4bab3285695_cgraph.png" border="0" usemap="#adc/d80/libubus-io_8c_a1181bbaadf8f66ea4f2cd4bab3285695_cgraph" alt=""/></div>
<map name="adc/d80/libubus-io_8c_a1181bbaadf8f66ea4f2cd4bab3285695_cgraph" id="adc/d80/libubus-io_8c_a1181bbaadf8f66ea4f2cd4bab3285695_cgraph">
<area shape="rect" title=" " alt="" coords="5,307,236,341"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#a1406fcd78c0f0c52dbb0fb6ae0b16f89" title=" " alt="" coords="284,307,450,341"/>
<area shape="poly" title=" " alt="" coords="236,321,268,321,268,326,236,326"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#a3d6a3c1e8e0504384f6da855f8f61069" title=" " alt="" coords="498,307,761,341"/>
<area shape="poly" title=" " alt="" coords="450,321,483,321,483,326,450,326"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1680,183,1819,217"/>
<area shape="poly" title=" " alt="" coords="730,304,809,292,1052,262,1293,237,1664,204,1665,209,1294,243,1053,268,810,297,731,309"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="809,554,1050,587"/>
<area shape="poly" title=" " alt="" coords="654,339,897,541,894,546,650,343"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="830,307,1029,341"/>
<area shape="poly" title=" " alt="" coords="762,321,815,321,815,326,762,326"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1919,168,2025,202"/>
<area shape="poly" title=" " alt="" coords="1820,193,1903,187,1904,192,1820,198"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1882,111,2062,145"/>
<area shape="poly" title=" " alt="" coords="1801,180,1881,153,1899,147,1901,152,1882,158,1803,185"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="2374,100,2517,134"/>
<area shape="poly" title=" " alt="" coords="2024,170,2110,153,2240,135,2359,122,2359,127,2241,140,2110,158,2025,175"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="2127,59,2282,93"/>
<area shape="poly" title=" " alt="" coords="2024,171,2061,155,2075,144,2084,133,2094,121,2109,110,2133,97,2135,101,2111,114,2097,125,2088,136,2079,148,2063,159,2026,176"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="2374,18,2517,51"/>
<area shape="poly" title=" " alt="" coords="2024,174,2043,167,2060,155,2071,142,2078,128,2082,99,2087,71,2095,57,2108,44,2138,28,2169,16,2235,4,2301,4,2361,12,2360,17,2301,10,2236,10,2170,21,2140,33,2112,49,2099,60,2092,72,2087,100,2083,130,2076,145,2064,159,2046,171,2026,179"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="2137,226,2273,259"/>
<area shape="poly" title=" " alt="" coords="2025,195,2122,220,2121,225,2024,201"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="2155,168,2254,202"/>
<area shape="poly" title=" " alt="" coords="2025,182,2140,182,2140,188,2025,188"/>
<area shape="poly" title=" " alt="" coords="2283,86,2359,100,2358,105,2282,92"/>
<area shape="poly" title=" " alt="" coords="2282,60,2358,47,2359,52,2283,65"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="2374,280,2517,314"/>
<area shape="poly" title=" " alt="" coords="2274,255,2360,275,2358,280,2272,260"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="2597,335,2739,369"/>
<area shape="poly" title=" " alt="" coords="2273,235,2333,234,2401,237,2474,247,2545,265,2596,291,2639,323,2635,327,2593,296,2543,270,2473,252,2401,242,2332,239,2273,240"/>
<area shape="poly" title=" " alt="" coords="2518,312,2583,328,2581,333,2516,317"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="2792,363,2890,397"/>
<area shape="poly" title=" " alt="" coords="2740,361,2777,367,2776,372,2739,366"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a6a067ed16631bbe3826be535287879e4" title=" " alt="" coords="1138,640,1298,674"/>
<area shape="poly" title=" " alt="" coords="977,585,1098,627,1124,634,1122,639,1097,632,975,590"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aca15427cb882afec28ce476b9e8e8b34" title=" " alt="" coords="1098,698,1338,755"/>
<area shape="poly" title=" " alt="" coords="953,586,1016,634,1099,684,1110,689,1108,694,1096,689,1013,638,950,590"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a5497c370318a5cc03dd662523915ea92" title=" " alt="" coords="1892,471,2052,505"/>
<area shape="poly" title=" " alt="" coords="969,551,1029,528,1097,511,1205,494,1315,483,1532,472,1727,473,1877,479,1877,484,1727,478,1532,477,1315,488,1205,499,1098,516,1030,534,971,556"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8af6cb580774621aef719d6923cb5072" title=" " alt="" coords="1113,583,1323,617"/>
<area shape="poly" title=" " alt="" coords="1051,580,1098,585,1098,590,1050,585"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ab53faf25fad8c6edbcd804eabeb14c6a" title=" " alt="" coords="1123,526,1313,559"/>
<area shape="poly" title=" " alt="" coords="1050,556,1108,550,1108,556,1051,561"/>
<area shape="rect" href="../../da/d23/list_8h.html#a875b53c95596d9e8df15ac54f6d24ae6" title=" " alt="" coords="1456,710,1548,743"/>
<area shape="poly" title=" " alt="" coords="1338,724,1440,724,1440,729,1338,729"/>
<area shape="rect" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d" title=" " alt="" coords="1444,646,1560,679"/>
<area shape="poly" title=" " alt="" coords="1338,697,1428,676,1429,681,1339,702"/>
<area shape="rect" href="../../da/d23/list_8h.html#a9d61a1a731a0cf44336e2ee9e45f712d" title=" " alt="" coords="1699,710,1800,743"/>
<area shape="poly" title=" " alt="" coords="1548,724,1683,724,1683,729,1548,729"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#aa0791c7960dffbb35e38a4f32001c331" title=" " alt="" coords="2110,472,2299,506"/>
<area shape="poly" title=" " alt="" coords="2052,486,2095,486,2095,491,2052,491"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a141d1ad87ea36959b73e035bd3b3b265" title=" " alt="" coords="2370,416,2521,450"/>
<area shape="poly" title=" " alt="" coords="2279,469,2354,451,2356,457,2281,474"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a95892b50f9c08ab4ada541c7c6351a65" title=" " alt="" coords="2347,531,2544,565"/>
<area shape="poly" title=" " alt="" coords="2277,504,2359,524,2358,529,2276,509"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae005e9aac16badef6a542ed7e70f4270" title=" " alt="" coords="2358,474,2533,507"/>
<area shape="poly" title=" " alt="" coords="2300,487,2343,487,2343,493,2300,492"/>
<area shape="poly" title=" " alt="" coords="2493,413,2604,372,2606,377,2495,418"/>
<area shape="poly" title=" " alt="" coords="2521,420,2776,386,2777,391,2522,426"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a286d2863156bf7bb882339c5c74bc595" title=" " alt="" coords="2592,444,2744,478"/>
<area shape="poly" title=" " alt="" coords="2522,440,2576,447,2576,452,2521,445"/>
<area shape="poly" title=" " alt="" coords="1298,615,1429,644,1428,649,1297,620"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae1cde0f50b85945cfff23be4fc1586f4" title=" " alt="" coords="1440,526,1563,559"/>
<area shape="poly" title=" " alt="" coords="1304,580,1424,555,1425,560,1305,585"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8ee872461a1786fedb0aacb2318db738" title=" " alt="" coords="1386,583,1617,617"/>
<area shape="poly" title=" " alt="" coords="1323,597,1370,597,1370,602,1323,602"/>
<area shape="rect" href="../../da/d23/list_8h.html#ae0988579c6b622299ee0f79accbf0779" title=" " alt="" coords="1702,526,1797,559"/>
<area shape="poly" title=" " alt="" coords="1564,540,1687,540,1687,545,1564,545"/>
<area shape="rect" href="../../da/d23/list_8h.html#aea85dd50b9129ddaa3e3c67ed55804e4" title=" " alt="" coords="1665,416,1834,450"/>
<area shape="poly" title=" " alt="" coords="1541,523,1694,454,1697,459,1543,528"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a7da0a155290c1fd4d3b5911ced43d5a2" title=" " alt="" coords="1110,307,1326,341"/>
<area shape="poly" title=" " alt="" coords="1029,321,1094,321,1094,326,1029,326"/>
<area shape="poly" title=" " alt="" coords="1302,304,1386,292,1524,282,1665,277,1940,275,2182,281,2359,289,2359,294,2182,286,1940,280,1665,282,1524,288,1386,297,1302,309"/>
<area shape="poly" title=" " alt="" coords="1304,339,1651,410,1649,415,1303,344"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a3e8e6d098f2808fa135bfefa3c0e81f8" title=" " alt="" coords="1417,307,1587,341"/>
<area shape="poly" title=" " alt="" coords="1326,321,1401,321,1401,326,1326,326"/>
<area shape="poly" title=" " alt="" coords="1536,304,1699,222,1701,226,1538,309"/>
<area shape="poly" title=" " alt="" coords="1588,338,1666,350,1818,370,1884,374,1971,376,2206,376,2408,369,2582,357,2582,362,2409,375,2206,381,1970,381,1884,380,1817,375,1665,356,1587,343"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a9a256a75cd053ed5d3443060e0a19a3f" title=" " alt="" coords="1684,307,1815,341"/>
<area shape="poly" title=" " alt="" coords="1587,321,1668,321,1668,326,1587,326"/>
</map>
</div>

</div>
</div>
<a id="aa0791c7960dffbb35e38a4f32001c331" name="aa0791c7960dffbb35e38a4f32001c331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0791c7960dffbb35e38a4f32001c331">&#9670;&#160;</a></span>ubus_handle_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d5/d1d/libubox_2utils_8h.html#a40f0fecd341aae3690f0dded986e423a">__hidden</a> ubus_handle_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d56/uloop_8h.html#db/d9e/structuloop__fd">uloop_fd</a> *</td>          <td class="paramname"><span class="paramname"><em>u</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>events</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00312">312</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  313</span>{</div>
<div class="line"><span class="lineno">  314</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a> = <a class="code hl_define" href="../../da/d23/list_8h.html#af8c317a42292b61c93aae91e59118a46">container_of</a>(u, <span class="keyword">struct</span> <a class="code hl_struct" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a>, <a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>);</div>
<div class="line"><span class="lineno">  315</span>    <span class="keywordtype">int</span> recv_fd = -1;</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a05cb7b02f05a8bb3f67b1812b13d1bf6">stack_depth</a>)</div>
<div class="line"><span class="lineno">  319</span>            <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a3ab068f8bcf0e831bd4d349befe55343">pending_timer</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a7b331d0a02bb53b37ae38716956c97bd">cb</a>(&amp;<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a3ab068f8bcf0e831bd4d349befe55343">pending_timer</a>);</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a141d1ad87ea36959b73e035bd3b3b265">get_next_msg</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, &amp;recv_fd))</div>
<div class="line"><span class="lineno">  322</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  323</span>        <a class="code hl_function" href="../../dc/d26/libubus-internal_8h.html#a4ccbe0402b209819107f90c3433b2eb0">ubus_process_msg</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, &amp;<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a502aa3e336810f5bc200234fa3bd6df2">msgbuf</a>, recv_fd);</div>
<div class="line"><span class="lineno">  324</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d1/d08/uloop_8c.html#ae005e9aac16badef6a542ed7e70f4270">uloop_cancelling</a>() || <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a57d5f3d3f1382b70a45e320a9eb24deb">cancel_poll</a>)</div>
<div class="line"><span class="lineno">  325</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  326</span>    }</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a05cb7b02f05a8bb3f67b1812b13d1bf6">stack_depth</a>)</div>
<div class="line"><span class="lineno">  329</span>        <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a3ab068f8bcf0e831bd4d349befe55343">pending_timer</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a7b331d0a02bb53b37ae38716956c97bd">cb</a>(&amp;<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a3ab068f8bcf0e831bd4d349befe55343">pending_timer</a>);</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>    <span class="keywordflow">if</span> (u-&gt;<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a0a2e642791b9398c2a113e8e95897a40">eof</a>)</div>
<div class="line"><span class="lineno">  332</span>        <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a5274257ef8245c23b253998614491950">connection_lost</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>);</div>
<div class="line"><span class="lineno">  333</span>}</div>
<div class="ttc" id="alibubus-internal_8h_html_a4ccbe0402b209819107f90c3433b2eb0"><div class="ttname"><a href="../../dc/d26/libubus-internal_8h.html#a4ccbe0402b209819107f90c3433b2eb0">ubus_process_msg</a></div><div class="ttdeci">void ubus_process_msg(struct ubus_context *ctx, struct ubus_msghdr_buf *buf, int fd)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/db9/libubus_8c_source.html#l00093">libubus.c:93</a></div></div>
<div class="ttc" id="alibubus-io_8c_html_a141d1ad87ea36959b73e035bd3b3b265"><div class="ttname"><a href="#a141d1ad87ea36959b73e035bd3b3b265">get_next_msg</a></div><div class="ttdeci">static bool get_next_msg(struct ubus_context *ctx, int *recv_fd)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00271">libubus-io.c:271</a></div></div>
<div class="ttc" id="alibubus_8h_html_a05cb7b02f05a8bb3f67b1812b13d1bf6"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a05cb7b02f05a8bb3f67b1812b13d1bf6">ubus_context::stack_depth</a></div><div class="ttdeci">int stack_depth</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00168">libubus.h:168</a></div></div>
<div class="ttc" id="alibubus_8h_html_a3ab068f8bcf0e831bd4d349befe55343"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a3ab068f8bcf0e831bd4d349befe55343">ubus_context::pending_timer</a></div><div class="ttdeci">struct uloop_timeout pending_timer</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00163">libubus.h:163</a></div></div>
<div class="ttc" id="alibubus_8h_html_a5274257ef8245c23b253998614491950"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a5274257ef8245c23b253998614491950">ubus_context::connection_lost</a></div><div class="ttdeci">void(* connection_lost)(struct ubus_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00170">libubus.h:170</a></div></div>
<div class="ttc" id="alibubus_8h_html_a57d5f3d3f1382b70a45e320a9eb24deb"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a57d5f3d3f1382b70a45e320a9eb24deb">ubus_context::cancel_poll</a></div><div class="ttdeci">bool cancel_poll</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00167">libubus.h:167</a></div></div>
<div class="ttc" id="alibubus_8h_html_df/d18/structubus__context"><div class="ttname"><a href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00157">libubus.h:157</a></div></div>
<div class="ttc" id="alist_8h_html_af8c317a42292b61c93aae91e59118a46"><div class="ttname"><a href="../../da/d23/list_8h.html#af8c317a42292b61c93aae91e59118a46">container_of</a></div><div class="ttdeci">#define container_of(ptr, type, member)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d23/list_8h_source.html#l00038">list.h:38</a></div></div>
<div class="ttc" id="auloop_8c_html_ae005e9aac16badef6a542ed7e70f4270"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#ae005e9aac16badef6a542ed7e70f4270">uloop_cancelling</a></div><div class="ttdeci">bool uloop_cancelling(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00653">uloop.c:653</a></div></div>
<div class="ttc" id="auloop_8h_html_a7b331d0a02bb53b37ae38716956c97bd"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#a7b331d0a02bb53b37ae38716956c97bd">uloop_timeout::cb</a></div><div class="ttdeci">uloop_timeout_handler cb</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00077">uloop.h:77</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d55/libubus_8h_source.html#l00167">ubus_context::cancel_poll</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00077">uloop_timeout::cb</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00170">ubus_context::connection_lost</a>, <a class="el" href="../../da/d23/list_8h_source.html#l00038">container_of</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00066">uloop_fd::eof</a>, <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00271">get_next_msg()</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00173">ubus_context::msgbuf</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00163">ubus_context::pending_timer</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00162">ubus_context::sock</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00168">ubus_context::stack_depth</a>, <a class="el" href="../../d4/db9/libubus_8c_source.html#l00093">ubus_process_msg()</a>, and <a class="el" href="../../d1/d08/uloop_8c_source.html#l00653">uloop_cancelling()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/db9/libubus_8c_source.html#l00284">ubus_connect_ctx()</a>, and <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00335">ubus_poll_data()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d80/libubus-io_8c_aa0791c7960dffbb35e38a4f32001c331_cgraph.png" border="0" usemap="#adc/d80/libubus-io_8c_aa0791c7960dffbb35e38a4f32001c331_cgraph" alt=""/></div>
<map name="adc/d80/libubus-io_8c_aa0791c7960dffbb35e38a4f32001c331_cgraph" id="adc/d80/libubus-io_8c_aa0791c7960dffbb35e38a4f32001c331_cgraph">
<area shape="rect" title=" " alt="" coords="5,656,195,690"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a141d1ad87ea36959b73e035bd3b3b265" title=" " alt="" coords="1131,141,1281,175"/>
<area shape="poly" title=" " alt="" coords="138,653,1152,180,1154,184,140,658"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a95892b50f9c08ab4ada541c7c6351a65" title=" " alt="" coords="243,656,439,690"/>
<area shape="poly" title=" " alt="" coords="195,670,227,670,227,676,195,676"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae005e9aac16badef6a542ed7e70f4270" title=" " alt="" coords="254,713,428,747"/>
<area shape="poly" title=" " alt="" coords="174,688,253,706,251,712,173,693"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a286d2863156bf7bb882339c5c74bc595" title=" " alt="" coords="1437,5,1589,39"/>
<area shape="poly" title=" " alt="" coords="1233,139,1302,98,1388,56,1427,41,1429,46,1390,61,1304,103,1235,143"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="2159,812,2257,846"/>
<area shape="poly" title=" " alt="" coords="1250,138,1315,117,1389,100,1508,83,1662,68,1741,66,1814,69,1876,80,1902,89,1923,100,1967,134,2006,173,2040,216,2071,263,2097,312,2120,363,2156,466,2181,568,2196,661,2209,796,2203,796,2191,662,2175,569,2151,468,2115,365,2092,314,2066,265,2036,219,2002,177,1963,138,1920,104,1900,93,1875,85,1813,74,1741,71,1663,73,1508,88,1389,105,1316,122,1252,143"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1970,812,2111,846"/>
<area shape="poly" title=" " alt="" coords="1282,158,1439,167,1631,187,1725,203,1809,223,1877,249,1903,264,1924,280,1949,320,1972,379,1990,450,2006,528,2028,682,2039,797,2034,797,2022,683,2000,529,1985,451,1966,380,1945,323,1920,284,1900,268,1875,254,1807,228,1723,208,1630,192,1439,172,1281,163"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a1e4704bb3543c30c9de44cd3f2616404" title=" " alt="" coords="1457,115,1570,148"/>
<area shape="poly" title=" " alt="" coords="1281,149,1441,135,1441,140,1282,154"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#af89184a6a1d46c84beb995555a5f8422" title=" " alt="" coords="1418,224,1608,258"/>
<area shape="poly" title=" " alt="" coords="1272,173,1434,217,1433,222,1271,178"/>
<area shape="poly" title=" " alt="" coords="2111,826,2143,826,2143,832,2111,832"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#ad1aaffb83e802ad470cb77be9f56977c" title=" " alt="" coords="1749,115,1858,148"/>
<area shape="poly" title=" " alt="" coords="1570,129,1734,129,1734,134,1570,134"/>
<area shape="poly" title=" " alt="" coords="1610,252,1639,267,1656,284,1665,303,1672,321,1687,339,1719,361,1749,374,1808,386,1837,391,1866,400,1895,417,1924,443,1955,485,1981,532,2000,582,2015,632,2034,725,2041,796,2035,796,2028,726,2010,633,1995,584,1976,535,1951,488,1920,447,1892,421,1864,405,1836,396,1807,391,1748,379,1716,365,1684,343,1668,324,1660,305,1652,287,1636,271,1608,257"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="1732,295,1875,328"/>
<area shape="poly" title=" " alt="" coords="1593,256,1638,266,1723,288,1721,293,1637,271,1592,261"/>
<area shape="poly" title=" " alt="" coords="1852,327,1890,349,1924,380,1957,433,1983,490,2003,549,2018,608,2035,716,2041,796,2036,796,2030,717,2013,609,1998,550,1978,492,1952,435,1920,384,1887,353,1849,331"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a5c7329da1b8abd537d9115a3433e3854" title=" " alt="" coords="780,483,1013,516"/>
<area shape="poly" title=" " alt="" coords="397,653,825,519,826,524,399,658"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a694743280c975a0104f9544d355bd492" title=" " alt="" coords="487,748,722,782"/>
<area shape="poly" title=" " alt="" coords="406,688,440,698,549,739,547,744,438,703,405,693"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a726ab09ae98c9aac61ce08ab97501cd3" title=" " alt="" coords="513,1159,696,1192"/>
<area shape="poly" title=" " alt="" coords="426,688,441,699,457,724,476,768,521,896,597,1143,592,1145,516,898,471,770,452,726,437,703,423,692"/>
<area shape="poly" title=" " alt="" coords="937,480,1017,452,1068,440,1122,430,1179,427,1236,430,1291,443,1342,468,1356,479,1364,492,1370,520,1374,547,1380,561,1391,574,1434,605,1495,637,1570,670,1652,703,1822,761,1964,805,1963,810,1821,766,1651,708,1568,675,1493,642,1431,609,1387,577,1376,563,1369,549,1365,521,1359,494,1352,483,1340,472,1290,448,1236,435,1179,432,1123,436,1069,445,1019,457,939,485"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a1e6079c1ffa0e8f05ca64a51d7332919" title=" " alt="" coords="1441,716,1586,750"/>
<area shape="poly" title=" " alt="" coords="1002,514,1206,551,1293,570,1342,584,1373,604,1411,635,1485,703,1482,707,1407,639,1369,608,1340,589,1292,575,1205,557,1002,520"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="1425,867,1602,900"/>
<area shape="poly" title=" " alt="" coords="927,514,991,550,1071,584,1112,593,1149,595,1214,590,1245,589,1276,593,1308,605,1343,628,1358,644,1367,659,1373,691,1377,724,1382,742,1391,761,1434,813,1479,855,1475,859,1430,817,1387,764,1377,744,1371,725,1368,692,1362,661,1353,647,1339,632,1306,610,1275,598,1245,595,1214,596,1149,601,1111,598,1070,589,989,555,924,519"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#aa7f42f2a9db5b9c256a45de4a54a7ecb" title=" " alt="" coords="1098,316,1314,350"/>
<area shape="poly" title=" " alt="" coords="912,480,976,420,1021,387,1069,358,1083,353,1085,358,1072,363,1024,391,980,424,915,484"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a060158036d4da29642eaed221a561ae5" title=" " alt="" coords="1102,373,1310,407"/>
<area shape="poly" title=" " alt="" coords="934,480,997,452,1070,424,1117,409,1119,414,1072,429,999,457,936,485"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#af44558372b2986540507bf56bbc0e0a8" title=" " alt="" coords="1071,483,1341,516"/>
<area shape="poly" title=" " alt="" coords="1014,497,1055,497,1055,502,1014,502"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a9a668371aa63dfedae931f7ac76de45d" title=" " alt="" coords="1692,867,1915,900"/>
<area shape="poly" title=" " alt="" coords="1602,881,1677,881,1677,886,1602,886"/>
<area shape="poly" title=" " alt="" coords="1879,863,1954,846,1955,851,1880,869"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1458,529,1569,563"/>
<area shape="poly" title=" " alt="" coords="1316,343,1343,359,1355,371,1363,384,1370,410,1375,437,1391,465,1425,495,1462,519,1459,524,1421,499,1387,468,1370,439,1365,412,1358,386,1351,375,1339,363,1313,348"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a8c7f7a7dd12329a27d64b4b9c49b8672" title=" " alt="" coords="1441,420,1586,454"/>
<area shape="poly" title=" " alt="" coords="1316,347,1342,359,1358,370,1367,382,1376,394,1390,405,1426,420,1424,425,1388,410,1372,398,1363,386,1354,374,1340,363,1314,352"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603" title=" " alt="" coords="1412,281,1615,315"/>
<area shape="poly" title=" " alt="" coords="1314,318,1396,309,1396,314,1315,323"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a08d851dae97200fe16233b21dc4c38d2" title=" " alt="" coords="1389,339,1637,396"/>
<area shape="poly" title=" " alt="" coords="1315,342,1374,349,1373,354,1314,348"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a32b9338e87ff904d1fc867f2610da6aa" title=" " alt="" coords="1737,457,1870,491"/>
<area shape="poly" title=" " alt="" coords="1587,444,1722,461,1721,466,1586,449"/>
<area shape="poly" title=" " alt="" coords="1295,405,1342,424,1357,434,1366,446,1376,456,1390,464,1432,477,1476,486,1564,494,1649,492,1721,485,1722,491,1649,498,1564,499,1475,491,1431,482,1388,469,1372,460,1362,449,1353,438,1340,429,1293,410"/>
<area shape="poly" title=" " alt="" coords="1309,515,1343,533,1361,554,1370,574,1377,595,1391,618,1435,665,1479,704,1476,708,1431,669,1387,621,1373,597,1365,576,1357,556,1339,538,1306,519"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a69f3b0b95c5310d21a18214662a9a0f4" title=" " alt="" coords="801,643,992,676"/>
<area shape="poly" title=" " alt="" coords="653,745,832,680,834,685,655,750"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ad1560c16d4a14458fe8392ce0d7605f6" title=" " alt="" coords="792,855,1001,912"/>
<area shape="poly" title=" " alt="" coords="649,780,812,846,810,851,647,785"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a0e43a4d5a6872ad57fdbec2d8adcb0f9" title=" " alt="" coords="1685,1077,1922,1111"/>
<area shape="poly" title=" " alt="" coords="622,781,683,847,726,886,772,921,850,969,914,1000,982,1023,1071,1045,1150,1061,1230,1073,1392,1089,1543,1095,1670,1096,1670,1101,1543,1101,1392,1094,1230,1078,1149,1066,1070,1050,981,1028,912,1005,847,974,769,926,722,890,680,851,618,784"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a1c2ac477fb2a0663ee55d41ebe732ba0" title=" " alt="" coords="770,748,1023,782"/>
<area shape="poly" title=" " alt="" coords="723,762,755,762,755,768,723,768"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ae48137762c4476d0ae29fdd76b3c2b1e" title=" " alt="" coords="1106,643,1306,676"/>
<area shape="poly" title=" " alt="" coords="993,657,1091,657,1091,662,993,662"/>
<area shape="poly" title=" " alt="" coords="923,911,986,978,1027,1014,1072,1045,1187,1114,1235,1140,1281,1161,1329,1177,1381,1188,1441,1195,1512,1197,1805,1197,1841,1194,1876,1186,1910,1173,1942,1157,2002,1113,2055,1061,2101,1004,2139,949,2190,858,2195,861,2144,951,2105,1008,2059,1065,2005,1117,1945,1161,1912,1178,1878,1191,1842,1199,1805,1202,1512,1202,1440,1200,1380,1194,1327,1182,1279,1166,1232,1145,1184,1119,1069,1050,1024,1018,983,981,919,914"/>
<area shape="poly" title=" " alt="" coords="924,910,951,938,986,969,1027,998,1072,1020,1111,1031,1144,1038,1203,1039,1264,1030,1341,1020,1508,1007,1638,994,1700,984,1765,967,1837,944,1921,910,1968,884,2007,854,2010,858,1970,889,1923,915,1839,949,1767,973,1701,989,1639,1000,1508,1012,1341,1025,1265,1035,1204,1044,1144,1043,1109,1037,1070,1025,1024,1003,983,974,947,942,920,914"/>
<area shape="poly" title=" " alt="" coords="1002,901,1071,910,1206,918,1341,910,1412,901,1412,906,1341,915,1206,923,1070,915,1001,907"/>
<area shape="poly" title=" " alt="" coords="945,852,1004,822,1070,794,1111,783,1147,778,1210,777,1239,776,1270,772,1303,762,1340,744,1373,716,1414,670,1488,574,1493,577,1418,673,1377,719,1342,748,1305,767,1271,777,1240,781,1210,782,1147,784,1112,789,1072,799,1006,827,947,857"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6b6c429265d86411d05951d2fae7289a" title=" " alt="" coords="1119,976,1293,1010"/>
<area shape="poly" title=" " alt="" coords="961,910,1072,954,1119,969,1117,974,1070,959,959,915"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ab23359a874c401f50b4a88eb154924bc" title=" " alt="" coords="1127,809,1285,843"/>
<area shape="poly" title=" " alt="" coords="1001,862,1112,841,1113,846,1002,867"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a68db1382ca9d80f68cd5b8173bb79699" title=" " alt="" coords="1120,867,1292,900"/>
<area shape="poly" title=" " alt="" coords="1001,881,1104,881,1104,886,1001,886"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8af6cb580774621aef719d6923cb5072" title=" " alt="" coords="1101,700,1311,734"/>
<area shape="poly" title=" " alt="" coords="939,852,1021,792,1044,770,1069,751,1101,737,1104,742,1072,755,1047,774,1024,796,942,857"/>
<area shape="poly" title=" " alt="" coords="1274,806,1340,788,1447,753,1449,758,1342,793,1276,811"/>
<area shape="poly" title=" " alt="" coords="1292,865,1389,852,1545,839,1700,832,1954,826,1954,832,1700,837,1545,844,1389,857,1293,870"/>
<area shape="poly" title=" " alt="" coords="1292,870,1340,853,1354,843,1364,833,1387,808,1466,756,1469,760,1391,812,1368,836,1358,847,1342,858,1293,876"/>
<area shape="poly" title=" " alt="" coords="1292,881,1409,881,1409,886,1292,886"/>
<area shape="poly" title=" " alt="" coords="1889,1075,1920,1056,1942,1035,1961,1010,1993,957,2015,904,2029,860,2034,861,2020,906,1997,959,1966,1013,1946,1038,1923,1060,1891,1079"/>
<area shape="poly" title=" " alt="" coords="926,780,991,817,1072,853,1105,863,1104,868,1070,858,989,822,924,784"/>
<area shape="poly" title=" " alt="" coords="1009,745,1085,733,1086,738,1010,750"/>
<area shape="poly" title=" " alt="" coords="697,1166,927,1153,1204,1146,1515,1146,1578,1149,1634,1157,1731,1173,1776,1176,1821,1170,1868,1153,1920,1121,1936,1104,1953,1077,1984,1005,2010,926,2028,860,2033,862,2015,927,1989,1007,1957,1080,1940,1107,1923,1126,1871,1158,1822,1175,1776,1181,1731,1179,1634,1162,1578,1155,1514,1151,1205,1151,927,1159,697,1172"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="832,1244,961,1278"/>
<area shape="poly" title=" " alt="" coords="652,1190,771,1230,817,1242,816,1247,770,1235,651,1196"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#aeae1856255dccd537fd19cdda1cba346" title=" " alt="" coords="802,1187,991,1220"/>
<area shape="poly" title=" " alt="" coords="697,1182,786,1190,786,1196,696,1187"/>
</map>
</div>

</div>
</div>
<a id="a744f40f02d6005e23b279535c046aaf5" name="a744f40f02d6005e23b279535c046aaf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a744f40f02d6005e23b279535c046aaf5">&#9670;&#160;</a></span>ubus_parse_msg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d1d/libubox_2utils_8h.html#a40f0fecd341aae3690f0dded986e423a">__hidden</a> struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> ** ubus_parse_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00046">46</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   47</span>{</div>
<div class="line"><span class="lineno">   48</span>    <a class="code hl_function" href="../../d4/da0/blob_8c.html#a9a668371aa63dfedae931f7ac76de45d">blob_parse_untrusted</a>(msg, len, <a class="code hl_variable" href="#a2db28f5297374cef03aaa958a92494d7">attrbuf</a>, <a class="code hl_variable" href="#a1e504d18c2a5be244acca4d57941e6ab">ubus_policy</a>, <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eaf7242b947db1e5d0a412f7845cc1faf4">UBUS_ATTR_MAX</a>);</div>
<div class="line"><span class="lineno">   49</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="#a2db28f5297374cef03aaa958a92494d7">attrbuf</a>;</div>
<div class="line"><span class="lineno">   50</span>}</div>
<div class="ttc" id="ablob_8c_html_a9a668371aa63dfedae931f7ac76de45d"><div class="ttname"><a href="../../d4/da0/blob_8c.html#a9a668371aa63dfedae931f7ac76de45d">blob_parse_untrusted</a></div><div class="ttdeci">int blob_parse_untrusted(struct blob_attr *attr, size_t attr_len, struct blob_attr **data, const struct blob_attr_info *info, int max)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/da0/blob_8c_source.html#l00272">blob.c:272</a></div></div>
<div class="ttc" id="alibubus-io_8c_html_a1e504d18c2a5be244acca4d57941e6ab"><div class="ttname"><a href="#a1e504d18c2a5be244acca4d57941e6ab">ubus_policy</a></div><div class="ttdeci">static const struct blob_attr_info ubus_policy[UBUS_ATTR_MAX]</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00034">libubus-io.c:34</a></div></div>
<div class="ttc" id="alibubus-io_8c_html_a2db28f5297374cef03aaa958a92494d7"><div class="ttname"><a href="#a2db28f5297374cef03aaa958a92494d7">attrbuf</a></div><div class="ttdeci">static struct blob_attr * attrbuf[UBUS_ATTR_MAX]</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00044">libubus-io.c:44</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_adfb314e0974e85af94acda6d0c0d1e7eaf7242b947db1e5d0a412f7845cc1faf4"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eaf7242b947db1e5d0a412f7845cc1faf4">UBUS_ATTR_MAX</a></div><div class="ttdeci">@ UBUS_ATTR_MAX</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00103">ubusmsg.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5497c370318a5cc03dd662523915ea92" name="a5497c370318a5cc03dd662523915ea92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5497c370318a5cc03dd662523915ea92">&#9670;&#160;</a></span>ubus_poll_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d5/d1d/libubox_2utils_8h.html#a40f0fecd341aae3690f0dded986e423a">__hidden</a> ubus_poll_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00335">335</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  336</span>{</div>
<div class="line"><span class="lineno">  337</span>    <span class="keyword">struct </span>pollfd pfd = {</div>
<div class="line"><span class="lineno">  338</span>        .fd = <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>,</div>
<div class="line"><span class="lineno">  339</span>        .events = POLLIN | POLLERR,</div>
<div class="line"><span class="lineno">  340</span>    };</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>    <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a57d5f3d3f1382b70a45e320a9eb24deb">cancel_poll</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  343</span>    poll(&amp;pfd, 1, <a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> ? <a class="code hl_variable" href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> : -1);</div>
<div class="line"><span class="lineno">  344</span>    <a class="code hl_function" href="#aa0791c7960dffbb35e38a4f32001c331">ubus_handle_data</a>(&amp;<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>, <a class="code hl_define" href="../../dc/d56/uloop_8h.html#ac20cd5fed660ef784791db47283d9ebf">ULOOP_READ</a>);</div>
<div class="line"><span class="lineno">  345</span>}</div>
<div class="ttc" id="alibubus-io_8c_html_aa0791c7960dffbb35e38a4f32001c331"><div class="ttname"><a href="#aa0791c7960dffbb35e38a4f32001c331">ubus_handle_data</a></div><div class="ttdeci">void __hidden ubus_handle_data(struct uloop_fd *u, unsigned int events)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00312">libubus-io.c:312</a></div></div>
<div class="ttc" id="aprocd_2ubus_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../de/d89/procd_2ubus_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition</b> <a href="../../de/d89/procd_2ubus_8c_source.html#l00025">ubus.c:25</a></div></div>
<div class="ttc" id="auloop_8h_html_ac20cd5fed660ef784791db47283d9ebf"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#ac20cd5fed660ef784791db47283d9ebf">ULOOP_READ</a></div><div class="ttdeci">#define ULOOP_READ</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00047">uloop.h:47</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d55/libubus_8h_source.html#l00167">ubus_context::cancel_poll</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00065">uloop_fd::fd</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00162">ubus_context::sock</a>, <a class="el" href="../../de/d89/procd_2ubus_8c_source.html#l00025">timeout</a>, <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00312">ubus_handle_data()</a>, and <a class="el" href="../../dc/d56/uloop_8h_source.html#l00047">ULOOP_READ</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/de5/libubus-req_8c_source.html#l00140">ubus_complete_request()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d80/libubus-io_8c_a5497c370318a5cc03dd662523915ea92_cgraph.png" border="0" usemap="#adc/d80/libubus-io_8c_a5497c370318a5cc03dd662523915ea92_cgraph" alt=""/></div>
<map name="adc/d80/libubus-io_8c_a5497c370318a5cc03dd662523915ea92_cgraph" id="adc/d80/libubus-io_8c_a5497c370318a5cc03dd662523915ea92_cgraph">
<area shape="rect" title=" " alt="" coords="5,359,165,393"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#aa0791c7960dffbb35e38a4f32001c331" title=" " alt="" coords="213,359,402,393"/>
<area shape="poly" title=" " alt="" coords="165,374,197,374,197,379,165,379"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a141d1ad87ea36959b73e035bd3b3b265" title=" " alt="" coords="1338,121,1488,154"/>
<area shape="poly" title=" " alt="" coords="348,356,455,313,609,257,789,202,884,178,977,159,1069,146,1161,139,1322,134,1322,139,1161,144,1069,152,978,164,885,183,791,207,611,262,457,318,350,361"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a95892b50f9c08ab4ada541c7c6351a65" title=" " alt="" coords="450,359,646,393"/>
<area shape="poly" title=" " alt="" coords="402,374,435,374,435,379,402,379"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#ae005e9aac16badef6a542ed7e70f4270" title=" " alt="" coords="461,417,635,450"/>
<area shape="poly" title=" " alt="" coords="381,391,460,410,459,415,380,396"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a286d2863156bf7bb882339c5c74bc595" title=" " alt="" coords="1644,63,1797,97"/>
<area shape="poly" title=" " alt="" coords="1488,121,1629,94,1630,100,1489,126"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="2366,642,2465,676"/>
<area shape="poly" title=" " alt="" coords="1440,118,1508,80,1551,62,1596,48,1750,15,1817,5,1879,3,1939,11,1999,29,2062,60,2131,106,2194,164,2248,232,2294,306,2331,382,2361,456,2383,524,2410,626,2405,628,2378,525,2356,458,2326,384,2289,309,2244,235,2190,168,2127,110,2060,65,1997,34,1938,16,1878,9,1817,11,1751,20,1597,53,1553,67,1510,85,1442,123"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="2177,642,2318,676"/>
<area shape="poly" title=" " alt="" coords="1489,148,1597,164,1649,168,1717,168,1873,166,1952,169,2025,177,2086,191,2111,202,2131,216,2154,245,2174,290,2192,346,2208,407,2231,531,2245,627,2240,627,2226,532,2203,408,2187,347,2169,292,2149,248,2127,219,2108,207,2084,196,2024,182,1952,174,1873,172,1717,173,1649,173,1596,170,1488,153"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a1e4704bb3543c30c9de44cd3f2616404" title=" " alt="" coords="1664,121,1777,154"/>
<area shape="poly" title=" " alt="" coords="1489,135,1648,135,1648,140,1489,140"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#af89184a6a1d46c84beb995555a5f8422" title=" " alt="" coords="1625,230,1816,264"/>
<area shape="poly" title=" " alt="" coords="1455,153,1597,208,1642,223,1640,228,1595,213,1454,157"/>
<area shape="poly" title=" " alt="" coords="2319,656,2351,656,2351,662,2319,662"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#ad1aaffb83e802ad470cb77be9f56977c" title=" " alt="" coords="1956,121,2066,154"/>
<area shape="poly" title=" " alt="" coords="1778,135,1941,135,1941,140,1778,140"/>
<area shape="poly" title=" " alt="" coords="1815,262,2012,301,2092,319,2130,331,2161,364,2186,401,2206,442,2221,483,2239,563,2247,626,2242,627,2234,564,2216,485,2201,444,2181,404,2157,367,2128,336,2091,324,2011,306,1814,267"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="1940,230,2082,264"/>
<area shape="poly" title=" " alt="" coords="1816,244,1924,244,1924,250,1816,250"/>
<area shape="poly" title=" " alt="" coords="2083,254,2109,265,2131,281,2164,321,2190,366,2210,414,2225,463,2243,555,2248,626,2243,626,2237,556,2220,464,2205,416,2185,368,2159,324,2127,285,2106,269,2081,259"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a5c7329da1b8abd537d9115a3433e3854" title=" " alt="" coords="987,583,1221,617"/>
<area shape="poly" title=" " alt="" coords="615,391,647,402,763,446,876,494,1054,574,1052,579,874,498,761,451,645,407,613,396"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a694743280c975a0104f9544d355bd492" title=" " alt="" coords="694,925,930,958"/>
<area shape="poly" title=" " alt="" coords="634,392,648,402,665,431,685,483,731,629,805,909,800,911,726,631,680,484,660,433,644,406,631,396"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a726ab09ae98c9aac61ce08ab97501cd3" title=" " alt="" coords="720,258,904,292"/>
<area shape="poly" title=" " alt="" coords="593,356,751,295,753,300,595,361"/>
<area shape="poly" title=" " alt="" coords="1221,606,1596,631,2161,654,2161,659,1596,636,1221,612"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a1e6079c1ffa0e8f05ca64a51d7332919" title=" " alt="" coords="1648,709,1793,742"/>
<area shape="poly" title=" " alt="" coords="1222,614,1378,639,1549,674,1651,701,1649,706,1548,679,1377,645,1221,619"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="1632,789,1809,822"/>
<area shape="poly" title=" " alt="" coords="1123,616,1188,675,1231,706,1279,732,1327,744,1414,759,1617,789,1616,794,1413,765,1326,750,1277,737,1228,711,1184,679,1120,620"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#aa7f42f2a9db5b9c256a45de4a54a7ecb" title=" " alt="" coords="1305,421,1521,454"/>
<area shape="poly" title=" " alt="" coords="1120,581,1185,523,1229,490,1277,463,1291,457,1293,462,1279,468,1232,495,1188,527,1123,585"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a060158036d4da29642eaed221a561ae5" title=" " alt="" coords="1309,478,1517,512"/>
<area shape="poly" title=" " alt="" coords="1144,580,1277,528,1325,514,1327,519,1279,533,1146,585"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#af44558372b2986540507bf56bbc0e0a8" title=" " alt="" coords="1278,689,1548,722"/>
<area shape="poly" title=" " alt="" coords="1146,615,1279,667,1327,682,1325,687,1277,672,1144,620"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a9a668371aa63dfedae931f7ac76de45d" title=" " alt="" coords="1900,743,2122,777"/>
<area shape="poly" title=" " alt="" coords="1809,789,1884,777,1885,783,1810,794"/>
<area shape="poly" title=" " alt="" coords="2051,740,2191,680,2193,685,2053,745"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1665,587,1776,621"/>
<area shape="poly" title=" " alt="" coords="1523,451,1550,463,1566,477,1576,492,1584,506,1598,522,1636,552,1675,577,1672,581,1633,556,1594,526,1580,510,1571,494,1562,481,1547,468,1521,455"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a8c7f7a7dd12329a27d64b4b9c49b8672" title=" " alt="" coords="1648,421,1793,454"/>
<area shape="poly" title=" " alt="" coords="1522,435,1633,435,1633,440,1522,440"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a6c1cc8e52e96bf9698f6b0f65ad48603" title=" " alt="" coords="1619,478,1822,512"/>
<area shape="poly" title=" " alt="" coords="1508,452,1612,472,1611,477,1507,458"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a08d851dae97200fe16233b21dc4c38d2" title=" " alt="" coords="1596,340,1845,397"/>
<area shape="poly" title=" " alt="" coords="1491,417,1581,397,1582,402,1492,423"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a32b9338e87ff904d1fc867f2610da6aa" title=" " alt="" coords="1944,477,2078,510"/>
<area shape="poly" title=" " alt="" coords="1794,449,1930,475,1929,481,1793,454"/>
<area shape="poly" title=" " alt="" coords="1505,510,1597,522,1721,529,1844,522,1928,509,1929,514,1845,527,1721,534,1596,527,1504,515"/>
<area shape="poly" title=" " alt="" coords="1549,712,1633,717,1632,722,1548,717"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a69f3b0b95c5310d21a18214662a9a0f4" title=" " alt="" coords="1008,1175,1200,1209"/>
<area shape="poly" title=" " alt="" coords="824,958,846,998,880,1051,925,1107,951,1132,979,1154,1002,1167,1000,1171,976,1158,948,1136,921,1110,876,1054,841,1001,819,960"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ad1560c16d4a14458fe8392ce0d7605f6" title=" " alt="" coords="1000,913,1208,970"/>
<area shape="poly" title=" " alt="" coords="930,939,984,939,984,944,930,944"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a0e43a4d5a6872ad57fdbec2d8adcb0f9" title=" " alt="" coords="1893,1125,2129,1158"/>
<area shape="poly" title=" " alt="" coords="852,957,928,990,1033,1031,1154,1071,1279,1103,1438,1127,1600,1140,1750,1144,1877,1144,1877,1149,1750,1150,1599,1145,1438,1132,1277,1108,1152,1076,1031,1036,926,995,850,961"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a1c2ac477fb2a0663ee55d41ebe732ba0" title=" " alt="" coords="978,855,1230,889"/>
<area shape="poly" title=" " alt="" coords="884,921,977,899,1012,891,1014,896,978,904,885,927"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ae48137762c4476d0ae29fdd76b3c2b1e" title=" " alt="" coords="1314,1175,1513,1209"/>
<area shape="poly" title=" " alt="" coords="1200,1190,1298,1190,1298,1195,1200,1195"/>
<area shape="poly" title=" " alt="" coords="1143,968,1216,1022,1252,1045,1279,1059,1343,1078,1398,1090,1448,1095,1494,1096,1593,1089,1719,1084,2012,1084,2052,1081,2089,1071,2125,1056,2158,1037,2190,1013,2219,986,2272,924,2317,858,2354,793,2400,689,2405,691,2358,795,2322,861,2277,927,2223,989,2193,1017,2161,1041,2127,1061,2091,1076,2052,1086,2012,1090,1719,1090,1594,1095,1495,1101,1447,1100,1397,1095,1342,1084,1277,1064,1249,1050,1213,1027,1140,973"/>
<area shape="poly" title=" " alt="" coords="1208,945,1428,951,1561,952,1699,948,1833,939,1955,924,2056,901,2096,886,2128,869,2150,851,2169,830,2200,781,2222,732,2236,690,2241,691,2227,734,2205,784,2173,833,2153,855,2130,873,2098,891,2057,906,1956,929,1834,945,1699,953,1562,957,1428,957,1208,950"/>
<area shape="poly" title=" " alt="" coords="1208,942,1284,940,1370,933,1460,920,1548,899,1585,885,1621,867,1682,829,1685,834,1624,872,1587,890,1549,904,1461,926,1371,939,1284,945,1208,947"/>
<area shape="poly" title=" " alt="" coords="1207,917,1228,900,1246,872,1253,844,1253,816,1249,787,1246,759,1246,730,1255,702,1276,674,1317,643,1364,619,1413,603,1465,593,1516,587,1565,586,1650,591,1649,596,1565,591,1516,593,1465,598,1415,608,1366,624,1320,647,1280,678,1260,704,1252,731,1251,758,1255,787,1258,815,1259,845,1251,874,1232,903,1210,921"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6b6c429265d86411d05951d2fae7289a" title=" " alt="" coords="1326,1015,1500,1049"/>
<area shape="poly" title=" " alt="" coords="1195,968,1279,994,1331,1008,1329,1013,1277,999,1193,973"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ab23359a874c401f50b4a88eb154924bc" title=" " alt="" coords="1335,798,1492,832"/>
<area shape="poly" title=" " alt="" coords="1207,912,1228,899,1243,885,1251,870,1260,855,1277,841,1319,823,1321,828,1279,845,1264,858,1256,873,1247,888,1232,904,1210,916"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a68db1382ca9d80f68cd5b8173bb79699" title=" " alt="" coords="1327,855,1499,889"/>
<area shape="poly" title=" " alt="" coords="1208,916,1319,890,1320,896,1209,921"/>
<area shape="poly" title=" " alt="" coords="1473,795,1644,745,1646,750,1475,800"/>
<area shape="poly" title=" " alt="" coords="1500,879,1629,885,1707,885,1790,879,1877,868,1964,850,2048,823,2128,787,2158,766,2185,740,2226,687,2230,691,2189,744,2162,770,2130,792,2050,828,1965,855,1878,873,1791,885,1707,890,1629,891,1500,885"/>
<area shape="poly" title=" " alt="" coords="1499,862,1524,854,1547,842,1563,827,1571,810,1579,792,1595,774,1618,759,1643,746,1645,751,1621,763,1598,778,1583,795,1576,812,1567,830,1550,846,1526,859,1501,867"/>
<area shape="poly" title=" " alt="" coords="1499,852,1548,842,1628,824,1629,829,1549,847,1500,857"/>
<area shape="poly" title=" " alt="" coords="2027,1122,2076,1068,2103,1033,2127,995,2166,912,2198,827,2237,690,2242,692,2203,828,2171,914,2131,997,2107,1036,2080,1071,2031,1126"/>
<area shape="poly" title=" " alt="" coords="1230,870,1311,870,1311,875,1230,875"/>
<area shape="poly" title=" " alt="" coords="904,275,1429,294,1693,309,1788,317,1845,326,1933,348,2000,371,2061,406,2131,462,2167,502,2197,546,2237,626,2232,629,2192,549,2163,505,2127,466,2058,410,1998,376,1931,353,1844,331,1788,322,1693,314,1429,300,904,280"/>
<area shape="rect" href="../../da/d23/list_8h.html#a5f3c4582c49b990c9fb4f5c83f8400d1" title=" " alt="" coords="1039,174,1169,208"/>
<area shape="poly" title=" " alt="" coords="859,255,977,216,1023,205,1025,210,978,221,861,260"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#aeae1856255dccd537fd19cdda1cba346" title=" " alt="" coords="1009,231,1199,265"/>
<area shape="poly" title=" " alt="" coords="904,264,993,256,994,261,904,269"/>
</map>
</div>

</div>
</div>
<a id="ac9d684a5b03a2819e0ea9780975a44e1" name="ac9d684a5b03a2819e0ea9780975a44e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9d684a5b03a2819e0ea9780975a44e1">&#9670;&#160;</a></span>ubus_reconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubus_reconnect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00395">395</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  396</span>{</div>
<div class="line"><span class="lineno">  397</span>    <span class="keyword">struct </span>{</div>
<div class="line"><span class="lineno">  398</span>        <span class="keyword">struct </span><a class="code hl_struct" href="../../d5/d79/ubusmsg_8h.html#d2/d15/structubus__msghdr">ubus_msghdr</a> hdr;</div>
<div class="line"><span class="lineno">  399</span>        <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> <a class="code hl_variable" href="../../d8/d3c/blob_8h.html#aae7cde5b300aec19a4125e96fe2a35da">data</a>;</div>
<div class="line"><span class="lineno">  400</span>    } hdr;</div>
<div class="line"><span class="lineno">  401</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>;</div>
<div class="line"><span class="lineno">  402</span>    <span class="keywordtype">int</span> ret = <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab8845eab4efc86465452fa517b43c2b5">UBUS_STATUS_UNKNOWN_ERROR</a>;</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../df/d0e/ubusd__obj_8c.html#a9ece2e576492090c46d5e3b435cef7d4">path</a>)</div>
<div class="line"><span class="lineno">  405</span>        <a class="code hl_variable" href="../../df/d0e/ubusd__obj_8c.html#a9ece2e576492090c46d5e3b435cef7d4">path</a> = UBUS_UNIX_SOCKET;</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a> &gt;= 0) {</div>
<div class="line"><span class="lineno">  408</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a0d1aa2490f8ec9ade8c516424d48ca35">registered</a>)</div>
<div class="line"><span class="lineno">  409</span>            <a class="code hl_function" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c">uloop_fd_delete</a>(&amp;<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>);</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>        close(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>);</div>
<div class="line"><span class="lineno">  412</span>    }</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>    <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a0a2e642791b9398c2a113e8e95897a40">eof</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  415</span>    <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#af5445431ce168406508c864521287d60">error</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  416</span>    <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a> = <a class="code hl_function" href="../../d2/d90/usock_8c.html#aa75bb163bb0164a604ab8b9c554dddc5">usock</a>(<a class="code hl_define" href="../../d1/dd5/usock_8h.html#a64a294fea616500ad02b1110e6a1e515">USOCK_UNIX</a>, <a class="code hl_variable" href="../../df/d0e/ubusd__obj_8c.html#a9ece2e576492090c46d5e3b435cef7d4">path</a>, NULL);</div>
<div class="line"><span class="lineno">  417</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a> &lt; 0)</div>
<div class="line"><span class="lineno">  418</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312a7c978a908f73d2d2fe5340b520f0e664">UBUS_STATUS_CONNECTION_FAILED</a>;</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>    <span class="keywordflow">if</span> (read(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>, &amp;hdr, <span class="keyword">sizeof</span>(hdr)) != <span class="keyword">sizeof</span>(hdr))</div>
<div class="line"><span class="lineno">  421</span>        <span class="keywordflow">goto</span> out_close;</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#af89184a6a1d46c84beb995555a5f8422">ubus_validate_hdr</a>(&amp;hdr.hdr))</div>
<div class="line"><span class="lineno">  424</span>        <span class="keywordflow">goto</span> out_close;</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>    <span class="keywordflow">if</span> (hdr.hdr.type != <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a6992a6892cead2b516d3d2e5c28efbb8ad974a3d1482c93a13977c773e35a7db3">UBUS_MSG_HELLO</a>)</div>
<div class="line"><span class="lineno">  427</span>        <span class="keywordflow">goto</span> out_close;</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span>    <a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a> = calloc(1, <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01">blob_raw_len</a>(&amp;hdr.data));</div>
<div class="line"><span class="lineno">  430</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>)</div>
<div class="line"><span class="lineno">  431</span>        <span class="keywordflow">goto</span> out_close;</div>
<div class="line"><span class="lineno">  432</span> </div>
<div class="line"><span class="lineno">  433</span>    memcpy(<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>, &amp;hdr.data, <span class="keyword">sizeof</span>(hdr.data));</div>
<div class="line"><span class="lineno">  434</span>    <span class="keywordflow">if</span> (read(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>, <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857">blob_data</a>(<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>), <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32">blob_len</a>(<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>)) != (ssize_t) <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32">blob_len</a>(<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>))</div>
<div class="line"><span class="lineno">  435</span>        <span class="keywordflow">goto</span> out_free;</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>    <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#aa288ad56351595fc79db664b663072a9">local_id</a> = hdr.hdr.peer;</div>
<div class="line"><span class="lineno">  438</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#aa288ad56351595fc79db664b663072a9">local_id</a>)</div>
<div class="line"><span class="lineno">  439</span>        <span class="keywordflow">goto</span> out_free;</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>    ret = <a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab7a81fcac034b9ddc28cbf812d2ae6eb">UBUS_STATUS_OK</a>;</div>
<div class="line"><span class="lineno">  442</span>    fcntl(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>, F_SETFL, fcntl(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>, F_GETFL) | O_NONBLOCK | O_CLOEXEC);</div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>    <a class="code hl_function" href="#a7949dbca229a78115adadb49a5d9837d">ubus_refresh_state</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>);</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>out_free:</div>
<div class="line"><span class="lineno">  447</span>    free(<a class="code hl_variable" href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a>);</div>
<div class="line"><span class="lineno">  448</span>out_close:</div>
<div class="line"><span class="lineno">  449</span>    <span class="keywordflow">if</span> (ret)</div>
<div class="line"><span class="lineno">  450</span>        close(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>);</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  453</span>}</div>
<div class="ttc" id="ablob_8h_html_a66e0b636bd2bbafbf8701a1e91bbf857"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857">blob_data</a></div><div class="ttdeci">static void * blob_data(const struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00075">blob.h:75</a></div></div>
<div class="ttc" id="alibubus-io_8c_html_a7949dbca229a78115adadb49a5d9837d"><div class="ttname"><a href="#a7949dbca229a78115adadb49a5d9837d">ubus_refresh_state</a></div><div class="ttdeci">static void ubus_refresh_state(struct ubus_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00371">libubus-io.c:371</a></div></div>
<div class="ttc" id="alibubus_8h_html_aa288ad56351595fc79db664b663072a9"><div class="ttname"><a href="../../db/d55/libubus_8h.html#aa288ad56351595fc79db664b663072a9">ubus_context::local_id</a></div><div class="ttdeci">uint32_t local_id</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00165">libubus.h:165</a></div></div>
<div class="ttc" id="amkdev_8c_html_a024e65f7d9664cdc767f51c283fd8353"><div class="ttname"><a href="../../d7/d9a/mkdev_8c.html#a024e65f7d9664cdc767f51c283fd8353">buf</a></div><div class="ttdeci">static char buf[PATH_MAX]</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d9a/mkdev_8c_source.html#l00034">mkdev.c:34</a></div></div>
<div class="ttc" id="aubusd__obj_8c_html_a9ece2e576492090c46d5e3b435cef7d4"><div class="ttname"><a href="../../df/d0e/ubusd__obj_8c.html#a9ece2e576492090c46d5e3b435cef7d4">path</a></div><div class="ttdeci">struct avl_tree path</div><div class="ttdef"><b>Definition</b> <a href="../../df/d0e/ubusd__obj_8c_source.html#l00019">ubusd_obj.c:19</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a6992a6892cead2b516d3d2e5c28efbb8ad974a3d1482c93a13977c773e35a7db3"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a6992a6892cead2b516d3d2e5c28efbb8ad974a3d1482c93a13977c773e35a7db3">UBUS_MSG_HELLO</a></div><div class="ttdeci">@ UBUS_MSG_HELLO</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00038">ubusmsg.h:38</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a99bec0c168a4d5ac338ad787dfb73312a7c978a908f73d2d2fe5340b520f0e664"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312a7c978a908f73d2d2fe5340b520f0e664">UBUS_STATUS_CONNECTION_FAILED</a></div><div class="ttdeci">@ UBUS_STATUS_CONNECTION_FAILED</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00129">ubusmsg.h:129</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a99bec0c168a4d5ac338ad787dfb73312ab7a81fcac034b9ddc28cbf812d2ae6eb"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab7a81fcac034b9ddc28cbf812d2ae6eb">UBUS_STATUS_OK</a></div><div class="ttdeci">@ UBUS_STATUS_OK</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00119">ubusmsg.h:119</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a99bec0c168a4d5ac338ad787dfb73312ab8845eab4efc86465452fa517b43c2b5"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a99bec0c168a4d5ac338ad787dfb73312ab8845eab4efc86465452fa517b43c2b5">UBUS_STATUS_UNKNOWN_ERROR</a></div><div class="ttdeci">@ UBUS_STATUS_UNKNOWN_ERROR</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00128">ubusmsg.h:128</a></div></div>
<div class="ttc" id="auloop_8c_html_a73e0613a3dcdc677611d2fd6efdcca9c"><div class="ttname"><a href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c">uloop_fd_delete</a></div><div class="ttdeci">int uloop_fd_delete(struct uloop_fd *fd)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d08/uloop_8c_source.html#l00265">uloop.c:265</a></div></div>
<div class="ttc" id="auloop_8h_html_a0d1aa2490f8ec9ade8c516424d48ca35"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#a0d1aa2490f8ec9ade8c516424d48ca35">uloop_fd::registered</a></div><div class="ttdeci">bool registered</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00068">uloop.h:68</a></div></div>
<div class="ttc" id="auloop_8h_html_af5445431ce168406508c864521287d60"><div class="ttname"><a href="../../dc/d56/uloop_8h.html#af5445431ce168406508c864521287d60">uloop_fd::error</a></div><div class="ttdeci">bool error</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d56/uloop_8h_source.html#l00067">uloop.h:67</a></div></div>
<div class="ttc" id="ausock_8c_html_aa75bb163bb0164a604ab8b9c554dddc5"><div class="ttname"><a href="../../d2/d90/usock_8c.html#aa75bb163bb0164a604ab8b9c554dddc5">usock</a></div><div class="ttdeci">int usock(int type, const char *host, const char *service)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d90/usock_8c_source.html#l00252">usock.c:252</a></div></div>
<div class="ttc" id="ausock_8h_html_a64a294fea616500ad02b1110e6a1e515"><div class="ttname"><a href="../../d1/dd5/usock_8h.html#a64a294fea616500ad02b1110e6a1e515">USOCK_UNIX</a></div><div class="ttdeci">#define USOCK_UNIX</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dd5/usock_8h_source.html#l00031">usock.h:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d3c/blob_8h_source.html#l00075">blob_data()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00100">blob_len()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00109">blob_raw_len()</a>, <a class="el" href="../../d7/d9a/mkdev_8c_source.html#l00034">buf</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00066">uloop_fd::eof</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00067">uloop_fd::error</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00065">uloop_fd::fd</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00165">ubus_context::local_id</a>, <a class="el" href="../../df/d0e/ubusd__obj_8c_source.html#l00019">path</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00068">uloop_fd::registered</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00162">ubus_context::sock</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00038">UBUS_MSG_HELLO</a>, <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00371">ubus_refresh_state()</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00129">UBUS_STATUS_CONNECTION_FAILED</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00119">UBUS_STATUS_OK</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00128">UBUS_STATUS_UNKNOWN_ERROR</a>, <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00224">ubus_validate_hdr()</a>, <a class="el" href="../../d1/d08/uloop_8c_source.html#l00265">uloop_fd_delete()</a>, <a class="el" href="../../d2/d90/usock_8c_source.html#l00252">usock()</a>, and <a class="el" href="../../d1/dd5/usock_8h_source.html#l00031">USOCK_UNIX</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/db1/netifd_2ubus_8c_source.html#l00430">netifd_ubus_reconnect_timer()</a>, <a class="el" href="../../d4/db9/libubus_8c_source.html#l00312">ubus_auto_reconnect_cb()</a>, <a class="el" href="../../d4/db9/libubus_8c_source.html#l00284">ubus_connect_ctx()</a>, and <a class="el" href="../../de/d89/procd_2ubus_8c_source.html#l00048">ubus_reconnect_cb()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d80/libubus-io_8c_ac9d684a5b03a2819e0ea9780975a44e1_cgraph.png" border="0" usemap="#adc/d80/libubus-io_8c_ac9d684a5b03a2819e0ea9780975a44e1_cgraph" alt=""/></div>
<map name="adc/d80/libubus-io_8c_ac9d684a5b03a2819e0ea9780975a44e1_cgraph" id="adc/d80/libubus-io_8c_ac9d684a5b03a2819e0ea9780975a44e1_cgraph">
<area shape="rect" title=" " alt="" coords="5,467,173,501"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1899,586,2011,619"/>
<area shape="poly" title=" " alt="" coords="113,499,190,554,245,589,308,624,378,657,453,684,531,702,609,709,1442,709,1558,716,1650,725,1694,726,1739,722,1790,711,1848,691,1871,679,1893,663,1929,629,1932,633,1896,667,1874,683,1850,696,1791,716,1740,727,1694,731,1650,730,1558,721,1441,714,609,714,530,708,452,689,376,662,306,629,242,593,187,558,110,503"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1906,23,2004,57"/>
<area shape="poly" title=" " alt="" coords="88,466,93,397,111,295,127,240,150,185,180,134,219,90,266,52,310,26,353,11,397,4,443,3,492,5,609,9,1442,9,1690,17,1890,31,1890,37,1690,23,1441,14,609,14,492,10,443,8,397,10,354,16,312,31,269,56,223,94,185,137,155,188,132,242,116,297,98,398,93,467"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1658,50,1799,83"/>
<area shape="poly" title=" " alt="" coords="103,465,173,391,227,343,290,293,362,246,440,206,523,179,565,172,609,169,1178,169,1287,168,1372,162,1455,146,1559,116,1583,105,1607,92,1642,81,1643,86,1609,97,1586,109,1561,121,1456,151,1372,167,1287,173,1178,174,609,174,566,177,524,184,442,211,364,250,293,297,230,347,177,395,107,468"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a7949dbca229a78115adadb49a5d9837d" title=" " alt="" coords="221,467,417,501"/>
<area shape="poly" title=" " alt="" coords="173,481,205,481,205,486,173,486"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#af89184a6a1d46c84beb995555a5f8422" title=" " alt="" coords="1082,100,1272,134"/>
<area shape="poly" title=" " alt="" coords="88,466,95,404,114,317,131,270,153,225,182,185,219,151,273,118,329,91,388,69,450,53,512,42,575,35,701,32,821,40,932,55,1028,74,1104,93,1103,98,1027,80,931,60,821,45,701,37,575,40,513,47,451,58,390,74,331,96,275,122,222,155,186,188,158,228,135,272,119,318,100,405,94,467"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a73e0613a3dcdc677611d2fd6efdcca9c" title=" " alt="" coords="236,750,402,783"/>
<area shape="poly" title=" " alt="" coords="97,500,112,545,137,606,173,672,196,702,222,728,239,740,236,744,219,733,192,705,169,675,132,609,107,547,92,502"/>
<area shape="rect" href="../../d2/d90/usock_8c.html#aa75bb163bb0164a604ab8b9c554dddc5" title=" " alt="" coords="281,864,357,898"/>
<area shape="poly" title=" " alt="" coords="97,500,112,553,138,629,175,713,197,755,223,794,251,826,282,853,278,857,247,830,219,797,193,758,170,716,133,631,107,555,92,502"/>
<area shape="poly" title=" " alt="" coords="1799,56,1890,45,1890,50,1800,61"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a91976fc505121a3ddd2c4456e730401c" title=" " alt="" coords="1089,410,1265,443"/>
<area shape="poly" title=" " alt="" coords="417,473,803,444,1073,429,1073,434,804,449,417,478"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a53a20e63db75053c8fbe21656412b3da" title=" " alt="" coords="465,528,755,562"/>
<area shape="poly" title=" " alt="" coords="403,499,513,522,511,527,402,504"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1371,531,1510,565"/>
<area shape="poly" title=" " alt="" coords="1241,441,1274,459,1289,474,1298,490,1306,504,1321,518,1357,533,1355,538,1319,522,1302,508,1293,492,1285,478,1270,463,1238,446"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="1358,474,1522,507"/>
<area shape="poly" title=" " alt="" coords="1247,441,1321,460,1350,467,1349,472,1319,465,1245,447"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a04cdb66afbb720a35153317f3246e069" title=" " alt="" coords="1337,267,1544,301"/>
<area shape="poly" title=" " alt="" coords="1207,407,1319,344,1391,306,1394,310,1321,349,1210,411"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="1320,416,1560,450"/>
<area shape="poly" title=" " alt="" coords="1265,426,1305,427,1305,432,1265,431"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a517a0ee8c6971f08ba4370900300e84b" title=" " alt="" coords="1322,210,1559,243"/>
<area shape="poly" title=" " alt="" coords="1185,408,1205,374,1235,332,1273,289,1319,252,1326,248,1329,252,1321,257,1277,293,1239,335,1209,377,1190,411"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="1341,359,1539,393"/>
<area shape="poly" title=" " alt="" coords="1265,407,1334,394,1335,399,1266,412"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1676,532,1781,566"/>
<area shape="poly" title=" " alt="" coords="1510,545,1660,546,1660,552,1510,551"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1638,590,1819,623"/>
<area shape="poly" title=" " alt="" coords="1511,559,1628,583,1627,589,1510,565"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1678,475,1779,509"/>
<area shape="poly" title=" " alt="" coords="1523,488,1662,489,1662,494,1523,494"/>
<area shape="poly" title=" " alt="" coords="1780,496,1815,504,1850,517,1892,544,1928,573,1924,577,1889,548,1847,522,1813,509,1779,501"/>
<area shape="poly" title=" " alt="" coords="1543,265,1558,254,1573,235,1581,216,1582,175,1583,134,1591,113,1606,93,1623,80,1642,72,1644,77,1626,85,1610,96,1595,115,1588,135,1587,175,1586,217,1578,238,1562,258,1546,270"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#ab9041e08938920d5ae722e2d57dc20e2" title=" " alt="" coords="1673,222,1784,255"/>
<area shape="poly" title=" " alt="" coords="1544,265,1657,247,1658,252,1545,270"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a1e6079c1ffa0e8f05ca64a51d7332919" title=" " alt="" coords="1656,107,1801,141"/>
<area shape="poly" title=" " alt="" coords="1542,264,1559,254,1570,242,1576,230,1582,203,1587,176,1594,163,1607,150,1640,132,1642,136,1610,154,1599,166,1592,178,1587,204,1581,231,1574,245,1562,258,1545,269"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="1640,164,1817,198"/>
<area shape="poly" title=" " alt="" coords="1536,264,1559,254,1573,243,1582,231,1592,219,1607,207,1624,199,1627,204,1610,211,1595,222,1586,234,1577,246,1562,258,1538,269"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a6a067ed16631bbe3826be535287879e4" title=" " alt="" coords="1649,418,1808,451"/>
<area shape="poly" title=" " alt="" coords="1561,431,1633,431,1633,437,1561,436"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aca15427cb882afec28ce476b9e8e8b34" title=" " alt="" coords="1608,279,1849,336"/>
<area shape="poly" title=" " alt="" coords="1538,413,1559,403,1574,390,1582,376,1591,361,1607,346,1613,342,1615,346,1610,350,1595,364,1587,378,1578,393,1562,407,1540,418"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a5497c370318a5cc03dd662523915ea92" title=" " alt="" coords="1649,360,1808,394"/>
<area shape="poly" title=" " alt="" coords="1530,413,1633,393,1634,398,1531,418"/>
<area shape="rect" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d" title=" " alt="" coords="1897,410,2013,443"/>
<area shape="poly" title=" " alt="" coords="1826,334,1850,345,1890,370,1924,397,1921,401,1887,375,1847,350,1824,339"/>
<area shape="poly" title=" " alt="" coords="658,560,727,584,804,605,907,630,988,646,1070,656,1176,658,1442,659,1505,662,1561,669,1657,683,1701,685,1746,679,1794,663,1847,634,1872,605,1898,558,1940,457,1945,459,1902,560,1876,608,1850,638,1796,668,1747,685,1701,690,1656,689,1560,674,1505,667,1441,664,1175,664,1070,661,987,651,906,635,803,610,725,589,657,565"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a1181bbaadf8f66ea4f2cd4bab3285695" title=" " alt="" coords="803,459,1034,493"/>
<area shape="poly" title=" " alt="" coords="688,525,825,494,826,499,689,530"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a13ccf4210afc63ffc04d88e8a5c2a92d" title=" " alt="" coords="1108,474,1246,507"/>
<area shape="poly" title=" " alt="" coords="664,560,738,579,831,595,881,599,933,599,984,594,1033,583,1065,570,1095,553,1145,515,1148,520,1098,557,1067,575,1034,588,984,599,933,604,881,604,830,600,737,585,663,565"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#ad13afe4ee46089b4c6a2cc46b314503e" title=" " alt="" coords="814,517,1023,573"/>
<area shape="poly" title=" " alt="" coords="756,542,799,542,799,548,756,548"/>
<area shape="poly" title=" " alt="" coords="1247,503,1356,527,1355,532,1245,508"/>
<area shape="poly" title=" " alt="" coords="1246,488,1342,488,1342,493,1246,493"/>
<area shape="poly" title=" " alt="" coords="1245,473,1344,451,1345,456,1247,478"/>
<area shape="poly" title=" " alt="" coords="1237,471,1270,454,1285,441,1293,428,1303,414,1319,402,1327,397,1330,402,1321,406,1307,418,1298,431,1289,444,1274,458,1240,475"/>
<area shape="poly" title=" " alt="" coords="1011,514,1032,503,1046,492,1056,481,1065,470,1080,459,1103,447,1105,452,1083,463,1069,474,1060,485,1050,496,1035,507,1014,519"/>
<area shape="poly" title=" " alt="" coords="1023,543,1355,545,1355,550,1023,548"/>
<area shape="poly" title=" " alt="" coords="1273,112,1409,106,1560,93,1642,81,1643,86,1561,98,1409,111,1273,118"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="1369,50,1511,83"/>
<area shape="poly" title=" " alt="" coords="1267,97,1353,80,1354,86,1268,102"/>
<area shape="poly" title=" " alt="" coords="1512,64,1642,64,1642,69,1512,69"/>
<area shape="rect" href="../../d3/d91/uloop-epoll_8c.html#ae98d2f54596aacb1f0f176d0e565e2e2" title=" " alt="" coords="518,750,702,783"/>
<area shape="poly" title=" " alt="" coords="403,764,503,764,503,769,403,769"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#abe443fe3f794c14f0aaa0c5f18a27ddd" title=" " alt="" coords="501,807,720,841"/>
<area shape="poly" title=" " alt="" coords="403,781,466,793,504,801,503,806,464,798,402,786"/>
<area shape="rect" href="../../d1/dd5/usock_8h.html#a7be021755da2683746e60598709bb718" title=" " alt="" coords="551,864,670,898"/>
<area shape="poly" title=" " alt="" coords="357,878,535,878,535,884,357,884"/>
<area shape="rect" href="../../d2/d90/usock_8c.html#a7794edcc739eb0b2e1440bf2f966647c" title=" " alt="" coords="856,920,981,954"/>
<area shape="poly" title=" " alt="" coords="357,887,465,908,669,926,841,933,841,939,668,931,465,913,356,893"/>
<area shape="rect" href="../../d2/d90/usock_8c.html#adc669e7fa902dd41507f3fa59822b004" title=" " alt="" coords="819,863,1018,897"/>
<area shape="poly" title=" " alt="" coords="670,878,804,878,804,883,670,884"/>
<area shape="rect" href="../../d2/d90/usock_8c.html#a7d274a70486ef4ed9b64902941b820f5" title=" " alt="" coords="1098,891,1256,925"/>
<area shape="poly" title=" " alt="" coords="1019,888,1083,895,1082,900,1018,893"/>
<area shape="poly" title=" " alt="" coords="981,927,1082,916,1083,921,981,933"/>
</map>
</div>

</div>
</div>
<a id="a53a20e63db75053c8fbe21656412b3da" name="a53a20e63db75053c8fbe21656412b3da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53a20e63db75053c8fbe21656412b3da">&#9670;&#160;</a></span>ubus_refresh_auto_subscribe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ubus_refresh_auto_subscribe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00359">359</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  360</span>{</div>
<div class="line"><span class="lineno">  361</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../db/d55/libubus_8h.html#d3/d6e/structubus__event__handler">ubus_event_handler</a> *ev = &amp;<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#aa357c70f48399f7a3076929cef808ef0">auto_subscribe_event_handler</a>;</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d">list_empty</a>(&amp;<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a78123b6bc97fcc5dd57e3714cfceffaf">auto_subscribers</a>))</div>
<div class="line"><span class="lineno">  364</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>    <a class="code hl_function" href="../../d4/db9/libubus_8c.html#ad13afe4ee46089b4c6a2cc46b314503e">ubus_register_event_handler</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, ev, <span class="stringliteral">&quot;ubus.object.add&quot;</span>);</div>
<div class="line"><span class="lineno">  367</span>    <a class="code hl_function" href="../../d4/db9/libubus_8c.html#a13ccf4210afc63ffc04d88e8a5c2a92d">ubus_lookup</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, NULL, <a class="code hl_function" href="#a1181bbaadf8f66ea4f2cd4bab3285695">ubus_auto_sub_lookup</a>, NULL);</div>
<div class="line"><span class="lineno">  368</span>}</div>
<div class="ttc" id="alibubus-io_8c_html_a1181bbaadf8f66ea4f2cd4bab3285695"><div class="ttname"><a href="#a1181bbaadf8f66ea4f2cd4bab3285695">ubus_auto_sub_lookup</a></div><div class="ttdeci">static void ubus_auto_sub_lookup(struct ubus_context *ctx, struct ubus_object_data *obj, void *priv)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00348">libubus-io.c:348</a></div></div>
<div class="ttc" id="alibubus_8c_html_a13ccf4210afc63ffc04d88e8a5c2a92d"><div class="ttname"><a href="../../d4/db9/libubus_8c.html#a13ccf4210afc63ffc04d88e8a5c2a92d">ubus_lookup</a></div><div class="ttdeci">int ubus_lookup(struct ubus_context *ctx, const char *path, ubus_lookup_handler_t cb, void *priv)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/db9/libubus_8c_source.html#l00161">libubus.c:161</a></div></div>
<div class="ttc" id="alibubus_8c_html_ad13afe4ee46089b4c6a2cc46b314503e"><div class="ttname"><a href="../../d4/db9/libubus_8c.html#ad13afe4ee46089b4c6a2cc46b314503e">ubus_register_event_handler</a></div><div class="ttdeci">int ubus_register_event_handler(struct ubus_context *ctx, struct ubus_event_handler *ev, const char *pattern)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/db9/libubus_8c_source.html#l00225">libubus.c:225</a></div></div>
<div class="ttc" id="alibubus_8h_html_aa357c70f48399f7a3076929cef808ef0"><div class="ttname"><a href="../../db/d55/libubus_8h.html#aa357c70f48399f7a3076929cef808ef0">ubus_context::auto_subscribe_event_handler</a></div><div class="ttdeci">struct ubus_event_handler auto_subscribe_event_handler</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00178">libubus.h:178</a></div></div>
<div class="ttc" id="alibubus_8h_html_d3/d6e/structubus__event__handler"><div class="ttname"><a href="../../db/d55/libubus_8h.html#d3/d6e/structubus__event__handler">ubus_event_handler</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00151">libubus.h:151</a></div></div>
<div class="ttc" id="alist_8h_html_a6ff0e5eee443d7b27def83827340634d"><div class="ttname"><a href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d">list_empty</a></div><div class="ttdeci">static bool list_empty(const struct list_head *head)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d23/list_8h_source.html#l00069">list.h:69</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d55/libubus_8h_source.html#l00178">ubus_context::auto_subscribe_event_handler</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00177">ubus_context::auto_subscribers</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../da/d23/list_8h_source.html#l00069">list_empty()</a>, <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00348">ubus_auto_sub_lookup()</a>, <a class="el" href="../../d4/db9/libubus_8c_source.html#l00161">ubus_lookup()</a>, and <a class="el" href="../../d4/db9/libubus_8c_source.html#l00225">ubus_register_event_handler()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00371">ubus_refresh_state()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d80/libubus-io_8c_a53a20e63db75053c8fbe21656412b3da_cgraph.png" border="0" usemap="#adc/d80/libubus-io_8c_a53a20e63db75053c8fbe21656412b3da_cgraph" alt=""/></div>
<map name="adc/d80/libubus-io_8c_a53a20e63db75053c8fbe21656412b3da_cgraph" id="adc/d80/libubus-io_8c_a53a20e63db75053c8fbe21656412b3da_cgraph">
<area shape="rect" title=" " alt="" coords="5,309,296,343"/>
<area shape="rect" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d" title=" " alt="" coords="1786,56,1902,90"/>
<area shape="poly" title=" " alt="" coords="166,307,245,232,304,182,375,131,454,83,540,43,585,27,631,15,678,7,725,5,1311,5,1516,5,1605,12,1719,30,1784,48,1783,53,1718,35,1605,17,1516,10,1311,10,725,10,678,13,632,20,587,32,542,48,457,88,378,136,308,187,248,236,170,311"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a1181bbaadf8f66ea4f2cd4bab3285695" title=" " alt="" coords="344,281,574,315"/>
<area shape="poly" title=" " alt="" coords="296,310,328,307,328,313,296,316"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a13ccf4210afc63ffc04d88e8a5c2a92d" title=" " alt="" coords="941,384,1079,418"/>
<area shape="poly" title=" " alt="" coords="296,332,546,350,831,375,926,387,926,392,830,381,546,356,296,338"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#ad13afe4ee46089b4c6a2cc46b314503e" title=" " alt="" coords="355,484,563,541"/>
<area shape="poly" title=" " alt="" coords="181,341,398,474,396,478,179,346"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#a1406fcd78c0f0c52dbb0fb6ae0b16f89" title=" " alt="" coords="643,281,809,315"/>
<area shape="poly" title=" " alt="" coords="574,295,628,295,628,301,574,301"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#a3d6a3c1e8e0504384f6da855f8f61069" title=" " alt="" coords="878,327,1142,360"/>
<area shape="poly" title=" " alt="" coords="810,309,886,321,885,326,810,314"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1240,412,1380,446"/>
<area shape="poly" title=" " alt="" coords="1111,358,1143,369,1167,384,1191,398,1226,410,1224,415,1189,403,1164,388,1141,374,1109,363"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="1190,269,1430,303"/>
<area shape="poly" title=" " alt="" coords="1101,323,1203,304,1204,309,1102,329"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="1211,355,1409,388"/>
<area shape="poly" title=" " alt="" coords="1142,353,1195,358,1195,363,1142,358"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1546,412,1651,446"/>
<area shape="poly" title=" " alt="" coords="1380,426,1530,426,1530,431,1380,431"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1508,469,1688,503"/>
<area shape="poly" title=" " alt="" coords="1380,440,1495,463,1494,468,1379,445"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1970,413,2112,447"/>
<area shape="poly" title=" " alt="" coords="1651,425,1922,425,1954,425,1954,431,1922,430,1651,431"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="1766,440,1922,474"/>
<area shape="poly" title=" " alt="" coords="1651,432,1751,443,1750,449,1651,437"/>
<area shape="poly" title=" " alt="" coords="1922,444,1954,439,1955,444,1922,449"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a6a067ed16631bbe3826be535287879e4" title=" " alt="" coords="1519,183,1678,216"/>
<area shape="poly" title=" " alt="" coords="1356,266,1477,225,1503,218,1504,223,1479,230,1357,271"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aca15427cb882afec28ce476b9e8e8b34" title=" " alt="" coords="1478,44,1718,101"/>
<area shape="poly" title=" " alt="" coords="1321,267,1382,192,1427,149,1477,111,1484,106,1487,111,1479,115,1430,153,1386,196,1325,270"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a5497c370318a5cc03dd662523915ea92" title=" " alt="" coords="1519,240,1678,274"/>
<area shape="poly" title=" " alt="" coords="1430,271,1503,264,1503,269,1431,276"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8af6cb580774621aef719d6923cb5072" title=" " alt="" coords="1494,125,1703,159"/>
<area shape="poly" title=" " alt="" coords="1329,267,1392,217,1433,191,1477,168,1492,162,1494,167,1479,173,1436,195,1395,222,1332,271"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ab53faf25fad8c6edbcd804eabeb14c6a" title=" " alt="" coords="1504,297,1693,331"/>
<area shape="poly" title=" " alt="" coords="1431,295,1488,301,1488,306,1430,300"/>
<area shape="poly" title=" " alt="" coords="1719,70,1771,70,1771,75,1719,75"/>
<area shape="poly" title=" " alt="" coords="1673,122,1718,110,1777,92,1778,97,1719,115,1674,127"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a7da0a155290c1fd4d3b5911ced43d5a2" title=" " alt="" coords="1490,355,1706,388"/>
<area shape="poly" title=" " alt="" coords="1409,369,1475,369,1475,374,1409,374"/>
<area shape="poly" title=" " alt="" coords="1079,404,1225,418,1225,424,1079,410"/>
<area shape="poly" title=" " alt="" coords="1078,388,1141,370,1165,356,1188,340,1253,307,1256,312,1191,344,1168,361,1143,375,1080,394"/>
<area shape="poly" title=" " alt="" coords="1079,391,1195,380,1196,385,1079,397"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="1228,469,1392,503"/>
<area shape="poly" title=" " alt="" coords="1080,408,1143,426,1167,441,1191,456,1214,464,1212,469,1189,460,1164,446,1141,431,1079,413"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a6fa9294810fabe45d67d93d60ac687ed" title=" " alt="" coords="1226,609,1394,643"/>
<area shape="poly" title=" " alt="" coords="1080,402,1113,411,1143,427,1163,447,1171,468,1178,490,1192,514,1234,559,1276,597,1272,601,1230,563,1188,517,1173,492,1166,470,1158,450,1140,431,1111,415,1078,407"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1548,527,1649,560"/>
<area shape="poly" title=" " alt="" coords="1393,500,1533,528,1532,533,1392,505"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a66e0b636bd2bbafbf8701a1e91bbf857" title=" " alt="" coords="1788,553,1900,587"/>
<area shape="poly" title=" " alt="" coords="1650,546,1773,560,1772,565,1649,552"/>
<area shape="poly" title=" " alt="" coords="1394,615,1773,575,1773,580,1394,620"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a1e6079c1ffa0e8f05ca64a51d7332919" title=" " alt="" coords="1526,636,1671,670"/>
<area shape="poly" title=" " alt="" coords="1395,631,1510,642,1510,647,1394,637"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1528,693,1669,727"/>
<area shape="poly" title=" " alt="" coords="1395,640,1431,652,1455,666,1479,680,1513,691,1512,696,1477,685,1453,670,1429,657,1394,645"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="1510,751,1687,784"/>
<area shape="poly" title=" " alt="" coords="1396,634,1432,652,1450,674,1457,696,1463,717,1480,737,1497,748,1494,752,1476,741,1458,720,1451,698,1445,676,1428,656,1393,639"/>
<area shape="poly" title=" " alt="" coords="564,523,684,531,830,532,908,527,987,519,1065,505,1141,485,1155,479,1164,471,1188,454,1224,442,1226,447,1191,459,1168,475,1157,483,1143,490,1066,510,988,524,908,533,830,537,683,536,563,528"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59" title=" " alt="" coords="653,551,799,584"/>
<area shape="poly" title=" " alt="" coords="564,532,638,547,637,552,563,537"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="622,608,830,642"/>
<area shape="poly" title=" " alt="" coords="510,539,564,568,623,594,640,600,638,605,621,599,562,572,508,544"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393" title=" " alt="" coords="631,665,821,699"/>
<area shape="poly" title=" " alt="" coords="487,540,546,597,583,626,623,652,633,656,631,661,621,656,580,631,542,601,483,543"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a91976fc505121a3ddd2c4456e730401c" title=" " alt="" coords="922,441,1098,475"/>
<area shape="poly" title=" " alt="" coords="563,498,622,491,906,464,907,470,622,497,564,503"/>
<area shape="rect" href="../../db/d55/libubus_8h.html#ad79f9793c3835ea8691fe377025c7de7" title=" " alt="" coords="658,391,794,424"/>
<area shape="poly" title=" " alt="" coords="524,481,621,441,658,427,660,432,623,446,526,486"/>
<area shape="rect" href="../../d1/d30/blobmsg_8c.html#a5bf37ab2b48095b7fb16ac11449b08f6" title=" " alt="" coords="913,636,1107,670"/>
<area shape="poly" title=" " alt="" coords="831,632,898,639,897,644,831,638"/>
<area shape="poly" title=" " alt="" coords="822,670,897,662,898,667,822,675"/>
<area shape="poly" title=" " alt="" coords="1098,447,1224,434,1225,440,1099,452"/>
<area shape="poly" title=" " alt="" coords="1098,448,1120,440,1140,428,1157,408,1164,387,1171,364,1188,340,1212,321,1239,307,1242,312,1215,326,1192,344,1176,366,1169,388,1162,411,1143,432,1122,444,1099,453"/>
<area shape="poly" title=" " alt="" coords="1098,441,1141,428,1164,413,1188,397,1204,391,1206,396,1191,402,1167,417,1143,432,1099,446"/>
<area shape="poly" title=" " alt="" coords="1099,464,1213,474,1212,480,1098,469"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a04cdb66afbb720a35153317f3246e069" title=" " alt="" coords="1206,667,1414,700"/>
<area shape="poly" title=" " alt="" coords="1024,474,1049,512,1087,561,1135,611,1191,653,1199,658,1197,662,1188,658,1132,615,1083,564,1045,515,1020,477"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a517a0ee8c6971f08ba4370900300e84b" title=" " alt="" coords="1191,724,1429,758"/>
<area shape="poly" title=" " alt="" coords="1029,473,1082,537,1144,622,1157,648,1164,671,1173,691,1191,711,1196,714,1193,718,1188,715,1168,694,1159,673,1152,650,1139,625,1077,540,1024,477"/>
<area shape="poly" title=" " alt="" coords="1414,670,1510,659,1510,665,1414,675"/>
<area shape="poly" title=" " alt="" coords="1414,690,1512,700,1512,705,1414,696"/>
<area shape="poly" title=" " alt="" coords="1399,698,1431,709,1455,723,1479,737,1496,743,1494,748,1477,742,1453,728,1429,714,1398,703"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a572cdb5570d677242d1bc90d2d592852" title=" " alt="" coords="928,269,1092,303"/>
<area shape="poly" title=" " alt="" coords="748,388,805,349,877,312,912,300,913,305,879,317,808,354,751,392"/>
<area shape="poly" title=" " alt="" coords="1093,283,1175,283,1175,289,1093,289"/>
</map>
</div>

</div>
</div>
<a id="a7949dbca229a78115adadb49a5d9837d" name="a7949dbca229a78115adadb49a5d9837d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7949dbca229a78115adadb49a5d9837d">&#9670;&#160;</a></span>ubus_refresh_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ubus_refresh_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00371">371</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  372</span>{</div>
<div class="line"><span class="lineno">  373</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> *obj, *tmp;</div>
<div class="line"><span class="lineno">  374</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a> **objs;</div>
<div class="line"><span class="lineno">  375</span>    <span class="keywordtype">int</span> n, i = 0;</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>    <span class="comment">/* clear all type IDs, they need to be registered again */</span></div>
<div class="line"><span class="lineno">  378</span>    <a class="code hl_define" href="../../d3/d51/avl_8h.html#a78fce1e55fe672174caa3053a460ae56">avl_for_each_element</a>(&amp;<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a5327b9999c46f89a6b4a10b9336674c8">objects</a>, obj, <a class="code hl_variable" href="../../d9/d00/ubusd__obj_8h.html#a58a06bbffe8e8937bc53fb50a7a26c96">avl</a>)</div>
<div class="line"><span class="lineno">  379</span>        <span class="keywordflow">if</span> (obj-&gt;<a class="code hl_variable" href="../../d9/d00/ubusd__obj_8h.html#a49da49fe61d79191f2bae0669f111c15">type</a>)</div>
<div class="line"><span class="lineno">  380</span>            obj-&gt;<a class="code hl_variable" href="../../d9/d00/ubusd__obj_8h.html#a49da49fe61d79191f2bae0669f111c15">type</a>-&gt;<a class="code hl_variable" href="../../d9/d00/ubusd__obj_8h.html#add85493adf63593a36dc01a137356508">id</a> = 0;</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>    <span class="comment">/* push out all objects again */</span></div>
<div class="line"><span class="lineno">  383</span>    objs = alloca(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a5327b9999c46f89a6b4a10b9336674c8">objects</a>.<a class="code hl_variable" href="../../d3/d51/avl_8h.html#a482e120ce95125c64901c77eb546d7d3">count</a> * <span class="keyword">sizeof</span>(*objs));</div>
<div class="line"><span class="lineno">  384</span>    <a class="code hl_define" href="../../d3/d51/avl_8h.html#af8b3ca3843e7a4bb3bc80858f53c2ad5">avl_remove_all_elements</a>(&amp;<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a5327b9999c46f89a6b4a10b9336674c8">objects</a>, obj, <a class="code hl_variable" href="../../d9/d00/ubusd__obj_8h.html#a58a06bbffe8e8937bc53fb50a7a26c96">avl</a>, tmp) {</div>
<div class="line"><span class="lineno">  385</span>        objs[i++] = obj;</div>
<div class="line"><span class="lineno">  386</span>        obj-&gt;<a class="code hl_variable" href="../../d9/d00/ubusd__obj_8h.html#a3b03583230cbb14cdff15f30d09629d2">id</a> = 0;</div>
<div class="line"><span class="lineno">  387</span>    }</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span>    <span class="keywordflow">for</span> (n = i, i = 0; i &lt; n; i++)</div>
<div class="line"><span class="lineno">  390</span>        <a class="code hl_function" href="../../db/dda/libubus-obj_8c.html#a91976fc505121a3ddd2c4456e730401c">ubus_add_object</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>, objs[i]);</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>    <a class="code hl_function" href="#a53a20e63db75053c8fbe21656412b3da">ubus_refresh_auto_subscribe</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>);</div>
<div class="line"><span class="lineno">  393</span>}</div>
<div class="ttc" id="aavl_8h_html_a482e120ce95125c64901c77eb546d7d3"><div class="ttname"><a href="../../d3/d51/avl_8h.html#a482e120ce95125c64901c77eb546d7d3">avl_tree::count</a></div><div class="ttdeci">unsigned int count</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d51/avl_8h_source.html#l00125">avl.h:125</a></div></div>
<div class="ttc" id="aavl_8h_html_a78fce1e55fe672174caa3053a460ae56"><div class="ttname"><a href="../../d3/d51/avl_8h.html#a78fce1e55fe672174caa3053a460ae56">avl_for_each_element</a></div><div class="ttdeci">#define avl_for_each_element(tree, element, node_member)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d51/avl_8h_source.html#l00366">avl.h:366</a></div></div>
<div class="ttc" id="aavl_8h_html_af8b3ca3843e7a4bb3bc80858f53c2ad5"><div class="ttname"><a href="../../d3/d51/avl_8h.html#af8b3ca3843e7a4bb3bc80858f53c2ad5">avl_remove_all_elements</a></div><div class="ttdeci">#define avl_remove_all_elements(tree, element, node_member, ptr)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d51/avl_8h_source.html#l00545">avl.h:545</a></div></div>
<div class="ttc" id="alibubus-io_8c_html_a53a20e63db75053c8fbe21656412b3da"><div class="ttname"><a href="#a53a20e63db75053c8fbe21656412b3da">ubus_refresh_auto_subscribe</a></div><div class="ttdeci">static void ubus_refresh_auto_subscribe(struct ubus_context *ctx)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00359">libubus-io.c:359</a></div></div>
<div class="ttc" id="alibubus-obj_8c_html_a91976fc505121a3ddd2c4456e730401c"><div class="ttname"><a href="../../db/dda/libubus-obj_8c.html#a91976fc505121a3ddd2c4456e730401c">ubus_add_object</a></div><div class="ttdeci">int ubus_add_object(struct ubus_context *ctx, struct ubus_object *obj)</div><div class="ttdef"><b>Definition</b> <a href="../../db/dda/libubus-obj_8c_source.html#l00209">libubus-obj.c:209</a></div></div>
<div class="ttc" id="alibubus_8h_html_a5327b9999c46f89a6b4a10b9336674c8"><div class="ttname"><a href="../../db/d55/libubus_8h.html#a5327b9999c46f89a6b4a10b9336674c8">ubus_context::objects</a></div><div class="ttdeci">struct avl_tree objects</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00159">libubus.h:159</a></div></div>
<div class="ttc" id="aubusd__obj_8h_html_a49da49fe61d79191f2bae0669f111c15"><div class="ttname"><a href="../../d9/d00/ubusd__obj_8h.html#a49da49fe61d79191f2bae0669f111c15">ubus_object::type</a></div><div class="ttdeci">struct ubus_object_type * type</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00133">libubus.h:133</a></div></div>
<div class="ttc" id="aubusd__obj_8h_html_a58a06bbffe8e8937bc53fb50a7a26c96"><div class="ttname"><a href="../../d9/d00/ubusd__obj_8h.html#a58a06bbffe8e8937bc53fb50a7a26c96">ubus_object::avl</a></div><div class="ttdeci">struct avl_node avl</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00127">libubus.h:127</a></div></div>
<div class="ttc" id="aubusd__obj_8h_html_add85493adf63593a36dc01a137356508"><div class="ttname"><a href="../../d9/d00/ubusd__obj_8h.html#add85493adf63593a36dc01a137356508">ubus_object_type::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00120">libubus.h:120</a></div></div>
<div class="ttc" id="aubusd__obj_8h_html_d6/d75/structubus__object"><div class="ttname"><a href="../../d9/d00/ubusd__obj_8h.html#d6/d75/structubus__object">ubus_object</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d55/libubus_8h_source.html#l00126">libubus.h:126</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d55/libubus_8h_source.html#l00127">ubus_object::avl</a>, <a class="el" href="../../d3/d51/avl_8h_source.html#l00366">avl_for_each_element</a>, <a class="el" href="../../d3/d51/avl_8h_source.html#l00545">avl_remove_all_elements</a>, <a class="el" href="../../d3/d51/avl_8h_source.html#l00125">avl_tree::count</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00130">ubus_object::id</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00120">ubus_object_type::id</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00159">ubus_context::objects</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00133">ubus_object::type</a>, <a class="el" href="../../db/dda/libubus-obj_8c_source.html#l00209">ubus_add_object()</a>, and <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00359">ubus_refresh_auto_subscribe()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00395">ubus_reconnect()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d80/libubus-io_8c_a7949dbca229a78115adadb49a5d9837d_cgraph.png" border="0" usemap="#adc/d80/libubus-io_8c_a7949dbca229a78115adadb49a5d9837d_cgraph" alt=""/></div>
<map name="adc/d80/libubus-io_8c_a7949dbca229a78115adadb49a5d9837d_cgraph" id="adc/d80/libubus-io_8c_a7949dbca229a78115adadb49a5d9837d_cgraph">
<area shape="rect" title=" " alt="" coords="5,550,202,584"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a91976fc505121a3ddd2c4456e730401c" title=" " alt="" coords="882,410,1059,444"/>
<area shape="poly" title=" " alt="" coords="202,548,867,441,867,446,203,554"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a53a20e63db75053c8fbe21656412b3da" title=" " alt="" coords="250,639,540,673"/>
<area shape="poly" title=" " alt="" coords="162,582,324,632,322,637,160,587"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1173,695,1313,729"/>
<area shape="poly" title=" " alt="" coords="1061,440,1077,453,1097,482,1105,512,1105,541,1101,570,1097,599,1097,627,1105,655,1125,682,1140,694,1159,703,1157,708,1138,699,1121,686,1100,657,1092,628,1092,599,1096,570,1099,541,1099,512,1092,484,1073,457,1057,445"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#ac8502f265053dcc41bf8b5ea1fd2dd33" title=" " alt="" coords="1161,437,1325,470"/>
<area shape="poly" title=" " alt="" coords="1059,433,1145,441,1145,447,1059,438"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a04cdb66afbb720a35153317f3246e069" title=" " alt="" coords="1139,322,1347,356"/>
<area shape="poly" title=" " alt="" coords="1010,407,1122,364,1145,357,1147,363,1124,369,1012,412"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a42b839aa1a2ef9dd5abdba7c25400b4b" title=" " alt="" coords="1123,638,1363,672"/>
<area shape="poly" title=" " alt="" coords="1059,442,1076,453,1095,473,1104,494,1111,515,1125,539,1167,586,1210,626,1206,629,1164,590,1121,542,1106,517,1099,496,1091,476,1073,457,1056,446"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#a517a0ee8c6971f08ba4370900300e84b" title=" " alt="" coords="1124,122,1362,156"/>
<area shape="poly" title=" " alt="" coords="986,408,1213,166,1217,169,990,411"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a4cba0d855e6f3ed0fac6a0c6c41c8f49" title=" " alt="" coords="1144,494,1342,528"/>
<area shape="poly" title=" " alt="" coords="1046,442,1076,452,1100,467,1124,480,1141,486,1139,491,1122,485,1097,471,1074,457,1044,447"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="1485,805,1590,838"/>
<area shape="poly" title=" " alt="" coords="1276,727,1338,759,1412,790,1470,806,1468,811,1410,795,1336,763,1274,732"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="1447,919,1627,953"/>
<area shape="poly" title=" " alt="" coords="1256,728,1279,766,1314,814,1359,864,1412,906,1433,916,1431,921,1410,910,1355,868,1310,818,1275,769,1251,731"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="1735,421,1878,454"/>
<area shape="poly" title=" " alt="" coords="1590,817,1628,809,1646,801,1662,790,1696,755,1724,714,1747,670,1765,624,1788,537,1799,469,1805,470,1793,538,1770,626,1751,672,1728,717,1700,758,1665,794,1648,806,1629,814,1591,823"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a055e87e50f40e8a0bffc669e2a47d1eb" title=" " alt="" coords="1487,437,1588,470"/>
<area shape="poly" title=" " alt="" coords="1325,451,1471,451,1471,456,1325,456"/>
<area shape="rect" href="../../df/dc2/avl_8c.html#ab9041e08938920d5ae722e2d57dc20e2" title=" " alt="" coords="1482,207,1592,241"/>
<area shape="poly" title=" " alt="" coords="1271,319,1333,284,1410,250,1466,234,1468,239,1412,255,1336,289,1273,324"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a1e6079c1ffa0e8f05ca64a51d7332919" title=" " alt="" coords="1465,265,1610,298"/>
<area shape="poly" title=" " alt="" coords="1332,319,1449,296,1450,301,1333,324"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1467,322,1608,356"/>
<area shape="poly" title=" " alt="" coords="1347,336,1451,336,1451,341,1347,341"/>
<area shape="rect" href="../../dc/d8a/ubusd__proto_8c.html#aa817370ec1e201cfa7170662de3a30b4" title=" " alt="" coords="1449,379,1626,413"/>
<area shape="poly" title=" " alt="" coords="1333,354,1434,373,1433,379,1332,359"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a6a067ed16631bbe3826be535287879e4" title=" " alt="" coords="1458,666,1617,700"/>
<area shape="poly" title=" " alt="" coords="1364,664,1442,671,1442,676,1363,669"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#aca15427cb882afec28ce476b9e8e8b34" title=" " alt="" coords="1417,724,1657,780"/>
<area shape="poly" title=" " alt="" coords="1333,670,1364,680,1389,695,1412,710,1425,715,1423,720,1410,714,1386,699,1362,685,1331,675"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a5497c370318a5cc03dd662523915ea92" title=" " alt="" coords="1458,551,1617,585"/>
<area shape="poly" title=" " alt="" coords="1288,635,1410,594,1441,585,1443,590,1412,599,1290,640"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a8af6cb580774621aef719d6923cb5072" title=" " alt="" coords="1433,862,1642,896"/>
<area shape="poly" title=" " alt="" coords="1350,670,1365,681,1381,702,1389,724,1390,767,1390,809,1397,829,1413,849,1421,856,1418,860,1409,853,1393,832,1385,810,1384,767,1384,725,1377,704,1361,685,1347,674"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#ab53faf25fad8c6edbcd804eabeb14c6a" title=" " alt="" coords="1443,609,1632,642"/>
<area shape="poly" title=" " alt="" coords="1363,640,1427,634,1427,639,1364,645"/>
<area shape="rect" href="../../da/d23/list_8h.html#a6ff0e5eee443d7b27def83827340634d" title=" " alt="" coords="1748,862,1865,896"/>
<area shape="poly" title=" " alt="" coords="1637,778,1664,790,1721,820,1770,851,1767,855,1718,824,1662,795,1635,783"/>
<area shape="poly" title=" " alt="" coords="1642,876,1732,876,1732,881,1642,881"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#aa980250f4a411659367b8bffaf5d6118" title=" " alt="" coords="1460,35,1614,69"/>
<area shape="poly" title=" " alt="" coords="1288,119,1410,78,1444,69,1445,74,1412,83,1290,124"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a02523c6489a895ee963d17b13582be7a" title=" " alt="" coords="1456,150,1618,184"/>
<area shape="poly" title=" " alt="" coords="1362,147,1441,155,1440,160,1362,153"/>
<area shape="rect" href="../../db/dda/libubus-obj_8c.html#aaa9f26d5d8368ec973a73264e42dc770" title=" " alt="" coords="1411,93,1663,126"/>
<area shape="poly" title=" " alt="" coords="1362,124,1395,121,1396,126,1362,130"/>
<area shape="poly" title=" " alt="" coords="1619,172,1643,180,1665,193,1691,215,1715,241,1753,299,1781,357,1798,405,1793,406,1776,359,1748,302,1711,245,1688,219,1662,197,1641,185,1618,177"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#afcf08162affe766f0f1c9dd641c7b393" title=" " alt="" coords="1711,37,1902,70"/>
<area shape="poly" title=" " alt="" coords="1621,89,1707,71,1708,77,1622,95"/>
<area shape="rect" href="../../d2/de5/libubus-req_8c.html#a7da0a155290c1fd4d3b5911ced43d5a2" title=" " alt="" coords="1429,494,1645,528"/>
<area shape="poly" title=" " alt="" coords="1343,508,1413,508,1413,513,1343,513"/>
<area shape="poly" title=" " alt="" coords="413,671,490,750,549,802,619,855,698,906,784,948,829,965,875,977,922,985,969,988,1244,988,1363,992,1457,996,1501,995,1549,990,1601,980,1662,963,1721,936,1771,903,1774,908,1724,941,1664,968,1602,985,1549,996,1502,1001,1457,1002,1363,997,1244,993,969,993,921,991,874,983,828,970,782,953,696,911,616,860,546,806,487,754,409,675"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a1181bbaadf8f66ea4f2cd4bab3285695" title=" " alt="" coords="588,722,818,756"/>
<area shape="poly" title=" " alt="" coords="461,671,624,715,622,720,460,676"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a13ccf4210afc63ffc04d88e8a5c2a92d" title=" " alt="" coords="902,639,1039,673"/>
<area shape="poly" title=" " alt="" coords="540,653,886,653,886,659,540,659"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#ad13afe4ee46089b4c6a2cc46b314503e" title=" " alt="" coords="599,513,807,570"/>
<area shape="poly" title=" " alt="" coords="442,636,610,573,611,578,444,641"/>
<area shape="rect" href="../../d7/d0c/libubus-sub_8c.html#a1406fcd78c0f0c52dbb0fb6ae0b16f89" title=" " alt="" coords="887,749,1054,782"/>
<area shape="poly" title=" " alt="" coords="819,748,872,753,872,758,818,753"/>
<area shape="poly" title=" " alt="" coords="1040,668,1159,692,1158,697,1039,673"/>
<area shape="poly" title=" " alt="" coords="1038,645,1057,638,1073,626,1087,609,1093,591,1096,554,1098,517,1106,498,1121,479,1145,464,1148,468,1124,483,1110,500,1103,518,1101,555,1099,592,1091,611,1077,630,1060,642,1040,650"/>
<area shape="poly" title=" " alt="" coords="1040,653,1107,653,1107,658,1040,658"/>
<area shape="poly" title=" " alt="" coords="1038,639,1074,626,1148,582,1209,536,1212,540,1151,586,1076,631,1040,644"/>
<area shape="rect" href="../../d4/db9/libubus_8c.html#a6fa9294810fabe45d67d93d60ac687ed" title=" " alt="" coords="1159,379,1327,413"/>
<area shape="poly" title=" " alt="" coords="1038,646,1057,638,1073,626,1090,602,1098,577,1098,552,1096,526,1093,500,1094,474,1102,448,1121,422,1143,407,1146,411,1125,426,1107,450,1099,475,1098,500,1101,525,1104,551,1103,578,1095,604,1077,630,1060,643,1040,651"/>
<area shape="poly" title=" " alt="" coords="1326,381,1362,366,1376,352,1385,337,1393,322,1410,307,1448,290,1450,295,1412,312,1398,325,1389,340,1381,356,1364,370,1329,386"/>
<area shape="poly" title=" " alt="" coords="1327,377,1451,353,1452,358,1328,382"/>
<area shape="poly" title=" " alt="" coords="1327,393,1433,393,1433,399,1327,399"/>
<area shape="poly" title=" " alt="" coords="750,510,805,480,865,452,882,446,884,451,867,457,807,485,753,515"/>
<area shape="poly" title=" " alt="" coords="729,568,787,629,825,660,867,683,941,706,1018,717,1092,721,1158,719,1158,724,1092,726,1017,723,940,711,865,688,822,664,783,633,725,572"/>
<area shape="poly" title=" " alt="" coords="722,511,781,432,872,323,928,264,988,207,1053,154,1121,107,1194,66,1260,36,1321,17,1380,6,1441,3,1506,5,1664,20,1724,30,1723,35,1663,25,1506,10,1441,8,1381,12,1322,22,1262,41,1197,71,1124,112,1056,158,992,211,931,268,876,326,785,435,726,515"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a58d1b624b96aa768608f45d390cc0d59" title=" " alt="" coords="897,467,1044,501"/>
<area shape="poly" title=" " alt="" coords="807,516,881,500,883,506,809,522"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="866,525,1075,558"/>
<area shape="poly" title=" " alt="" coords="808,539,850,539,850,544,808,544"/>
<area shape="rect" href="../../db/d55/libubus_8h.html#ad79f9793c3835ea8691fe377025c7de7" title=" " alt="" coords="902,582,1039,616"/>
<area shape="poly" title=" " alt="" coords="809,561,888,578,887,584,807,566"/>
</map>
</div>

</div>
</div>
<a id="a3e8e6d098f2808fa135bfefa3c0e81f8" name="a3e8e6d098f2808fa135bfefa3c0e81f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e8e6d098f2808fa135bfefa3c0e81f8">&#9670;&#160;</a></span>ubus_send_msg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d5/d1d/libubox_2utils_8h.html#a40f0fecd341aae3690f0dded986e423a">__hidden</a> ubus_send_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d55/libubus_8h.html#df/d18/structubus__context">ubus_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>seq</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>cmd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>peer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>fd</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00126">126</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  128</span>{</div>
<div class="line"><span class="lineno">  129</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d5/d79/ubusmsg_8h.html#d2/d15/structubus__msghdr">ubus_msghdr</a> hdr;</div>
<div class="line"><span class="lineno">  130</span>    <span class="keyword">struct </span>iovec iov[2] = {</div>
<div class="line"><span class="lineno">  131</span>        <a class="code hl_define" href="#a84eb6242a3904db804faf42d8821d894">STATIC_IOV</a>(hdr)</div>
<div class="line"><span class="lineno">  132</span>    };</div>
<div class="line"><span class="lineno">  133</span>    <span class="keywordtype">int</span> ret;</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>    hdr.<a class="code hl_variable" href="../../d5/d79/ubusmsg_8h.html#a91367cc87f9394a97fce7eb0400fd34a">version</a> = 0;</div>
<div class="line"><span class="lineno">  136</span>    hdr.type = <a class="code hl_variable" href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a>;</div>
<div class="line"><span class="lineno">  137</span>    hdr.seq = <a class="code hl_define" href="../../d5/d1d/libubox_2utils_8h.html#af42a6506135fe9e671c40973bacc849f">cpu_to_be16</a>(seq);</div>
<div class="line"><span class="lineno">  138</span>    hdr.peer = <a class="code hl_define" href="../../d5/d1d/libubox_2utils_8h.html#afd3274bb70aea7cf9be403940e001cc7">cpu_to_be32</a>(peer);</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>    <span class="keywordflow">if</span> (!msg) {</div>
<div class="line"><span class="lineno">  141</span>        <a class="code hl_function" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a>(&amp;<a class="code hl_variable" href="../../d1/ddb/jshn_8c.html#a8f565d46decc2d5d8ac81923ceec43fd">b</a>, 0);</div>
<div class="line"><span class="lineno">  142</span>        msg = <a class="code hl_variable" href="../../d1/ddb/jshn_8c.html#a8f565d46decc2d5d8ac81923ceec43fd">b</a>.<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#af6065d74116605108b22c11e75ec669c">head</a>;</div>
<div class="line"><span class="lineno">  143</span>    }</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>    iov[1].iov_base = (<span class="keywordtype">char</span> *) msg;</div>
<div class="line"><span class="lineno">  146</span>    iov[1].iov_len = <a class="code hl_function" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01">blob_raw_len</a>(msg);</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>    ret = <a class="code hl_function" href="#a9a256a75cd053ed5d3443060e0a19a3f">writev_retry</a>(<a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#ad8badf8512adcf9a8819ed088bde09cc">fd</a>, iov, <a class="code hl_define" href="../../d8/d6a/test-blobmsg-types_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a>(iov), fd);</div>
<div class="line"><span class="lineno">  149</span>    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><span class="lineno">  150</span>        <a class="code hl_variable" href="../../d5/dd5/hotplug-dispatch_8c.html#a7c00b3b8999b2056f226d3cc35a83845">ctx</a>-&gt;<a class="code hl_variable" href="../../db/d55/libubus_8h.html#a95c5a7ee3be99fed1bc9e25b53a282fd">sock</a>.<a class="code hl_variable" href="../../dc/d56/uloop_8h.html#a0a2e642791b9398c2a113e8e95897a40">eof</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>    <span class="keywordflow">if</span> (fd &gt;= 0)</div>
<div class="line"><span class="lineno">  153</span>        close(fd);</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  156</span>}</div>
<div class="ttc" id="ablob_8c_html_af8ca2237342df92c699fbb2ddb5f390b"><div class="ttname"><a href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b">blob_buf_init</a></div><div class="ttdeci">int blob_buf_init(struct blob_buf *buf, int id)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/da0/blob_8c_source.html#l00091">blob.c:91</a></div></div>
<div class="ttc" id="ablob_8h_html_af6065d74116605108b22c11e75ec669c"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#af6065d74116605108b22c11e75ec669c">blob_buf::head</a></div><div class="ttdeci">struct blob_attr * head</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00065">blob.h:65</a></div></div>
<div class="ttc" id="ajshn_8c_html_a8f565d46decc2d5d8ac81923ceec43fd"><div class="ttname"><a href="../../d1/ddb/jshn_8c.html#a8f565d46decc2d5d8ac81923ceec43fd">b</a></div><div class="ttdeci">static struct blob_buf b</div><div class="ttdef"><b>Definition</b> <a href="../../d1/ddb/jshn_8c_source.html#l00040">jshn.c:40</a></div></div>
<div class="ttc" id="ajson__script_8c_html_a12c0be34061dfc832e2b49607c448229"><div class="ttname"><a href="../../d4/d4c/json__script_8c.html#a12c0be34061dfc832e2b49607c448229">cmd</a></div><div class="ttdeci">static const struct json_handler cmd[]</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d4c/json__script_8c_source.html#l00207">json_script.c:207</a></div></div>
<div class="ttc" id="alibubox_2utils_8h_html_af42a6506135fe9e671c40973bacc849f"><div class="ttname"><a href="../../d5/d1d/libubox_2utils_8h.html#af42a6506135fe9e671c40973bacc849f">cpu_to_be16</a></div><div class="ttdeci">#define cpu_to_be16(x)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d1d/libubox_2utils_8h_source.html#l00164">utils.h:164</a></div></div>
<div class="ttc" id="alibubox_2utils_8h_html_afd3274bb70aea7cf9be403940e001cc7"><div class="ttname"><a href="../../d5/d1d/libubox_2utils_8h.html#afd3274bb70aea7cf9be403940e001cc7">cpu_to_be32</a></div><div class="ttdeci">#define cpu_to_be32(x)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d1d/libubox_2utils_8h_source.html#l00163">utils.h:163</a></div></div>
<div class="ttc" id="alibubus-io_8c_html_a9a256a75cd053ed5d3443060e0a19a3f"><div class="ttname"><a href="#a9a256a75cd053ed5d3443060e0a19a3f">writev_retry</a></div><div class="ttdeci">static int writev_retry(int fd, struct iovec *iov, int iov_len, int sock_fd)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d80/libubus-io_8c_source.html#l00060">libubus-io.c:60</a></div></div>
<div class="ttc" id="atest-blobmsg-types_8c_html_a6242a25f9d996f0cc4f4cdb911218b75"><div class="ttname"><a href="../../d8/d6a/test-blobmsg-types_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(x)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d6a/test-blobmsg-types_8c_source.html#l00120">test-blobmsg-types.c:120</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_a91367cc87f9394a97fce7eb0400fd34a"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#a91367cc87f9394a97fce7eb0400fd34a">ubus_msghdr::version</a></div><div class="ttdeci">uint8_t version</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00030">ubusmsg.h:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d6a/test-blobmsg-types_8c_source.html#l00120">ARRAY_SIZE</a>, <a class="el" href="../../d1/ddb/jshn_8c_source.html#l00040">b</a>, <a class="el" href="../../d4/da0/blob_8c_source.html#l00091">blob_buf_init()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00109">blob_raw_len()</a>, <a class="el" href="../../d4/d4c/json__script_8c_source.html#l00207">cmd</a>, <a class="el" href="../../d5/d1d/libubox_2utils_8h_source.html#l00164">cpu_to_be16</a>, <a class="el" href="../../d5/d1d/libubox_2utils_8h_source.html#l00163">cpu_to_be32</a>, <a class="el" href="../../d5/dd5/hotplug-dispatch_8c_source.html#l00042">ctx</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00066">uloop_fd::eof</a>, <a class="el" href="../../dc/d56/uloop_8h_source.html#l00065">uloop_fd::fd</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00065">blob_buf::head</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00033">ubus_msghdr::peer</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00032">ubus_msghdr::seq</a>, <a class="el" href="../../db/d55/libubus_8h_source.html#l00162">ubus_context::sock</a>, <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00030">STATIC_IOV</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00031">ubus_msghdr::type</a>, <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00030">ubus_msghdr::version</a>, and <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00060">writev_retry()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/de5/libubus-req_8c_source.html#l00053">__ubus_start_request()</a>, <a class="el" href="../../d2/de5/libubus-req_8c_source.html#l00189">ubus_complete_deferred_request()</a>, and <a class="el" href="../../d2/de5/libubus-req_8c_source.html#l00205">ubus_send_reply()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d80/libubus-io_8c_a3e8e6d098f2808fa135bfefa3c0e81f8_cgraph.png" border="0" usemap="#adc/d80/libubus-io_8c_a3e8e6d098f2808fa135bfefa3c0e81f8_cgraph" alt=""/></div>
<map name="adc/d80/libubus-io_8c_a3e8e6d098f2808fa135bfefa3c0e81f8_cgraph" id="adc/d80/libubus-io_8c_a3e8e6d098f2808fa135bfefa3c0e81f8_cgraph">
<area shape="rect" title=" " alt="" coords="5,268,176,302"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="224,199,363,232"/>
<area shape="poly" title=" " alt="" coords="141,265,226,235,228,240,143,270"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="1033,211,1174,244"/>
<area shape="poly" title=" " alt="" coords="176,282,500,282,718,282,798,279,877,270,1017,245,1018,250,878,275,798,284,718,287,500,288,176,288"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#a9a256a75cd053ed5d3443060e0a19a3f" title=" " alt="" coords="228,323,359,356"/>
<area shape="poly" title=" " alt="" coords="156,300,214,316,213,321,155,305"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8de35ec0673663c45f2aad7c876d329" title=" " alt="" coords="449,115,554,148"/>
<area shape="poly" title=" " alt="" coords="336,196,443,152,445,157,338,201"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a6f17715cbf1ce82b0981a452537b4dc6" title=" " alt="" coords="411,199,591,232"/>
<area shape="poly" title=" " alt="" coords="364,213,395,213,395,218,364,218"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a99c424ce706ada40920b2f57259e223b" title=" " alt="" coords="843,5,985,39"/>
<area shape="poly" title=" " alt="" coords="518,112,569,70,602,48,638,32,686,19,735,13,827,11,828,16,736,18,687,24,640,37,605,53,572,74,521,116"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#ab4e3964334a7aec029ab29a2c724f248" title=" " alt="" coords="639,47,795,80"/>
<area shape="poly" title=" " alt="" coords="553,112,646,83,647,88,555,118"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a686c428a3ab7c421820e049ab2384d47" title=" " alt="" coords="843,75,985,108"/>
<area shape="poly" title=" " alt="" coords="554,124,827,97,828,102,555,129"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#abe9f6013aad507ac84630ee773b806b6" title=" " alt="" coords="649,156,785,190"/>
<area shape="poly" title=" " alt="" coords="555,139,634,154,633,160,554,144"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#a4fb5423718fbcc165ed995360ab3ea96" title=" " alt="" coords="667,213,767,247"/>
<area shape="poly" title=" " alt="" coords="535,147,640,200,654,205,652,210,638,205,532,151"/>
<area shape="poly" title=" " alt="" coords="795,45,827,38,828,43,796,50"/>
<area shape="poly" title=" " alt="" coords="795,72,828,77,827,82,795,77"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="843,156,985,190"/>
<area shape="poly" title=" " alt="" coords="786,170,828,170,828,176,786,176"/>
<area shape="poly" title=" " alt="" coords="786,188,843,200,933,212,1018,219,1017,225,932,217,842,205,785,193"/>
<area shape="poly" title=" " alt="" coords="976,188,1029,203,1027,208,974,193"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="1222,211,1321,244"/>
<area shape="poly" title=" " alt="" coords="1175,225,1207,225,1207,230,1175,230"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#ad1aaffb83e802ad470cb77be9f56977c" title=" " alt="" coords="447,323,556,356"/>
<area shape="poly" title=" " alt="" coords="360,337,431,337,431,342,360,342"/>
</map>
</div>

</div>
</div>
<a id="af89184a6a1d46c84beb995555a5f8422" name="af89184a6a1d46c84beb995555a5f8422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af89184a6a1d46c84beb995555a5f8422">&#9670;&#160;</a></span>ubus_validate_hdr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ubus_validate_hdr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d79/ubusmsg_8h.html#d2/d15/structubus__msghdr">ubus_msghdr</a> *</td>          <td class="paramname"><span class="paramname"><em>hdr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00224">224</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  225</span>{</div>
<div class="line"><span class="lineno">  226</span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#aae7cde5b300aec19a4125e96fe2a35da">data</a> = (<span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a> *) (hdr + 1);</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">if</span> (hdr-&gt;<a class="code hl_variable" href="../../d5/d79/ubusmsg_8h.html#a91367cc87f9394a97fce7eb0400fd34a">version</a> != 0)</div>
<div class="line"><span class="lineno">  229</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01">blob_raw_len</a>(<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#aae7cde5b300aec19a4125e96fe2a35da">data</a>) &lt; <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#aae7cde5b300aec19a4125e96fe2a35da">data</a>))</div>
<div class="line"><span class="lineno">  232</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b">blob_pad_len</a>(<a class="code hl_variable" href="../../d8/d3c/blob_8h.html#aae7cde5b300aec19a4125e96fe2a35da">data</a>) &gt; UBUS_MAX_MSGLEN)</div>
<div class="line"><span class="lineno">  235</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  238</span>}</div>
<div class="ttc" id="ablob_8h_html_a3071b18c2bb742e04d7622379ee8fd3b"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b">blob_pad_len</a></div><div class="ttdeci">static size_t blob_pad_len(const struct blob_attr *attr)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00118">blob.h:118</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d3c/blob_8h_source.html#l00118">blob_pad_len()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00109">blob_raw_len()</a>, <a class="el" href="../../d8/d3c/blob_8h_source.html#l00054">blob_attr::data</a>, and <a class="el" href="../../d5/d79/ubusmsg_8h_source.html#l00030">ubus_msghdr::version</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d03/ubus_2tests_2fuzz_2test-fuzz_8c_source.html#l00013">_ubus_validate_hdr()</a>, <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00271">get_next_msg()</a>, and <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00395">ubus_reconnect()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d80/libubus-io_8c_af89184a6a1d46c84beb995555a5f8422_cgraph.png" border="0" usemap="#adc/d80/libubus-io_8c_af89184a6a1d46c84beb995555a5f8422_cgraph" alt=""/></div>
<map name="adc/d80/libubus-io_8c_af89184a6a1d46c84beb995555a5f8422_cgraph" id="adc/d80/libubus-io_8c_af89184a6a1d46c84beb995555a5f8422_cgraph">
<area shape="rect" title=" " alt="" coords="5,33,196,67"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a3071b18c2bb742e04d7622379ee8fd3b" title=" " alt="" coords="244,5,386,39"/>
<area shape="poly" title=" " alt="" coords="196,35,228,31,229,36,196,40"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a2c4753820a7472bba7b999fbba79df01" title=" " alt="" coords="434,33,575,67"/>
<area shape="poly" title=" " alt="" coords="196,49,244,49,386,49,418,49,419,54,386,54,244,54,196,54"/>
<area shape="poly" title=" " alt="" coords="387,30,419,35,418,40,386,35"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html#a9921d2b89577d3344abbb66f24773e32" title=" " alt="" coords="623,33,722,67"/>
<area shape="poly" title=" " alt="" coords="576,48,608,48,608,53,576,53"/>
</map>
</div>

</div>
</div>
<a id="ad1aaffb83e802ad470cb77be9f56977c" name="ad1aaffb83e802ad470cb77be9f56977c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1aaffb83e802ad470cb77be9f56977c">&#9670;&#160;</a></span>wait_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void wait_data </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>write</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00052">52</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>{</div>
<div class="line"><span class="lineno">   54</span>    <span class="keyword">struct </span>pollfd pfd = { .fd = fd };</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>    pfd.events = write ? POLLOUT : POLLIN;</div>
<div class="line"><span class="lineno">   57</span>    poll(&amp;pfd, 1, -1);</div>
<div class="line"><span class="lineno">   58</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00158">recv_retry()</a>, and <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00060">writev_retry()</a>.</p>

</div>
</div>
<a id="a9a256a75cd053ed5d3443060e0a19a3f" name="a9a256a75cd053ed5d3443060e0a19a3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a256a75cd053ed5d3443060e0a19a3f">&#9670;&#160;</a></span>writev_retry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int writev_retry </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct iovec *</td>          <td class="paramname"><span class="paramname"><em>iov</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>iov_len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sock_fd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00060">60</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   61</span>{</div>
<div class="line"><span class="lineno">   62</span>    uint8_t fd_buf[CMSG_SPACE(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>))] = { 0 };</div>
<div class="line"><span class="lineno">   63</span>    <span class="keyword">struct </span>msghdr msghdr = { 0 };</div>
<div class="line"><span class="lineno">   64</span>    <span class="keyword">struct </span>cmsghdr *cmsg;</div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordtype">int</span> len = 0;</div>
<div class="line"><span class="lineno">   66</span>    <span class="keywordtype">int</span> *pfd;</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>    msghdr.msg_iov = iov,</div>
<div class="line"><span class="lineno">   69</span>    msghdr.msg_iovlen = iov_len,</div>
<div class="line"><span class="lineno">   70</span>    msghdr.msg_control = fd_buf;</div>
<div class="line"><span class="lineno">   71</span>    msghdr.msg_controllen = <span class="keyword">sizeof</span>(fd_buf);</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>    cmsg = CMSG_FIRSTHDR(&amp;msghdr);</div>
<div class="line"><span class="lineno">   74</span>    cmsg-&gt;cmsg_type = SCM_RIGHTS;</div>
<div class="line"><span class="lineno">   75</span>    cmsg-&gt;cmsg_level = SOL_SOCKET;</div>
<div class="line"><span class="lineno">   76</span>    cmsg-&gt;cmsg_len = CMSG_LEN(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>    pfd = (<span class="keywordtype">int</span> *) CMSG_DATA(cmsg);</div>
<div class="line"><span class="lineno">   79</span>    msghdr.msg_controllen = cmsg-&gt;cmsg_len;</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno">   82</span>        ssize_t cur_len;</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>        <span class="keywordflow">if</span> (sock_fd &lt; 0) {</div>
<div class="line"><span class="lineno">   85</span>            msghdr.msg_control = NULL;</div>
<div class="line"><span class="lineno">   86</span>            msghdr.msg_controllen = 0;</div>
<div class="line"><span class="lineno">   87</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   88</span>            *pfd = sock_fd;</div>
<div class="line"><span class="lineno">   89</span>        }</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>        cur_len = sendmsg(fd, &amp;msghdr, 0);</div>
<div class="line"><span class="lineno">   92</span>        <span class="keywordflow">if</span> (cur_len &lt; 0) {</div>
<div class="line"><span class="lineno">   93</span>            <span class="keywordflow">switch</span>(errno) {</div>
<div class="line"><span class="lineno">   94</span>            <span class="keywordflow">case</span> EAGAIN:</div>
<div class="line"><span class="lineno">   95</span>                <a class="code hl_function" href="#ad1aaffb83e802ad470cb77be9f56977c">wait_data</a>(fd, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">   96</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   97</span>            <span class="keywordflow">case</span> EINTR:</div>
<div class="line"><span class="lineno">   98</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   99</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  100</span>                <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  101</span>            }</div>
<div class="line"><span class="lineno">  102</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  103</span>        }</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">if</span> (len &gt; 0)</div>
<div class="line"><span class="lineno">  106</span>            sock_fd = -1;</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>        len += cur_len;</div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">while</span> (cur_len &gt;= (ssize_t) iov-&gt;iov_len) {</div>
<div class="line"><span class="lineno">  110</span>            cur_len -= iov-&gt;iov_len;</div>
<div class="line"><span class="lineno">  111</span>            iov_len--;</div>
<div class="line"><span class="lineno">  112</span>            iov++;</div>
<div class="line"><span class="lineno">  113</span>            <span class="keywordflow">if</span> (!iov_len)</div>
<div class="line"><span class="lineno">  114</span>                <span class="keywordflow">return</span> len;</div>
<div class="line"><span class="lineno">  115</span>        }</div>
<div class="line"><span class="lineno">  116</span>        iov-&gt;iov_base += cur_len;</div>
<div class="line"><span class="lineno">  117</span>        iov-&gt;iov_len -= cur_len;</div>
<div class="line"><span class="lineno">  118</span>        msghdr.msg_iov = iov;</div>
<div class="line"><span class="lineno">  119</span>        msghdr.msg_iovlen = iov_len;</div>
<div class="line"><span class="lineno">  120</span>    } <span class="keywordflow">while</span> (1);</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    <span class="comment">/* Should never reach here */</span></div>
<div class="line"><span class="lineno">  123</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  124</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00052">wait_data()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00126">ubus_send_msg()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d80/libubus-io_8c_a9a256a75cd053ed5d3443060e0a19a3f_cgraph.png" border="0" usemap="#adc/d80/libubus-io_8c_a9a256a75cd053ed5d3443060e0a19a3f_cgraph" alt=""/></div>
<map name="adc/d80/libubus-io_8c_a9a256a75cd053ed5d3443060e0a19a3f_cgraph" id="adc/d80/libubus-io_8c_a9a256a75cd053ed5d3443060e0a19a3f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,137,39"/>
<area shape="rect" href="../../dc/d80/libubus-io_8c.html#ad1aaffb83e802ad470cb77be9f56977c" title=" " alt="" coords="185,5,294,39"/>
<area shape="poly" title=" " alt="" coords="137,20,169,20,169,25,137,25"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2db28f5297374cef03aaa958a92494d7" name="a2db28f5297374cef03aaa958a92494d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2db28f5297374cef03aaa958a92494d7">&#9670;&#160;</a></span>attrbuf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d3c/blob_8h.html#dc/dd9/structblob__attr">blob_attr</a>* attrbuf[<a class="el" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eaf7242b947db1e5d0a412f7845cc1faf4">UBUS_ATTR_MAX</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00044">44</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/dda/libubus-obj_8c_source.html#l00160">ubus_add_object_cb()</a>, <a class="el" href="../../d2/de5/libubus-req_8c_source.html#l00329">ubus_get_status()</a>, <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00046">ubus_parse_msg()</a>, <a class="el" href="../../db/dda/libubus-obj_8c_source.html#l00053">ubus_process_invoke()</a>, <a class="el" href="../../db/dda/libubus-obj_8c_source.html#l00039">ubus_process_notify()</a>, <a class="el" href="../../db/dda/libubus-obj_8c_source.html#l00115">ubus_process_obj_msg()</a>, <a class="el" href="../../db/dda/libubus-obj_8c_source.html#l00019">ubus_process_unsubscribe()</a>, and <a class="el" href="../../db/dda/libubus-obj_8c_source.html#l00240">ubus_remove_object_cb()</a>.</p>

</div>
</div>
<a id="a1e504d18c2a5be244acca4d57941e6ab" name="a1e504d18c2a5be244acca4d57941e6ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e504d18c2a5be244acca4d57941e6ab">&#9670;&#160;</a></span>ubus_policy</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d8/d3c/blob_8h.html#d0/dc3/structblob__attr__info">blob_attr_info</a> ubus_policy[<a class="el" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eaf7242b947db1e5d0a412f7845cc1faf4">UBUS_ATTR_MAX</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eaa0f65f1356348d63afc6653a8481f7ca">UBUS_ATTR_STATUS</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad4678215c9b32112b2e050db3fa5e0ca">BLOB_ATTR_INT32</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eab5c5cc1907fffcc505fe80a675fe936b">UBUS_ATTR_OBJID</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad4678215c9b32112b2e050db3fa5e0ca">BLOB_ATTR_INT32</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7ea6d4e3f25cd7b17916e6cf98b71d00cf1">UBUS_ATTR_OBJPATH</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba2a650ba6ca73acf8789faab1c35ce1fe">BLOB_ATTR_STRING</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7ea7f31271813eed52212c6c12fd2b3ac7f">UBUS_ATTR_METHOD</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba2a650ba6ca73acf8789faab1c35ce1fe">BLOB_ATTR_STRING</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7ea3e52147c87c7ef92ea530183adb1b635">UBUS_ATTR_ACTIVE</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad71a4f14acd68d1590468155626b2008">BLOB_ATTR_INT8</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eaa58339b0c24c2045e5ecc539ef3bc128">UBUS_ATTR_NO_REPLY</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad71a4f14acd68d1590468155626b2008">BLOB_ATTR_INT8</a> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7ea8b6bb87010f5cbbb786098c8c1281c09">UBUS_ATTR_SUBSCRIBERS</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba9d027ffa4b79744af615bd342f4420f1">BLOB_ATTR_NESTED</a> },</div>
<div class="line">}</div>
<div class="ttc" id="ablob_8h_html_a06fc87d81c62e9abb8790b6e5713c55ba2a650ba6ca73acf8789faab1c35ce1fe"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba2a650ba6ca73acf8789faab1c35ce1fe">BLOB_ATTR_STRING</a></div><div class="ttdeci">@ BLOB_ATTR_STRING</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00037">blob.h:37</a></div></div>
<div class="ttc" id="ablob_8h_html_a06fc87d81c62e9abb8790b6e5713c55ba9d027ffa4b79744af615bd342f4420f1"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba9d027ffa4b79744af615bd342f4420f1">BLOB_ATTR_NESTED</a></div><div class="ttdeci">@ BLOB_ATTR_NESTED</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00035">blob.h:35</a></div></div>
<div class="ttc" id="ablob_8h_html_a06fc87d81c62e9abb8790b6e5713c55bad4678215c9b32112b2e050db3fa5e0ca"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad4678215c9b32112b2e050db3fa5e0ca">BLOB_ATTR_INT32</a></div><div class="ttdeci">@ BLOB_ATTR_INT32</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00040">blob.h:40</a></div></div>
<div class="ttc" id="ablob_8h_html_a06fc87d81c62e9abb8790b6e5713c55bad71a4f14acd68d1590468155626b2008"><div class="ttname"><a href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad71a4f14acd68d1590468155626b2008">BLOB_ATTR_INT8</a></div><div class="ttdeci">@ BLOB_ATTR_INT8</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d3c/blob_8h_source.html#l00038">blob.h:38</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_adfb314e0974e85af94acda6d0c0d1e7ea3e52147c87c7ef92ea530183adb1b635"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7ea3e52147c87c7ef92ea530183adb1b635">UBUS_ATTR_ACTIVE</a></div><div class="ttdeci">@ UBUS_ATTR_ACTIVE</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00094">ubusmsg.h:94</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_adfb314e0974e85af94acda6d0c0d1e7ea6d4e3f25cd7b17916e6cf98b71d00cf1"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7ea6d4e3f25cd7b17916e6cf98b71d00cf1">UBUS_ATTR_OBJPATH</a></div><div class="ttdeci">@ UBUS_ATTR_OBJPATH</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00084">ubusmsg.h:84</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_adfb314e0974e85af94acda6d0c0d1e7ea7f31271813eed52212c6c12fd2b3ac7f"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7ea7f31271813eed52212c6c12fd2b3ac7f">UBUS_ATTR_METHOD</a></div><div class="ttdeci">@ UBUS_ATTR_METHOD</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00086">ubusmsg.h:86</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_adfb314e0974e85af94acda6d0c0d1e7ea8b6bb87010f5cbbb786098c8c1281c09"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7ea8b6bb87010f5cbbb786098c8c1281c09">UBUS_ATTR_SUBSCRIBERS</a></div><div class="ttdeci">@ UBUS_ATTR_SUBSCRIBERS</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00097">ubusmsg.h:97</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_adfb314e0974e85af94acda6d0c0d1e7eaa0f65f1356348d63afc6653a8481f7ca"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eaa0f65f1356348d63afc6653a8481f7ca">UBUS_ATTR_STATUS</a></div><div class="ttdeci">@ UBUS_ATTR_STATUS</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00082">ubusmsg.h:82</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_adfb314e0974e85af94acda6d0c0d1e7eaa58339b0c24c2045e5ecc539ef3bc128"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eaa58339b0c24c2045e5ecc539ef3bc128">UBUS_ATTR_NO_REPLY</a></div><div class="ttdeci">@ UBUS_ATTR_NO_REPLY</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00095">ubusmsg.h:95</a></div></div>
<div class="ttc" id="aubusmsg_8h_html_adfb314e0974e85af94acda6d0c0d1e7eab5c5cc1907fffcc505fe80a675fe936b"><div class="ttname"><a href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eab5c5cc1907fffcc505fe80a675fe936b">UBUS_ATTR_OBJID</a></div><div class="ttdeci">@ UBUS_ATTR_OBJID</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d79/ubusmsg_8h_source.html#l00085">ubusmsg.h:85</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00034">34</a> of file <a class="el" href="../../dc/d80/libubus-io_8c_source.html">libubus-io.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   34</span>                                                                {</div>
<div class="line"><span class="lineno">   35</span>    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eaa0f65f1356348d63afc6653a8481f7ca">UBUS_ATTR_STATUS</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad4678215c9b32112b2e050db3fa5e0ca">BLOB_ATTR_INT32</a> },</div>
<div class="line"><span class="lineno">   36</span>    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eab5c5cc1907fffcc505fe80a675fe936b">UBUS_ATTR_OBJID</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad4678215c9b32112b2e050db3fa5e0ca">BLOB_ATTR_INT32</a> },</div>
<div class="line"><span class="lineno">   37</span>    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7ea6d4e3f25cd7b17916e6cf98b71d00cf1">UBUS_ATTR_OBJPATH</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba2a650ba6ca73acf8789faab1c35ce1fe">BLOB_ATTR_STRING</a> },</div>
<div class="line"><span class="lineno">   38</span>    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7ea7f31271813eed52212c6c12fd2b3ac7f">UBUS_ATTR_METHOD</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba2a650ba6ca73acf8789faab1c35ce1fe">BLOB_ATTR_STRING</a> },</div>
<div class="line"><span class="lineno">   39</span>    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7ea3e52147c87c7ef92ea530183adb1b635">UBUS_ATTR_ACTIVE</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad71a4f14acd68d1590468155626b2008">BLOB_ATTR_INT8</a> },</div>
<div class="line"><span class="lineno">   40</span>    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7eaa58339b0c24c2045e5ecc539ef3bc128">UBUS_ATTR_NO_REPLY</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad71a4f14acd68d1590468155626b2008">BLOB_ATTR_INT8</a> },</div>
<div class="line"><span class="lineno">   41</span>    [<a class="code hl_enumvalue" href="../../d5/d79/ubusmsg_8h.html#adfb314e0974e85af94acda6d0c0d1e7ea8b6bb87010f5cbbb786098c8c1281c09">UBUS_ATTR_SUBSCRIBERS</a>] = { .type = <a class="code hl_enumvalue" href="../../d8/d3c/blob_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba9d027ffa4b79744af615bd342f4420f1">BLOB_ATTR_NESTED</a> },</div>
<div class="line"><span class="lineno">   42</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../dc/d80/libubus-io_8c_source.html#l00046">ubus_parse_msg()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
