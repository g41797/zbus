<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>zbus: /home/g41797/CLionProjects/github.com/g41797/zbus/src/libs/procd/state.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">zbus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_87a455bccb09a92130c26a11a880c98a.html">libs</a></li><li class="navelem"><a class="el" href="../../dir_63350b749fcf74007a53c7c917c10773.html">procd</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">state.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;pwd.h&gt;</code><br />
<code>#include &lt;sys/reboot.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d4/ddd/container_8h_source.html">container.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/dab/procd_8h_source.html">procd.h</a>&quot;</code><br />
<code>#include &quot;syslog.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d11/hotplug_8h_source.html">plug/hotplug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/da3/watchdog_8h_source.html">watchdog.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d83/service_8h_source.html">service/service.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4d/procd_2utils_2utils_8h_source.html">utils/utils.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for state.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d62/state_8c__incl.png" border="0" usemap="#a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2state_8c" alt=""/></div>
<map name="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2state_8c" id="a_2home_2g41797_2CLionProjects_2github_8com_2g41797_2zbus_2src_2libs_2procd_2state_8c">
<area shape="rect" title=" " alt="" coords="545,5,831,85"/>
<area shape="rect" title=" " alt="" coords="5,133,86,167"/>
<area shape="poly" title=" " alt="" coords="545,65,339,92,101,135,101,130,339,87,545,59"/>
<area shape="rect" title=" " alt="" coords="110,133,189,167"/>
<area shape="poly" title=" " alt="" coords="545,70,385,97,205,135,203,130,384,92,544,65"/>
<area shape="rect" title=" " alt="" coords="213,133,348,167"/>
<area shape="poly" title=" " alt="" coords="546,85,360,131,358,126,544,80"/>
<area shape="rect" title=" " alt="" coords="781,460,865,493"/>
<area shape="poly" title=" " alt="" coords="708,85,730,152,738,191,741,230,741,314,747,352,761,388,780,420,800,446,796,449,776,423,757,390,742,353,736,315,736,230,733,191,725,153,703,86"/>
<area shape="rect" title=" " alt="" coords="575,460,665,493"/>
<area shape="poly" title=" " alt="" coords="673,86,651,153,643,191,640,230,640,315,636,385,628,445,623,444,631,384,635,314,635,230,638,191,646,152,668,85"/>
<area shape="rect" title=" " alt="" coords="481,541,578,575"/>
<area shape="poly" title=" " alt="" coords="565,88,519,113,478,144,462,163,450,183,442,206,439,230,439,396,445,434,461,471,482,502,504,528,500,532,478,506,456,473,440,436,434,396,434,230,436,204,445,181,458,160,474,140,516,108,563,83"/>
<area shape="rect" title=" " alt="" coords="790,541,917,575"/>
<area shape="poly" title=" " alt="" coords="691,86,691,230,691,314,696,369,710,410,735,447,770,492,791,513,814,530,811,535,787,517,766,495,731,451,705,412,690,370,686,315,686,230,686,86"/>
<area shape="rect" title=" " alt="" coords="312,541,406,575"/>
<area shape="poly" title=" " alt="" coords="545,79,488,103,437,135,417,154,402,177,392,202,388,230,388,396,382,467,370,527,364,526,377,466,383,396,383,230,387,201,397,174,413,151,434,131,485,98,543,74"/>
<area shape="rect" href="../../d4/ddd/container_8h.html" title=" " alt="" coords="475,378,600,412"/>
<area shape="poly" title=" " alt="" coords="654,87,621,134,594,195,572,259,546,363,541,362,567,257,589,193,617,132,649,84"/>
<area shape="rect" href="../../dc/dab/procd_8h.html" title=" " alt="" coords="1201,133,1293,167"/>
<area shape="poly" title=" " alt="" coords="832,70,1186,135,1185,140,831,75"/>
<area shape="rect" title=" " alt="" coords="2043,378,2141,412"/>
<area shape="poly" title=" " alt="" coords="832,48,1198,65,1422,78,1650,95,1865,117,2050,144,2126,159,2188,175,2234,193,2262,213,2275,236,2275,259,2264,282,2246,304,2196,343,2142,373,2140,369,2193,338,2243,300,2260,279,2270,258,2270,237,2258,216,2231,198,2186,180,2125,164,2049,149,1864,122,1650,101,1422,83,1198,70,832,54"/>
<area shape="rect" href="../../de/d11/hotplug_8h.html" title=" " alt="" coords="776,296,934,330"/>
<area shape="poly" title=" " alt="" coords="724,84,760,132,807,212,843,281,838,283,803,214,755,134,720,87"/>
<area shape="rect" href="../../d9/da3/watchdog_8h.html" title=" " alt="" coords="2494,215,2624,248"/>
<area shape="poly" title=" " alt="" coords="832,47,1260,57,1801,75,2277,99,2435,114,2484,122,2511,131,2527,145,2539,162,2555,199,2550,201,2535,165,2523,148,2508,135,2483,127,2434,119,2276,105,1801,80,1260,63,832,52"/>
<area shape="rect" href="../../d5/d83/service_8h.html" title=" " alt="" coords="2320,133,2497,167"/>
<area shape="poly" title=" " alt="" coords="832,47,1104,56,1469,72,1883,96,2300,130,2305,131,2304,136,2300,136,1882,101,1469,77,1104,61,832,53"/>
<area shape="rect" href="../../d9/d4d/procd_2utils_2utils_8h.html" title=" " alt="" coords="2107,215,2248,248"/>
<area shape="poly" title=" " alt="" coords="832,59,1384,120,1735,163,2089,212,2092,213,2091,218,2088,217,1734,169,1383,125,831,64"/>
<area shape="poly" title=" " alt="" coords="556,410,594,447,591,451,552,414"/>
<area shape="rect" title=" " alt="" coords="1492,623,1599,657"/>
<area shape="poly" title=" " alt="" coords="523,414,495,447,468,490,459,512,456,534,459,555,470,573,483,579,512,585,608,597,898,615,1226,628,1476,634,1476,640,1225,633,898,620,607,602,511,591,482,584,466,577,454,557,450,534,454,511,463,487,491,444,519,410"/>
<area shape="rect" title=" " alt="" coords="654,541,765,575"/>
<area shape="poly" title=" " alt="" coords="540,412,546,451,553,473,565,492,581,507,599,520,640,538,638,543,597,524,577,511,561,495,548,475,540,453,535,413"/>
<area shape="poly" title=" " alt="" coords="1214,169,1173,191,1130,217,1047,278,968,344,851,451,848,447,965,340,1043,274,1127,212,1170,186,1211,165"/>
<area shape="rect" href="../../dc/d56/uloop_8h.html" title=" " alt="" coords="889,460,1053,493"/>
<area shape="poly" title=" " alt="" coords="1224,169,1166,217,1111,277,1061,341,990,448,986,445,1057,338,1107,274,1162,213,1221,165"/>
<area shape="rect" href="../../d5/d1d/libubox_2utils_8h.html" title=" " alt="" coords="1128,460,1280,493"/>
<area shape="poly" title=" " alt="" coords="1233,169,1189,223,1167,259,1151,297,1147,317,1146,337,1154,378,1170,415,1187,446,1182,448,1165,417,1149,379,1141,338,1141,316,1146,296,1162,256,1185,220,1229,166"/>
<area shape="rect" href="../../db/d55/libubus_8h.html" title=" " alt="" coords="1367,215,1474,248"/>
<area shape="poly" title=" " alt="" coords="1283,165,1372,206,1370,210,1281,170"/>
<area shape="rect" href="../../de/dd2/udebug_8h.html" title=" " alt="" coords="1642,378,1753,412"/>
<area shape="poly" title=" " alt="" coords="1293,153,1418,169,1576,197,1654,216,1724,239,1780,265,1801,279,1817,295,1823,307,1824,319,1812,340,1789,359,1759,374,1757,369,1786,354,1808,337,1819,318,1818,308,1813,298,1798,283,1778,269,1722,244,1653,221,1575,202,1417,174,1293,158"/>
<area shape="poly" title=" " alt="" coords="1293,152,1725,184,1943,201,2045,212,2099,251,2131,277,2148,295,2152,315,2147,335,2137,353,2124,369,2120,366,2133,350,2142,333,2147,315,2143,298,2127,281,2096,255,2043,217,1943,207,1725,189,1293,157"/>
<area shape="rect" href="../../d9/d1e/procd_2log_8h.html" title=" " alt="" coords="1965,215,2033,248"/>
<area shape="poly" title=" " alt="" coords="1293,150,1409,154,1571,164,1758,183,1947,212,1951,213,1950,218,1946,217,1758,188,1571,170,1409,159,1293,155"/>
<area shape="poly" title=" " alt="" coords="949,496,891,535,888,530,946,492"/>
<area shape="poly" title=" " alt="" coords="889,494,878,496,673,521,468,544,421,550,421,545,468,539,673,515,877,491,888,489"/>
<area shape="poly" title=" " alt="" coords="889,495,731,524,643,543,637,558,644,573,659,583,686,593,768,608,878,619,1005,627,1269,635,1477,636,1477,642,1269,640,1005,633,877,625,767,613,685,598,657,588,639,577,631,558,640,539,730,519,888,490"/>
<area shape="rect" title=" " alt="" coords="942,541,1059,575"/>
<area shape="poly" title=" " alt="" coords="979,493,991,526,986,528,974,495"/>
<area shape="rect" title=" " alt="" coords="1499,541,1592,575"/>
<area shape="poly" title=" " alt="" coords="1054,486,1437,539,1484,545,1483,551,1436,544,1053,492"/>
<area shape="rect" href="../../da/d23/list_8h.html" title=" " alt="" coords="1667,541,1733,575"/>
<area shape="poly" title=" " alt="" coords="1054,484,1116,491,1361,512,1605,539,1652,546,1651,551,1604,544,1360,518,1116,496,1053,489"/>
<area shape="poly" title=" " alt="" coords="1670,578,1591,618,1589,613,1668,573"/>
<area shape="poly" title=" " alt="" coords="1128,489,642,544,594,550,593,545,641,539,1127,484"/>
<area shape="poly" title=" " alt="" coords="1133,497,933,542,932,536,1132,491"/>
<area shape="poly" title=" " alt="" coords="1176,496,1150,513,1128,533,1117,554,1118,563,1124,573,1146,590,1181,604,1225,615,1275,623,1381,633,1476,636,1476,641,1381,638,1275,628,1224,620,1180,609,1144,595,1119,577,1113,565,1112,552,1124,529,1147,508,1173,491"/>
<area shape="poly" title=" " alt="" coords="1128,490,972,512,781,543,780,538,971,507,1127,485"/>
<area shape="poly" title=" " alt="" coords="1164,496,1057,538,1055,533,1162,491"/>
<area shape="poly" title=" " alt="" coords="1274,491,1485,540,1484,545,1273,497"/>
<area shape="rect" title=" " alt="" coords="1133,541,1214,575"/>
<area shape="poly" title=" " alt="" coords="1200,495,1188,528,1183,526,1195,493"/>
<area shape="rect" title=" " alt="" coords="1237,541,1425,575"/>
<area shape="poly" title=" " alt="" coords="1231,492,1294,531,1291,535,1228,496"/>
<area shape="poly" title=" " alt="" coords="1367,239,1318,245,1262,256,1204,273,1150,299,1114,324,1092,350,1072,379,1042,414,1002,451,998,447,1038,410,1067,376,1088,347,1111,320,1147,294,1202,268,1261,251,1317,240,1366,234"/>
<area shape="poly" title=" " alt="" coords="1414,250,1401,287,1397,308,1399,330,1410,379,1422,416,1440,451,1469,492,1488,512,1509,530,1506,534,1484,516,1465,495,1436,454,1417,418,1405,380,1394,330,1392,308,1396,285,1409,248"/>
<area shape="poly" title=" " alt="" coords="1467,246,1508,266,1547,294,1581,337,1620,401,1688,526,1683,528,1616,404,1577,340,1544,298,1506,271,1465,251"/>
<area shape="rect" href="../../d3/d51/avl_8h.html" title=" " alt="" coords="1861,460,2001,493"/>
<area shape="poly" title=" " alt="" coords="1475,233,1560,241,1660,253,1752,270,1789,281,1816,294,1854,327,1884,367,1907,408,1923,444,1918,446,1902,411,1880,370,1850,331,1813,299,1787,286,1751,275,1659,258,1559,246,1474,239"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html" title=" " alt="" coords="1609,296,1802,330"/>
<area shape="poly" title=" " alt="" coords="1475,245,1634,289,1632,294,1473,250"/>
<area shape="rect" href="../../d5/d79/ubusmsg_8h.html" title=" " alt="" coords="1408,296,1534,330"/>
<area shape="poly" title=" " alt="" coords="1433,247,1455,282,1450,285,1428,250"/>
<area shape="rect" href="../../dc/d3c/ubus__common_8h.html" title=" " alt="" coords="1160,296,1334,330"/>
<area shape="poly" title=" " alt="" coords="1386,251,1297,292,1295,287,1384,246"/>
<area shape="poly" title=" " alt="" coords="1905,496,1835,535,1747,577,1679,602,1615,623,1613,617,1677,597,1744,573,1832,531,1903,492"/>
<area shape="poly" title=" " alt="" coords="1885,496,1749,543,1747,538,1883,491"/>
<area shape="rect" title=" " alt="" coords="1738,460,1836,493"/>
<area shape="poly" title=" " alt="" coords="1727,328,1748,350,1767,377,1779,411,1786,444,1781,445,1774,412,1762,379,1744,353,1723,332"/>
<area shape="rect" href="../../d8/d3c/blob_8h.html" title=" " alt="" coords="1465,378,1544,412"/>
<area shape="poly" title=" " alt="" coords="1666,333,1559,375,1557,370,1664,328"/>
<area shape="poly" title=" " alt="" coords="1464,400,1221,417,1054,435,880,462,880,457,1053,430,1220,411,1464,395"/>
<area shape="poly" title=" " alt="" coords="1464,402,768,462,681,471,680,466,768,457,1464,397"/>
<area shape="poly" title=" " alt="" coords="1522,411,1567,465,1590,501,1607,541,1611,558,1607,576,1595,597,1580,614,1576,611,1591,594,1602,574,1605,558,1602,542,1585,503,1563,468,1518,414"/>
<area shape="poly" title=" " alt="" coords="1511,411,1540,526,1535,527,1506,413"/>
<area shape="poly" title=" " alt="" coords="1465,409,1281,458,1280,453,1464,404"/>
<area shape="poly" title=" " alt="" coords="1466,331,1454,368,1452,390,1455,411,1468,444,1485,476,1523,528,1519,531,1481,479,1463,447,1450,412,1447,390,1449,367,1461,330"/>
<area shape="poly" title=" " alt="" coords="1480,329,1494,363,1489,365,1475,332"/>
<area shape="poly" title=" " alt="" coords="1263,329,1489,573,1523,610,1519,614,1485,577,1259,332"/>
<area shape="poly" title=" " alt="" coords="1642,405,1556,414,1431,421,1332,421,1285,423,1236,430,1181,442,1117,462,1102,469,1092,478,1067,496,999,522,933,542,931,537,997,517,1064,491,1089,474,1100,465,1115,457,1179,437,1235,424,1285,418,1332,416,1431,416,1556,409,1641,400"/>
<area shape="poly" title=" " alt="" coords="1642,405,1556,414,1314,437,1072,462,1068,463,1068,458,1072,457,1314,431,1556,409,1642,400"/>
<area shape="poly" title=" " alt="" coords="1684,414,1573,532,1569,528,1680,410"/>
<area shape="poly" title=" " alt="" coords="1700,412,1702,526,1697,526,1695,412"/>
<area shape="poly" title=" " alt="" coords="1746,410,1870,452,1868,457,1744,415"/>
<area shape="poly" title=" " alt="" coords="1717,410,1759,447,1756,451,1714,414"/>
<area shape="rect" href="../../df/df3/ulog_8h.html" title=" " alt="" coords="1980,296,2133,330"/>
<area shape="poly" title=" " alt="" coords="2013,247,2038,282,2033,285,2008,250"/>
<area shape="poly" title=" " alt="" coords="1984,333,1768,381,1767,375,1983,328"/>
<area shape="poly" title=" " alt="" coords="2066,329,2081,363,2076,365,2061,332"/>
<area shape="poly" title=" " alt="" coords="869,329,953,445,948,449,864,332"/>
<area shape="poly" title=" " alt="" coords="2557,249,2543,312,2537,353,2535,394,2535,478,2526,496,2503,513,2468,528,2421,542,2301,567,2158,589,1853,620,1615,637,1614,632,1852,615,2157,583,2301,562,2420,537,2466,523,2501,508,2522,493,2530,477,2530,393,2532,352,2538,311,2552,248"/>
<area shape="poly" title=" " alt="" coords="2419,166,2440,214,2455,262,2459,312,2459,396,2452,423,2434,447,2407,467,2370,485,2326,500,2277,513,2165,533,2046,547,1930,554,1749,560,1748,554,1929,549,2046,541,2165,528,2276,508,2325,495,2368,480,2404,463,2431,443,2448,421,2454,396,2454,312,2449,263,2435,216,2414,168"/>
<area shape="poly" title=" " alt="" coords="2415,166,2424,214,2428,280,2425,316,2417,352,2403,385,2382,414,2357,431,2320,445,2275,456,2224,464,2116,474,2017,478,2016,472,2115,469,2223,459,2274,451,2318,440,2354,426,2378,410,2399,382,2412,350,2420,315,2422,280,2418,215,2410,167"/>
<area shape="rect" href="../../dd/d1d/vlist_8h.html" title=" " alt="" coords="2217,378,2368,412"/>
<area shape="poly" title=" " alt="" coords="2403,168,2309,365,2304,363,2398,166"/>
<area shape="poly" title=" " alt="" coords="2362,170,2240,212,2238,207,2361,165"/>
<area shape="poly" title=" " alt="" coords="2219,415,2017,459,2015,454,2218,410"/>
<area shape="poly" title=" " alt="" coords="2184,248,2192,296,2194,332,2191,362,2179,388,2155,414,2124,436,2089,452,2052,463,2017,471,2016,466,2051,458,2087,447,2121,431,2152,410,2175,385,2186,360,2189,332,2187,297,2179,249"/>
<area shape="poly" title=" " alt="" coords="2107,247,1817,296,1816,291,2106,242"/>
<area shape="poly" title=" " alt="" coords="2123,251,1983,290,1815,333,1559,386,1558,381,1814,327,1982,285,2121,246"/>
</map>
</div>
</div>
<p><a href="../../d0/dc9/state_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a8628933cde20921c453a6d2607bdad62" id="r_a8628933cde20921c453a6d2607bdad62"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="#a8628933cde20921c453a6d2607bdad62ac36e5c9ac597253191be83acf0b51d25">STATE_NONE</a> = 0
, <a class="el" href="#a8628933cde20921c453a6d2607bdad62a4af059faa44ed89aaf83ced94b8e1ef8">STATE_EARLY</a>
, <a class="el" href="#a8628933cde20921c453a6d2607bdad62a66e02c3a607d99ec165fcc5ada8102b4">STATE_UBUS</a>
, <a class="el" href="#a8628933cde20921c453a6d2607bdad62a98d2a2153b4ae0445fa0b114d65b94d9">STATE_INIT</a>
, <br />
&#160;&#160;<a class="el" href="#a8628933cde20921c453a6d2607bdad62addfe11c6d06c4e27bd6efc18cc4862a6">STATE_RUNNING</a>
, <a class="el" href="#a8628933cde20921c453a6d2607bdad62ab22355c571740fc447187f266729f1e4">STATE_SHUTDOWN</a>
, <a class="el" href="#a8628933cde20921c453a6d2607bdad62a2a899ee7de853c95dfb9cd053b52515e">STATE_HALT</a>
, <a class="el" href="#a8628933cde20921c453a6d2607bdad62aaf3cd4bfe384e72ede12a82dc70d77ec">__STATE_MAX</a>
<br />
 }</td></tr>
<tr class="separator:a8628933cde20921c453a6d2607bdad62"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a92213c7578d9161ad8e296cf51962b3b" id="r_a92213c7578d9161ad8e296cf51962b3b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a92213c7578d9161ad8e296cf51962b3b">set_stdio</a> (const char *tty)</td></tr>
<tr class="separator:a92213c7578d9161ad8e296cf51962b3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a836f795ef705b19d71acd071b7c85101" id="r_a836f795ef705b19d71acd071b7c85101"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a836f795ef705b19d71acd071b7c85101">set_console</a> (void)</td></tr>
<tr class="separator:a836f795ef705b19d71acd071b7c85101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d074ca51f245cecff86a84a05e27a33" id="r_a4d074ca51f245cecff86a84a05e27a33"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4d074ca51f245cecff86a84a05e27a33">perform_halt</a> ()</td></tr>
<tr class="separator:a4d074ca51f245cecff86a84a05e27a33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae065f8ea6c1cf93be358341a009bf759" id="r_ae065f8ea6c1cf93be358341a009bf759"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae065f8ea6c1cf93be358341a009bf759">state_enter</a> (void)</td></tr>
<tr class="separator:ae065f8ea6c1cf93be358341a009bf759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d0a87cc96fcf931f3e5d51936df567a" id="r_a1d0a87cc96fcf931f3e5d51936df567a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1d0a87cc96fcf931f3e5d51936df567a">procd_state_next</a> (void)</td></tr>
<tr class="separator:a1d0a87cc96fcf931f3e5d51936df567a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a093c669b7cced324736c604da8563625" id="r_a093c669b7cced324736c604da8563625"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a093c669b7cced324736c604da8563625">procd_state_ubus_connect</a> (void)</td></tr>
<tr class="separator:a093c669b7cced324736c604da8563625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf43b8aafd73b80170dac94b1ea7e675" id="r_acf43b8aafd73b80170dac94b1ea7e675"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acf43b8aafd73b80170dac94b1ea7e675">procd_shutdown</a> (int event)</td></tr>
<tr class="separator:acf43b8aafd73b80170dac94b1ea7e675"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a89f234133d3efe315836311cbf21c64b" id="r_a89f234133d3efe315836311cbf21c64b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89f234133d3efe315836311cbf21c64b">state</a> = <a class="el" href="#a8628933cde20921c453a6d2607bdad62ac36e5c9ac597253191be83acf0b51d25">STATE_NONE</a></td></tr>
<tr class="separator:a89f234133d3efe315836311cbf21c64b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eb50fd30aafeee244175a8d5ee8be30" id="r_a7eb50fd30aafeee244175a8d5ee8be30"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7eb50fd30aafeee244175a8d5ee8be30">reboot_event</a></td></tr>
<tr class="separator:a7eb50fd30aafeee244175a8d5ee8be30"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a8628933cde20921c453a6d2607bdad62" name="a8628933cde20921c453a6d2607bdad62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8628933cde20921c453a6d2607bdad62">&#9670;&#160;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="3">Enumerator</th></tr><tr><td class="fieldname"><a id="a8628933cde20921c453a6d2607bdad62ac36e5c9ac597253191be83acf0b51d25" name="a8628933cde20921c453a6d2607bdad62ac36e5c9ac597253191be83acf0b51d25"></a>STATE_NONE&#160;</td><td class="fieldinit">0&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8628933cde20921c453a6d2607bdad62a4af059faa44ed89aaf83ced94b8e1ef8" name="a8628933cde20921c453a6d2607bdad62a4af059faa44ed89aaf83ced94b8e1ef8"></a>STATE_EARLY&#160;</td><td class="fieldinit">&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8628933cde20921c453a6d2607bdad62a66e02c3a607d99ec165fcc5ada8102b4" name="a8628933cde20921c453a6d2607bdad62a66e02c3a607d99ec165fcc5ada8102b4"></a>STATE_UBUS&#160;</td><td class="fieldinit">&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8628933cde20921c453a6d2607bdad62a98d2a2153b4ae0445fa0b114d65b94d9" name="a8628933cde20921c453a6d2607bdad62a98d2a2153b4ae0445fa0b114d65b94d9"></a>STATE_INIT&#160;</td><td class="fieldinit">&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8628933cde20921c453a6d2607bdad62addfe11c6d06c4e27bd6efc18cc4862a6" name="a8628933cde20921c453a6d2607bdad62addfe11c6d06c4e27bd6efc18cc4862a6"></a>STATE_RUNNING&#160;</td><td class="fieldinit">&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8628933cde20921c453a6d2607bdad62ab22355c571740fc447187f266729f1e4" name="a8628933cde20921c453a6d2607bdad62ab22355c571740fc447187f266729f1e4"></a>STATE_SHUTDOWN&#160;</td><td class="fieldinit">&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8628933cde20921c453a6d2607bdad62a2a899ee7de853c95dfb9cd053b52515e" name="a8628933cde20921c453a6d2607bdad62a2a899ee7de853c95dfb9cd053b52515e"></a>STATE_HALT&#160;</td><td class="fieldinit">&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8628933cde20921c453a6d2607bdad62aaf3cd4bfe384e72ede12a82dc70d77ec" name="a8628933cde20921c453a6d2607bdad62aaf3cd4bfe384e72ede12a82dc70d77ec"></a>__STATE_MAX&#160;</td><td class="fieldinit">&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d0/dc9/state_8c_source.html#l00032">32</a> of file <a class="el" href="../../d0/dc9/state_8c_source.html">state.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   32</span>     {</div>
<div class="line"><span class="lineno">   33</span>    <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62ac36e5c9ac597253191be83acf0b51d25">STATE_NONE</a> = 0,</div>
<div class="line"><span class="lineno">   34</span>    <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62a4af059faa44ed89aaf83ced94b8e1ef8">STATE_EARLY</a>,</div>
<div class="line"><span class="lineno">   35</span>    <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62a66e02c3a607d99ec165fcc5ada8102b4">STATE_UBUS</a>,</div>
<div class="line"><span class="lineno">   36</span>    <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62a98d2a2153b4ae0445fa0b114d65b94d9">STATE_INIT</a>,</div>
<div class="line"><span class="lineno">   37</span>    <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62addfe11c6d06c4e27bd6efc18cc4862a6">STATE_RUNNING</a>,</div>
<div class="line"><span class="lineno">   38</span>    <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62ab22355c571740fc447187f266729f1e4">STATE_SHUTDOWN</a>,</div>
<div class="line"><span class="lineno">   39</span>    <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62a2a899ee7de853c95dfb9cd053b52515e">STATE_HALT</a>,</div>
<div class="line"><span class="lineno">   40</span>    <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62aaf3cd4bfe384e72ede12a82dc70d77ec">__STATE_MAX</a>,</div>
<div class="line"><span class="lineno">   41</span>};</div>
<div class="ttc" id="astate_8c_html_a8628933cde20921c453a6d2607bdad62a2a899ee7de853c95dfb9cd053b52515e"><div class="ttname"><a href="#a8628933cde20921c453a6d2607bdad62a2a899ee7de853c95dfb9cd053b52515e">STATE_HALT</a></div><div class="ttdeci">@ STATE_HALT</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00039">state.c:39</a></div></div>
<div class="ttc" id="astate_8c_html_a8628933cde20921c453a6d2607bdad62a4af059faa44ed89aaf83ced94b8e1ef8"><div class="ttname"><a href="#a8628933cde20921c453a6d2607bdad62a4af059faa44ed89aaf83ced94b8e1ef8">STATE_EARLY</a></div><div class="ttdeci">@ STATE_EARLY</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00034">state.c:34</a></div></div>
<div class="ttc" id="astate_8c_html_a8628933cde20921c453a6d2607bdad62a66e02c3a607d99ec165fcc5ada8102b4"><div class="ttname"><a href="#a8628933cde20921c453a6d2607bdad62a66e02c3a607d99ec165fcc5ada8102b4">STATE_UBUS</a></div><div class="ttdeci">@ STATE_UBUS</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00035">state.c:35</a></div></div>
<div class="ttc" id="astate_8c_html_a8628933cde20921c453a6d2607bdad62a98d2a2153b4ae0445fa0b114d65b94d9"><div class="ttname"><a href="#a8628933cde20921c453a6d2607bdad62a98d2a2153b4ae0445fa0b114d65b94d9">STATE_INIT</a></div><div class="ttdeci">@ STATE_INIT</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00036">state.c:36</a></div></div>
<div class="ttc" id="astate_8c_html_a8628933cde20921c453a6d2607bdad62aaf3cd4bfe384e72ede12a82dc70d77ec"><div class="ttname"><a href="#a8628933cde20921c453a6d2607bdad62aaf3cd4bfe384e72ede12a82dc70d77ec">__STATE_MAX</a></div><div class="ttdeci">@ __STATE_MAX</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00040">state.c:40</a></div></div>
<div class="ttc" id="astate_8c_html_a8628933cde20921c453a6d2607bdad62ab22355c571740fc447187f266729f1e4"><div class="ttname"><a href="#a8628933cde20921c453a6d2607bdad62ab22355c571740fc447187f266729f1e4">STATE_SHUTDOWN</a></div><div class="ttdeci">@ STATE_SHUTDOWN</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00038">state.c:38</a></div></div>
<div class="ttc" id="astate_8c_html_a8628933cde20921c453a6d2607bdad62ac36e5c9ac597253191be83acf0b51d25"><div class="ttname"><a href="#a8628933cde20921c453a6d2607bdad62ac36e5c9ac597253191be83acf0b51d25">STATE_NONE</a></div><div class="ttdeci">@ STATE_NONE</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00033">state.c:33</a></div></div>
<div class="ttc" id="astate_8c_html_a8628933cde20921c453a6d2607bdad62addfe11c6d06c4e27bd6efc18cc4862a6"><div class="ttname"><a href="#a8628933cde20921c453a6d2607bdad62addfe11c6d06c4e27bd6efc18cc4862a6">STATE_RUNNING</a></div><div class="ttdeci">@ STATE_RUNNING</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00037">state.c:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4d074ca51f245cecff86a84a05e27a33" name="a4d074ca51f245cecff86a84a05e27a33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d074ca51f245cecff86a84a05e27a33">&#9670;&#160;</a></span>perform_halt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void perform_halt </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dc9/state_8c_source.html#l00098">98</a> of file <a class="el" href="../../d0/dc9/state_8c_source.html">state.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   99</span>{</div>
<div class="line"><span class="lineno">  100</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a7eb50fd30aafeee244175a8d5ee8be30">reboot_event</a> == RB_POWER_OFF)</div>
<div class="line"><span class="lineno">  101</span>        <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- power down -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  103</span>        <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- reboot -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    <span class="comment">/* Allow time for last message to reach serial console, etc */</span></div>
<div class="line"><span class="lineno">  106</span>    sleep(1);</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/ddd/container_8h.html#a05b941972fa26f438826c9b6c291ef25">is_container</a>()) {</div>
<div class="line"><span class="lineno">  109</span>        reboot(<a class="code hl_variable" href="#a7eb50fd30aafeee244175a8d5ee8be30">reboot_event</a>);</div>
<div class="line"><span class="lineno">  110</span>        exit(EXIT_SUCCESS);</div>
<div class="line"><span class="lineno">  111</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  112</span>    }</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    <span class="comment">/* We have to fork here, since the kernel calls do_exit(EXIT_SUCCESS)</span></div>
<div class="line"><span class="lineno">  115</span><span class="comment">     * in linux/kernel/sys.c, which can cause the machine to panic when</span></div>
<div class="line"><span class="lineno">  116</span><span class="comment">     * the init process exits... */</span></div>
<div class="line"><span class="lineno">  117</span>    <span class="keywordflow">if</span> (!vfork()) { <span class="comment">/* child */</span></div>
<div class="line"><span class="lineno">  118</span>        reboot(<a class="code hl_variable" href="#a7eb50fd30aafeee244175a8d5ee8be30">reboot_event</a>);</div>
<div class="line"><span class="lineno">  119</span>        _exit(EXIT_SUCCESS);</div>
<div class="line"><span class="lineno">  120</span>    }</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    <span class="keywordflow">while</span> (1)</div>
<div class="line"><span class="lineno">  123</span>        sleep(1);</div>
<div class="line"><span class="lineno">  124</span>}</div>
<div class="ttc" id="acontainer_8h_html_a05b941972fa26f438826c9b6c291ef25"><div class="ttname"><a href="../../d4/ddd/container_8h.html#a05b941972fa26f438826c9b6c291ef25">is_container</a></div><div class="ttdeci">static bool is_container()</div><div class="ttdef"><b>Definition</b> <a href="../../d4/ddd/container_8h_source.html#l00021">container.h:21</a></div></div>
<div class="ttc" id="aprocd_2log_8h_html_a159ca84d25a5487d8e81e4438725df19"><div class="ttname"><a href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a></div><div class="ttdeci">#define LOG</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d1e/procd_2log_8h_source.html#l00032">log.h:32</a></div></div>
<div class="ttc" id="astate_8c_html_a7eb50fd30aafeee244175a8d5ee8be30"><div class="ttname"><a href="#a7eb50fd30aafeee244175a8d5ee8be30">reboot_event</a></div><div class="ttdeci">static int reboot_event</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00044">state.c:44</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/ddd/container_8h_source.html#l00021">is_container()</a>, <a class="el" href="../../d9/d1e/procd_2log_8h_source.html#l00032">LOG</a>, and <a class="el" href="../../d0/dc9/state_8c_source.html#l00044">reboot_event</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dc9/state_8c_source.html#l00126">state_enter()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dc9/state_8c_a4d074ca51f245cecff86a84a05e27a33_cgraph.png" border="0" usemap="#ad0/dc9/state_8c_a4d074ca51f245cecff86a84a05e27a33_cgraph" alt=""/></div>
<map name="ad0/dc9/state_8c_a4d074ca51f245cecff86a84a05e27a33_cgraph" id="ad0/dc9/state_8c_a4d074ca51f245cecff86a84a05e27a33_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,145,39"/>
<area shape="rect" href="../../d4/ddd/container_8h.html#a05b941972fa26f438826c9b6c291ef25" title=" " alt="" coords="193,5,325,39"/>
<area shape="poly" title=" " alt="" coords="145,20,177,20,177,25,145,25"/>
</map>
</div>

</div>
</div>
<a id="acf43b8aafd73b80170dac94b1ea7e675" name="acf43b8aafd73b80170dac94b1ea7e675"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf43b8aafd73b80170dac94b1ea7e675">&#9670;&#160;</a></span>procd_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void procd_shutdown </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>event</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dc9/state_8c_source.html#l00222">222</a> of file <a class="el" href="../../d0/dc9/state_8c_source.html">state.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  223</span>{</div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a89f234133d3efe315836311cbf21c64b">state</a> &gt;= <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62ab22355c571740fc447187f266729f1e4">STATE_SHUTDOWN</a>)</div>
<div class="line"><span class="lineno">  225</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  226</span>    <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(2, <span class="stringliteral">&quot;Shutting down system with event %x\n&quot;</span>, event);</div>
<div class="line"><span class="lineno">  227</span>    <a class="code hl_variable" href="#a7eb50fd30aafeee244175a8d5ee8be30">reboot_event</a> = event;</div>
<div class="line"><span class="lineno">  228</span>    <a class="code hl_variable" href="#a89f234133d3efe315836311cbf21c64b">state</a> = <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62ab22355c571740fc447187f266729f1e4">STATE_SHUTDOWN</a>;</div>
<div class="line"><span class="lineno">  229</span>    <a class="code hl_function" href="#ae065f8ea6c1cf93be358341a009bf759">state_enter</a>();</div>
<div class="line"><span class="lineno">  230</span>}</div>
<div class="ttc" id="astate_8c_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="#a89f234133d3efe315836311cbf21c64b">state</a></div><div class="ttdeci">static int state</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00043">state.c:43</a></div></div>
<div class="ttc" id="astate_8c_html_ae065f8ea6c1cf93be358341a009bf759"><div class="ttname"><a href="#ae065f8ea6c1cf93be358341a009bf759">state_enter</a></div><div class="ttdeci">static void state_enter(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00126">state.c:126</a></div></div>
<div class="ttc" id="asystem-dummy_8c_html_ad72dbcf6d0153db1b8d8a58001feed83"><div class="ttname"><a href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a></div><div class="ttdeci">#define DEBUG</div><div class="ttdef"><b>Definition</b> <a href="../../da/d12/system-dummy_8c_source.html#l00021">system-dummy.c:21</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d12/system-dummy_8c_source.html#l00021">DEBUG</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00044">reboot_event</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00043">state</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00126">state_enter()</a>, and <a class="el" href="../../d0/dc9/state_8c_source.html#l00038">STATE_SHUTDOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d36/signal_8c_source.html#l00033">signal_shutdown()</a>, and <a class="el" href="../../d8/d1d/procd_2system_8c_source.html#l00440">system_reboot()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dc9/state_8c_acf43b8aafd73b80170dac94b1ea7e675_cgraph.png" border="0" usemap="#ad0/dc9/state_8c_acf43b8aafd73b80170dac94b1ea7e675_cgraph" alt=""/></div>
<map name="ad0/dc9/state_8c_acf43b8aafd73b80170dac94b1ea7e675_cgraph" id="ad0/dc9/state_8c_acf43b8aafd73b80170dac94b1ea7e675_cgraph">
<area shape="rect" title=" " alt="" coords="5,721,179,755"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#ae065f8ea6c1cf93be358341a009bf759" title=" " alt="" coords="227,721,352,755"/>
<area shape="poly" title=" " alt="" coords="179,736,211,736,211,741,179,741"/>
<area shape="rect" href="../../da/d37/hotplug_8c.html#af2cd40f5e26df4bdea678b303bc4a48c" title=" " alt="" coords="459,107,551,140"/>
<area shape="poly" title=" " alt="" coords="289,721,300,613,321,452,336,367,353,288,374,223,398,177,419,156,443,141,446,146,422,160,402,180,379,225,358,290,341,368,326,452,305,614,295,721"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a4d074ca51f245cecff86a84a05e27a33" title=" " alt="" coords="436,191,575,224"/>
<area shape="poly" title=" " alt="" coords="290,721,302,626,324,488,357,349,376,294,398,255,412,241,429,229,432,234,416,245,402,258,381,296,362,351,330,489,307,627,295,721"/>
<area shape="rect" href="../../d0/d3c/coldplug_8c.html#a99355122adf84389f5c5834c6b399922" title=" " alt="" coords="425,269,586,303"/>
<area shape="poly" title=" " alt="" coords="293,720,332,603,362,524,398,445,439,373,480,314,484,317,444,376,402,447,367,526,337,605,298,722"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#ae85c33038baa57d4faa6e4c3628fefec" title=" " alt="" coords="400,639,610,672"/>
<area shape="poly" title=" " alt="" coords="334,718,444,676,446,681,336,723"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#ad41fa8946f382dfa229ea8eccbd81bf4" title=" " alt="" coords="435,721,576,755"/>
<area shape="poly" title=" " alt="" coords="352,736,419,736,419,741,352,741"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1" title=" " alt="" coords="414,779,596,812"/>
<area shape="poly" title=" " alt="" coords="353,752,425,772,424,777,352,757"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#ae01cc4911a782c7811497063404f7656" title=" " alt="" coords="408,964,602,998"/>
<area shape="poly" title=" " alt="" coords="308,754,481,951,477,954,304,757"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a836f795ef705b19d71acd071b7c85101" title=" " alt="" coords="441,1140,569,1174"/>
<area shape="poly" title=" " alt="" coords="295,755,304,813,323,895,355,988,376,1033,402,1075,430,1105,461,1129,458,1134,426,1109,398,1078,372,1036,350,990,318,897,299,814,290,756"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a92213c7578d9161ad8e296cf51962b3b" title=" " alt="" coords="741,1251,844,1284"/>
<area shape="poly" title=" " alt="" coords="296,755,306,803,326,870,358,942,378,977,402,1008,428,1033,454,1049,506,1067,558,1084,585,1101,612,1126,623,1141,630,1156,635,1185,641,1212,648,1225,660,1237,691,1255,726,1263,725,1268,689,1260,657,1242,644,1228,636,1214,630,1186,625,1158,619,1144,608,1129,582,1105,556,1089,504,1072,451,1054,425,1037,398,1012,374,980,353,945,321,872,301,805,291,756"/>
<area shape="rect" href="../../d9/d65/ulog_8c.html#a962767ce46bee1f4c9b44ecd408dd669" title=" " alt="" coords="447,1285,563,1319"/>
<area shape="poly" title=" " alt="" coords="295,755,302,827,320,936,352,1062,375,1125,402,1185,436,1234,474,1273,470,1277,432,1237,398,1187,370,1127,347,1064,315,937,297,828,289,756"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a874a52d6ac45041d9e76bd1925d88c24" title=" " alt="" coords="431,459,580,492"/>
<area shape="poly" title=" " alt="" coords="303,719,478,503,482,506,307,723"/>
<area shape="rect" href="../../d4/d4c/json__script_8c.html#a1dbfcb66aa8ef4297aca3e2962750073" title=" " alt="" coords="713,5,872,39"/>
<area shape="poly" title=" " alt="" coords="536,104,591,75,657,48,697,36,699,41,659,53,594,80,538,108"/>
<area shape="rect" href="../../da/d37/hotplug_8c.html#adec4184e967b6251ca24c1a347b84c24" title=" " alt="" coords="713,63,872,96"/>
<area shape="poly" title=" " alt="" coords="551,114,697,91,698,97,552,119"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0" title=" " alt="" coords="720,120,865,154"/>
<area shape="poly" title=" " alt="" coords="552,123,705,130,705,135,551,128"/>
<area shape="rect" href="../../d4/ddd/container_8h.html#a05b941972fa26f438826c9b6c291ef25" title=" " alt="" coords="726,177,859,211"/>
<area shape="poly" title=" " alt="" coords="575,202,710,195,711,201,576,207"/>
<area shape="poly" title=" " alt="" coords="541,266,595,243,658,220,711,206,712,211,659,225,597,248,543,271"/>
<area shape="rect" href="../../d0/d3c/coldplug_8c.html#a7cb00c0ad6086c37a0f11c7f47b219cf" title=" " alt="" coords="680,235,905,268"/>
<area shape="poly" title=" " alt="" coords="586,274,665,264,665,270,586,279"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#af511d1bcbdfcfaba211d4ae1b0930dbb" title=" " alt="" coords="975,317,1171,351"/>
<area shape="poly" title=" " alt="" coords="586,290,959,322,959,327,586,296"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#ab04b86ab1de0a8cc792eac1f5fccc387" title=" " alt="" coords="999,596,1147,630"/>
<area shape="poly" title=" " alt="" coords="555,636,604,621,658,610,744,602,831,599,984,603,983,609,831,604,745,607,659,615,605,626,556,641"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#a2f1d28c800993b650b16349937bc4cc3" title=" " alt="" coords="1000,667,1146,700"/>
<area shape="poly" title=" " alt="" coords="611,665,659,669,832,677,985,680,985,686,832,682,658,674,611,670"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#af8f81bf02a1064257a2b3363668bb700" title=" " alt="" coords="702,625,883,659"/>
<area shape="poly" title=" " alt="" coords="611,648,687,644,687,650,611,653"/>
<area shape="poly" title=" " alt="" coords="883,630,983,619,984,625,883,635"/>
<area shape="poly" title=" " alt="" coords="884,653,985,668,984,673,883,658"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#a0d79ba1bf57a05e542000f9f7bc4dc73" title=" " alt="" coords="732,735,853,768"/>
<area shape="poly" title=" " alt="" coords="576,739,717,745,716,751,576,744"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="723,792,862,826"/>
<area shape="poly" title=" " alt="" coords="517,962,573,899,613,864,657,834,707,817,709,822,660,839,616,868,577,903,521,965"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="688,849,897,883"/>
<area shape="poly" title=" " alt="" coords="530,961,586,926,657,892,676,885,678,890,659,897,589,931,533,966"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32" title=" " alt="" coords="685,907,900,940"/>
<area shape="poly" title=" " alt="" coords="593,961,689,941,690,947,594,966"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="686,964,899,998"/>
<area shape="poly" title=" " alt="" coords="603,978,671,978,671,984,603,984"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214" title=" " alt="" coords="686,1021,899,1055"/>
<area shape="poly" title=" " alt="" coords="594,996,690,1015,689,1020,593,1001"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="687,1079,898,1112"/>
<area shape="poly" title=" " alt="" coords="539,996,612,1037,635,1052,659,1065,677,1071,676,1076,657,1070,632,1057,609,1042,536,1000"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a422dae339fb612dbf5723dabf2ea93ab" title=" " alt="" coords="745,1136,840,1170"/>
<area shape="poly" title=" " alt="" coords="550,996,582,1014,612,1038,628,1061,635,1083,643,1104,660,1123,694,1140,730,1148,729,1153,692,1145,657,1127,638,1106,630,1085,623,1063,608,1041,579,1018,548,1001"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#a2ab347c929ea42e974beced745d73de3" title=" " alt="" coords="694,1193,891,1227"/>
<area shape="poly" title=" " alt="" coords="554,996,585,1013,612,1038,625,1057,631,1077,634,1113,638,1148,646,1164,660,1180,682,1194,679,1199,657,1184,641,1167,633,1149,629,1114,626,1078,620,1060,608,1041,582,1018,552,1000"/>
<area shape="poly" title=" " alt="" coords="534,1172,590,1205,659,1237,726,1255,725,1260,657,1242,588,1210,531,1177"/>
<area shape="rect" href="../../d9/d65/ulog_8c.html#aa98943b7174469752250aa9314bf45ff" title=" " alt="" coords="734,1308,851,1342"/>
<area shape="poly" title=" " alt="" coords="564,1304,719,1316,718,1322,564,1309"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a90282b93d8528c3fc4e5b188bc5fbc1c" title=" " alt="" coords="752,344,833,378"/>
<area shape="poly" title=" " alt="" coords="530,456,586,421,657,386,697,374,736,366,737,371,699,379,659,391,589,425,533,461"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58" title=" " alt="" coords="709,401,876,435"/>
<area shape="poly" title=" " alt="" coords="580,458,694,435,695,440,581,463"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a05316067521d0e4efd9b8d3a3a322591" title=" " alt="" coords="677,459,908,492"/>
<area shape="poly" title=" " alt="" coords="580,473,662,473,662,478,580,478"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1" title=" " alt="" coords="658,516,927,550"/>
<area shape="poly" title=" " alt="" coords="581,488,690,510,689,515,580,493"/>
<area shape="poly" title=" " alt="" coords="833,354,959,342,960,348,833,360"/>
</map>
</div>

</div>
</div>
<a id="a1d0a87cc96fcf931f3e5d51936df567a" name="a1d0a87cc96fcf931f3e5d51936df567a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d0a87cc96fcf931f3e5d51936df567a">&#9670;&#160;</a></span>procd_state_next()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void procd_state_next </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dc9/state_8c_source.html#l00209">209</a> of file <a class="el" href="../../d0/dc9/state_8c_source.html">state.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  210</span>{</div>
<div class="line"><span class="lineno">  211</span>    <a class="code hl_define" href="../../da/d12/system-dummy_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>(4, <span class="stringliteral">&quot;Change state %d -&gt; %d\n&quot;</span>, <a class="code hl_variable" href="#a89f234133d3efe315836311cbf21c64b">state</a>, <a class="code hl_variable" href="#a89f234133d3efe315836311cbf21c64b">state</a> + 1);</div>
<div class="line"><span class="lineno">  212</span>    <a class="code hl_variable" href="#a89f234133d3efe315836311cbf21c64b">state</a>++;</div>
<div class="line"><span class="lineno">  213</span>    <a class="code hl_function" href="#ae065f8ea6c1cf93be358341a009bf759">state_enter</a>();</div>
<div class="line"><span class="lineno">  214</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d12/system-dummy_8c_source.html#l00021">DEBUG</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00043">state</a>, and <a class="el" href="../../d0/dc9/state_8c_source.html#l00126">state_enter()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d3c/coldplug_8c_source.html#l00030">coldplug_complete()</a>, <a class="el" href="../../da/d06/procd_8c_source.html#l00091">main()</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00216">procd_state_ubus_connect()</a>, and <a class="el" href="../../d5/d73/inittab_8c_source.html#l00144">rcdone()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dc9/state_8c_a1d0a87cc96fcf931f3e5d51936df567a_cgraph.png" border="0" usemap="#ad0/dc9/state_8c_a1d0a87cc96fcf931f3e5d51936df567a_cgraph" alt=""/></div>
<map name="ad0/dc9/state_8c_a1d0a87cc96fcf931f3e5d51936df567a_cgraph" id="ad0/dc9/state_8c_a1d0a87cc96fcf931f3e5d51936df567a_cgraph">
<area shape="rect" title=" " alt="" coords="5,721,184,755"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#ae065f8ea6c1cf93be358341a009bf759" title=" " alt="" coords="232,721,357,755"/>
<area shape="poly" title=" " alt="" coords="184,736,216,736,216,741,184,741"/>
<area shape="rect" href="../../da/d37/hotplug_8c.html#af2cd40f5e26df4bdea678b303bc4a48c" title=" " alt="" coords="464,107,556,140"/>
<area shape="poly" title=" " alt="" coords="294,721,305,613,326,452,341,367,358,288,379,223,403,177,424,156,448,141,451,146,427,160,407,180,384,225,363,290,346,368,331,452,310,614,300,721"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a4d074ca51f245cecff86a84a05e27a33" title=" " alt="" coords="441,191,580,224"/>
<area shape="poly" title=" " alt="" coords="295,721,307,626,329,488,362,349,381,294,403,255,417,241,434,229,437,234,421,245,407,258,386,296,367,351,335,489,312,627,300,721"/>
<area shape="rect" href="../../d0/d3c/coldplug_8c.html#a99355122adf84389f5c5834c6b399922" title=" " alt="" coords="430,269,591,303"/>
<area shape="poly" title=" " alt="" coords="298,720,337,603,367,524,403,445,444,373,485,314,489,317,449,376,407,447,372,526,342,605,303,722"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#ae85c33038baa57d4faa6e4c3628fefec" title=" " alt="" coords="405,639,615,672"/>
<area shape="poly" title=" " alt="" coords="339,718,449,676,451,681,341,723"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#ad41fa8946f382dfa229ea8eccbd81bf4" title=" " alt="" coords="440,721,581,755"/>
<area shape="poly" title=" " alt="" coords="357,736,424,736,424,741,357,741"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1" title=" " alt="" coords="419,779,601,812"/>
<area shape="poly" title=" " alt="" coords="358,752,430,772,429,777,357,757"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#ae01cc4911a782c7811497063404f7656" title=" " alt="" coords="413,964,607,998"/>
<area shape="poly" title=" " alt="" coords="313,754,486,951,482,954,309,757"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a836f795ef705b19d71acd071b7c85101" title=" " alt="" coords="446,1140,574,1174"/>
<area shape="poly" title=" " alt="" coords="300,755,309,813,328,895,360,988,381,1033,407,1075,435,1105,466,1129,463,1134,431,1109,403,1078,377,1036,355,990,323,897,304,814,295,756"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a92213c7578d9161ad8e296cf51962b3b" title=" " alt="" coords="746,1251,849,1284"/>
<area shape="poly" title=" " alt="" coords="301,755,311,803,331,870,363,942,383,977,407,1008,433,1033,459,1049,511,1067,563,1084,590,1101,617,1126,628,1141,635,1156,640,1185,646,1212,653,1225,665,1237,696,1255,731,1263,730,1268,694,1260,662,1242,649,1228,641,1214,635,1186,630,1158,624,1144,613,1129,587,1105,561,1089,509,1072,456,1054,430,1037,403,1012,379,980,358,945,326,872,306,805,296,756"/>
<area shape="rect" href="../../d9/d65/ulog_8c.html#a962767ce46bee1f4c9b44ecd408dd669" title=" " alt="" coords="452,1285,568,1319"/>
<area shape="poly" title=" " alt="" coords="300,755,307,827,325,936,357,1062,380,1125,407,1185,441,1234,479,1273,475,1277,437,1237,403,1187,375,1127,352,1064,320,937,302,828,294,756"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a874a52d6ac45041d9e76bd1925d88c24" title=" " alt="" coords="436,459,585,492"/>
<area shape="poly" title=" " alt="" coords="308,719,483,503,487,506,312,723"/>
<area shape="rect" href="../../d4/d4c/json__script_8c.html#a1dbfcb66aa8ef4297aca3e2962750073" title=" " alt="" coords="718,5,877,39"/>
<area shape="poly" title=" " alt="" coords="541,104,596,75,662,48,702,36,704,41,664,53,599,80,543,108"/>
<area shape="rect" href="../../da/d37/hotplug_8c.html#adec4184e967b6251ca24c1a347b84c24" title=" " alt="" coords="718,63,877,96"/>
<area shape="poly" title=" " alt="" coords="556,114,702,91,703,97,557,119"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0" title=" " alt="" coords="725,120,870,154"/>
<area shape="poly" title=" " alt="" coords="557,123,710,130,710,135,556,128"/>
<area shape="rect" href="../../d4/ddd/container_8h.html#a05b941972fa26f438826c9b6c291ef25" title=" " alt="" coords="731,177,864,211"/>
<area shape="poly" title=" " alt="" coords="580,202,715,195,716,201,581,207"/>
<area shape="poly" title=" " alt="" coords="546,266,600,243,663,220,716,206,717,211,664,225,602,248,548,271"/>
<area shape="rect" href="../../d0/d3c/coldplug_8c.html#a7cb00c0ad6086c37a0f11c7f47b219cf" title=" " alt="" coords="685,235,910,268"/>
<area shape="poly" title=" " alt="" coords="591,274,670,264,670,270,591,279"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#af511d1bcbdfcfaba211d4ae1b0930dbb" title=" " alt="" coords="980,317,1176,351"/>
<area shape="poly" title=" " alt="" coords="591,290,964,322,964,327,591,296"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#ab04b86ab1de0a8cc792eac1f5fccc387" title=" " alt="" coords="1004,596,1152,630"/>
<area shape="poly" title=" " alt="" coords="560,636,609,621,663,610,749,602,836,599,989,603,988,609,836,604,750,607,664,615,610,626,561,641"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#a2f1d28c800993b650b16349937bc4cc3" title=" " alt="" coords="1005,667,1151,700"/>
<area shape="poly" title=" " alt="" coords="616,665,664,669,837,677,990,680,990,686,837,682,663,674,616,670"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#af8f81bf02a1064257a2b3363668bb700" title=" " alt="" coords="707,625,888,659"/>
<area shape="poly" title=" " alt="" coords="616,648,692,644,692,650,616,653"/>
<area shape="poly" title=" " alt="" coords="888,630,988,619,989,625,888,635"/>
<area shape="poly" title=" " alt="" coords="889,653,990,668,989,673,888,658"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#a0d79ba1bf57a05e542000f9f7bc4dc73" title=" " alt="" coords="737,735,858,768"/>
<area shape="poly" title=" " alt="" coords="581,739,722,745,721,751,581,744"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="728,792,867,826"/>
<area shape="poly" title=" " alt="" coords="522,962,578,899,618,864,662,834,712,817,714,822,665,839,621,868,582,903,526,965"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="693,849,902,883"/>
<area shape="poly" title=" " alt="" coords="535,961,591,926,662,892,681,885,683,890,664,897,594,931,538,966"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32" title=" " alt="" coords="690,907,905,940"/>
<area shape="poly" title=" " alt="" coords="598,961,694,941,695,947,599,966"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="691,964,904,998"/>
<area shape="poly" title=" " alt="" coords="608,978,676,978,676,984,608,984"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214" title=" " alt="" coords="691,1021,904,1055"/>
<area shape="poly" title=" " alt="" coords="599,996,695,1015,694,1020,598,1001"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="692,1079,903,1112"/>
<area shape="poly" title=" " alt="" coords="544,996,617,1037,640,1052,664,1065,682,1071,681,1076,662,1070,637,1057,614,1042,541,1000"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a422dae339fb612dbf5723dabf2ea93ab" title=" " alt="" coords="750,1136,845,1170"/>
<area shape="poly" title=" " alt="" coords="555,996,587,1014,617,1038,633,1061,640,1083,648,1104,665,1123,699,1140,735,1148,734,1153,697,1145,662,1127,643,1106,635,1085,628,1063,613,1041,584,1018,553,1001"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#a2ab347c929ea42e974beced745d73de3" title=" " alt="" coords="699,1193,896,1227"/>
<area shape="poly" title=" " alt="" coords="559,996,590,1013,617,1038,630,1057,636,1077,639,1113,643,1148,651,1164,665,1180,687,1194,684,1199,662,1184,646,1167,638,1149,634,1114,631,1078,625,1060,613,1041,587,1018,557,1000"/>
<area shape="poly" title=" " alt="" coords="539,1172,595,1205,664,1237,731,1255,730,1260,662,1242,593,1210,536,1177"/>
<area shape="rect" href="../../d9/d65/ulog_8c.html#aa98943b7174469752250aa9314bf45ff" title=" " alt="" coords="739,1308,856,1342"/>
<area shape="poly" title=" " alt="" coords="569,1304,724,1316,723,1322,569,1309"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a90282b93d8528c3fc4e5b188bc5fbc1c" title=" " alt="" coords="757,344,838,378"/>
<area shape="poly" title=" " alt="" coords="535,456,591,421,662,386,702,374,741,366,742,371,704,379,664,391,594,425,538,461"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58" title=" " alt="" coords="714,401,881,435"/>
<area shape="poly" title=" " alt="" coords="585,458,699,435,700,440,586,463"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a05316067521d0e4efd9b8d3a3a322591" title=" " alt="" coords="682,459,913,492"/>
<area shape="poly" title=" " alt="" coords="585,473,667,473,667,478,585,478"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1" title=" " alt="" coords="663,516,932,550"/>
<area shape="poly" title=" " alt="" coords="586,488,695,510,694,515,585,493"/>
<area shape="poly" title=" " alt="" coords="838,354,964,342,965,348,838,360"/>
</map>
</div>

</div>
</div>
<a id="a093c669b7cced324736c604da8563625" name="a093c669b7cced324736c604da8563625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a093c669b7cced324736c604da8563625">&#9670;&#160;</a></span>procd_state_ubus_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void procd_state_ubus_connect </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dc9/state_8c_source.html#l00216">216</a> of file <a class="el" href="../../d0/dc9/state_8c_source.html">state.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  217</span>{</div>
<div class="line"><span class="lineno">  218</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a89f234133d3efe315836311cbf21c64b">state</a> == <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62a66e02c3a607d99ec165fcc5ada8102b4">STATE_UBUS</a>)</div>
<div class="line"><span class="lineno">  219</span>        <a class="code hl_function" href="#a1d0a87cc96fcf931f3e5d51936df567a">procd_state_next</a>();</div>
<div class="line"><span class="lineno">  220</span>}</div>
<div class="ttc" id="astate_8c_html_a1d0a87cc96fcf931f3e5d51936df567a"><div class="ttname"><a href="#a1d0a87cc96fcf931f3e5d51936df567a">procd_state_next</a></div><div class="ttdeci">void procd_state_next(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00209">state.c:209</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/dc9/state_8c_source.html#l00209">procd_state_next()</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00043">state</a>, and <a class="el" href="../../d0/dc9/state_8c_source.html#l00035">STATE_UBUS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d89/procd_2ubus_8c_source.html#l00067">ubus_connect_cb()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dc9/state_8c_a093c669b7cced324736c604da8563625_cgraph.png" border="0" usemap="#ad0/dc9/state_8c_a093c669b7cced324736c604da8563625_cgraph" alt=""/></div>
<map name="ad0/dc9/state_8c_a093c669b7cced324736c604da8563625_cgraph" id="ad0/dc9/state_8c_a093c669b7cced324736c604da8563625_cgraph">
<area shape="rect" title=" " alt="" coords="5,360,271,394"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a1d0a87cc96fcf931f3e5d51936df567a" title=" " alt="" coords="319,387,497,420"/>
<area shape="poly" title=" " alt="" coords="271,387,303,391,303,396,271,393"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#ae065f8ea6c1cf93be358341a009bf759" title=" " alt="" coords="545,765,670,799"/>
<area shape="poly" title=" " alt="" coords="421,420,593,750,588,752,416,422"/>
<area shape="rect" href="../../da/d37/hotplug_8c.html#af2cd40f5e26df4bdea678b303bc4a48c" title=" " alt="" coords="777,851,870,884"/>
<area shape="poly" title=" " alt="" coords="639,797,719,837,763,851,761,856,717,842,637,802"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a4d074ca51f245cecff86a84a05e27a33" title=" " alt="" coords="754,909,893,943"/>
<area shape="poly" title=" " alt="" coords="623,798,662,846,689,872,720,895,740,905,738,910,717,899,686,876,658,850,619,801"/>
<area shape="rect" href="../../d0/d3c/coldplug_8c.html#a99355122adf84389f5c5834c6b399922" title=" " alt="" coords="743,996,904,1030"/>
<area shape="poly" title=" " alt="" coords="619,798,656,871,685,914,720,954,743,971,767,986,765,991,740,976,716,957,681,917,652,874,614,801"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#ae85c33038baa57d4faa6e4c3628fefec" title=" " alt="" coords="718,99,929,132"/>
<area shape="poly" title=" " alt="" coords="607,765,614,683,632,555,664,405,687,329,716,256,733,223,753,193,793,142,798,146,757,196,737,226,721,258,692,331,669,406,637,556,620,684,613,765"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#ad41fa8946f382dfa229ea8eccbd81bf4" title=" " alt="" coords="753,269,894,303"/>
<area shape="poly" title=" " alt="" coords="610,764,646,626,677,532,716,438,756,370,796,314,801,317,760,373,721,441,682,534,651,628,615,765"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1" title=" " alt="" coords="732,1192,915,1226"/>
<area shape="poly" title=" " alt="" coords="611,799,612,869,624,972,637,1027,657,1082,684,1134,720,1179,722,1180,718,1184,716,1183,680,1137,652,1085,632,1029,618,972,606,870,605,799"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#ae01cc4911a782c7811497063404f7656" title=" " alt="" coords="726,452,921,486"/>
<area shape="poly" title=" " alt="" coords="619,763,800,497,804,500,623,766"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a836f795ef705b19d71acd071b7c85101" title=" " alt="" coords="759,793,888,827"/>
<area shape="poly" title=" " alt="" coords="671,788,744,797,743,803,670,793"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a92213c7578d9161ad8e296cf51962b3b" title=" " alt="" coords="1040,739,1144,772"/>
<area shape="poly" title=" " alt="" coords="671,776,1025,756,1025,762,671,781"/>
<area shape="rect" href="../../d9/d65/ulog_8c.html#a962767ce46bee1f4c9b44ecd408dd669" title=" " alt="" coords="765,683,882,716"/>
<area shape="poly" title=" " alt="" coords="649,762,717,734,757,719,759,724,719,739,651,767"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a874a52d6ac45041d9e76bd1925d88c24" title=" " alt="" coords="749,1135,898,1168"/>
<area shape="poly" title=" " alt="" coords="616,799,653,905,683,974,721,1041,756,1085,793,1122,789,1126,752,1089,716,1044,678,976,648,907,611,801"/>
<area shape="rect" href="../../d4/d4c/json__script_8c.html#a1dbfcb66aa8ef4297aca3e2962750073" title=" " alt="" coords="1013,911,1171,944"/>
<area shape="poly" title=" " alt="" coords="870,875,999,904,998,909,869,880"/>
<area shape="rect" href="../../da/d37/hotplug_8c.html#adec4184e967b6251ca24c1a347b84c24" title=" " alt="" coords="1012,796,1172,830"/>
<area shape="poly" title=" " alt="" coords="869,856,996,829,997,835,870,861"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0" title=" " alt="" coords="1020,853,1164,887"/>
<area shape="poly" title=" " alt="" coords="870,865,1004,867,1004,872,870,871"/>
<area shape="rect" href="../../d4/ddd/container_8h.html#a05b941972fa26f438826c9b6c291ef25" title=" " alt="" coords="1026,968,1158,1002"/>
<area shape="poly" title=" " alt="" coords="894,939,1011,965,1010,970,893,944"/>
<area shape="poly" title=" " alt="" coords="904,1002,1010,991,1010,996,905,1007"/>
<area shape="rect" href="../../d0/d3c/coldplug_8c.html#a7cb00c0ad6086c37a0f11c7f47b219cf" title=" " alt="" coords="980,1025,1204,1059"/>
<area shape="poly" title=" " alt="" coords="905,1019,965,1026,964,1031,904,1024"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#af511d1bcbdfcfaba211d4ae1b0930dbb" title=" " alt="" coords="1255,1136,1451,1170"/>
<area shape="poly" title=" " alt="" coords="866,1028,977,1069,1256,1130,1255,1135,976,1074,864,1033"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#ab04b86ab1de0a8cc792eac1f5fccc387" title=" " alt="" coords="1280,99,1427,132"/>
<area shape="poly" title=" " alt="" coords="929,113,1264,113,1264,118,929,118"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#a2f1d28c800993b650b16349937bc4cc3" title=" " alt="" coords="1281,17,1426,51"/>
<area shape="poly" title=" " alt="" coords="929,97,1265,45,1266,50,929,102"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#af8f81bf02a1064257a2b3363668bb700" title=" " alt="" coords="1002,5,1182,39"/>
<area shape="poly" title=" " alt="" coords="868,96,976,56,1018,42,1020,47,978,61,870,101"/>
<area shape="poly" title=" " alt="" coords="1001,33,867,52,792,68,719,89,638,118,558,152,404,226,273,298,181,354,178,349,271,294,402,222,556,147,637,113,718,84,791,63,866,47,1001,27"/>
<area shape="poly" title=" " alt="" coords="1142,37,1290,90,1288,95,1140,42"/>
<area shape="poly" title=" " alt="" coords="1183,24,1265,27,1265,33,1182,29"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#a0d79ba1bf57a05e542000f9f7bc4dc73" title=" " alt="" coords="1031,165,1153,199"/>
<area shape="poly" title=" " alt="" coords="854,266,909,237,976,208,1015,195,1017,201,978,213,912,242,856,271"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="1022,395,1162,428"/>
<area shape="poly" title=" " alt="" coords="905,449,1006,427,1007,432,906,454"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="988,452,1196,486"/>
<area shape="poly" title=" " alt="" coords="921,466,972,466,972,472,921,472"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32" title=" " alt="" coords="985,509,1199,543"/>
<area shape="poly" title=" " alt="" coords="906,484,995,503,994,508,905,489"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="986,567,1198,600"/>
<area shape="poly" title=" " alt="" coords="851,484,908,519,978,553,995,559,993,564,976,558,905,523,849,488"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214" title=" " alt="" coords="985,624,1199,658"/>
<area shape="poly" title=" " alt="" coords="840,484,895,547,934,581,978,611,988,615,985,620,975,615,931,585,892,550,836,488"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="986,223,1198,256"/>
<area shape="poly" title=" " alt="" coords="833,450,900,351,941,299,975,265,982,261,985,266,978,270,945,302,905,354,838,453"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a422dae339fb612dbf5723dabf2ea93ab" title=" " alt="" coords="1045,280,1139,314"/>
<area shape="poly" title=" " alt="" coords="836,450,892,387,931,352,975,322,1002,311,1029,303,1030,308,1003,316,978,327,934,356,895,391,840,453"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#a2ab347c929ea42e974beced745d73de3" title=" " alt="" coords="994,337,1190,371"/>
<area shape="poly" title=" " alt="" coords="849,449,905,414,976,380,993,374,995,379,978,385,908,419,851,454"/>
<area shape="poly" title=" " alt="" coords="888,795,1024,766,1025,772,889,800"/>
<area shape="rect" href="../../d9/d65/ulog_8c.html#aa98943b7174469752250aa9314bf45ff" title=" " alt="" coords="1033,681,1151,715"/>
<area shape="poly" title=" " alt="" coords="882,697,1017,696,1017,701,882,702"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a90282b93d8528c3fc4e5b188bc5fbc1c" title=" " alt="" coords="1052,1192,1132,1226"/>
<area shape="poly" title=" " alt="" coords="899,1165,1037,1195,1036,1200,898,1170"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58" title=" " alt="" coords="1009,1249,1175,1283"/>
<area shape="poly" title=" " alt="" coords="900,1163,930,1177,946,1192,955,1208,963,1222,978,1236,996,1245,993,1250,975,1240,959,1226,950,1210,942,1196,927,1182,898,1168"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a05316067521d0e4efd9b8d3a3a322591" title=" " alt="" coords="977,1135,1207,1168"/>
<area shape="poly" title=" " alt="" coords="898,1149,961,1149,961,1154,898,1154"/>
<area shape="poly" title=" " alt="" coords="1132,1198,1256,1171,1257,1176,1133,1203"/>
</map>
</div>

</div>
</div>
<a id="a836f795ef705b19d71acd071b7c85101" name="a836f795ef705b19d71acd071b7c85101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a836f795ef705b19d71acd071b7c85101">&#9670;&#160;</a></span>set_console()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_console </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dc9/state_8c_source.html#l00058">58</a> of file <a class="el" href="../../d0/dc9/state_8c_source.html">state.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   59</span>{</div>
<div class="line"><span class="lineno">   60</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* tty;</div>
<div class="line"><span class="lineno">   61</span>    <span class="keywordtype">char</span>* split;</div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordtype">char</span> line[ 20 ];</div>
<div class="line"><span class="lineno">   63</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keywordflow">try</span>[] = { <span class="stringliteral">&quot;tty0&quot;</span>, <span class="stringliteral">&quot;console&quot;</span>, NULL }; <span class="comment">/* Try the most common outputs */</span></div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordtype">int</span> f, i = 0;</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>    tty = <a class="code hl_define" href="../../d9/d4d/procd_2utils_2utils_8h.html#ab4aeebcc159bc35c0313685c218ea1a0">get_cmdline_val</a>(<span class="stringliteral">&quot;console&quot;</span>,line,<span class="keyword">sizeof</span>(line));</div>
<div class="line"><span class="lineno">   67</span>    <span class="keywordflow">if</span> (tty != NULL) {</div>
<div class="line"><span class="lineno">   68</span>        split = strchr(tty, <span class="charliteral">&#39;,&#39;</span>);</div>
<div class="line"><span class="lineno">   69</span>        <span class="keywordflow">if</span> ( split != NULL )</div>
<div class="line"><span class="lineno">   70</span>            *split = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">   71</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   72</span>        <span class="comment">// Try a default</span></div>
<div class="line"><span class="lineno">   73</span>        tty=<span class="keywordflow">try</span>[i];</div>
<div class="line"><span class="lineno">   74</span>        i++;</div>
<div class="line"><span class="lineno">   75</span>    }</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>    <span class="keywordflow">if</span> (chdir(<span class="stringliteral">&quot;/dev&quot;</span>)) {</div>
<div class="line"><span class="lineno">   78</span>        <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;failed to change dir to /dev: %m\n&quot;</span>);</div>
<div class="line"><span class="lineno">   79</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   80</span>    }</div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordflow">while</span> (tty!=NULL) {</div>
<div class="line"><span class="lineno">   82</span>        f = open(tty, O_RDONLY);</div>
<div class="line"><span class="lineno">   83</span>        <span class="keywordflow">if</span> (f &gt;= 0) {</div>
<div class="line"><span class="lineno">   84</span>            close(f);</div>
<div class="line"><span class="lineno">   85</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   86</span>        }</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>        tty=<span class="keywordflow">try</span>[i];</div>
<div class="line"><span class="lineno">   89</span>        i++;</div>
<div class="line"><span class="lineno">   90</span>    }</div>
<div class="line"><span class="lineno">   91</span>    <span class="keywordflow">if</span> (chdir(<span class="stringliteral">&quot;/&quot;</span>))</div>
<div class="line"><span class="lineno">   92</span>        <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;failed to change dir to /: %m\n&quot;</span>);</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">if</span> (tty != NULL)</div>
<div class="line"><span class="lineno">   95</span>        <a class="code hl_function" href="#a92213c7578d9161ad8e296cf51962b3b">set_stdio</a>(tty);</div>
<div class="line"><span class="lineno">   96</span>}</div>
<div class="ttc" id="aprocd_2jail_2log_8h_html_a15378cd15bafb3a79061424b452497aa"><div class="ttname"><a href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a></div><div class="ttdeci">#define ERROR(fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">log.h:27</a></div></div>
<div class="ttc" id="aprocd_2utils_2utils_8h_html_ab4aeebcc159bc35c0313685c218ea1a0"><div class="ttname"><a href="../../d9/d4d/procd_2utils_2utils_8h.html#ab4aeebcc159bc35c0313685c218ea1a0">get_cmdline_val</a></div><div class="ttdeci">#define get_cmdline_val(name, out, len)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d4d/procd_2utils_2utils_8h_source.html#l00057">utils.h:57</a></div></div>
<div class="ttc" id="astate_8c_html_a92213c7578d9161ad8e296cf51962b3b"><div class="ttname"><a href="#a92213c7578d9161ad8e296cf51962b3b">set_stdio</a></div><div class="ttdeci">static void set_stdio(const char *tty)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00046">state.c:46</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">ERROR</a>, <a class="el" href="../../d9/d4d/procd_2utils_2utils_8h_source.html#l00057">get_cmdline_val</a>, and <a class="el" href="../../d0/dc9/state_8c_source.html#l00046">set_stdio()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dc9/state_8c_source.html#l00126">state_enter()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dc9/state_8c_a836f795ef705b19d71acd071b7c85101_cgraph.png" border="0" usemap="#ad0/dc9/state_8c_a836f795ef705b19d71acd071b7c85101_cgraph" alt=""/></div>
<map name="ad0/dc9/state_8c_a836f795ef705b19d71acd071b7c85101_cgraph" id="ad0/dc9/state_8c_a836f795ef705b19d71acd071b7c85101_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,134,39"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a92213c7578d9161ad8e296cf51962b3b" title=" " alt="" coords="182,5,285,39"/>
<area shape="poly" title=" " alt="" coords="134,20,166,20,166,25,134,25"/>
</map>
</div>

</div>
</div>
<a id="a92213c7578d9161ad8e296cf51962b3b" name="a92213c7578d9161ad8e296cf51962b3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92213c7578d9161ad8e296cf51962b3b">&#9670;&#160;</a></span>set_stdio()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_stdio </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>tty</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dc9/state_8c_source.html#l00046">46</a> of file <a class="el" href="../../d0/dc9/state_8c_source.html">state.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   47</span>{</div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordflow">if</span> (chdir(<span class="stringliteral">&quot;/dev&quot;</span>) ||</div>
<div class="line"><span class="lineno">   49</span>        !freopen(tty, <span class="stringliteral">&quot;r&quot;</span>, stdin) ||</div>
<div class="line"><span class="lineno">   50</span>        !freopen(tty, <span class="stringliteral">&quot;w&quot;</span>, stdout) ||</div>
<div class="line"><span class="lineno">   51</span>        !freopen(tty, <span class="stringliteral">&quot;w&quot;</span>, stderr) ||</div>
<div class="line"><span class="lineno">   52</span>        chdir(<span class="stringliteral">&quot;/&quot;</span>))</div>
<div class="line"><span class="lineno">   53</span>        <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;failed to set stdio: %m\n&quot;</span>);</div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   55</span>        fcntl(STDERR_FILENO, F_SETFL, fcntl(STDERR_FILENO, F_GETFL) | O_NONBLOCK);</div>
<div class="line"><span class="lineno">   56</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dc9/state_8c_source.html#l00058">set_console()</a>, and <a class="el" href="../../d0/dc9/state_8c_source.html#l00126">state_enter()</a>.</p>

</div>
</div>
<a id="ae065f8ea6c1cf93be358341a009bf759" name="ae065f8ea6c1cf93be358341a009bf759"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae065f8ea6c1cf93be358341a009bf759">&#9670;&#160;</a></span>state_enter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void state_enter </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dc9/state_8c_source.html#l00126">126</a> of file <a class="el" href="../../d0/dc9/state_8c_source.html">state.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  127</span>{</div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordtype">char</span> ubus_cmd[] = <span class="stringliteral">&quot;/sbin/ubusd&quot;</span>;</div>
<div class="line"><span class="lineno">  129</span>    <span class="keyword">struct </span>passwd *p;</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="#a89f234133d3efe315836311cbf21c64b">state</a>) {</div>
<div class="line"><span class="lineno">  132</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62a4af059faa44ed89aaf83ced94b8e1ef8">STATE_EARLY</a>:</div>
<div class="line"><span class="lineno">  133</span>        <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- early -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  134</span>        <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a874a52d6ac45041d9e76bd1925d88c24">watchdog_init</a>(0);</div>
<div class="line"><span class="lineno">  135</span>        <a class="code hl_function" href="../../da/d37/hotplug_8c.html#af2cd40f5e26df4bdea678b303bc4a48c">hotplug</a>(<span class="stringliteral">&quot;/etc/hotplug.json&quot;</span>);</div>
<div class="line"><span class="lineno">  136</span>        <a class="code hl_function" href="../../d0/d3c/coldplug_8c.html#a99355122adf84389f5c5834c6b399922">procd_coldplug</a>();</div>
<div class="line"><span class="lineno">  137</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62a66e02c3a607d99ec165fcc5ada8102b4">STATE_UBUS</a>:</div>
<div class="line"><span class="lineno">  140</span>        <span class="comment">// try to reopen incase the wdt was not available before coldplug</span></div>
<div class="line"><span class="lineno">  141</span>        <a class="code hl_function" href="../../d6/d88/watchdog_8c.html#a874a52d6ac45041d9e76bd1925d88c24">watchdog_init</a>(0);</div>
<div class="line"><span class="lineno">  142</span>        <a class="code hl_function" href="#a92213c7578d9161ad8e296cf51962b3b">set_stdio</a>(<span class="stringliteral">&quot;console&quot;</span>);</div>
<div class="line"><span class="lineno">  143</span>        p = getpwnam(<span class="stringliteral">&quot;ubus&quot;</span>);</div>
<div class="line"><span class="lineno">  144</span>        <span class="keywordflow">if</span> (p) {</div>
<div class="line"><span class="lineno">  145</span>            <span class="keywordtype">int</span> ret;</div>
<div class="line"><span class="lineno">  146</span>            <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- ubus -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  147</span>            mkdir(p-&gt;pw_dir, 0755);</div>
<div class="line"><span class="lineno">  148</span>            ret = chown(p-&gt;pw_dir, p-&gt;pw_uid, p-&gt;pw_gid);</div>
<div class="line"><span class="lineno">  149</span>            <span class="keywordflow">if</span> (ret)</div>
<div class="line"><span class="lineno">  150</span>                <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- ubus - failed to chown(%s)\n&quot;</span>, p-&gt;pw_dir);</div>
<div class="line"><span class="lineno">  151</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  152</span>            <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- ubus (running as root!) -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  153</span>        }</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>        <a class="code hl_function" href="../../dc/dab/procd_8h.html#ae85c33038baa57d4faa6e4c3628fefec">procd_connect_ubus</a>();</div>
<div class="line"><span class="lineno">  156</span>        <a class="code hl_function" href="../../d7/d1d/service_8c.html#ae01cc4911a782c7811497063404f7656">service_start_early</a>(<span class="stringliteral">&quot;ubus&quot;</span>, ubus_cmd, p?<span class="stringliteral">&quot;ubus&quot;</span>:NULL, p?<span class="stringliteral">&quot;ubus&quot;</span>:NULL);</div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62a98d2a2153b4ae0445fa0b114d65b94d9">STATE_INIT</a>:</div>
<div class="line"><span class="lineno">  160</span>        <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- init -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  161</span>        <a class="code hl_function" href="../../d5/d73/inittab_8c.html#ad41fa8946f382dfa229ea8eccbd81bf4">procd_inittab</a>();</div>
<div class="line"><span class="lineno">  162</span>        <a class="code hl_function" href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1">procd_inittab_run</a>(<span class="stringliteral">&quot;respawn&quot;</span>);</div>
<div class="line"><span class="lineno">  163</span>        <a class="code hl_function" href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1">procd_inittab_run</a>(<span class="stringliteral">&quot;askconsole&quot;</span>);</div>
<div class="line"><span class="lineno">  164</span>        <a class="code hl_function" href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1">procd_inittab_run</a>(<span class="stringliteral">&quot;askfirst&quot;</span>);</div>
<div class="line"><span class="lineno">  165</span>        <a class="code hl_function" href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1">procd_inittab_run</a>(<span class="stringliteral">&quot;sysinit&quot;</span>);</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>        <span class="comment">// switch to syslog log channel</span></div>
<div class="line"><span class="lineno">  168</span>        <a class="code hl_function" href="../../d9/d65/ulog_8c.html#a962767ce46bee1f4c9b44ecd408dd669">ulog_open</a>(<a class="code hl_enumvalue" href="../../df/df3/ulog_8h.html#abed82baf7f470b522273a3e37c24c600a7dae4d40f7113445dfc3e27553e90d48">ULOG_SYSLOG</a>, LOG_DAEMON, <span class="stringliteral">&quot;procd&quot;</span>);</div>
<div class="line"><span class="lineno">  169</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62addfe11c6d06c4e27bd6efc18cc4862a6">STATE_RUNNING</a>:</div>
<div class="line"><span class="lineno">  172</span>        <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- init complete -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  173</span>        <a class="code hl_function" href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1">procd_inittab_run</a>(<span class="stringliteral">&quot;respawnlate&quot;</span>);</div>
<div class="line"><span class="lineno">  174</span>        <a class="code hl_function" href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1">procd_inittab_run</a>(<span class="stringliteral">&quot;askconsolelate&quot;</span>);</div>
<div class="line"><span class="lineno">  175</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62ab22355c571740fc447187f266729f1e4">STATE_SHUTDOWN</a>:</div>
<div class="line"><span class="lineno">  178</span>        <span class="comment">/* Redirect output to the console for the users&#39; benefit */</span></div>
<div class="line"><span class="lineno">  179</span>        <a class="code hl_function" href="#a836f795ef705b19d71acd071b7c85101">set_console</a>();</div>
<div class="line"><span class="lineno">  180</span>        <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- shutdown -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  181</span>        <a class="code hl_function" href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1">procd_inittab_run</a>(<span class="stringliteral">&quot;shutdown&quot;</span>);</div>
<div class="line"><span class="lineno">  182</span>        sync();</div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="#a8628933cde20921c453a6d2607bdad62a2a899ee7de853c95dfb9cd053b52515e">STATE_HALT</a>:</div>
<div class="line"><span class="lineno">  186</span>        <span class="comment">// To prevent killed processes from interrupting the sleep</span></div>
<div class="line"><span class="lineno">  187</span>        signal(SIGCHLD, SIG_IGN);</div>
<div class="line"><span class="lineno">  188</span>        <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- SIGTERM processes -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  189</span>        kill(-1, SIGTERM);</div>
<div class="line"><span class="lineno">  190</span>        sync();</div>
<div class="line"><span class="lineno">  191</span>        sleep(1);</div>
<div class="line"><span class="lineno">  192</span>        <a class="code hl_define" href="../../d9/d1e/procd_2log_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>(<span class="stringliteral">&quot;- SIGKILL processes -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  193</span>        kill(-1, SIGKILL);</div>
<div class="line"><span class="lineno">  194</span>        sync();</div>
<div class="line"><span class="lineno">  195</span>        sleep(1);</div>
<div class="line"><span class="lineno">  196</span><span class="preprocessor">#ifndef DISABLE_INIT</span></div>
<div class="line"><span class="lineno">  197</span>        <a class="code hl_function" href="#a4d074ca51f245cecff86a84a05e27a33">perform_halt</a>();</div>
<div class="line"><span class="lineno">  198</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  199</span>        exit(EXIT_SUCCESS);</div>
<div class="line"><span class="lineno">  200</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  201</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  204</span>        <a class="code hl_define" href="../../d8/d30/procd_2jail_2log_8h.html#a15378cd15bafb3a79061424b452497aa">ERROR</a>(<span class="stringliteral">&quot;Unhandled state %d\n&quot;</span>, <a class="code hl_variable" href="#a89f234133d3efe315836311cbf21c64b">state</a>);</div>
<div class="line"><span class="lineno">  205</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  206</span>    };</div>
<div class="line"><span class="lineno">  207</span>}</div>
<div class="ttc" id="acoldplug_8c_html_a99355122adf84389f5c5834c6b399922"><div class="ttname"><a href="../../d0/d3c/coldplug_8c.html#a99355122adf84389f5c5834c6b399922">procd_coldplug</a></div><div class="ttdeci">void procd_coldplug(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d3c/coldplug_8c_source.html#l00043">coldplug.c:43</a></div></div>
<div class="ttc" id="ahotplug_8c_html_af2cd40f5e26df4bdea678b303bc4a48c"><div class="ttname"><a href="../../da/d37/hotplug_8c.html#af2cd40f5e26df4bdea678b303bc4a48c">hotplug</a></div><div class="ttdeci">void hotplug(char *rules)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d37/hotplug_8c_source.html#l00608">hotplug.c:608</a></div></div>
<div class="ttc" id="ainittab_8c_html_ac373f1bc5fef218b54c0d109f30cc8c1"><div class="ttname"><a href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1">procd_inittab_run</a></div><div class="ttdeci">void procd_inittab_run(const char *handler)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d73/inittab_8c_source.html#l00288">inittab.c:288</a></div></div>
<div class="ttc" id="ainittab_8c_html_ad41fa8946f382dfa229ea8eccbd81bf4"><div class="ttname"><a href="../../d5/d73/inittab_8c.html#ad41fa8946f382dfa229ea8eccbd81bf4">procd_inittab</a></div><div class="ttdeci">void procd_inittab(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d73/inittab_8c_source.html#l00311">inittab.c:311</a></div></div>
<div class="ttc" id="aprocd_8h_html_ae85c33038baa57d4faa6e4c3628fefec"><div class="ttname"><a href="../../dc/dab/procd_8h.html#ae85c33038baa57d4faa6e4c3628fefec">procd_connect_ubus</a></div><div class="ttdeci">void procd_connect_ubus(void)</div><div class="ttdef"><b>Definition</b> <a href="../../de/d89/procd_2ubus_8c_source.html#l00091">ubus.c:91</a></div></div>
<div class="ttc" id="aservice_8c_html_ae01cc4911a782c7811497063404f7656"><div class="ttname"><a href="../../d7/d1d/service_8c.html#ae01cc4911a782c7811497063404f7656">service_start_early</a></div><div class="ttdeci">int service_start_early(char *name, char *cmdline, char *user, char *group)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d1d/service_8c_source.html#l01006">service.c:1006</a></div></div>
<div class="ttc" id="astate_8c_html_a4d074ca51f245cecff86a84a05e27a33"><div class="ttname"><a href="#a4d074ca51f245cecff86a84a05e27a33">perform_halt</a></div><div class="ttdeci">static void perform_halt()</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00098">state.c:98</a></div></div>
<div class="ttc" id="astate_8c_html_a836f795ef705b19d71acd071b7c85101"><div class="ttname"><a href="#a836f795ef705b19d71acd071b7c85101">set_console</a></div><div class="ttdeci">static void set_console(void)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dc9/state_8c_source.html#l00058">state.c:58</a></div></div>
<div class="ttc" id="aulog_8c_html_a962767ce46bee1f4c9b44ecd408dd669"><div class="ttname"><a href="../../d9/d65/ulog_8c.html#a962767ce46bee1f4c9b44ecd408dd669">ulog_open</a></div><div class="ttdeci">void ulog_open(int channels, int facility, const char *ident)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d65/ulog_8c_source.html#l00129">ulog.c:129</a></div></div>
<div class="ttc" id="aulog_8h_html_abed82baf7f470b522273a3e37c24c600a7dae4d40f7113445dfc3e27553e90d48"><div class="ttname"><a href="../../df/df3/ulog_8h.html#abed82baf7f470b522273a3e37c24c600a7dae4d40f7113445dfc3e27553e90d48">ULOG_SYSLOG</a></div><div class="ttdeci">@ ULOG_SYSLOG</div><div class="ttdef"><b>Definition</b> <a href="../../df/df3/ulog_8h_source.html#l00028">ulog.h:28</a></div></div>
<div class="ttc" id="awatchdog_8c_html_a874a52d6ac45041d9e76bd1925d88c24"><div class="ttname"><a href="../../d6/d88/watchdog_8c.html#a874a52d6ac45041d9e76bd1925d88c24">watchdog_init</a></div><div class="ttdeci">void watchdog_init(int preinit)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/watchdog_8c_source.html#l00191">watchdog.c:191</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d30/procd_2jail_2log_8h_source.html#l00027">ERROR</a>, <a class="el" href="../../da/d37/hotplug_8c_source.html#l00608">hotplug()</a>, <a class="el" href="../../d9/d1e/procd_2log_8h_source.html#l00032">LOG</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00098">perform_halt()</a>, <a class="el" href="../../d0/d3c/coldplug_8c_source.html#l00043">procd_coldplug()</a>, <a class="el" href="../../de/d89/procd_2ubus_8c_source.html#l00091">procd_connect_ubus()</a>, <a class="el" href="../../d5/d73/inittab_8c_source.html#l00311">procd_inittab()</a>, <a class="el" href="../../d5/d73/inittab_8c_source.html#l00288">procd_inittab_run()</a>, <a class="el" href="../../d7/d1d/service_8c_source.html#l01006">service_start_early()</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00058">set_console()</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00046">set_stdio()</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00043">state</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00034">STATE_EARLY</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00039">STATE_HALT</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00036">STATE_INIT</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00037">STATE_RUNNING</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00038">STATE_SHUTDOWN</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00035">STATE_UBUS</a>, <a class="el" href="../../d9/d65/ulog_8c_source.html#l00129">ulog_open()</a>, <a class="el" href="../../df/df3/ulog_8h_source.html#l00028">ULOG_SYSLOG</a>, and <a class="el" href="../../d6/d88/watchdog_8c_source.html#l00191">watchdog_init()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dc9/state_8c_source.html#l00222">procd_shutdown()</a>, and <a class="el" href="../../d0/dc9/state_8c_source.html#l00209">procd_state_next()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/dc9/state_8c_ae065f8ea6c1cf93be358341a009bf759_cgraph.png" border="0" usemap="#ad0/dc9/state_8c_ae065f8ea6c1cf93be358341a009bf759_cgraph" alt=""/></div>
<map name="ad0/dc9/state_8c_ae065f8ea6c1cf93be358341a009bf759_cgraph" id="ad0/dc9/state_8c_ae065f8ea6c1cf93be358341a009bf759_cgraph">
<area shape="rect" title=" " alt="" coords="5,773,131,807"/>
<area shape="rect" href="../../da/d37/hotplug_8c.html#af2cd40f5e26df4bdea678b303bc4a48c" title=" " alt="" coords="238,107,330,140"/>
<area shape="poly" title=" " alt="" coords="68,773,77,656,97,479,111,386,129,300,151,228,177,177,197,156,222,141,225,145,201,160,181,180,156,229,135,301,117,387,102,480,82,656,73,773"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a4d074ca51f245cecff86a84a05e27a33" title=" " alt="" coords="214,191,354,224"/>
<area shape="poly" title=" " alt="" coords="68,773,79,669,100,515,115,435,133,361,153,299,177,255,191,241,207,230,210,234,194,245,181,258,158,301,138,362,120,436,105,516,84,670,73,773"/>
<area shape="rect" href="../../d0/d3c/coldplug_8c.html#a99355122adf84389f5c5834c6b399922" title=" " alt="" coords="203,269,365,303"/>
<area shape="poly" title=" " alt="" coords="72,772,111,646,141,560,176,473,220,386,261,315,266,318,225,389,181,475,146,562,116,648,77,774"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#ae85c33038baa57d4faa6e4c3628fefec" title=" " alt="" coords="179,691,389,724"/>
<area shape="poly" title=" " alt="" coords="113,770,222,728,224,733,115,775"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#ad41fa8946f382dfa229ea8eccbd81bf4" title=" " alt="" coords="213,773,355,807"/>
<area shape="poly" title=" " alt="" coords="131,788,198,788,198,793,131,793"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#ac373f1bc5fef218b54c0d109f30cc8c1" title=" " alt="" coords="193,831,375,864"/>
<area shape="poly" title=" " alt="" coords="132,804,204,824,202,829,130,809"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#ae01cc4911a782c7811497063404f7656" title=" " alt="" coords="187,1016,381,1050"/>
<area shape="poly" title=" " alt="" coords="87,806,260,1003,256,1006,83,809"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a836f795ef705b19d71acd071b7c85101" title=" " alt="" coords="220,1192,348,1226"/>
<area shape="poly" title=" " alt="" coords="74,807,83,865,102,947,134,1040,155,1085,181,1127,208,1157,240,1181,237,1186,205,1161,177,1130,150,1088,129,1042,97,949,78,866,69,808"/>
<area shape="rect" href="../../d0/dc9/state_8c.html#a92213c7578d9161ad8e296cf51962b3b" title=" " alt="" coords="501,1303,604,1336"/>
<area shape="poly" title=" " alt="" coords="75,807,85,855,105,922,136,994,157,1029,181,1060,207,1085,232,1101,284,1119,337,1136,364,1153,391,1178,402,1193,409,1208,414,1237,420,1264,427,1277,439,1289,461,1303,486,1312,485,1317,459,1308,435,1294,422,1280,415,1266,408,1238,403,1210,397,1196,387,1181,361,1157,335,1141,283,1124,230,1106,203,1089,177,1064,152,1032,131,997,100,924,80,857,70,808"/>
<area shape="rect" href="../../d9/d65/ulog_8c.html#a962767ce46bee1f4c9b44ecd408dd669" title=" " alt="" coords="226,1337,342,1371"/>
<area shape="poly" title=" " alt="" coords="73,807,81,879,99,988,131,1114,153,1177,181,1237,215,1286,253,1325,249,1329,211,1289,176,1239,149,1179,126,1116,93,989,75,880,68,808"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a874a52d6ac45041d9e76bd1925d88c24" title=" " alt="" coords="209,487,359,520"/>
<area shape="poly" title=" " alt="" coords="80,772,258,531,263,535,84,775"/>
<area shape="rect" href="../../d4/d4c/json__script_8c.html#a1dbfcb66aa8ef4297aca3e2962750073" title=" " alt="" coords="473,5,631,39"/>
<area shape="poly" title=" " alt="" coords="315,104,371,75,436,48,457,41,459,46,438,53,373,80,318,108"/>
<area shape="rect" href="../../da/d37/hotplug_8c.html#adec4184e967b6251ca24c1a347b84c24" title=" " alt="" coords="473,63,632,96"/>
<area shape="poly" title=" " alt="" coords="330,113,457,92,458,98,331,119"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#a570d5b4ff73cb373a6ca0ac54a9726a0" title=" " alt="" coords="480,120,624,154"/>
<area shape="poly" title=" " alt="" coords="330,123,465,130,464,135,330,128"/>
<area shape="rect" href="../../d4/ddd/container_8h.html#a05b941972fa26f438826c9b6c291ef25" title=" " alt="" coords="486,177,618,211"/>
<area shape="poly" title=" " alt="" coords="354,201,470,196,471,201,354,207"/>
<area shape="poly" title=" " alt="" coords="321,266,375,243,436,220,471,209,472,215,438,225,377,248,323,271"/>
<area shape="rect" href="../../d0/d3c/coldplug_8c.html#a7cb00c0ad6086c37a0f11c7f47b219cf" title=" " alt="" coords="440,235,664,268"/>
<area shape="poly" title=" " alt="" coords="365,273,425,265,425,271,365,278"/>
<area shape="rect" href="../../d1/d08/uloop_8c.html#af511d1bcbdfcfaba211d4ae1b0930dbb" title=" " alt="" coords="751,317,948,351"/>
<area shape="poly" title=" " alt="" coords="365,290,736,322,735,327,364,296"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#ab04b86ab1de0a8cc792eac1f5fccc387" title=" " alt="" coords="776,631,923,664"/>
<area shape="poly" title=" " alt="" coords="335,688,384,673,437,662,522,652,609,646,760,643,760,648,609,651,523,657,437,667,385,679,337,693"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#a2f1d28c800993b650b16349937bc4cc3" title=" " alt="" coords="777,712,922,746"/>
<area shape="poly" title=" " alt="" coords="390,717,437,721,610,727,761,727,761,733,610,732,437,726,389,722"/>
<area shape="rect" href="../../de/d89/procd_2ubus_8c.html#af8f81bf02a1064257a2b3363668bb700" title=" " alt="" coords="462,677,642,711"/>
<area shape="poly" title=" " alt="" coords="389,700,447,697,447,702,390,705"/>
<area shape="poly" title=" " alt="" coords="642,677,760,659,761,664,643,683"/>
<area shape="poly" title=" " alt="" coords="643,702,762,716,761,721,642,707"/>
<area shape="rect" href="../../d5/d73/inittab_8c.html#a0d79ba1bf57a05e542000f9f7bc4dc73" title=" " alt="" coords="492,787,613,820"/>
<area shape="poly" title=" " alt="" coords="355,791,476,797,476,802,355,796"/>
<area shape="rect" href="../../d4/da0/blob_8c.html#af8ca2237342df92c699fbb2ddb5f390b" title=" " alt="" coords="483,844,622,878"/>
<area shape="poly" title=" " alt="" coords="296,1014,352,951,391,916,436,886,466,874,468,878,438,891,395,920,356,955,300,1017"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a4bba0979961750f86b8dc9915b2fa4d6" title=" " alt="" coords="448,901,656,935"/>
<area shape="poly" title=" " alt="" coords="309,1013,366,978,436,944,453,938,455,943,438,949,368,983,312,1018"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a56794b194617d9a858dbc783dd2a0c32" title=" " alt="" coords="445,959,659,992"/>
<area shape="poly" title=" " alt="" coords="365,1013,454,994,456,999,367,1018"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a3252218dfc4cb4c8b54772196e8c2a14" title=" " alt="" coords="446,1016,658,1050"/>
<area shape="poly" title=" " alt="" coords="381,1030,430,1030,430,1036,381,1036"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a938ceeed1d840f9df7946262f1835214" title=" " alt="" coords="446,1073,659,1107"/>
<area shape="poly" title=" " alt="" coords="367,1048,456,1067,454,1072,365,1053"/>
<area shape="rect" href="../../dd/dad/blobmsg_8h.html#a2de3b7599bec41a8c9919f780bd28f1a" title=" " alt="" coords="447,1131,658,1164"/>
<area shape="poly" title=" " alt="" coords="317,1048,390,1089,414,1104,438,1117,455,1123,453,1128,436,1122,411,1109,388,1094,315,1052"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a422dae339fb612dbf5723dabf2ea93ab" title=" " alt="" coords="505,1188,599,1222"/>
<area shape="poly" title=" " alt="" coords="329,1048,361,1066,391,1090,407,1113,414,1135,421,1155,439,1175,463,1188,490,1197,489,1202,461,1193,435,1179,417,1158,409,1137,402,1115,387,1093,358,1070,326,1053"/>
<area shape="rect" href="../../d7/d1d/service_8c.html#a2ab347c929ea42e974beced745d73de3" title=" " alt="" coords="454,1245,650,1279"/>
<area shape="poly" title=" " alt="" coords="333,1048,364,1065,391,1090,404,1109,410,1129,413,1165,417,1199,425,1216,439,1232,443,1235,439,1239,435,1236,420,1219,412,1201,408,1165,405,1130,399,1112,387,1093,361,1070,330,1052"/>
<area shape="poly" title=" " alt="" coords="313,1224,370,1257,438,1289,486,1304,485,1309,436,1294,367,1262,311,1229"/>
<area shape="rect" href="../../d9/d65/ulog_8c.html#aa98943b7174469752250aa9314bf45ff" title=" " alt="" coords="494,1360,611,1394"/>
<area shape="poly" title=" " alt="" coords="342,1356,478,1368,478,1373,342,1362"/>
<area shape="rect" href="../../dd/de5/preinit_8c.html#a90282b93d8528c3fc4e5b188bc5fbc1c" title=" " alt="" coords="512,344,592,378"/>
<area shape="poly" title=" " alt="" coords="301,484,358,436,396,409,436,386,496,367,497,372,438,391,398,414,361,440,304,488"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a31664dcba8ff01b57b09be53bc297d58" title=" " alt="" coords="469,401,635,435"/>
<area shape="poly" title=" " alt="" coords="326,484,436,444,460,437,461,442,438,449,328,489"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a05316067521d0e4efd9b8d3a3a322591" title=" " alt="" coords="437,459,667,492"/>
<area shape="poly" title=" " alt="" coords="359,493,421,486,422,492,359,498"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a35f4cbd80d58c214a0f47b8022fa4ca1" title=" " alt="" coords="715,561,984,595"/>
<area shape="poly" title=" " alt="" coords="359,511,702,556,701,561,358,516"/>
<area shape="rect" href="../../d6/d88/watchdog_8c.html#a9cb0f6cbef0cbe8203eb22795acc9446" title=" " alt="" coords="457,568,648,602"/>
<area shape="poly" title=" " alt="" coords="343,518,481,561,479,566,341,523"/>
<area shape="poly" title=" " alt="" coords="592,355,736,342,737,347,593,360"/>
<area shape="poly" title=" " alt="" coords="648,580,700,579,700,584,648,585"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a7eb50fd30aafeee244175a8d5ee8be30" name="a7eb50fd30aafeee244175a8d5ee8be30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eb50fd30aafeee244175a8d5ee8be30">&#9670;&#160;</a></span>reboot_event</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int reboot_event</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dc9/state_8c_source.html#l00044">44</a> of file <a class="el" href="../../d0/dc9/state_8c_source.html">state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dc9/state_8c_source.html#l00098">perform_halt()</a>, and <a class="el" href="../../d0/dc9/state_8c_source.html#l00222">procd_shutdown()</a>.</p>

</div>
</div>
<a id="a89f234133d3efe315836311cbf21c64b" name="a89f234133d3efe315836311cbf21c64b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89f234133d3efe315836311cbf21c64b">&#9670;&#160;</a></span>state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int state = <a class="el" href="#a8628933cde20921c453a6d2607bdad62ac36e5c9ac597253191be83acf0b51d25">STATE_NONE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dc9/state_8c_source.html#l00043">43</a> of file <a class="el" href="../../d0/dc9/state_8c_source.html">state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dc9/state_8c_source.html#l00222">procd_shutdown()</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00209">procd_state_next()</a>, <a class="el" href="../../d0/dc9/state_8c_source.html#l00216">procd_state_ubus_connect()</a>, and <a class="el" href="../../d0/dc9/state_8c_source.html#l00126">state_enter()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
